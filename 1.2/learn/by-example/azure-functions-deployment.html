---
layout: ballerina-example-page
title: Azure Functions Deployment
description: 
keywords: 
permalink: /1.2/learn/by-example/azure-functions-deployment
active: azure-functions-deployment
redirect_from:
  - /v1-2/learn/by-example/azure-functions-deployment
  - /v1-2/learn/by-example/azure-functions-deployment.html
---
<div class="row cBallerina-io-Gray-row">
        <div class="container cBallerinaBySampleContainer">
            <div class="FullCode">
                <div class="highlight"><pre><span class="kn">import</span> <span class="nx">ballerina</span><span class="o">/</span><span class="nx">system</span><span class="p">;</span>
<span class="kn">import</span> <span class="nx">ballerinax</span><span class="o">/</span><span class="nx">azure</span><span class="p">.</span><span class="nx">functions</span> <span class="k">as</span> <span class="nx">af</span><span class="p">;</span>

<span class="c1">// HTTP request/response with no authentication</span>
<span class="err">@</span><span class="nx">af</span><span class="p">:</span><span class="nx">Function</span>
<span class="nx">public</span> <span class="kd">function</span> <span class="nx">hello</span><span class="p">(</span><span class="nd">@af:HTTPTrigger {</span> <span class="nx">authLevel</span><span class="p">:</span> <span class="s">&quot;anonymous&quot;</span> <span class="p">}</span> <span class="kt">string</span> <span class="nx">payload</span><span class="p">)</span> 
                      <span class="nx">returns</span> <span class="nd">@af:HTTPOutput string|error {</span>
    <span class="k">return</span> <span class="s">&quot;Hello, &quot;</span> <span class="o">+</span> <span class="nx">payload</span> <span class="o">+</span> <span class="s">&quot;!&quot;</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// HTTP request to add data to a queue</span>
<span class="err">@</span><span class="nx">af</span><span class="p">:</span><span class="nx">Function</span>
<span class="nx">public</span> <span class="kd">function</span> <span class="nx">fromHttpToQueue</span><span class="p">(</span><span class="nx">af</span><span class="p">:</span><span class="nx">Context</span> <span class="nx">ctx</span><span class="p">,</span> 
            <span class="nd">@af:HTTPTrigger {</span><span class="p">}</span> <span class="nx">af</span><span class="p">:</span><span class="nx">HTTPRequest</span> <span class="nx">req</span><span class="p">,</span> 
            <span class="nd">@af:QueueOutput {</span> <span class="nx">queueName</span><span class="p">:</span> <span class="s">&quot;queue1&quot;</span> <span class="p">}</span> <span class="nx">af</span><span class="p">:</span><span class="nx">StringOutputBinding</span> <span class="nx">msg</span><span class="p">)</span> 
            <span class="nx">returns</span> <span class="nd">@af:HTTPOutput af:HTTPBinding {</span>
    <span class="nx">msg</span><span class="p">.</span><span class="nx">value</span> <span class="p">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">;</span>
    <span class="k">return</span> <span class="p">{</span> <span class="nx">statusCode</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span> <span class="nx">payload</span><span class="p">:</span> <span class="s">&quot;Request: &quot;</span> <span class="o">+</span> <span class="nx">req</span><span class="p">.</span><span class="nx">toString</span><span class="p">()</span> <span class="p">};</span>
<span class="p">}</span>

<span class="c1">// A message put to a queue is copied to another queue</span>
<span class="err">@</span><span class="nx">af</span><span class="p">:</span><span class="nx">Function</span>
<span class="nx">public</span> <span class="kd">function</span> <span class="nx">fromQueueToQueue</span><span class="p">(</span><span class="nx">af</span><span class="p">:</span><span class="nx">Context</span> <span class="nx">ctx</span><span class="p">,</span> 
        <span class="nd">@af:QueueTrigger {</span> <span class="nx">queueName</span><span class="p">:</span> <span class="s">&quot;queue2&quot;</span> <span class="p">}</span> <span class="kt">string</span> <span class="nx">inMsg</span><span class="p">,</span>
        <span class="nd">@af:QueueOutput { queueName: &quot;queue3&quot; } af:StringOutputBinding outMsg) {</span>
    <span class="nx">ctx</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s">&quot;In Message: &quot;</span> <span class="o">+</span> <span class="nx">inMsg</span><span class="p">);</span>
    <span class="nx">ctx</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s">&quot;Metadata: &quot;</span> <span class="o">+</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">metadata</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
    <span class="nx">outMsg</span><span class="p">.</span><span class="nx">value</span> <span class="p">=</span> <span class="nx">inMsg</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// A blob added to a container is copied to a queue</span>
<span class="err">@</span><span class="nx">af</span><span class="p">:</span><span class="nx">Function</span>
<span class="nx">public</span> <span class="kd">function</span> <span class="nx">fromBlobToQueue</span><span class="p">(</span><span class="nx">af</span><span class="p">:</span><span class="nx">Context</span> <span class="nx">ctx</span><span class="p">,</span> 
        <span class="nd">@af:BlobTrigger { path: &quot;bpath1/{</span><span class="nx">name</span><span class="p">}</span><span class="s">&quot; } byte[] blobIn,</span>
<span class="s">        @af:BindingName { } string name,</span>
<span class="s">        @af:QueueOutput { queueName: &quot;</span><span class="nx">queue3</span><span class="s">&quot; } af:StringOutputBinding outMsg) </span>
<span class="s">        returns error? {</span>
<span class="s">    outMsg.value = &quot;</span><span class="nx">Name</span><span class="p">:</span> <span class="s">&quot; + name + &quot;</span> <span class="nx">Content</span><span class="p">:</span> <span class="s">&quot; + blobIn.toString();</span>
<span class="s">}</span>

<span class="s">// HTTP request to read a blob value</span>
<span class="s">@af:Function</span>
<span class="s">public function httpTriggerBlobInput(@af:HTTPTrigger { } af:HTTPRequest req, </span>
<span class="s">                    @af:BlobInput { path: &quot;</span><span class="nx">bpath1</span><span class="o">/</span><span class="p">{</span><span class="nx">Query</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span><span class="s">&quot; } byte[]? blobIn)</span>
<span class="s">                    returns @af:HTTPOutput string {</span>
<span class="s">    int length = 0;</span>
<span class="s">    if blobIn is byte[] {</span>
<span class="s">        length = blobIn.length();</span>
<span class="s">    }</span>
<span class="s">    return &quot;</span><span class="nx">Blob</span><span class="p">:</span> <span class="s">&quot; + req.query[&quot;</span><span class="nx">name</span><span class="s">&quot;].toString() + &quot;</span> <span class="nx">Length</span><span class="p">:</span> <span class="s">&quot; + </span>
<span class="s">            length.toString() + &quot;</span> <span class="nx">Content</span><span class="p">:</span> <span class="s">&quot; + blobIn.toString();</span>
<span class="s">}</span>

<span class="s">// HTTP request to add a new blob</span>
<span class="s">@af:Function</span>
<span class="s">public function httpTriggerBlobOutput(@af:HTTPTrigger { } af:HTTPRequest req, </span>
<span class="s">        @af:BlobOutput { path: &quot;</span><span class="nx">bpath1</span><span class="o">/</span><span class="p">{</span><span class="nx">Query</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span><span class="s">&quot; } af:StringOutputBinding bb)</span>
<span class="s">        returns @af:HTTPOutput string|error {</span>
<span class="s">    bb.value = req.body;</span>
<span class="s">    return &quot;</span><span class="nx">Blob</span><span class="p">:</span> <span class="s">&quot; + req.query[&quot;</span><span class="nx">name</span><span class="s">&quot;].toString() + &quot;</span> <span class="nx">Content</span><span class="p">:</span> <span class="s">&quot; + </span>
<span class="s">            bb?.value.toString();</span>
<span class="s">}</span>

<span class="s">// Sending an SMS</span>
<span class="s">@af:Function</span>
<span class="s">public function sendSMS(@af:HTTPTrigger { } af:HTTPRequest req, </span>
<span class="s">                        @af:TwilioSmsOutput { fromNumber: &quot;</span><span class="o">+</span><span class="mi">12069845840</span><span class="s">&quot; } </span>
<span class="s">                                              af:TwilioSmsOutputBinding tb)</span>
<span class="s">                        returns @af:HTTPOutput string {</span>
<span class="s">    tb.to = req.query[&quot;</span><span class="nx">to</span><span class="s">&quot;].toString();</span>
<span class="s">    tb.body = req.body.toString();</span>
<span class="s">    return &quot;</span><span class="nx">Message</span> <span class="o">-</span> <span class="nx">to</span><span class="p">:</span> <span class="s">&quot; + tb?.to.toString() + &quot;</span> <span class="nx">body</span><span class="p">:</span> <span class="s">&quot; + tb?.body.toString();</span>
<span class="s">}</span>

<span class="s">public type Person record {</span>
<span class="s">    string id;</span>
<span class="s">    string name;</span>
<span class="s">    string country;</span>
<span class="s">};</span>

<span class="s">// CosmosDB record trigger</span>
<span class="s">@af:Function</span>
<span class="s">public function cosmosDBToQueue1(@af:CosmosDBTrigger { </span>
<span class="s">        connectionStringSetting: &quot;</span><span class="nx">CosmosDBConnection</span><span class="s">&quot;, databaseName: &quot;</span><span class="nx">db1</span><span class="s">&quot;,</span>
<span class="s">        collectionName: &quot;</span><span class="nx">c1</span><span class="s">&quot; } Person[] req, </span>
<span class="s">        @af:QueueOutput { queueName: &quot;</span><span class="nx">queue3</span><span class="s">&quot; } af:StringOutputBinding outMsg) {</span>
<span class="s">    outMsg.value = req.toString();</span>
<span class="s">}</span>

<span class="s">@af:Function</span>
<span class="s">public function cosmosDBToQueue2(@af:CosmosDBTrigger { </span>
<span class="s">        connectionStringSetting: &quot;</span><span class="nx">CosmosDBConnection</span><span class="s">&quot;, databaseName: &quot;</span><span class="nx">db1</span><span class="s">&quot;, </span>
<span class="s">        collectionName: &quot;</span><span class="nx">c2</span><span class="s">&quot; } json req,</span>
<span class="s">        @af:QueueOutput { queueName: &quot;</span><span class="nx">queue3</span><span class="s">&quot; } af:StringOutputBinding outMsg) {</span>
<span class="s">    outMsg.value = req.toString();</span>
<span class="s">}</span>

<span class="s">// HTTP request to read CosmosDB records</span>
<span class="s">@af:Function</span>
<span class="s">public function httpTriggerCosmosDBInput1(</span>
<span class="s">            @af:HTTPTrigger { } af:HTTPRequest httpReq, </span>
<span class="s">            @af:CosmosDBInput { connectionStringSetting: &quot;</span><span class="nx">CosmosDBConnection</span><span class="s">&quot;, </span>
<span class="s">                databaseName: &quot;</span><span class="nx">db1</span><span class="s">&quot;, collectionName: &quot;</span><span class="nx">c1</span><span class="s">&quot;, </span>
<span class="s">                id: &quot;</span><span class="p">{</span><span class="nx">Query</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span><span class="s">&quot;, partitionKey: &quot;</span><span class="p">{</span><span class="nx">Query</span><span class="p">.</span><span class="nx">country</span><span class="p">}</span><span class="s">&quot; } json dbReq)</span>
<span class="s">                returns @af:HTTPOutput string|error {</span>
<span class="s">    return dbReq.toString();</span>
<span class="s">}</span>

<span class="s">@af:Function</span>
<span class="s">public function httpTriggerCosmosDBInput2(</span>
<span class="s">            @af:HTTPTrigger { } af:HTTPRequest httpReq, </span>
<span class="s">            @af:CosmosDBInput { connectionStringSetting: &quot;</span><span class="nx">CosmosDBConnection</span><span class="s">&quot;, </span>
<span class="s">                databaseName: &quot;</span><span class="nx">db1</span><span class="s">&quot;, collectionName: &quot;</span><span class="nx">c1</span><span class="s">&quot;, </span>
<span class="s">                id: &quot;</span><span class="p">{</span><span class="nx">Query</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span><span class="s">&quot;, partitionKey: &quot;</span><span class="p">{</span><span class="nx">Query</span><span class="p">.</span><span class="nx">country</span><span class="p">}</span><span class="s">&quot; } Person? dbReq)</span>
<span class="s">                returns @af:HTTPOutput string|error {</span>
<span class="s">    return dbReq.toString();</span>
<span class="s">}</span>

<span class="s">@af:Function</span>
<span class="s">public function httpTriggerCosmosDBInput3(</span>
<span class="s">        @af:HTTPTrigger { route: &quot;</span><span class="nx">c1</span><span class="o">/</span><span class="p">{</span><span class="nx">country</span><span class="p">}</span><span class="s">&quot; } af:HTTPRequest httpReq, </span>
<span class="s">        @af:CosmosDBInput { connectionStringSetting: &quot;</span><span class="nx">CosmosDBConnection</span><span class="s">&quot;, </span>
<span class="s">        databaseName: &quot;</span><span class="nx">db1</span><span class="s">&quot;, collectionName: &quot;</span><span class="nx">c1</span><span class="s">&quot;, </span>
<span class="s">        sqlQuery: &quot;</span><span class="nx">select</span> <span class="o">*</span> <span class="nx">from</span> <span class="nx">c1</span> <span class="nx">where</span> <span class="nx">c1</span><span class="p">.</span><span class="nx">country</span> <span class="p">=</span> <span class="p">{</span><span class="nx">country</span><span class="p">}</span><span class="s">&quot; } </span>
<span class="s">        Person[] dbReq)</span>
<span class="s">        returns @af:HTTPOutput string|error {</span>
<span class="s">    return dbReq.toString();</span>
<span class="s">}</span>

<span class="s">// HTTP request to write records to CosmosDB</span>
<span class="s">@af:Function</span>
<span class="s">public function httpTriggerCosmosDBOutput1(</span>
<span class="s">    @af:HTTPTrigger { } af:HTTPRequest httpReq, @af:HTTPOutput af:HTTPBinding hb) </span>
<span class="s">    returns @af:CosmosDBOutput { connectionStringSetting: &quot;</span><span class="nx">CosmosDBConnection</span><span class="s">&quot;, </span>
<span class="s">                                 databaseName: &quot;</span><span class="nx">db1</span><span class="s">&quot;, collectionName: &quot;</span><span class="nx">c1</span><span class="s">&quot; } json {</span>
<span class="s">    json entry = { id: system:uuid(), name: &quot;</span><span class="nx">Saman</span><span class="s">&quot;, country: &quot;</span><span class="nx">Sri</span> <span class="nx">Lanka</span><span class="s">&quot; };</span>
<span class="s">    hb.payload = &quot;</span><span class="nx">Adding</span> <span class="nx">entry</span><span class="p">:</span> <span class="s">&quot; + entry.toString();</span>
<span class="s">    return entry;</span>
<span class="s">}</span>

<span class="s">@af:Function</span>
<span class="s">public function httpTriggerCosmosDBOutput2(</span>
<span class="s">        @af:HTTPTrigger { } af:HTTPRequest httpReq, </span>
<span class="s">        @af:HTTPOutput af:HTTPBinding hb) </span>
<span class="s">        returns @af:CosmosDBOutput { </span>
<span class="s">            connectionStringSetting: &quot;</span><span class="nx">CosmosDBConnection</span><span class="s">&quot;, </span>
<span class="s">            databaseName: &quot;</span><span class="nx">db1</span><span class="s">&quot;, collectionName: &quot;</span><span class="nx">c1</span><span class="s">&quot; } json {</span>
<span class="s">    json entry = [{ id: system:uuid(), name: &quot;</span><span class="nx">John</span> <span class="nx">Doe</span> <span class="nx">A</span><span class="s">&quot;, country: &quot;</span><span class="nx">USA</span><span class="s">&quot; }, </span>
<span class="s">                  { id: system:uuid(), name: &quot;</span><span class="nx">John</span> <span class="nx">Doe</span> <span class="nx">B</span><span class="s">&quot;, country: &quot;</span><span class="nx">USA</span><span class="s">&quot; }];</span>
<span class="s">    hb.payload = &quot;</span><span class="nx">Adding</span> <span class="nx">entries</span><span class="p">:</span> <span class="s">&quot; + entry.toString();</span>
<span class="s">    return entry;</span>
<span class="s">}</span>

<span class="s">@af:Function</span>
<span class="s">public function httpTriggerCosmosDBOutput3(</span>
<span class="s">                    @af:HTTPTrigger { } af:HTTPRequest httpReq) </span>
<span class="s">                    returns @af:CosmosDBOutput { </span>
<span class="s">                        connectionStringSetting: &quot;</span><span class="nx">CosmosDBConnection</span><span class="s">&quot;, </span>
<span class="s">                        databaseName: &quot;</span><span class="nx">db1</span><span class="s">&quot;, collectionName: &quot;</span><span class="nx">c1</span><span class="s">&quot; } Person[] {</span>
<span class="s">    Person[] persons = [];</span>
<span class="s">    persons.push({id: system:uuid(), name: &quot;</span><span class="nx">Jack</span><span class="s">&quot;, country: &quot;</span><span class="nx">UK</span><span class="s">&quot;});</span>
<span class="s">    persons.push({id: system:uuid(), name: &quot;</span><span class="nx">Will</span><span class="s">&quot;, country: &quot;</span><span class="nx">UK</span><span class="s">&quot;});</span>
<span class="s">    return persons;</span>
<span class="s">}</span>

<span class="s">// A timer function which is executed every 10 seconds.</span>
<span class="s">@af:Function</span>
<span class="s">public function queuePopulationTimer(</span>
<span class="s">            @af:TimerTrigger { schedule: &quot;</span><span class="o">*/</span><span class="mi">10</span> <span class="o">*</span> <span class="o">*</span> <span class="o">*</span> <span class="o">*</span> <span class="o">*</span><span class="s">&quot; } json triggerInfo, </span>
<span class="s">            @af:QueueOutput { queueName: &quot;</span><span class="nx">queue4</span><span class="err">&quot;</span> <span class="p">}</span> <span class="nx">af</span><span class="p">:</span><span class="nx">StringOutputBinding</span> <span class="nx">msg</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">msg</span><span class="p">.</span><span class="nx">value</span> <span class="p">=</span> <span class="nx">triggerInfo</span><span class="p">.</span><span class="nx">toString</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>

            </div>

            <div class="col-xs-12 col-sm-12 col-md-12">
                <table class="cTopInfoContainer cTopControlsContainer">
                    <tr>
                        <td class="cLeftTD">
                            <h2>Azure Functions Deployment</h2>
                            <p><p>Azure Functions is an event driven, serverless computing platform.
 Ballerina functions can be deployed in Azure Functions by annotating a Ballerina function with &ldquo;@functions:Function&rdquo;.
 For more information, see the <a href="https://ballerina.io/learn/deployment/azure-functions/">Azure Deployment Guide</a>.</p>
</p>

                        </td>
                        <td class="cRightTD">
                            <div class="cTopButtonContainer">
                                
                                <div class="cButtonInfoContainer">
                                    <a class="prev" href="knative-deployment.html?is_ref_by_example=true">
                                        <span>< PREVIOUS</span>
                                        <p>Knative Deployment</p>
                                    </a>
                                </div>
                                 
                                <div class="cButtonInfoContainer">
                                    <a class="next" href="http-client-endpoint.html?is_ref_by_example=true">
                                        <span>NEXT ></span>
                                        <p>Client Endpoint</p>
                                    </a>
                                </div>
                                
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
            <div class="example" id="azure-functions-deployment">
                <div class="col-xs-12 col-sm-12 col-md-12 cBBETable-container cCodeLeft">
                    <div class="cTopControlsContainer">
                        <div class="cTopControlsRow">
                            <div class="cLeftTD">
                                <div class="cBBE-links">
                                    <ul>
                                        <li>
                                            <a class="copy"><img src="/img/copy-icon.svg" /></a>
                                        </li>
                                        <li>
                                            <a target="_blank" href="https://github.com/ballerina-platform/module-ballerinax-azure.functions/tree/ballerina-1.2.x/azurefunctions-extension-examples/examples/azure-functions-deployment"><img src="/img/github-logo-green.svg" /></a>
                                        </li>
                                        
                                    </ul>
                                </div>
                            </div> 
                        </div>
                    </div>
              
                    
                    <div class="codeSnippeset">

                        <div class="cBBE-body">
                            
                            <div class="cTR">

                                <div class="code leading">
                                    <div class="highlight"><pre><code class=language-ballerina>import ballerina/system;
import ballerinax/azure.functions as af;
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                </div>
                            </div>
                            
                            <div class="cTR hover-enable">

                                <div class="code leading">
                                    <div class="highlight"><pre><code class=language-ballerina>@af:Function
public function hello(@af:HTTPTrigger { authLevel: &quot;anonymous&quot; } string payload) 
                      returns @af:HTTPOutput string|error {
    return &quot;Hello, &quot; + payload + &quot;!&quot;;
}
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                    <div class="cCodeDesription">
                                        <div>
                                            <p>HTTP request/response with no authentication</p>

                                        </div>
                                    </div>
                                    
                                </div>
                            </div>
                            
                            <div class="cTR hover-enable">

                                <div class="code leading">
                                    <div class="highlight"><pre><code class=language-ballerina>@af:Function
public function fromHttpToQueue(af:Context ctx, 
            @af:HTTPTrigger {} af:HTTPRequest req, 
            @af:QueueOutput { queueName: &quot;queue1&quot; } af:StringOutputBinding msg) 
            returns @af:HTTPOutput af:HTTPBinding {
    msg.value = req.body;
    return { statusCode: 200, payload: &quot;Request: &quot; + req.toString() };
}
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                    <div class="cCodeDesription">
                                        <div>
                                            <p>HTTP request to add data to a queue</p>

                                        </div>
                                    </div>
                                    
                                </div>
                            </div>
                            
                            <div class="cTR hover-enable">

                                <div class="code leading">
                                    <div class="highlight"><pre><code class=language-ballerina>@af:Function
public function fromQueueToQueue(af:Context ctx, 
        @af:QueueTrigger { queueName: &quot;queue2&quot; } string inMsg,
        @af:QueueOutput { queueName: &quot;queue3&quot; } af:StringOutputBinding outMsg) {
    ctx.log(&quot;In Message: &quot; + inMsg);
    ctx.log(&quot;Metadata: &quot; + ctx.metadata.toString());
    outMsg.value = inMsg;
}
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                    <div class="cCodeDesription">
                                        <div>
                                            <p>A message put to a queue is copied to another queue</p>

                                        </div>
                                    </div>
                                    
                                </div>
                            </div>
                            
                            <div class="cTR hover-enable">

                                <div class="code leading">
                                    <div class="highlight"><pre><code class=language-ballerina>@af:Function
public function fromBlobToQueue(af:Context ctx, 
        @af:BlobTrigger { path: &quot;bpath1/{name}&quot; } byte[] blobIn,
        @af:BindingName { } string name,
        @af:QueueOutput { queueName: &quot;queue3&quot; } af:StringOutputBinding outMsg) 
        returns error? {
    outMsg.value = &quot;Name: &quot; + name + &quot; Content: &quot; + blobIn.toString();
}
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                    <div class="cCodeDesription">
                                        <div>
                                            <p>A blob added to a container is copied to a queue</p>

                                        </div>
                                    </div>
                                    
                                </div>
                            </div>
                            
                            <div class="cTR hover-enable">

                                <div class="code leading">
                                    <div class="highlight"><pre><code class=language-ballerina>@af:Function
public function httpTriggerBlobInput(@af:HTTPTrigger { } af:HTTPRequest req, 
                    @af:BlobInput { path: &quot;bpath1/{Query.name}&quot; } byte[]? blobIn)
                    returns @af:HTTPOutput string {
    int length = 0;
    if blobIn is byte[] {
        length = blobIn.length();
    }
    return &quot;Blob: &quot; + req.query[&quot;name&quot;].toString() + &quot; Length: &quot; + 
            length.toString() + &quot; Content: &quot; + blobIn.toString();
}
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                    <div class="cCodeDesription">
                                        <div>
                                            <p>HTTP request to read a blob value</p>

                                        </div>
                                    </div>
                                    
                                </div>
                            </div>
                            
                            <div class="cTR hover-enable">

                                <div class="code leading">
                                    <div class="highlight"><pre><code class=language-ballerina>@af:Function
public function httpTriggerBlobOutput(@af:HTTPTrigger { } af:HTTPRequest req, 
        @af:BlobOutput { path: &quot;bpath1/{Query.name}&quot; } af:StringOutputBinding bb)
        returns @af:HTTPOutput string|error {
    bb.value = req.body;
    return &quot;Blob: &quot; + req.query[&quot;name&quot;].toString() + &quot; Content: &quot; + 
            bb?.value.toString();
}
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                    <div class="cCodeDesription">
                                        <div>
                                            <p>HTTP request to add a new blob</p>

                                        </div>
                                    </div>
                                    
                                </div>
                            </div>
                            
                            <div class="cTR hover-enable">

                                <div class="code leading">
                                    <div class="highlight"><pre><code class=language-ballerina>@af:Function
public function sendSMS(@af:HTTPTrigger { } af:HTTPRequest req, 
                        @af:TwilioSmsOutput { fromNumber: &quot;+12069845840&quot; } 
                                              af:TwilioSmsOutputBinding tb)
                        returns @af:HTTPOutput string {
    tb.to = req.query[&quot;to&quot;].toString();
    tb.body = req.body.toString();
    return &quot;Message - to: &quot; + tb?.to.toString() + &quot; body: &quot; + tb?.body.toString();
}
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                    <div class="cCodeDesription">
                                        <div>
                                            <p>Sending an SMS</p>

                                        </div>
                                    </div>
                                    
                                </div>
                            </div>
                            
                            <div class="cTR">

                                <div class="code leading">
                                    <div class="highlight"><pre><code class=language-ballerina>public type Person record {
    string id;
    string name;
    string country;
};
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                </div>
                            </div>
                            
                            <div class="cTR hover-enable">

                                <div class="code leading">
                                    <div class="highlight"><pre><code class=language-ballerina>@af:Function
public function cosmosDBToQueue1(@af:CosmosDBTrigger { 
        connectionStringSetting: &quot;CosmosDBConnection&quot;, databaseName: &quot;db1&quot;,
        collectionName: &quot;c1&quot; } Person[] req, 
        @af:QueueOutput { queueName: &quot;queue3&quot; } af:StringOutputBinding outMsg) {
    outMsg.value = req.toString();
}
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                    <div class="cCodeDesription">
                                        <div>
                                            <p>CosmosDB record trigger</p>

                                        </div>
                                    </div>
                                    
                                </div>
                            </div>
                            
                            <div class="cTR">

                                <div class="code leading">
                                    <div class="highlight"><pre><code class=language-ballerina>@af:Function
public function cosmosDBToQueue2(@af:CosmosDBTrigger { 
        connectionStringSetting: &quot;CosmosDBConnection&quot;, databaseName: &quot;db1&quot;, 
        collectionName: &quot;c2&quot; } json req,
        @af:QueueOutput { queueName: &quot;queue3&quot; } af:StringOutputBinding outMsg) {
    outMsg.value = req.toString();
}
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                </div>
                            </div>
                            
                            <div class="cTR hover-enable">

                                <div class="code leading">
                                    <div class="highlight"><pre><code class=language-ballerina>@af:Function
public function httpTriggerCosmosDBInput1(
            @af:HTTPTrigger { } af:HTTPRequest httpReq, 
            @af:CosmosDBInput { connectionStringSetting: &quot;CosmosDBConnection&quot;, 
                databaseName: &quot;db1&quot;, collectionName: &quot;c1&quot;, 
                id: &quot;{Query.id}&quot;, partitionKey: &quot;{Query.country}&quot; } json dbReq)
                returns @af:HTTPOutput string|error {
    return dbReq.toString();
}
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                    <div class="cCodeDesription">
                                        <div>
                                            <p>HTTP request to read CosmosDB records</p>

                                        </div>
                                    </div>
                                    
                                </div>
                            </div>
                            
                            <div class="cTR">

                                <div class="code leading">
                                    <div class="highlight"><pre><code class=language-ballerina>@af:Function
public function httpTriggerCosmosDBInput2(
            @af:HTTPTrigger { } af:HTTPRequest httpReq, 
            @af:CosmosDBInput { connectionStringSetting: &quot;CosmosDBConnection&quot;, 
                databaseName: &quot;db1&quot;, collectionName: &quot;c1&quot;, 
                id: &quot;{Query.id}&quot;, partitionKey: &quot;{Query.country}&quot; } Person? dbReq)
                returns @af:HTTPOutput string|error {
    return dbReq.toString();
}
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                </div>
                            </div>
                            
                            <div class="cTR">

                                <div class="code leading">
                                    <div class="highlight"><pre><code class=language-ballerina>@af:Function
public function httpTriggerCosmosDBInput3(
        @af:HTTPTrigger { route: &quot;c1/{country}&quot; } af:HTTPRequest httpReq, 
        @af:CosmosDBInput { connectionStringSetting: &quot;CosmosDBConnection&quot;, 
        databaseName: &quot;db1&quot;, collectionName: &quot;c1&quot;, 
        sqlQuery: &quot;select * from c1 where c1.country = {country}&quot; } 
        Person[] dbReq)
        returns @af:HTTPOutput string|error {
    return dbReq.toString();
}
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                </div>
                            </div>
                            
                            <div class="cTR hover-enable">

                                <div class="code leading">
                                    <div class="highlight"><pre><code class=language-ballerina>@af:Function
public function httpTriggerCosmosDBOutput1(
    @af:HTTPTrigger { } af:HTTPRequest httpReq, @af:HTTPOutput af:HTTPBinding hb) 
    returns @af:CosmosDBOutput { connectionStringSetting: &quot;CosmosDBConnection&quot;, 
                                 databaseName: &quot;db1&quot;, collectionName: &quot;c1&quot; } json {
    json entry = { id: system:uuid(), name: &quot;Saman&quot;, country: &quot;Sri Lanka&quot; };
    hb.payload = &quot;Adding entry: &quot; + entry.toString();
    return entry;
}
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                    <div class="cCodeDesription">
                                        <div>
                                            <p>HTTP request to write records to CosmosDB</p>

                                        </div>
                                    </div>
                                    
                                </div>
                            </div>
                            
                            <div class="cTR">

                                <div class="code leading">
                                    <div class="highlight"><pre><code class=language-ballerina>@af:Function
public function httpTriggerCosmosDBOutput2(
        @af:HTTPTrigger { } af:HTTPRequest httpReq, 
        @af:HTTPOutput af:HTTPBinding hb) 
        returns @af:CosmosDBOutput { 
            connectionStringSetting: &quot;CosmosDBConnection&quot;, 
            databaseName: &quot;db1&quot;, collectionName: &quot;c1&quot; } json {
    json entry = [{ id: system:uuid(), name: &quot;John Doe A&quot;, country: &quot;USA&quot; }, 
                  { id: system:uuid(), name: &quot;John Doe B&quot;, country: &quot;USA&quot; }];
    hb.payload = &quot;Adding entries: &quot; + entry.toString();
    return entry;
}
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                </div>
                            </div>
                            
                            <div class="cTR">

                                <div class="code leading">
                                    <div class="highlight"><pre><code class=language-ballerina>@af:Function
public function httpTriggerCosmosDBOutput3(
                    @af:HTTPTrigger { } af:HTTPRequest httpReq) 
                    returns @af:CosmosDBOutput { 
                        connectionStringSetting: &quot;CosmosDBConnection&quot;, 
                        databaseName: &quot;db1&quot;, collectionName: &quot;c1&quot; } Person[] {
    Person[] persons = [];
    persons.push({id: system:uuid(), name: &quot;Jack&quot;, country: &quot;UK&quot;});
    persons.push({id: system:uuid(), name: &quot;Will&quot;, country: &quot;UK&quot;});
    return persons;
}
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                </div>
                            </div>
                            
                            <div class="cTR hover-enable">

                                <div class="code">
                                    <div class="highlight"><pre><code class=language-ballerina>@af:Function
public function queuePopulationTimer(
            @af:TimerTrigger { schedule: &quot;*/10 * * * * *&quot; } json triggerInfo, 
            @af:QueueOutput { queueName: &quot;queue4&quot; } af:StringOutputBinding msg) {
    msg.value = triggerInfo.toString();
}
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                    <div class="cCodeDesription">
                                        <div>
                                            <p>A timer function which is executed every 10 seconds.</p>

                                        </div>
                                    </div>
                                    
                                </div>
                            </div>
                            
                        </div>
                    </div>
                    
                    <div class="codeSnippeset">

                        <div class="cBBE-body">
                            
                            <div class="cTR cOutputTr">

                                <div class="code leading cOutput">
                                    <div class="highlight"><pre><code class=shell-session># Prerequisites: Azure CLI tools installation and configuration
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                </div>
                            </div>
                            
                            <div class="cTR cOutputTr">

                                <div class="code leading cOutput">
                                    <div class="highlight"><pre><code class=shell-session># Build the Ballerina program to generate the Azure Functions
ballerina build azure_functions_deployment.bal
Compiling source
	azure_functions_deployment.bal
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                </div>
                            </div>
                            
                            <div class="cTR cOutputTr">

                                <div class="code leading cOutput">
                                    <div class="highlight"><pre><code class=shell-session>Generating executables
	azure_functions_deployment.jar
	@azure.functions:Function: hello, fromHttpToQueue, fromQueueToQueue, fromBlobToQueue, httpTriggerBlobInput, httpTriggerBlobOutput, sendSMS, cosmosDBToQueue1, cosmosDBToQueue2, httpTriggerCosmosDBInput1, httpTriggerCosmosDBInput2, httpTriggerCosmosDBInput3, httpTriggerCosmosDBOutput1, httpTriggerCosmosDBOutput2, httpTriggerCosmosDBOutput3, queuePopulationTimer
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                </div>
                            </div>
                            
                            <div class="cTR cOutputTr">

                                <div class="code leading cOutput">
                                    <div class="highlight"><pre><code class=shell-session>	Run the following command to deploy Ballerina Azure Functions:
	az functionapp deployment source config-zip -g &lt;resource_group&gt; -n &lt;function_app_name&gt; --src azure-functions.zip
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                </div>
                            </div>
                            
                            <div class="cTR cOutputTr">

                                <div class="code leading cOutput">
                                    <div class="highlight"><pre><code class=shell-session># Execute the following Azure CLI command to publish the functions (replace with your respective Azure &lt;resource_group&gt; and &lt;function_app_name&gt;)
az functionapp deployment source config-zip -g functions1777 -n functions1777 --src  azure-functions.zip 
Getting scm site credentials for zip deployment
Starting zip deployment. This operation can take a while to complete ...
Deployment endpoint responded with status code 202
{
  &quot;active&quot;: true,
  &quot;author&quot;: &quot;N/A&quot;,
  &quot;author_email&quot;: &quot;N/A&quot;,
  &quot;complete&quot;: true,
  &quot;deployer&quot;: &quot;ZipDeploy&quot;,
  &quot;end_time&quot;: &quot;2020-07-02T06:48:08.7706207Z&quot;,
  &quot;id&quot;: &quot;2bacf185fb114d42aab762dfd5f303dc&quot;,
  &quot;is_readonly&quot;: true,
  &quot;is_temp&quot;: false,
  &quot;last_success_end_time&quot;: &quot;2020-07-02T06:48:08.7706207Z&quot;,
  &quot;log_url&quot;: &quot;https://functions1777.scm.azurewebsites.net/api/deployments/latest/log&quot;,
  &quot;message&quot;: &quot;Created via a push deployment&quot;,
  &quot;progress&quot;: &quot;&quot;,
  &quot;provisioningState&quot;: null,
  &quot;received_time&quot;: &quot;2020-07-02T06:47:56.2756472Z&quot;,
  &quot;site_name&quot;: &quot;functions1777&quot;,
  &quot;start_time&quot;: &quot;2020-07-02T06:47:56.7600364Z&quot;,
  &quot;status&quot;: 4,
  &quot;status_text&quot;: &quot;&quot;,
  &quot;url&quot;: &quot;https://functions1777.scm.azurewebsites.net/api/deployments/latest&quot;
}
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                </div>
                            </div>
                            
                            <div class="cTR cOutputTr">

                                <div class="code leading cOutput">
                                    <div class="highlight"><pre><code class=shell-session># Invoke the functions (replace with your &lt;auth_code&gt; value in authenticated requests)
curl -d &quot;Jack&quot; https://functions1777.azurewebsites.net/api/hello
Hello, Jack!
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                </div>
                            </div>
                            
                            <div class="cTR cOutputTr">

                                <div class="code leading cOutput">
                                    <div class="highlight"><pre><code class=shell-session>curl -d &quot;ABCDE&quot; https://functions1777.azurewebsites.net/api/fromHttpToQueue?code=&lt;auth_code&gt;
Request: url=https://functions1777.azurewebsites.net/api/fromHttpToQueue... body=ABCDE
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                </div>
                            </div>
                            
                            <div class="cTR cOutputTr">

                                <div class="code leading cOutput">
                                    <div class="highlight"><pre><code class=shell-session>curl &quot;https://functions1777.azurewebsites.net/api/httpTriggerBlobInput?name=input.txt&amp;code=&lt;auth_code&gt;&quot;
Blob: input.txt Length: 6 Content: 65 66 67 68 69 10
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                </div>
                            </div>
                            
                            <div class="cTR cOutputTr">

                                <div class="code leading cOutput">
                                    <div class="highlight"><pre><code class=shell-session>curl -d &quot;123456&quot; &quot;https://functions1777.azurewebsites.net/api/httpTriggerBlobOutput?name=payload.txt&amp;code=&lt;auth_code&gt;&quot;
Blob: payload.txt Content: 123456
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                </div>
                            </div>
                            
                            <div class="cTR cOutputTr">

                                <div class="code leading cOutput">
                                    <div class="highlight"><pre><code class=shell-session>curl -d &quot;Hello!&quot; &quot;https://functions1777.azurewebsites.net/api/sendSMS?to=xxxxxxxxxx&amp;code=&lt;auth_code&gt;&quot;
Message - to: xxxxxxxxxx body: Hello!
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                </div>
                            </div>
                            
                            <div class="cTR cOutputTr">

                                <div class="code leading cOutput">
                                    <div class="highlight"><pre><code class=shell-session>curl &quot;https://functions1777.azurewebsites.net/api/httpTriggerCosmosDBInput1?id=id1&amp;code=&lt;auth_code&gt;&quot;
id=id1 _rid=zEkwANYTRPoFAAAAAAAAAA== _self=dbs/zEkwAA==/colls/zEkwANYTRPo=/docs/zEkwANYTRPoFAAAAAAAAAA==/ _ts=1591201470 _etag=&quot;10009f6c-0000-0100-0000-5ed7cebe0000&quot; name=Tom birthYear=1950 country=Sri Lanka pk=p1
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                </div>
                            </div>
                            
                            <div class="cTR cOutputTr">

                                <div class="code leading cOutput">
                                    <div class="highlight"><pre><code class=shell-session>curl &quot;https://functions1777.azurewebsites.net/api/httpTriggerCosmosDBInput2?id=id1&amp;code=&lt;auth_code&gt;&quot;
id=id1 name=Tom birthYear=1950 _rid=zEkwANYTRPoFAAAAAAAAAA== _self=dbs/zEkwAA==/colls/zEkwANYTRPo=/docs/zEkwANYTRPoFAAAAAAAAAA==/ _ts=1591201470 _etag=&quot;10009f6c-0000-0100-0000-5ed7cebe0000&quot; country=Sri Lanka pk=p1
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                </div>
                            </div>
                            
                            <div class="cTR cOutputTr">

                                <div class="code leading cOutput">
                                    <div class="highlight"><pre><code class=shell-session>curl &quot;https://functions1777.azurewebsites.net/api/c1/Sri%20Lanka?code=&lt;auth_code&gt;&quot;
id=id3 name=Jack X birthYear=1950 country=Sri Lanka pk=p1 _rid=zEkwANYTRPoEAAAAAAAAAA== _self=dbs/zEkwAA==/colls/zEkwANYTRPo=/docs/zEkwANYTRPoEAAAAAAAAAA==/ _etag=&quot;1000076b-0000-0100-0000-5ed7cc110000&quot; _attachments=attachments/ _ts=1591200785 id=id4 name=Tom birthYear=1950 country=Sri Lanka pk=p1 _rid=zEkwANYTRPoFAAAAAAAAAA== _self=dbs/zEkwAA==/colls/zEkwANYTRPo=/docs/zEkwANYTRPoFAAAAAAAAAA==/ _etag=&quot;10009f6c-0000-0100-0000-5ed7cebe0000&quot; _attachments=attachments/ _ts=1591201470
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                </div>
                            </div>
                            
                            <div class="cTR cOutputTr">

                                <div class="code leading cOutput">
                                    <div class="highlight"><pre><code class=shell-session>curl https://functions1777.azurewebsites.net/api/httpTriggerCosmosDBOutput1?code=&lt;auth_code&gt;
Adding entry: id=abf42517-53d7-4fa3-a30c-87cb65e9597d name=John Doe birthYear=1980
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                </div>
                            </div>
                            
                            <div class="cTR cOutputTr">

                                <div class="code leading cOutput">
                                    <div class="highlight"><pre><code class=shell-session>curl https://functions1777.azurewebsites.net/api/httpTriggerCosmosDBOutput2?code=&lt;auth_code&gt;
Adding entries: id=f510e0d2-5341-4901-8c12-9aac1b212378 name=John Doe A birthYear=1985 id=cc145a0f-cb4f-4a5f-8d0f-fbf01209aa2d name=John Doe B birthYear=1990
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                </div>
                            </div>
                            
                            <div class="cTR cOutputTr">

                                <div class="code cOutput">
                                    <div class="highlight"><pre><code class=shell-session>curl https://functions1777.azurewebsites.net/api/httpTriggerCosmosDBOutput3?code=&lt;auth_code&gt;
[{&quot;id&quot;:&quot;4ba53cb4-47a1-4028-af7b-2515f0a9c6bf&quot;,&quot;name&quot;:&quot;Jack&quot;,&quot;birthYear&quot;:2001},{&quot;id&quot;:&quot;5b8a6697-c9e9-488d-91b3-3942574efeef&quot;,&quot;name&quot;:&quot;Will&quot;,&quot;birthYear&quot;:2005}]
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                </div>
                            </div>
                            
                        </div>
                    </div>
                    


                     
                </div>
            </div>
        </div>
    </div>

     <script>
            $(document).ready(function() {

                // hljs.initHighlightingOnLoad();

                $(".switch").click(function() {
                    $(".cCodeRight").toggleClass('cShow');
                    $(".cCodeLeft").toggleClass('cHide');
                });

                // register "copy to clipboard" event to elements with "copy" class
                var clipboard = new ClipboardJS('.copy', {
                    text: function(trigger) {
                        return $('.FullCode').find('pre').text();
                    }
                });

                // Register events show hide tooltip on click event
                clipboard.on('success', function(e) {
                    setTooltip(e.trigger, 'Copied!');
                    hideTooltip(e.trigger);
                });

                clipboard.on('error', function(e) {
                    setTooltip(e.trigger, 'Failed!');
                    hideTooltip(e.trigger);
                });

                $('.copy').tooltip({
                    trigger: 'click',
                    placement: 'bottom'
                });
                $("a.copy").unbind("click");
            });

            function setTooltip(btn, message) {
                $(btn).attr('data-original-title', message)
                    .tooltip('show');
            }

            function hideTooltip(btn) {
                setTimeout(function() {
                    $(btn).tooltip('hide').removeAttr('data-original-title');
                }, 1000);
            }
        </script>
