---
layout: ballerina-example-page
title: Directory Listener
description: 
keywords: 
permalink: /1.2/learn/by-example/directory-listener
active: directory-listener
redirect_from:
  - /v1-2/learn/by-example/directory-listener
  - /v1-2/learn/by-example/directory-listener.html
---
<div class="row cBallerina-io-Gray-row">
        <div class="container cBallerinaBySampleContainer">
            <div class="FullCode">
                <div class="highlight"><pre><span class="kn">import</span> <span class="nx">ballerina</span><span class="o">/</span><span class="nx">file</span><span class="p">;</span>
<span class="kn">import</span> <span class="nx">ballerina</span><span class="o">/</span><span class="nx">log</span><span class="p">;</span>

<span class="c1">// In this example, the listener monitors any modifications done to a specific directoy.</span>
<span class="c1">// Before running the example, change the value of the &#39;path&#39; field </span>
<span class="c1">// to indicate the path of the directory that you want the listener to monitor.</span>
<span class="c1">// As the recursive property is set to false,</span>
<span class="c1">// the listener does not monitor the child directories of the main directory</span>
<span class="c1">// that it listens to.</span>
<span class="nx">listener</span> <span class="nx">file</span><span class="p">:</span><span class="nx">Listener</span> <span class="nx">inFolder</span> <span class="p">=</span> <span class="nx">new</span> <span class="p">({</span>
    <span class="nx">path</span><span class="p">:</span> <span class="s">&quot;/home/ballerina/fs-server-connector/observed-dir&quot;</span><span class="p">,</span>
    <span class="nx">recursive</span><span class="p">:</span> <span class="kc">false</span>
<span class="p">});</span>

<span class="c1">// The directory listener should have at least one of these predefined resources.</span>
<span class="kd">service</span> <span class="nx">localObserver</span> <span class="nx">on</span> <span class="nx">inFolder</span> <span class="p">{</span>

    <span class="c1">// This resource is invoked once a new file is created in the listening directory.</span>
    <span class="kd">resource</span> <span class="kd">function</span> <span class="nx">onCreate</span><span class="p">(</span><span class="nx">file</span><span class="p">:</span><span class="nx">FileEvent</span> <span class="nx">m</span><span class="p">)</span> <span class="p">{</span>
        <span class="kt">string</span> <span class="nx">msg</span> <span class="p">=</span> <span class="s">&quot;Create: &quot;</span> <span class="o">+</span> <span class="nx">m</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
        <span class="nx">log</span><span class="p">:</span><span class="nx">printInfo</span><span class="p">(</span><span class="nx">msg</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">// This resource is invoked once an existing file is deleted from the listening directory.</span>
    <span class="kd">resource</span> <span class="kd">function</span> <span class="nx">onDelete</span><span class="p">(</span><span class="nx">file</span><span class="p">:</span><span class="nx">FileEvent</span> <span class="nx">m</span><span class="p">)</span> <span class="p">{</span>
        <span class="kt">string</span> <span class="nx">msg</span> <span class="p">=</span> <span class="s">&quot;Delete: &quot;</span> <span class="o">+</span> <span class="nx">m</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
        <span class="nx">log</span><span class="p">:</span><span class="nx">printInfo</span><span class="p">(</span><span class="nx">msg</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">// This resource is invoked once an existing file is modified in the listening directory.</span>
    <span class="kd">resource</span> <span class="kd">function</span> <span class="nx">onModify</span><span class="p">(</span><span class="nx">file</span><span class="p">:</span><span class="nx">FileEvent</span> <span class="nx">m</span><span class="p">)</span> <span class="p">{</span>
        <span class="kt">string</span> <span class="nx">msg</span> <span class="p">=</span> <span class="s">&quot;Modify: &quot;</span> <span class="o">+</span> <span class="nx">m</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
        <span class="nx">log</span><span class="p">:</span><span class="nx">printInfo</span><span class="p">(</span><span class="nx">msg</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

            </div>

            <div class="col-xs-12 col-sm-12 col-md-12">
                <table class="cTopInfoContainer cTopControlsContainer">
                    <tr>
                        <td class="cLeftTD">
                            <h2>Directory Listener</h2>
                            <p><p>The <code>Directory Listener</code> is used to listen to a directory in the local file system. It notifies when new files are created in the directory or when the existing files are deleted or modified.</p>
</p>

                        </td>
                        <td class="cRightTD">
                            <div class="cTopButtonContainer">
                                
                                <div class="cButtonInfoContainer">
                                    <a class="prev" href="websub-service-integration-sample.html?is_ref_by_example=true">
                                        <span>< PREVIOUS</span>
                                        <p>Service Integration Sample</p>
                                    </a>
                                </div>
                                 
                                <div class="cButtonInfoContainer">
                                    <a class="next" href="jdbc-client-crud-operations.html?is_ref_by_example=true">
                                        <span>NEXT ></span>
                                        <p>JDBC Client CRUD Operations</p>
                                    </a>
                                </div>
                                
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
            <div class="example" id="directory-listener">
                <div class="col-xs-12 col-sm-12 col-md-12 cBBETable-container cCodeLeft">
                    <div class="cTopControlsContainer">
                        <div class="cTopControlsRow">
                            <div class="cLeftTD">
                                <div class="cBBE-links">
                                    <ul>
                                        <li>
                                            <a class="copy"><img src="/img/copy-icon.svg" /></a>
                                        </li>
                                        <li>
                                            <a target="_blank" href="https://github.com/ballerina-platform/ballerina-lang/tree/ballerina-1.2.x/examples/directory-listener/"><img src="/img/github-logo-green.svg" /></a>
                                        </li>
                                        
                                    </ul>
                                </div>
                            </div> 
                        </div>
                    </div>
              
                    
                    <div class="codeSnippeset">

                        <div class="cBBE-body">
                            
                            <div class="cTR">

                                <div class="code leading">
                                    <div class="highlight"><pre><code class=language-ballerina>import ballerina/file;
import ballerina/log;
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                </div>
                            </div>
                            
                            <div class="cTR hover-enable">

                                <div class="code leading">
                                    <div class="highlight"><pre><code class=language-ballerina>listener file:Listener inFolder = new ({
    path: &quot;/home/ballerina/fs-server-connector/observed-dir&quot;,
    recursive: false
});
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                    <div class="cCodeDesription">
                                        <div>
                                            <p>In this example, the listener monitors any modifications done to a specific directoy.
 Before running the example, change the value of the &lsquo;path&rsquo; field
 to indicate the path of the directory that you want the listener to monitor.
 As the recursive property is set to false,
 the listener does not monitor the child directories of the main directory
 that it listens to.</p>

                                        </div>
                                    </div>
                                    
                                </div>
                            </div>
                            
                            <div class="cTR hover-enable">

                                <div class="code leading">
                                    <div class="highlight"><pre><code class=language-ballerina>service localObserver on inFolder {
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                    <div class="cCodeDesription">
                                        <div>
                                            <p>The directory listener should have at least one of these predefined resources.</p>

                                        </div>
                                    </div>
                                    
                                </div>
                            </div>
                            
                            <div class="cTR hover-enable">

                                <div class="code leading">
                                    <div class="highlight"><pre><code class=language-ballerina>    resource function onCreate(file:FileEvent m) {
        string msg = &quot;Create: &quot; + m.name;
        log:printInfo(msg);
    }
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                    <div class="cCodeDesription">
                                        <div>
                                            <p>This resource is invoked once a new file is created in the listening directory.</p>

                                        </div>
                                    </div>
                                    
                                </div>
                            </div>
                            
                            <div class="cTR hover-enable">

                                <div class="code leading">
                                    <div class="highlight"><pre><code class=language-ballerina>    resource function onDelete(file:FileEvent m) {
        string msg = &quot;Delete: &quot; + m.name;
        log:printInfo(msg);
    }
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                    <div class="cCodeDesription">
                                        <div>
                                            <p>This resource is invoked once an existing file is deleted from the listening directory.</p>

                                        </div>
                                    </div>
                                    
                                </div>
                            </div>
                            
                            <div class="cTR hover-enable">

                                <div class="code">
                                    <div class="highlight"><pre><code class=language-ballerina>    resource function onModify(file:FileEvent m) {
        string msg = &quot;Modify: &quot; + m.name;
        log:printInfo(msg);
    }
}
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                    <div class="cCodeDesription">
                                        <div>
                                            <p>This resource is invoked once an existing file is modified in the listening directory.</p>

                                        </div>
                                    </div>
                                    
                                </div>
                            </div>
                            
                        </div>
                    </div>
                    
                    <div class="codeSnippeset">

                        <div class="cBBE-body">
                            
                            <div class="cTR cOutputTr">

                                <div class="code cOutput">
                                    <div class="highlight"><pre><code class=shell-session># Before running the sample, create a new file called `test1.txt` in the directory called `observed-dir` and modify and delete it.
# To run this sample, navigate to the directory that contains the
# `.bal` file, and execute the `ballerina run` command below.
ballerina run directory_listener.bal
Create: /home/ballerina/fs-server-connector/observed-dir/test1.txt
Modify: /home/ballerina/fs-server-connector/observed-dir/test1.txt
Delete: /home/ballerina/fs-server-connector/observed-dir/test1.txt
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                </div>
                            </div>
                            
                        </div>
                    </div>
                    


                     
                </div>
            </div>
        </div>
    </div>

     <script>
            $(document).ready(function() {

                // hljs.initHighlightingOnLoad();

                $(".switch").click(function() {
                    $(".cCodeRight").toggleClass('cShow');
                    $(".cCodeLeft").toggleClass('cHide');
                });

                // register "copy to clipboard" event to elements with "copy" class
                var clipboard = new ClipboardJS('.copy', {
                    text: function(trigger) {
                        return $('.FullCode').find('pre').text();
                    }
                });

                // Register events show hide tooltip on click event
                clipboard.on('success', function(e) {
                    setTooltip(e.trigger, 'Copied!');
                    hideTooltip(e.trigger);
                });

                clipboard.on('error', function(e) {
                    setTooltip(e.trigger, 'Failed!');
                    hideTooltip(e.trigger);
                });

                $('.copy').tooltip({
                    trigger: 'click',
                    placement: 'bottom'
                });
                $("a.copy").unbind("click");
            });

            function setTooltip(btn, message) {
                $(btn).attr('data-original-title', message)
                    .tooltip('show');
            }

            function hideTooltip(btn) {
                setTimeout(function() {
                    $(btn).tooltip('hide').removeAttr('data-original-title');
                }, 1000);
            }
        </script>
