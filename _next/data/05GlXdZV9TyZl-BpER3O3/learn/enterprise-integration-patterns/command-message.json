{"pageProps":{"tagline":"Use message to invoke a procedure in another application","desc":"Command message invokes a remote procedure via messages to receive a response.","category":"Message Construction","index":15,"helps":"Ballerina supports a rich set of network protocol connectors which you can use to invoke remote applications.","tags":["Command Message","Messaging","Point-to-Point Channel"],"link":"https://www.enterpriseintegrationpatterns.com/patterns/messaging/CommandMessage.html","content":[{"headerCode":"<pre class=\"shiki github-light\" style=\"background-color:#fff;color:#24292e\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color:#D73A49\">import</span><span style=\"color:#24292E\"> ballerina/http;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D73A49\">type</span><span style=\"color:#6F42C1\"> UserGroupCreateRequest</span><span style=\"color:#D73A49\"> record</span><span style=\"color:#24292E\"> {</span><span style=\"color:#D73A49\">|</span></span>\n<span class=\"line\"><span style=\"color:#005CC5\">    string</span><span style=\"color:#24292E\"> name;</span></span>\n<span class=\"line\"><span style=\"color:#005CC5\">    string</span><span style=\"color:#24292E\"> description;</span></span>\n<span class=\"line\"><span style=\"color:#005CC5\">    string</span><span style=\"color:#24292E\"> team_id;</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">|</span><span style=\"color:#24292E\">};</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D73A49\">type</span><span style=\"color:#6F42C1\"> UserGroup</span><span style=\"color:#D73A49\"> record</span><span style=\"color:#24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">    *</span><span style=\"color:#24292E\">UserGroupCreateRequest;</span></span>\n<span class=\"line\"><span style=\"color:#005CC5\">    string</span><span style=\"color:#24292E\"> id;</span></span>\n<span class=\"line\"><span style=\"color:#005CC5\">    boolean</span><span style=\"color:#24292E\"> is_usergroup;</span></span>\n<span class=\"line\"><span style=\"color:#005CC5\">    string</span><span style=\"color:#24292E\"> 'handle;</span></span>\n<span class=\"line\"><span style=\"color:#005CC5\">    boolean</span><span style=\"color:#24292E\"> is_external;</span></span>\n<span class=\"line\"><span style=\"color:#005CC5\">    int</span><span style=\"color:#24292E\"> date_create;</span></span>\n<span class=\"line\"><span style=\"color:#005CC5\">    string</span><span style=\"color:#24292E\"> created_by;</span></span>\n<span class=\"line\"><span style=\"color:#005CC5\">    string</span><span style=\"color:#24292E\"> user_count;</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">};</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D73A49\">type</span><span style=\"color:#6F42C1\"> UserGroupCreationResponse</span><span style=\"color:#D73A49\"> record</span><span style=\"color:#24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color:#005CC5\">    boolean</span><span style=\"color:#24292E\"> ok;</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">    UserGroup usergroup</span><span style=\"color:#D73A49\">?</span><span style=\"color:#24292E\">;</span></span>\n<span class=\"line\"><span style=\"color:#005CC5\">    string</span><span style=\"color:#24292E\"> '</span><span style=\"color:#D73A49\">error</span><span style=\"color:#24292E\">?;</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">};</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D73A49\">final</span><span style=\"color:#24292E\"> http</span><span style=\"color:#D73A49\">:</span><span style=\"color:#24292E\">Client slackClient </span><span style=\"color:#D73A49\">=</span><span style=\"color:#D73A49\"> check</span><span style=\"color:#D73A49\"> new</span><span style=\"color:#24292E\"> (</span><span style=\"color:#032F62\">\"http://api.slack.com.balmock.io\"</span><span style=\"color:#24292E\">);</span></span>\n<span class=\"line\"></span></code></pre>","mainCode":"<pre class=\"shiki github-light\" style=\"background-color:#fff;color:#24292e\" tabindex=\"0\"><code><span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D73A49\">service</span><span style=\"color:#6F42C1\"> /api/v1</span><span style=\"color:#D73A49\"> on</span><span style=\"color:#D73A49\"> new</span><span style=\"color:#24292E\"> http:Listener(</span><span style=\"color:#005CC5\">8080</span><span style=\"color:#24292E\">) {</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">    isolated</span><span style=\"color:#D73A49\"> resource</span><span style=\"color:#D73A49\"> function</span><span style=\"color:#6F42C1\"> post</span><span style=\"color:#6F42C1\"> createUserGroup</span><span style=\"color:#24292E\">(</span><span style=\"color:#E36209\">UserGroupCreateRequest</span><span style=\"color:#E36209\"> userGroup</span><span style=\"color:#24292E\">)</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">    returns</span><span style=\"color:#24292E\"> UserGroupCreationResponse</span><span style=\"color:#D73A49\">|error</span><span style=\"color:#24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">        return</span><span style=\"color:#24292E\"> slackClient</span><span style=\"color:#D73A49\">->/</span><span style=\"color:#24292E\">api</span><span style=\"color:#D73A49\">/</span><span style=\"color:#24292E\">usergroups\\.create.</span><span style=\"color:#6F42C1\">post</span><span style=\"color:#24292E\">(</span><span style=\"color:#E36209\">userGroup</span><span style=\"color:#24292E\">, </span><span style=\"color:#E36209\">mediaType</span><span style=\"color:#D73A49\"> =</span><span style=\"color:#032F62\"> \"x-www-form-urlencoded\"</span><span style=\"color:#24292E\">);</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">    }</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">}</span></span>\n<span class=\"line\"></span></code></pre>","raw":"import ballerina/http;\n\ntype UserGroupCreateRequest record {|\n    string name;\n    string description;\n    string team_id;\n|};\n\ntype UserGroup record {\n    *UserGroupCreateRequest;\n    string id;\n    boolean is_usergroup;\n    string 'handle;\n    boolean is_external;\n    int date_create;\n    string created_by;\n    string user_count;\n};\n\ntype UserGroupCreationResponse record {\n    boolean ok;\n    UserGroup usergroup?;\n    string 'error?;\n};\n\nfinal http:Client slackClient = check new (\"http://api.slack.com.balmock.io\");\n\nservice /api/v1 on new http:Listener(8080) {\n    isolated resource function post createUserGroup(UserGroupCreateRequest userGroup)\n    returns UserGroupCreationResponse|error {\n        return slackClient->/api/usergroups\\.create.post(userGroup, mediaType = \"x-www-form-urlencoded\");\n    }\n}\n","name":"command-message.bal"}],"name":" Command Message"},"__N_SSG":true}