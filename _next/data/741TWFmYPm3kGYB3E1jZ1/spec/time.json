{"pageProps":{"frontmatter":{},"content":"# Specification: Ballerina Time Library\n\n_Owners_: @daneshk @BuddhiWathsala  \n_Reviewers_: @daneshk  \n_Created_: 2021/12/04   \n_Updated_: 2022/02/17  \n_Edition_: Swan Lake \n\n## Introduction\nThis is the specification for the Time standard library of [Ballerina language](https://ballerina.io/), which provides time generation and conversion APIs.\n\nThe Time library specification has evolved and may continue to evolve in the future. The released versions of the specification can be found under the relevant GitHub tag.\n\nIf you have any feedback or suggestions about the library, start a discussion via a GitHub issue or in the [Slack channel](https://ballerina.io/community/). Based on the outcome of the discussion, the specification and implementation can be updated. Community feedback is always welcome. Any accepted proposal which affects the specification is stored under `/docs/proposals`. Proposals under discussion can be found with the label `type/proposal` in GitHub.\n\nThe conforming implementation of the specification is released and included in the distribution. Any deviation from the specification is considered a bug.\n\n## Contents\n1. [Overview](#1-overview)\n2. [Time Representations](#2-time-epresentations)\n    * 2.1. [UTC](#21-utc)\n    * 2.2. [Civil](#22-civil)\n3. [Time Generation](#3-time-generation)\n4. [Time Related Operations](#4-time-related-operations)\n5. [Time Conversions](#5-time-conversions)\n6. [Time Zone Handling](#time-zone-handling)\n\n## 1. Overview\nBallerina time standard library has five primary aspects in handling time values.\n1. Time representations\n2. Time generation\n3. Time-related operations\n4. Time conversions\n5. Time zone handling\n\n## 2. Time representations\n\n### 2.1. UTC\nCoordinated Universal Time (UTC) is the time standard that defines time unambiguously. Ballerina represents UTC using a tuple of length 2.\n\n```ballerina\npublic type Utc readonly & [int, decimal];\n```\nThe tuple is an ordered type, so the values can be compared using the Ballerina <, <=, >, >= operators. The first member of the tuple is int representing an integral number of seconds from the epoch. Epoch is the traditional UNIX epoch of 1970-01-01T00:00:00Z. The second member of the tuple is a decimal giving the fraction of a second. For times before the epoch, n is negative, and f is non-negative. In other words, the UTC represented is on or after the second specified by n. Leap seconds handles as follows. The first member of the tuple ignores leap seconds: it assumes that every day has 86400 seconds. The second member of the tuple is >= 0 and is < 1 except during positive leaps seconds in which it is >= 1 and < 2. So given a tuple [n,f] after the epoch, n / 86400 gives the day number, and (n % 86400) + f gives the time in seconds since midnight UTC (for which the limit is 86401 on a day with a positive leap second).\n\n### 2.2. Civil\n\nBallerina represents a date using mandatory year, month, and day fields. Additionally, the `Date` record can have optional time-related fields (such as hour, minute, and second) and a time zone offset. Similarly, the Ballerina time record has mandatory hour and minute fields with an optional second field, date fields, and a zone offset. The time zone offset has hours, minutes, and optional seconds fields.\n\nThe `Civil` record represents time within some region relative to a time scale stipulated by civilian authorities. Civil contains the following time-related information.\n1. Specific date\n2. Specific time\n3. Time zone offset (UTC offset)\n4. Day of week (e.g. Sunday, Monday)\n5. Time zone abbreviation\n6. Flag to indicate daylight savings time\n\n## 3. Time generation\n\nThe time library contains two APIs to get the systematic time values.\n\nThe following API returns the current instant of the system clock in seconds from the epoch of `1970-01-01T00:00:00` with a given precision. The precision specifies the number of zeros after the decimal point (e.g. 3) would give the millisecond precision, and nil means native precision (nanosecond precision 9) of the clock).\n\n```ballerina\npublic isolated function utcNow(int? precision = ()) returns Utc;\n```\n\nThe following API can be used to return number of seconds from an unspecified epoch.\n\n```ballerina\npublic isolated function monotonicNow() returns decimal;\n```\n\n## 4. Time related operations\n\nTime standard library supports time-related operations such as addition, subtraction, and date validations.\n\nUse the following API to add a given number of seconds to a UTC value.\n\n```ballerina\npublic isolated function utcAddSeconds(Utc utc, Seconds seconds) returns Utc;\n```\n\nThe following API returns the difference between two given UTC values.\n\n```ballerina\npublic isolated function utcDiffSeconds(Utc utc1, Utc utc2) returns Seconds;\n```\n\nThe following API validate a given date is adhere to the Gregorian calendar or not.\n\n```ballerina\npublic isolated function dateValidate(Date date) returns Error?;\n```\n\nThe following API returns the day of week value (e.g. Sunday, Monday etc.) of a given date.\n\n```ballerina\npublic isolated function dayOfWeek(Date date) returns DayOfWeek;\n```\n\n## 5. Time conversions\n\nThe time library contains several conversion APIs to convert UTC to civil. The time library also has APIs to generate several string representations using UTC and Civil.\n\n1. UTC to Civil\n    ```ballerina\n    public isolated function utcToCivil(Utc utc) returns Civil\n    ```\n2. UTC from Civil\n    ```ballerina\n    public isolated function utcFromCivil(Civil civilTime) returns Utc|Error;\n    ```\n3. RFC 3339 timestamp (e.g. `2007-12-03T10:15:30.00Z`) to Civil.\n    ```ballerina\n    public isolated function civilFromString(string dateTimeString) returns Civil|Error;\n    ```\n4. Civil to an RFC timestamp string\n    ```ballerina\n    public isolated function civilToString(Civil civil) returns string|Error;\n    ```\n5. Civil to email string (e.g `Wed, 10 Mar 2021 19:51:55 -0800 (PST)`)\n    ```ballerina\n    public isolated function civilToEmailString(Civil civil, HeaderZoneHandling zoneHandling) returns string|Error;\n    ```\n6. Civil from an email string (e.g `Wed, 10 Mar 2021 19:51:55 -0800 (PST)`)\n    ```ballerina\n    public isolated function civilFromEmailString(string dateTimeString) returns Civil|Error;\n    ```\n\n## 6. Time zone handling\n\nThe `Zone` object in the time library handles the time zone functionalities.\n\nCurrently, the `Zone` object can be obtained using two APIs as follows.\n\n1. Load the `Zone` object related to the system time zone.\n    ```ballerina\n    public isolated function loadSystemZone() returns Zone|Error;\n    ```\n2. Get the `Zone` object related to a given zone ID.\n    ```ballerina\n    public isolated function getZone(string id) returns Zone?;\n    ```\n\nThe following API in the `Zone` object checks the related time zone value is a fixed offset from UTC or not.\n\n```ballerina\npublic isolated function fixedOffset() returns ZoneOffset?;\n```\n\nThen, there are two APIs in the Zone object to convert UTC values to Civil values concerning a time zone value.\n\nThe following API in the Zone object converts a given `Civil` value to a `Utc` timestamp based on the time zone value.\n\n```ballerina\npublic isolated function utcFromCivil(Civil civil) returns Utc|Error;\n```\n\nOn the other hand, the following API in the Zone object converts a given `Utc` timestamp to a `Civil` value based on the time zone value.\n\n```ballerina\npublic isolated function utcToCivil(Utc utc) returns Civil;\n```\n"},"__N_SSG":true}