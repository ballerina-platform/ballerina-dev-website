{"pageProps":{"tagline":"Remove data from the message","desc":"The content filter removes data from the original message and can also be employed to simplify the message structure.","category":"Message Transformation","index":38,"helps":"Ballerina excels at manipulating data and handling diverse formats, structures, and transformations. The [query expression](/learn/by-example/query-expressions/) (`from` keyword) is useful for transforming messages. The `select` clause, as shown below, can be used to create new records from existing ones while refining data. The `where` clause can be used to filter items from an array.","tags":["Content Filter","Message Channel","Message Endpoint"],"link":"https://www.enterpriseintegrationpatterns.com/patterns/messaging/ContentFilter.html","content":[{"headerCode":"<pre class=\"shiki github-light\" style=\"background-color:#fff;color:#24292e\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color:#D73A49\">import</span><span style=\"color:#24292E\"> ballerina/http;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D73A49\">type</span><span style=\"color:#6F42C1\"> DetailedReimbursementTemplate</span><span style=\"color:#D73A49\"> record</span><span style=\"color:#24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color:#005CC5\">    string</span><span style=\"color:#24292E\"> reimbursementTypeID;</span></span>\n<span class=\"line\"><span style=\"color:#005CC5\">    string</span><span style=\"color:#24292E\"> reimbursementTypeName;</span></span>\n<span class=\"line\"><span style=\"color:#005CC5\">    float</span><span style=\"color:#24292E\"> fixedAmount;</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">};</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D73A49\">type</span><span style=\"color:#6F42C1\"> ReimbursementTemplate</span><span style=\"color:#D73A49\"> record</span><span style=\"color:#24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color:#005CC5\">    string</span><span style=\"color:#24292E\"> reimbursementTypeID;</span></span>\n<span class=\"line\"><span style=\"color:#005CC5\">    float</span><span style=\"color:#24292E\"> fixedAmount;</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">};</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D73A49\">type</span><span style=\"color:#6F42C1\"> Reimbursement</span><span style=\"color:#D73A49\"> record</span><span style=\"color:#24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color:#005CC5\">    string</span><span style=\"color:#24292E\"> id;</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">    record</span><span style=\"color:#24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color:#005CC5\">        string</span><span style=\"color:#24292E\"> reimbursementTypeID;</span></span>\n<span class=\"line\"><span style=\"color:#005CC5\">        float</span><span style=\"color:#24292E\"> fixedAmount;</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">    }[] reimbursementTemplates;</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">};</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D73A49\">final</span><span style=\"color:#24292E\"> http</span><span style=\"color:#D73A49\">:</span><span style=\"color:#24292E\">Client xero </span><span style=\"color:#D73A49\">=</span><span style=\"color:#D73A49\"> check</span><span style=\"color:#D73A49\"> new</span><span style=\"color:#24292E\"> (</span><span style=\"color:#032F62\">\"http://api.xero.com.balmock.io\"</span><span style=\"color:#24292E\">);</span></span>\n<span class=\"line\"></span></code></pre>","mainCode":"<pre class=\"shiki github-light\" style=\"background-color:#fff;color:#24292e\" tabindex=\"0\"><code><span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D73A49\">service</span><span style=\"color:#6F42C1\"> /payroll</span><span style=\"color:#D73A49\"> on</span><span style=\"color:#D73A49\"> new</span><span style=\"color:#24292E\"> http:Listener(</span><span style=\"color:#005CC5\">8080</span><span style=\"color:#24292E\">) {</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D73A49\">    resource</span><span style=\"color:#D73A49\"> function</span><span style=\"color:#6F42C1\"> post</span><span style=\"color:#6F42C1\"> employees</span><span style=\"color:#24292E\">/[</span><span style=\"color:#005CC5\">string</span><span style=\"color:#E36209\"> id</span><span style=\"color:#24292E\">]/paytemplate/reimbursements(</span><span style=\"color:#E36209\">DetailedReimbursementTemplate</span><span style=\"color:#24292E\">[] </span><span style=\"color:#E36209\">templates</span><span style=\"color:#24292E\">)</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">            returns</span><span style=\"color:#24292E\"> Reimbursement</span><span style=\"color:#D73A49\">|error</span><span style=\"color:#24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">        ReimbursementTemplate[] reimbursementRequests </span><span style=\"color:#D73A49\">=</span><span style=\"color:#D73A49\"> from</span><span style=\"color:#005CC5\"> var</span><span style=\"color:#24292E\"> {reimbursementTypeID, fixedAmount} </span><span style=\"color:#D73A49\">in</span><span style=\"color:#24292E\"> templates</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">                                                        select</span><span style=\"color:#24292E\"> {reimbursementTypeID, fixedAmount};</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">        return</span><span style=\"color:#24292E\"> xero</span><span style=\"color:#D73A49\">->/</span><span style=\"color:#24292E\">payrollxro</span><span style=\"color:#D73A49\">/</span><span style=\"color:#24292E\">employees</span><span style=\"color:#D73A49\">/</span><span style=\"color:#24292E\">[id]</span><span style=\"color:#D73A49\">/</span><span style=\"color:#24292E\">paytemplate</span><span style=\"color:#D73A49\">/</span><span style=\"color:#24292E\">reimbursements.</span><span style=\"color:#6F42C1\">post</span><span style=\"color:#24292E\">(</span><span style=\"color:#E36209\">reimbursementRequests</span><span style=\"color:#24292E\">);</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">    }</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">}</span></span>\n<span class=\"line\"></span></code></pre>","raw":"import ballerina/http;\n\ntype DetailedReimbursementTemplate record {\n    string reimbursementTypeID;\n    string reimbursementTypeName;\n    float fixedAmount;\n};\n\ntype ReimbursementTemplate record {\n    string reimbursementTypeID;\n    float fixedAmount;\n};\n\ntype Reimbursement record {\n    string id;\n    record {\n        string reimbursementTypeID;\n        float fixedAmount;\n    }[] reimbursementTemplates;\n};\n\nfinal http:Client xero = check new (\"http://api.xero.com.balmock.io\");\n\nservice /payroll on new http:Listener(8080) {\n\n    resource function post employees/[string id]/paytemplate/reimbursements(DetailedReimbursementTemplate[] templates)\n            returns Reimbursement|error {\n        ReimbursementTemplate[] reimbursementRequests = from var {reimbursementTypeID, fixedAmount} in templates\n                                                        select {reimbursementTypeID, fixedAmount};\n        return xero->/payrollxro/employees/[id]/paytemplate/reimbursements.post(reimbursementRequests);\n    }\n}\n","name":"content-filter.bal"}],"name":" Content Filter"},"__N_SSG":true}