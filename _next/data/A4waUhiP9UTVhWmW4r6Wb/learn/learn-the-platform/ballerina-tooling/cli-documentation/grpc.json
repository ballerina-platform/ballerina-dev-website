{"pageProps":{"frontmatter":{"layout":"ballerina-cli-documentation-left-nav-pages-swanlake","title":"gRPC/Protocol Buffers","description":"The `Protocol Buffers to Ballerina` tool provides capabilities to generate Ballerina source code for the Protocol Buffer definition.","keywords":"ballerina, protocol buffers, programming language","permalink":"/learn/cli-documentation/grpc/","active":"grpc","intro":"Protocol Buffers is an open-source cross-platform data format used to serialize structured data. gRPC uses Protocol Buffers as Interface Definition Language to create service contracts, detailing all of its remote functions and message formats. The `Protocol Buffers to Ballerina` tooling makes it easy for users to develop a service documented in a Protocol Buffers by generating Ballerina service/client stub files and skeletons.","redirect_from":["/learn/how-to-generate-code-for-protocol-buffers","/learn/how-to-generate-code-for-protocol-buffers/","/learn/generating-ballerina-code-for-protocol-buffer-definitions","/swan-lake/learn/generating-ballerina-code-for-protocol-buffer-definitions/","/swan-lake/learn/generating-ballerina-code-for-protocol-buffer-definitions","/learn/tooling-guide/cli-tools/grpc","/learn/tooling-guide/cli-tools/grpc/","/learn/cli-documentation/grpc"]},"content":"\n## Usage of the tool\n\nThe code generation tool can produce `service/client stub files` and `service/client skeletons` in the Ballerina Language.\n \n> In Ballerina, Protocol Buffers serialization is supported only in the gRPC module. Therefore, you can only use\n> this tool to generate Ballerina source code for gRPC service definitions.\n\n## Protocol Buffers to Ballerina\n\nYou can generate Ballerina source code using the following command.\n\n```\n$ bal grpc --input <proto-file-path> \n         [--output <path>] \n         [--mode client|service]\n         [--proto-path <proto-directory>]\n```\n\n### CLI command options\n\n`--input` - Path to a '.proto' file or a directory containing multiple '.proto' files. This is a mandatory field. \nYou need to provide the path of the definition file or the directory that contains multiple ‘.proto’ files.\n\n`--output` - Location of the generated Ballerina source files. This is an optional field. \nIf the output path is not specified, the output is written to a directory corresponding to the package in the Protocol\n Buffers definition. \nIf the package is not specified, the output is written to a directory named 'temp' in the current location.\n\n`--mode` - Set the mode as client or service to generate code samples. If not specified, only the stub file is \ngenerated.\n\n`-- proto-path` - Path to a directory in which to look for '.proto' files when resolving import directives. If \nomitted, the current directory is used. The '.proto' file specified in the 'input' must reside in the 'proto-path' so that the \ncompiler can determine its canonical name.\n\n\n\n## Sample\n\nThe example below shows how you can generate Ballerina source code from the following Protocol Buffers definition (in the `helloworld.proto` file).\n\n```proto\nsyntax = \"proto3\";\n\npackage helloworld;\n\n// The greeting service definition.\nservice Greeter {\n // Sends a greeting\n rpc sayHello (HelloRequest) returns (HelloReply);\n}\n\n// The request message with the user's name.\nmessage HelloRequest {\n string name = 1;\n}\n\n// The response message with the greetings\nmessage HelloReply {\n string message = 1;\n}\n```\n**Note:** The sample service definition is taken from the quick start guide on the gRPC official site.\n\n### Execute the sample\n\n* Execute the below command to generate the client/service stub and service template files.\n```\n$ bal grpc --input helloworld.proto --mode service --output service\n```\nOnce you execute the command, the stub file (`helloworld_pb.bal`) and the service template file (`greeter_service.bal`) are generated inside the service directory.\n> **Note:** If you have multiple services in a Protocol Buffers definition, this command will generate a stub file with common message types and a service template file for each service definition. This is to avoid duplicating message types in all the service files.\n\n\n* Execute the following command to generate the client/service stub and client template files.\n```\n$ bal grpc --input helloworld.proto --mode client --output client\n```\nOnce you execute the command, the stub file (`helloworld_pb.bal`) and the client template file (`greeter_client.bal`) are generated inside the client directory.\n\n\n* Execute the following command to generate only the client/service stub file.\n```\n$ bal grpc --input helloworld.proto --output stubs\n```\nOnce you execute the command, only the stub file (`helloworld_pb.bal`) is generated inside the `stubs` directory.\n","id":"grpc","sub":"ballerina-tooling","third":"cli-documentation","slug":"ballerina-tooling/cli-documentation/grpc"},"__N_SSG":true}