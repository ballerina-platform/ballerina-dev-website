{"pageProps":{"frontmatter":{},"content":"<div class=\"release_notes\">\n<h1>Overview of Ballerina 0.991.0</h1>\n<p>Ballerina 0.991.0 consists of improvements to the language syntax and semantics based on the language specification and new features and improvements to the standard library modules, extensions, and tooling.</p>\n<h1>Highlights</h1>\n<ul>\n<li>Improved error handling with new checkpanic expression. Now, error values cannot be ignored using &ldquo;_&rdquo;.</li>\n<li>Improved type checking with the union type.</li>\n<li>Improved syntax for the closed record, closed arrays, and string/XML interpolation etc.</li>\n<li>Additionally, this release includes several fixes to address Ballerina language specification deviations from the Ballerina 0.990 specification.</li>\n</ul>\n<h1>Breaking Language Changes</h1>\n<ul>\n<li>Closed record syntax was updated to use the {| and |} delimiters to indicate that the record is closed.</li>\n</ul>\n<p><em>Previous syntax</em></p>\n<pre class=\"line-numbers language-ballerina\"><code class=\"language-ballerina\">type Person record {\n    string name;\n    int age;\n    !...;\n};\n</code></pre>\n\n<p><em>New syntax</em></p>\n<pre class=\"line-numbers language-ballerina\"><code class=\"language-ballerina\">type Person record {|\n    string name;\n    int age;\n|};\n</code></pre>\n\n<ul>\n<li>The syntax for destructure binding pattern for closed records was also updated to use the {| and |} delimiters.</li>\n</ul>\n<p><em>Previous syntax</em></p>\n<pre class=\"line-numbers language-ballerina\"><code class=\"language-ballerina\">Person p = { name: &quot;John Doe&quot;, age: 25 };\nPerson { name: pName, age: pAge, !... } = p;\n</code></pre>\n\n<p><em>New syntax</em></p>\n<pre class=\"line-numbers language-ballerina\"><code class=\"language-ballerina\">Person p = { name: &quot;John Doe&quot;, age: 25 };\nPerson {| name: pName, age: pAge |} = p;\n</code></pre>\n\n<ul>\n<li>The syntax for closed arrays with inferred length was changed as follows.</li>\n</ul>\n<p><em>Previous syntax</em></p>\n<pre class=\"line-numbers language-ballerina\"><code class=\"language-ballerina\">string[!...] array = [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;];\n</code></pre>\n\n<p><em>New syntax</em></p>\n<pre class=\"line-numbers language-ballerina\"><code class=\"language-ballerina\">string[*] array = [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;];\n</code></pre>\n\n<ul>\n<li>\n<p>It is now mandatory for list element types to have an implicit initial value. Where a type <code>T</code> does not have an implicit initial value, a <code>T?[]</code> could be used.</p>\n</li>\n<li>\n<p>Use of the <code>null</code> literal is now restricted to JSON contexts.</p>\n</li>\n</ul>\n<pre class=\"line-numbers language-ballerina\"><code class=\"language-ballerina\">json response = null; // Allowed\nstring? name = null; // Compile error\n</code></pre>\n\n<ul>\n<li>String template expression interpolation syntax was updated.</li>\n</ul>\n<p><em>Previous syntax</em></p>\n<pre class=\"line-numbers language-ballerina\"><code class=\"language-ballerina\">string s = string `Hello {{name}}!`;\n</code></pre>\n\n<p><em>New syntax</em></p>\n<<pre class=\"line-numbers language-ballerina\"><code class=\"language-ballerina\">string s = string `Hello ${name}!`;\n</code></pre>\n\n<ul>\n<li>XML literal interpolation syntax was updated.</li>\n</ul>\n<p><em>Previous syntax</em></p>\n<pre class=\"line-numbers language-ballerina\"><code class=\"language-ballerina\">xml x = xml `&lt;Person name={{name}}&gt;{{content}}&lt;/Person&gt;`;\n</code></pre>\n\n<p><em>New syntax</em></p>\n<pre class=\"line-numbers language-ballerina\"><code class=\"language-ballerina\">xml x = xml `&lt;Person name=${name}&gt;${content}&lt;/Person&gt;`;\n</code></pre>\n\n<ul>\n<li>\n<p>Interpolating XML elements and attribute names are no longer supported.</p>\n</li>\n<li>\n<p>The XML attribute expression now directly returns the attributes of a singleton <code>xml</code> element as a  <code>map&lt;string&gt;</code> or <code>()</code> if the operand is not a singleton <code>xml</code>.</p>\n</li>\n</ul>\n<p><em>Previous syntax</em></p>\n<pre class=\"line-numbers language-ballerina\"><code class=\"language-ballerina\">map&lt;anydata&gt; attributeMap = map&lt;anydata&gt;.convert(x1@);\n</code></pre>\n\n<p><em>New syntax</em></p>\n<pre class=\"line-numbers language-ballerina\"><code class=\"language-ballerina\">map&lt;string&gt;? attributeMap = x1@;\n</code></pre>\n\n<ul>\n<li>\n<p>Error values can no longer be ignored using “<em>”.  If the result of an expression is an <code>error</code> type or is a union that contains an <code>error</code> type, the result cannot be ignored using “</em>”. This is to enforce the user to handle all possible errors.</p>\n</li>\n<li>\n<p>The capability to consider (run) any public function as an entry point to a Ballerina program was removed.</p>\n</li>\n<li>\n<p>The types of the parameters and the return type of the <code>main</code> function were restricted to subtypes of <code>anydata</code> and <code>error?</code> respectively.</p>\n</li>\n<li>\n<p>The diamond operator was updated to perform type-casting as follows:</p>\n</li>\n</ul>\n<pre class=\"line-numbers language-ballerina\"><code class=\"language-ballerina\">Foo f = &lt;Foo&gt; value;\n</code></pre>\n\n<p>If <code>value</code> belongs to <code>Foo</code>, casting will be successful and <code>value</code> will be assigned to <code>f</code>. Else, casting will result in a panic.</p>\n<ul>\n<li>\n<p>The type of the <code>error</code> detail is now restricted to be a mapping that could only have fields of types that are subtypes of <code>anydata|error</code>.</p>\n</li>\n<li>\n<p>The default record rest field type was changed to <code>anydata|error</code> from <code>anydata</code>.</p>\n</li>\n<li>\n<p><code>anydata</code> was updated to include structures of pure values (values whose types are subtypes of <code>anydata|error</code>). <code>anydata</code> is now the union of the following:</p>\n</li>\n</ul>\n<pre class=\"line-numbers language-ballerina\"><code class=\"language-ballerina\">() | boolean | int | float | decimal | string | (anydata|error)[] | map&lt;anydata|error&gt; | xml | table</code></pre>\n\n<ul>\n<li>\n<p>Module variable declarations are not allowed to be <code>public</code> now and also require an assignment.</p>\n</li>\n<li>\n<p>The syntax for functions with external implementations has been changed as follows:</p>\n</li>\n</ul>\n<p><em>Previous syntax</em></p>\n<pre class=\"line-numbers language-ballerina\"><code class=\"language-ballerina\">extern function externFunction();\n</code></pre>\n\n<p><em>New syntax</em></p>\n<pre class=\"line-numbers language-ballerina\"><code class=\"language-ballerina\">function externFunction() = external;\n</code></pre>\n\n<ul>\n<li>The signature of the <code>__attach()</code> method of <code>AbstractListener</code> has been changed as follows:</li>\n</ul>\n<p><em>Previous signature</em></p>\n<pre class=\"line-numbers language-ballerina\"><code class=\"language-ballerina\">public function __attach(service s, map&lt;any&gt; annotationData) returns error?\n</code></pre>\n\n<p><em>New signature</em></p>\n<pre class=\"line-numbers language-ballerina\"><code class=\"language-ballerina\">public function __attach(service s, string? name = ()) returns error?;\n</code></pre>\n\n<ul>\n<li>Type narrowing does not apply to global variables now.</li>\n</ul>\n<h1>Breaking Standard Library Changes</h1>\n<h2>Crypto Library Changes</h2>\n<ul>\n<li>Ballerina crypto stdlib was made flexible enough to introduce new features and algorithms in future.</li>\n</ul>\n<p><em>Previous syntax</em></p>\n<pre class=\"line-numbers language-ballerina\"><code class=\"language-ballerina\">string input = &quot;Hello Ballerina&quot;;\ncrypto:hash(input, crypto:MD5)\n</code></pre>\n\n<p><em>New syntax</em></p>\n<pre class=\"line-numbers language-ballerina\"><code class=\"language-ballerina\">string input = &quot;Hello Ballerina&quot;;\nbyte[] inputArr = input.toByteArray(&quot;UTF-8&quot;);\nbyte[] output = crypto:hashMd5(inputArr);\n</code></pre>\n\n<h2>gRPC Library Changes</h2>\n<p>Ballerina gRPC client initialization in the generated code is changed. Generated file(*.pb.bal) from previous versions of Ballerina distributions will not be worked with this release. Regenerate the client stub using proto to Ballerina tool and replace the previously generated file with the new one.</p>\n<h2>Task Library Changes</h2>\n<p>Redesigned the Task library to function as a service. The previous task implementation of <code>task:Timer</code> and <code>task:Appointment</code> will be deferred and new <code>task:Listener</code> and <code>task:Scheduler</code> objects are introduced to create task timers and appointments.</p>\n<p>Tasks now can be defined as a service and as an object. Both the previously existed Timer and Appointment functionalities can be used by new Listener and/or Scheduler.</p>\n<h3>Timer</h3>\n<p>Timer was previously created by providing <code>onTrigger</code> and <code>onError</code> functions along with the <code>interval</code> and <code>delay</code> parameters. Now <code>interval</code> and <code>delay</code> parameters are provided through a <code>task:TimerConfiguration</code> record type, while <code>onTrigger</code>  function should be implemented as a resource function inside the attaching service. \nService can be created on top of a <code>task:Listener</code> or can be manually attached to a <code>task:Scheduler</code> object. </p>\n<p><em>Previous Syntax</em></p>\n<pre class=\"line-numbers language-ballerina\"><code class=\"language-ballerina\">function startTimer() {\n    ((function) returns error?) onTriggerFunction = cleanup;\n    function (error) onErrorFunction = cleanupError;\n    timer = new task:Timer(onTriggerFunction, onErrorFunction, 1000, delay = 500);\n    timer.start();\n}\n\nfunction cleanup() returns error? {\n    // onTriggerFunction\n}\n\nfunction cleanupError(error e) {\n    // handle error\n}\n</code></pre>\n\n<p><em>New Syntax</em></p>\n<pre class=\"line-numbers language-ballerina\"><code class=\"language-ballerina\">function startTimer() {\n    task:TimerConfiguration timerConfiguration = {\n        interval: 1000,\n        initialDelay: 500\n    }\n    task:Scheduler timer = new(timerConfguration);\n    var attachResult = timer.attach(timerService);\n    if (attachResult is error) {\n        // handle error\n    } else {\n        var startResult = timer.start();\n        if (startResult is error) {\n            // handle error\n        } else {\n            // successfully started timer\n        }\n    }\n}\n\nService timerService = service {\n    resource function onTrigger() {\n        // onTrigger function\n    }\n}\n\n</code></pre>\n\n<p>OR</p>\n<pre class=\"line-numbers language-ballerina\"><code class=\"language-ballerina\">task:TimerConfiguration timerConfiguration = {\n   interval: 1000,\n   initialDelay: 3000\n};\nlistener task:Listener timer = new(timerConfiguration);\nService timerService on timer {\n    resource function onTrigger() {\n        // onTrigger function\n    }\n}\n</code></pre>\n\n<h3>Appointment</h3>\n<p><code>task:Appointment</code> functionality can be implemented using <code>task:Listener</code> and the <code>task:Scheduler</code> objects. Previously the <code>cronExpression</code> used for the appointment given as a parameter, along with the <code>onTrigger</code> and <code>onError</code> functions. Now the <code>cronExpression</code> should be provided using <code>appointmentDetails</code> field inside the  <code>task:AppointmentConfiguration</code> record type. Alternatively, <code>task:AppointmentData</code> record can also be provided as the <code>appointmentDetails</code> field (see below examples).\n<code>onTrigger</code> function should be implemented inside a service, and the service can be created on top a <code>task:Listener</code> or the service can be attached to a <code>task:Scheduler</code> object, manually.</p>\n<p><em>Previous Syntax</em></p>\n<pre class=\"line-numbers language-ballerina\"><code class=\"language-ballerina\">function startAppointment() {\n    ((function) returns error?) onTriggerFunction = cleanup;\n    function (error) onErrorFunction = cleanupError;\n    appointment = new task:Appointment(onTriggerFunction, onErrorFunction, &quot;0/2 * * * * ?&quot;);\n    appointment.schedule();\n}\n\nfunction cleanup() returns error? {\n    // onTrigger function\n}\n\nfunction cleanupError(error e) {\n    // handle error\n}\n</code></pre>\n\n<p><em>New Syntax</em></p>\n<pre class=\"line-numbers language-ballerina\"><code class=\"language-ballerina\">task:AppointmentData appointmentData = {\n    seconds: &quot;0/2&quot;,\n    minutes: &quot;*&quot;,\n    hours: &quot;*&quot;,\n    daysOfMonth: &quot;?&quot;,\n    months: &quot;*&quot;,\n    daysOfWeek: &quot;*&quot;,\n    year: &quot;*&quot;\n};\n\ntask:AppointmentConfiguration appointmentConfiguration = {\n    appointmentDetails: appointmentData\n};\n\nlistener task:Listener appointment = new(appointmentConfiguration);\n\nservice appointmentService on appointment {\n    resource function onTrigger() {\n        // onTriggerFunction\n    }\n}\n\n</code></pre>\n\n<p>OR</p>\n<pre class=\"line-numbers language-ballerina\"><code class=\"language-ballerina\">function startAppointment() {\n    task:AppointmentConfiguration appointmentConfiguration = {\n        appointmentDetails: “0/2 * * * * ?”\n    };\n    task:Scheduler appointment = new(appointmentConfiguration);\n    var attachResult = appointment.attach(appointmentService);\n    if (attachResult is error) {\n        // handle error\n    } else {\n        var startResult = appointment.start();\n        if (startResult is error) {\n            // handle error\n        } else {\n            // successfully started the appointment\n        }\n    }\n}\n\nservice appointmentService = service {\n    resource function onTrigger() {\n        // onTrigger function\n    }\n}\n</code></pre>\n\n<h2>Time Library Changes</h2>\n<p>The <code>format</code>, <code>parse</code>, <code>createTime</code>and <code>toTimeZone</code>  functions are changed to return errors when there is an issue.</p>\n<p><em>Previous Syntax</em></p>\n<pre class=\"line-numbers language-ballerina\"><code class=\"language-ballerina\">time:Time timeVal = time:parse(&quot;2016-03-01T09:46:22.444&quot;, yyyy-MM-dd'T'HH:mm:ss.SSS&quot;);\n</code></pre>\n\n<p><em>New Syntax</em></p>\n<pre class=\"line-numbers language-ballerina\"><code class=\"language-ballerina\">time:Time|error timeVal = time:parse(&quot;2016-03-01T09:46:22.444&quot;, yyyy-MM-dd'T'HH:mm:ss.SSS&quot;);\n</code></pre>\n\n<h1>What&rsquo;s new in Ballerina 0.991.0</h1>\n<h2>Language &amp; Runtime</h2>\n<ul>\n<li>Introduction of the <code>checkpanic</code> unary expression</li>\n<li><code>checkpanic</code> is a unary expression that is used to handle errors. The <code>checkpanic</code> expression checks the result of the sub-expression and panics if the result is <code>error</code>.</li>\n<li>\n<p>The only difference between the <code>checkpanic</code> expression and the <code>check</code> expression is that, if the result of the sub-expression is of type <code>error</code>, the <code>checkpanic</code> expression results in a panic while the <code>check</code> expression returns the <code>error</code> value.</p>\n</li>\n<li>\n<p>Error values can now be destructured using binding patterns and typed binding patterns as follows,</p>\n</li>\n</ul>\n<pre class=\"line-numbers language-ballerina\"><code class=\"language-ballerina\">// Usage of error typed binding pattern.\nvar error (reasonString, detailMap) = getErrorValue();\n\n// Usage of error binding pattern.\nstring reasonString;\nmap&lt;anydata|error&gt; detailMap;\nerror (reasonString, detailMap) = getErrorValue();\n</code></pre>\n\n<ul>\n<li>\n<p>Value equality checks (<code>==</code>, <code>!=</code>) are now allowed with <code>error</code> values.</p>\n</li>\n<li>\n<p>The return signature of the initializer of an object can now be <code>error?</code> (sub types of <code>error</code> allowed) or <code>()</code>.</p>\n</li>\n</ul>\n<pre class=\"line-numbers language-ballerina\"><code class=\"language-ballerina\">type Person object {\n    string name;\n\n    function __init(string name) returns error? {\n        self.name = check fnWithPotentialErrorReturn(name);\n    };\n}\n\n// Usage\nPerson|error person = new(&quot;John Doe&quot;);\n</code></pre>\n\n<ul>\n<li>Tuple type is now iterable via the <code>foreach</code> statement.</li>\n<li>Patterns in the static value match statement now support const values.</li>\n<li>String can concatenate into XML values and the string part is automatically converted to an XML character sequence, resulting in XML concatenation. This supports both &lsquo;+&rsquo; and &lsquo;+=&rsquo; operators.</li>\n</ul>\n<pre class=\"line-numbers language-ballerina\"><code class=\"language-ballerina\">xml xValue = xml `&lt;name&gt;John&lt;/name&gt;`;\nxml yValue = xValue + &quot;suf&quot;;\nyValue += &quot;fix&quot;;\nio:println(yValue);\n</code></pre>\n\n<h2>Standard Library</h2>\n<ul>\n<li>Introduced NATS connector.</li>\n<li>Introduced Artemis connector.</li>\n<li>Introduced RabbitMQ connector.</li>\n<li>Introduced OAuth2 password grant type and client credentials grant type along with the direct token mode for outbound authentication.</li>\n<li>Added support for password hashing techniques for basic auth authentication.</li>\n<li>Introduced filepath module with a set of utility functions to manipulate the file path in a way that is compatible with the target operating system.</li>\n<li>Introduced an &ldquo;encoding&rdquo; API to perform byte[] to string conversions using different encoding mechanisms.</li>\n<li>Introduced RSA and AES encryption/decryption capabilities to the crypto API.</li>\n<li>Introduced RSA signing operations to the crypto API.</li>\n<li>Improved h2/mysql/jdbc database clients to share a single, global connection pool for interacting with the same database with same connection properties. The option to use an unshared or a locally shared custom pool is provided.</li>\n<li>Introduced a shared global connection pool for HTTP client connectors. Per-client pools are also possible with <code>http:PoolConfiguration</code>.</li>\n<li>Improved the HTTP/2 client connection pool to distribute the request load among I/O threads properly.</li>\n</ul>\n<h2>IDEs &amp; Language Server</h2>\n<ul>\n<li>The Language Server Extension API to contribute custom completions.</li>\n<li>Improvements to the Go-To definition, Find all references and Rename features.</li>\n<li>Diagram view function collapsing capability. This feature allows you to expand functions in a sequence diagram to view its internal logic.</li>\n</ul>\n<h3>IDEA Plugin</h3>\n<ul>\n<li>Improved performance, stability, and reduced plugin size with “Lsp4IntelliJ” language client support.</li>\n<li>Ballerina language server-based code formatting.</li>\n<li>Minor bug fixes and improvements.</li>\n</ul>\n<h2>Compiler Extensions</h2>\n<ul>\n<li>Support for generating OpenShift artifacts.</li>\n</ul>\n<h1>Performance Results</h1>\n<p>See Ballerina <a href=\"https://github.com/ballerina-platform/ballerina-lang/blob/v0.991.0/performance/benchmarks/summary.md\">performance test results</a>, which is available in the repository.</p>\n<h1>Bug Fixes</h1>\n<p>See <a href=\"https://github.com/ballerina-platform/ballerina-lang/issues?q=is%3Aissue+milestone%3A0.991.0+is%3Aclosed+label%3AType%2FBug\">Github milestone issues</a> to view bug fixes.</p>\n<h1>Getting Started</h1>\n<p>You can download the Ballerina distributions, try samples, and read the documentation at <a href=\"https://ballerina.io\">https://ballerina.io</a>. You can also visit <a href=\"https://ballerina.io/learn/quick-tour/\">Quick Tour</a> to get started.</p>\n<p>We encourage you to report issues, improvements, and suggestions at the <a href=\"https://github.com/ballerina-platform/ballerina-lang\">Ballerina Github Repository</a>.</p>\n</div>","id":"0.991.0"},"__N_SSG":true}