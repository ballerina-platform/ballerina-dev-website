{"pageProps":{"frontmatter":{"title":"Ballerina Profiler","description":"Check out how you can run and profile a Ballerina program.","keywords":"ballerina runtime, troubleshoot, profiler, CPU profile, flame graph","permalink":"/learn/ballerina-profiler/","active":"ballerina-profiler"},"content":"\nImprovements in your Ballerina code might be required to increase its runtime performance, minimize code execution times, increase throughput, and reduce latency. To do that, you need to identify performance bottlenecks, implications of concurrent executions, which code segments take longer to execute, and areas to improve performance. This can be done by using a profiler.\n\nBallerina Profiler is a tool that monitors the Ballerina runtime and its operations such as function calls. It can be used to understand the behavior and troubleshoot the performance issues of a Ballerina program and optimize it.\n\n>**Note:** Ballerina Profiler is an experimental feature, which supports only a limited set of functionality. The commands associated with the tool might change in future releases.\n\n## Features\n\n- Profile a local session of a Ballerina program through offline instrumentation.\n\n- Perform CPU profiling, which finds out where the CPU time is going.\n\n- Generate a flame graph, which shows the function call stack and the execution times of each function call. It provides an interface for viewing runtime performance and the ability to search, diagnose, and find performance bottlenecks.\n\n>**Note:** Profiling is a high-powered activity with a heavy overhead and can slow down your application.\n\n## Profile a Ballerina program\n\nTo profile a Ballerina package, you can use the `bal profile` CLI command inside the root directory of the Ballerina package.\n\nConsider the following step-by-step guide to profile a Ballerina package.\n\n1. Create a Ballerina package named `sort` using the `bal new` CLI command.\n\n```\n$ bal new sort \n```\n\n2. Go to the root directory of the Ballerina package.\n\n```\n$ cd sort\n```\n\n3. Replace the contents of the `main.bal` file with the following Ballerina code, which creates an array of random integers, sorts them, and verifies the output.\n\n```ballerina\nimport ballerina/io;\nimport ballerina/random;\n\npublic function main() returns error? {\n    int[] arr = check createRandomIntArray(check float:pow(10, 2).cloneWithType(int));\n    int[] sortedArr = bubbleSort(arr);\n    boolean isSorted = isSortedArray(sortedArr);\n    io:println(\"Is the array sorted? \" + isSorted.toString());\n}\n\npublic isolated function bubbleSort(int[] arr) returns int[] {\n    int n = arr.length();\n    int temp = 0;\n    boolean swapped = false;\n    foreach int i in 0 ... n - 2 {\n        foreach int j in 1 ... n - 1 - i {\n            if (arr[j - 1] > arr[j]) {\n                temp = arr[j - 1];\n                arr[j - 1] = arr[j];\n                arr[j] = temp;\n                swapped = true;\n            }\n        }\n        if (!swapped) {\n            break;\n        }\n    }\n    return arr;\n}\n\nisolated function isSortedArray(int[] sortedArr) returns boolean {\n    foreach int i in 0 ..< sortedArr.length() - 1 {\n        if (sortedArr[i] > sortedArr[i + 1]) {\n            return false;\n        }\n    }\n    return true;\n}\n\nisolated function createRandomIntArray(int size) returns int[]|error {\n    int[] array = [];\n    foreach int i in 0 ..< size {\n        array.push(check random:createIntInRange(0, int:MAX_VALUE));\n    }\n    return array;\n}\n```\n\n4. Run and profile the Ballerina package using the `bal profile` CLI command.\n\n```\n$ bal profile\n```\n\nYou view the output below.\n\n```\nCompiling source\n        profiler_demo/sort:0.1.0\n\nGenerating executable\n        target/bin/sort.jar\n\n================================================================================\nBallerina Profiler: Profiling...\n================================================================================\nNote: This is an experimental feature, which supports only a limited set of functionality.\n[1/6] Initializing...\n[2/6] Copying executable...\n[3/6] Performing analysis...\n[4/6] Instrumenting functions...\n ○ Instrumented module count: 31\n ○ Instrumented function count: 1016\n[5/6] Running executable...\nIs the array sorted? true\n[6/6] Generating output...\n ○ Execution time: 3 seconds \n ○ Output: target/bin/ProfilerOutput.html\n-------------------------------------------------------------------------------\n```\n\n5. Open the `target/bin/ProfilerOutput.html` file using a web browser window to examine the Ballerina Profiler output to find the slow-running functions and performance bottlenecks, which can then be addressed to improve the program’s overall performance.\n\n## Profiler output and available details\n\nThe flame graph generated by the Ballerina Profiler contains the following details.\n\n1. Function call stack\n\n2. Time taken to execute each function and its percentage\n\n![Profiler output](/learn/images/profiler-output.png \"Profiler output\")\n\nFlame graph also has the following features.\n\n1. Search a function.\n\n![Search function inside flame graph](/learn/images/search-function-inside-flame-graph.png \"Search function inside flame graph\")\n\n2. Clear the search.\n\n3. Click on a function call and zoom the view.\n\n![Click function and zoom flame graph](/learn/images/click-function-and-zoom-flame-graph.png \"Click function and zoom flame graph\")\n\n4. Reset the view.\n\n## Examine the output and find performance bottlenecks\n\nWhen you observe the flame graph generated by the Ballerina Profile for the above code, you can see the `bubbleSort` function has taken the most time to execute.\n\n![Bubble sort function time](/learn/images/bubble-sort-function-time.png \"Bubble sort function time\")\n\nLet's try to optimize the sorting function to increase the performance of the Ballerina application.\n\n## Optimize the Ballerina code\n\nIn this example, you will use another sorting algorithm to reduce the time taken to execute the application. Replace the `main.bal` file with the code below, which uses the merge sort algorithm instead of the bubble sort algorithm for sorting.\n\n```ballerina\nimport ballerina/io;\nimport ballerina/random;\n\npublic function main() returns error? {\n    int[] arr = check createRandomIntArray(check float:pow(10, 2).cloneWithType(int));\n    int[] sortedArr = mergeSort(arr);\n    boolean isSorted = isSortedArray(sortedArr);\n    io:println(\"Is the array sorted? \" + isSorted.toString());\n}\n\npublic isolated function mergeSort(int[] arr) returns int[] {\n    int n = arr.length();\n    int width = 1;\n    while (width < n) {\n        int l = 0;\n        while (l < n) {\n            int r = int:min(l + (width * 2 - 1), n - 1);\n            int m = int:min(l + width - 1, n - 1);\n            merge(arr, l, m, r);\n            l += width * 2;\n        }\n        width *= 2;\n    }\n    return arr;\n}\n\nisolated function merge(int[] a, int l, int m, int r) {\n    int n1 = m - l + 1;\n    int n2 = r - m;\n    int[] L = [];\n    int[] R = [];\n    foreach int i in int:range(0, n1, 1) {\n        L[i] = a[l + i];\n    }\n    foreach int i in int:range(0, n2, 1) {\n        R[i] = a[m + i + 1];\n    }\n    int i = 0;\n    int j = 0;\n    int k = l;\n    while (i < n1 && j < n2) {\n        if L[i] <= R[j] {\n            a[k] = L[i];\n            i += 1;\n        } else {\n            a[k] = R[j];\n            j += 1;\n        }\n        k += 1;\n    }\n    while (i < n1) {\n        a[k] = L[i];\n        i += 1;\n        k += 1;\n    }\n    while (j < n2) {\n        a[k] = R[j];\n        j += 1;\n        k += 1;\n    }\n}\n\nisolated function isSortedArray(int[] sortedArr) returns boolean {\n    foreach int i in 0 ..< sortedArr.length() - 1 {\n        if (sortedArr[i] > sortedArr[i + 1]) {\n            return false;\n        }\n    }\n    return true;\n}\n\nisolated function createRandomIntArray(int size) returns int[]|error {\n    int[] array = [];\n    foreach int i in 0 ..< size {\n        array.push(check random:createIntInRange(0, int:MAX_VALUE));\n    }\n    return array;\n}\n```\n\nWhen you profile the code again, you can see that you have reduced the time taken for sorting substantially and have improved the performance of the application.\n\n![Merge sort function time](/learn/images/merge-sort-function-time.png \"Merge sort function time\")\n\n## Profile a Ballerina service\n\nConsider the following step-by-step guide to profile a Ballerina package that contains an HTTP service.\n\n1. Create a new Ballerina package and replace the `main.bal` file with the below code.\n\n```ballerina\nimport ballerina/http;\n\ntype Country record {\n    string country;\n    int population;\n    string continent;\n    int cases;\n    int deaths;\n};\n\ntype Data record {|\n    string country;\n    string continent;\n    int population;\n    decimal caseFatalityRatio;\n|};\n\nhttp:Client diseaseEp = check new (\"https://disease.sh/v3\");\nfinal Country[] & readonly countries;\n\nfunction init() returns error? {\n    countries = check diseaseEp->/covid\\-19/countries;\n}\n\nservice /covid19/countries on new http:Listener(8080) {\n    resource function get summary() returns json {\n        Data[] listResult = from var {country, continent, population, cases, deaths} in countries\n            where hasSignificantPopulation(population, deaths)\n            let decimal caseFatalityRatio = <decimal>deaths / <decimal>cases * 100\n            order by caseFatalityRatio descending\n            limit 1000\n            select {country, continent, population, caseFatalityRatio};\n        return getTopSortedValues(listResult);\n    }\n\n    isolated resource function get names() returns json {\n        return from var {country, population, deaths} in countries\n            where hasNonZeroPopulation(population, deaths)\n            select {country};\n    }\n}\n\nisolated function getTopSortedValues(Data[] listResult) returns json[] {\n    json[] sortedArray = listResult.sort(\"ascending\", getKey);\n    return getTopElements(sortedArray);\n}\n\nisolated function getTopElements(json[] sortedArray) returns json[] {\n    return from var i in sortedArray\n        limit 10\n        select i;\n}\n\nisolated function hasSignificantPopulation(int population, int deaths) returns boolean {\n    return population >= 100 && deaths >= 10;\n}\n\nisolated function hasNonZeroPopulation(int population, int deaths) returns boolean {\n    return population >= 0 && deaths >= 0;\n}\n\nisolated function getKey(record {|string country; string continent; int population; decimal caseFatalityRatio;|} recordVal) returns string {\n    return recordVal.country;\n}\n```\n\n2. Run the CLI command `bal profile` in the root directory to run the Ballerina package and profile it. This will run the service while profiling it.\n\n```\n$ bal profile\nCompiling source\n        profiler_demo/covid19_stats:0.1.0\n\nGenerating executable\n        target/bin/covid19_stats.jar\n\n================================================================================\nBallerina Profiler: Profiling...\n================================================================================\nNote: This is an experimental feature, which supports only a limited set of functionality.\n[1/6] Initializing...\n[2/6] Copying executable...\n[3/6] Performing analysis...\n[4/6] Instrumenting functions...\n ○ Instrumented module count: 44\n ○ Instrumented function count: 2935\n[5/6] Running executable...\n```\n\n3. Send 10 requests to each resource endpoint using the `curl` command.\n\n```\n$ curl localhost:8080/covid19/countries/names\n```\n\n```\n$ curl localhost:8080/covid19/countries/summary\n```\n\n4. Stop the service by sending the `SIGINT` signal to the Ballerina program. You can use `Ctrl+C` in the service running terminal to send the signal to it. This will stop both the Ballerina program and profiling it and will generate the profiler output.\n\n```\n[6/6] Generating output...\n ○ Execution time: 58 seconds \n ○ Output: target/bin/ProfilerOutput.html\n--------------------------------------------------------------------------------\n```\n\n5. Open the `target/bin/ProfilerOutput.html` file using a web browser to observe the flame graph generated by the profiler.\n\n![Profiler output of a Ballerina service](/learn/images/ballerina-service-profiler-output.png \"Profiler output of a Ballerina service\")\n\nBy observing the flame graph you can see that the `get summary` resource function takes more time than the `get names` resource function. You can use the profiler output data to improve the performance of the Ballerina service.\n","id":"ballerina-profiler","sub":"troubleshoot-the-runtime","third":"","slug":"troubleshoot-the-runtime/ballerina-profiler","codes":"[[661608547,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color:#fff;color:#24292e\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">import</span><span style=\\\"color:#24292E\\\"> ballerina/io;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">import</span><span style=\\\"color:#24292E\\\"> ballerina/random;</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">public</span><span style=\\\"color:#D73A49\\\"> function</span><span style=\\\"color:#6F42C1\\\"> main</span><span style=\\\"color:#24292E\\\">() </span><span style=\\\"color:#D73A49\\\">returns</span><span style=\\\"color:#D73A49\\\"> error?</span><span style=\\\"color:#24292E\\\"> {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#005CC5\\\">    int</span><span style=\\\"color:#24292E\\\">[] arr </span><span style=\\\"color:#D73A49\\\">=</span><span style=\\\"color:#D73A49\\\"> check</span><span style=\\\"color:#6F42C1\\\"> createRandomIntArray</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#D73A49\\\">check</span><span style=\\\"color:#005CC5\\\"> float</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#6F42C1\\\">pow</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#005CC5\\\">10</span><span style=\\\"color:#24292E\\\">, </span><span style=\\\"color:#005CC5\\\">2</span><span style=\\\"color:#24292E\\\">).</span><span style=\\\"color:#6F42C1\\\">cloneWithType</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#005CC5\\\">int</span><span style=\\\"color:#24292E\\\">));</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#005CC5\\\">    int</span><span style=\\\"color:#24292E\\\">[] sortedArr </span><span style=\\\"color:#D73A49\\\">=</span><span style=\\\"color:#6F42C1\\\"> bubbleSort</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#E36209\\\">arr</span><span style=\\\"color:#24292E\\\">);</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#005CC5\\\">    boolean</span><span style=\\\"color:#24292E\\\"> isSorted </span><span style=\\\"color:#D73A49\\\">=</span><span style=\\\"color:#6F42C1\\\"> isSortedArray</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#E36209\\\">sortedArr</span><span style=\\\"color:#24292E\\\">);</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">    io</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#6F42C1\\\">println</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#032F62\\\">\\\"Is the array sorted? \\\"</span><span style=\\\"color:#D73A49\\\"> +</span><span style=\\\"color:#24292E\\\"> isSorted.</span><span style=\\\"color:#6F42C1\\\">toString</span><span style=\\\"color:#24292E\\\">());</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">}</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">public</span><span style=\\\"color:#D73A49\\\"> isolated</span><span style=\\\"color:#D73A49\\\"> function</span><span style=\\\"color:#6F42C1\\\"> bubbleSort</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#005CC5\\\">int</span><span style=\\\"color:#24292E\\\">[] </span><span style=\\\"color:#E36209\\\">arr</span><span style=\\\"color:#24292E\\\">) </span><span style=\\\"color:#D73A49\\\">returns</span><span style=\\\"color:#005CC5\\\"> int</span><span style=\\\"color:#24292E\\\">[] {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#005CC5\\\">    int</span><span style=\\\"color:#24292E\\\"> n </span><span style=\\\"color:#D73A49\\\">=</span><span style=\\\"color:#24292E\\\"> arr.</span><span style=\\\"color:#6F42C1\\\">length</span><span style=\\\"color:#24292E\\\">();</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#005CC5\\\">    int</span><span style=\\\"color:#24292E\\\"> temp </span><span style=\\\"color:#D73A49\\\">=</span><span style=\\\"color:#005CC5\\\"> 0</span><span style=\\\"color:#24292E\\\">;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#005CC5\\\">    boolean</span><span style=\\\"color:#24292E\\\"> swapped </span><span style=\\\"color:#D73A49\\\">=</span><span style=\\\"color:#D73A49\\\"> false</span><span style=\\\"color:#24292E\\\">;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">    foreach </span><span style=\\\"color:#005CC5\\\">int</span><span style=\\\"color:#24292E\\\"> i </span><span style=\\\"color:#D73A49\\\">in</span><span style=\\\"color:#005CC5\\\"> 0</span><span style=\\\"color:#D73A49\\\"> ...</span><span style=\\\"color:#24292E\\\"> n </span><span style=\\\"color:#D73A49\\\">-</span><span style=\\\"color:#005CC5\\\"> 2</span><span style=\\\"color:#24292E\\\"> {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">        foreach </span><span style=\\\"color:#005CC5\\\">int</span><span style=\\\"color:#24292E\\\"> j </span><span style=\\\"color:#D73A49\\\">in</span><span style=\\\"color:#005CC5\\\"> 1</span><span style=\\\"color:#D73A49\\\"> ...</span><span style=\\\"color:#24292E\\\"> n </span><span style=\\\"color:#D73A49\\\">-</span><span style=\\\"color:#005CC5\\\"> 1</span><span style=\\\"color:#D73A49\\\"> -</span><span style=\\\"color:#24292E\\\"> i {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">            if</span><span style=\\\"color:#24292E\\\"> (arr[j </span><span style=\\\"color:#D73A49\\\">-</span><span style=\\\"color:#005CC5\\\"> 1</span><span style=\\\"color:#24292E\\\">] </span><span style=\\\"color:#D73A49\\\">></span><span style=\\\"color:#24292E\\\"> arr[j]) {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">                temp </span><span style=\\\"color:#D73A49\\\">=</span><span style=\\\"color:#24292E\\\"> arr[j </span><span style=\\\"color:#D73A49\\\">-</span><span style=\\\"color:#005CC5\\\"> 1</span><span style=\\\"color:#24292E\\\">];</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">                arr[j </span><span style=\\\"color:#D73A49\\\">-</span><span style=\\\"color:#005CC5\\\"> 1</span><span style=\\\"color:#24292E\\\">] </span><span style=\\\"color:#D73A49\\\">=</span><span style=\\\"color:#24292E\\\"> arr[j];</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">                arr[j] </span><span style=\\\"color:#D73A49\\\">=</span><span style=\\\"color:#24292E\\\"> temp;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">                swapped </span><span style=\\\"color:#D73A49\\\">=</span><span style=\\\"color:#D73A49\\\"> true</span><span style=\\\"color:#24292E\\\">;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">            }</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">        }</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">        if</span><span style=\\\"color:#24292E\\\"> (</span><span style=\\\"color:#D73A49\\\">!</span><span style=\\\"color:#24292E\\\">swapped) {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">            break</span><span style=\\\"color:#24292E\\\">;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">        }</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">    }</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">    return</span><span style=\\\"color:#24292E\\\"> arr;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">}</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">isolated</span><span style=\\\"color:#D73A49\\\"> function</span><span style=\\\"color:#6F42C1\\\"> isSortedArray</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#005CC5\\\">int</span><span style=\\\"color:#24292E\\\">[] </span><span style=\\\"color:#E36209\\\">sortedArr</span><span style=\\\"color:#24292E\\\">) </span><span style=\\\"color:#D73A49\\\">returns</span><span style=\\\"color:#005CC5\\\"> boolean</span><span style=\\\"color:#24292E\\\"> {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">    foreach </span><span style=\\\"color:#005CC5\\\">int</span><span style=\\\"color:#24292E\\\"> i </span><span style=\\\"color:#D73A49\\\">in</span><span style=\\\"color:#005CC5\\\"> 0</span><span style=\\\"color:#24292E\\\"> ..</span><span style=\\\"color:#D73A49\\\">&#x3C;</span><span style=\\\"color:#24292E\\\"> sortedArr.</span><span style=\\\"color:#6F42C1\\\">length</span><span style=\\\"color:#24292E\\\">() </span><span style=\\\"color:#D73A49\\\">-</span><span style=\\\"color:#005CC5\\\"> 1</span><span style=\\\"color:#24292E\\\"> {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">        if</span><span style=\\\"color:#24292E\\\"> (sortedArr[i] </span><span style=\\\"color:#D73A49\\\">></span><span style=\\\"color:#24292E\\\"> sortedArr[i </span><span style=\\\"color:#D73A49\\\">+</span><span style=\\\"color:#005CC5\\\"> 1</span><span style=\\\"color:#24292E\\\">]) {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">            return</span><span style=\\\"color:#D73A49\\\"> false</span><span style=\\\"color:#24292E\\\">;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">        }</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">    }</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">    return</span><span style=\\\"color:#D73A49\\\"> true</span><span style=\\\"color:#24292E\\\">;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">}</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">isolated</span><span style=\\\"color:#D73A49\\\"> function</span><span style=\\\"color:#6F42C1\\\"> createRandomIntArray</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#005CC5\\\">int</span><span style=\\\"color:#E36209\\\"> size</span><span style=\\\"color:#24292E\\\">) </span><span style=\\\"color:#D73A49\\\">returns</span><span style=\\\"color:#005CC5\\\"> int</span><span style=\\\"color:#24292E\\\">[]</span><span style=\\\"color:#D73A49\\\">|error</span><span style=\\\"color:#24292E\\\"> {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#005CC5\\\">    int</span><span style=\\\"color:#24292E\\\">[] array </span><span style=\\\"color:#D73A49\\\">=</span><span style=\\\"color:#24292E\\\"> [];</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">    foreach </span><span style=\\\"color:#005CC5\\\">int</span><span style=\\\"color:#24292E\\\"> i </span><span style=\\\"color:#D73A49\\\">in</span><span style=\\\"color:#005CC5\\\"> 0</span><span style=\\\"color:#24292E\\\"> ..</span><span style=\\\"color:#D73A49\\\">&#x3C;</span><span style=\\\"color:#24292E\\\"> size {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">        array.</span><span style=\\\"color:#6F42C1\\\">push</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#D73A49\\\">check</span><span style=\\\"color:#E36209\\\"> random</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#6F42C1\\\">createIntInRange</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#005CC5\\\">0</span><span style=\\\"color:#24292E\\\">, </span><span style=\\\"color:#005CC5\\\">int</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">MAX_VALUE));</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">    }</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">    return</span><span style=\\\"color:#24292E\\\"> array;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">}</span></span></code></pre>\"],[-326178,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color:#fff;color:#24292e\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">import</span><span style=\\\"color:#24292E\\\"> ballerina/io;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">import</span><span style=\\\"color:#24292E\\\"> ballerina/random;</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">public</span><span style=\\\"color:#D73A49\\\"> function</span><span style=\\\"color:#6F42C1\\\"> main</span><span style=\\\"color:#24292E\\\">() </span><span style=\\\"color:#D73A49\\\">returns</span><span style=\\\"color:#D73A49\\\"> error?</span><span style=\\\"color:#24292E\\\"> {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#005CC5\\\">    int</span><span style=\\\"color:#24292E\\\">[] arr </span><span style=\\\"color:#D73A49\\\">=</span><span style=\\\"color:#D73A49\\\"> check</span><span style=\\\"color:#6F42C1\\\"> createRandomIntArray</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#D73A49\\\">check</span><span style=\\\"color:#005CC5\\\"> float</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#6F42C1\\\">pow</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#005CC5\\\">10</span><span style=\\\"color:#24292E\\\">, </span><span style=\\\"color:#005CC5\\\">2</span><span style=\\\"color:#24292E\\\">).</span><span style=\\\"color:#6F42C1\\\">cloneWithType</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#005CC5\\\">int</span><span style=\\\"color:#24292E\\\">));</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#005CC5\\\">    int</span><span style=\\\"color:#24292E\\\">[] sortedArr </span><span style=\\\"color:#D73A49\\\">=</span><span style=\\\"color:#6F42C1\\\"> mergeSort</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#E36209\\\">arr</span><span style=\\\"color:#24292E\\\">);</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#005CC5\\\">    boolean</span><span style=\\\"color:#24292E\\\"> isSorted </span><span style=\\\"color:#D73A49\\\">=</span><span style=\\\"color:#6F42C1\\\"> isSortedArray</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#E36209\\\">sortedArr</span><span style=\\\"color:#24292E\\\">);</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">    io</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#6F42C1\\\">println</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#032F62\\\">\\\"Is the array sorted? \\\"</span><span style=\\\"color:#D73A49\\\"> +</span><span style=\\\"color:#24292E\\\"> isSorted.</span><span style=\\\"color:#6F42C1\\\">toString</span><span style=\\\"color:#24292E\\\">());</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">}</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">public</span><span style=\\\"color:#D73A49\\\"> isolated</span><span style=\\\"color:#D73A49\\\"> function</span><span style=\\\"color:#6F42C1\\\"> mergeSort</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#005CC5\\\">int</span><span style=\\\"color:#24292E\\\">[] </span><span style=\\\"color:#E36209\\\">arr</span><span style=\\\"color:#24292E\\\">) </span><span style=\\\"color:#D73A49\\\">returns</span><span style=\\\"color:#005CC5\\\"> int</span><span style=\\\"color:#24292E\\\">[] {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#005CC5\\\">    int</span><span style=\\\"color:#24292E\\\"> n </span><span style=\\\"color:#D73A49\\\">=</span><span style=\\\"color:#24292E\\\"> arr.</span><span style=\\\"color:#6F42C1\\\">length</span><span style=\\\"color:#24292E\\\">();</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#005CC5\\\">    int</span><span style=\\\"color:#24292E\\\"> width </span><span style=\\\"color:#D73A49\\\">=</span><span style=\\\"color:#005CC5\\\"> 1</span><span style=\\\"color:#24292E\\\">;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">    while</span><span style=\\\"color:#24292E\\\"> (</span><span style=\\\"color:#E36209\\\">width</span><span style=\\\"color:#D73A49\\\"> &#x3C;</span><span style=\\\"color:#E36209\\\"> n</span><span style=\\\"color:#24292E\\\">) {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#005CC5\\\">        int</span><span style=\\\"color:#24292E\\\"> l </span><span style=\\\"color:#D73A49\\\">=</span><span style=\\\"color:#005CC5\\\"> 0</span><span style=\\\"color:#24292E\\\">;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">        while</span><span style=\\\"color:#24292E\\\"> (</span><span style=\\\"color:#E36209\\\">l</span><span style=\\\"color:#D73A49\\\"> &#x3C;</span><span style=\\\"color:#E36209\\\"> n</span><span style=\\\"color:#24292E\\\">) {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#005CC5\\\">            int</span><span style=\\\"color:#24292E\\\"> r </span><span style=\\\"color:#D73A49\\\">=</span><span style=\\\"color:#005CC5\\\"> int</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#6F42C1\\\">min</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#E36209\\\">l</span><span style=\\\"color:#D73A49\\\"> +</span><span style=\\\"color:#24292E\\\"> (</span><span style=\\\"color:#E36209\\\">width</span><span style=\\\"color:#D73A49\\\"> *</span><span style=\\\"color:#005CC5\\\"> 2</span><span style=\\\"color:#D73A49\\\"> -</span><span style=\\\"color:#005CC5\\\"> 1</span><span style=\\\"color:#24292E\\\">), </span><span style=\\\"color:#E36209\\\">n</span><span style=\\\"color:#D73A49\\\"> -</span><span style=\\\"color:#005CC5\\\"> 1</span><span style=\\\"color:#24292E\\\">);</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#005CC5\\\">            int</span><span style=\\\"color:#24292E\\\"> m </span><span style=\\\"color:#D73A49\\\">=</span><span style=\\\"color:#005CC5\\\"> int</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#6F42C1\\\">min</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#E36209\\\">l</span><span style=\\\"color:#D73A49\\\"> +</span><span style=\\\"color:#E36209\\\"> width</span><span style=\\\"color:#D73A49\\\"> -</span><span style=\\\"color:#005CC5\\\"> 1</span><span style=\\\"color:#24292E\\\">, </span><span style=\\\"color:#E36209\\\">n</span><span style=\\\"color:#D73A49\\\"> -</span><span style=\\\"color:#005CC5\\\"> 1</span><span style=\\\"color:#24292E\\\">);</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6F42C1\\\">            merge</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#E36209\\\">arr</span><span style=\\\"color:#24292E\\\">, </span><span style=\\\"color:#E36209\\\">l</span><span style=\\\"color:#24292E\\\">, </span><span style=\\\"color:#E36209\\\">m</span><span style=\\\"color:#24292E\\\">, </span><span style=\\\"color:#E36209\\\">r</span><span style=\\\"color:#24292E\\\">);</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">            l </span><span style=\\\"color:#D73A49\\\">+=</span><span style=\\\"color:#24292E\\\"> width </span><span style=\\\"color:#D73A49\\\">*</span><span style=\\\"color:#005CC5\\\"> 2</span><span style=\\\"color:#24292E\\\">;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">        }</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">        width </span><span style=\\\"color:#D73A49\\\">*=</span><span style=\\\"color:#005CC5\\\"> 2</span><span style=\\\"color:#24292E\\\">;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">    }</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">    return</span><span style=\\\"color:#24292E\\\"> arr;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">}</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">isolated</span><span style=\\\"color:#D73A49\\\"> function</span><span style=\\\"color:#6F42C1\\\"> merge</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#005CC5\\\">int</span><span style=\\\"color:#24292E\\\">[] </span><span style=\\\"color:#E36209\\\">a</span><span style=\\\"color:#24292E\\\">, </span><span style=\\\"color:#005CC5\\\">int</span><span style=\\\"color:#E36209\\\"> l</span><span style=\\\"color:#24292E\\\">, </span><span style=\\\"color:#005CC5\\\">int</span><span style=\\\"color:#E36209\\\"> m</span><span style=\\\"color:#24292E\\\">, </span><span style=\\\"color:#005CC5\\\">int</span><span style=\\\"color:#E36209\\\"> r</span><span style=\\\"color:#24292E\\\">) {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#005CC5\\\">    int</span><span style=\\\"color:#24292E\\\"> n1 </span><span style=\\\"color:#D73A49\\\">=</span><span style=\\\"color:#24292E\\\"> m </span><span style=\\\"color:#D73A49\\\">-</span><span style=\\\"color:#24292E\\\"> l </span><span style=\\\"color:#D73A49\\\">+</span><span style=\\\"color:#005CC5\\\"> 1</span><span style=\\\"color:#24292E\\\">;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#005CC5\\\">    int</span><span style=\\\"color:#24292E\\\"> n2 </span><span style=\\\"color:#D73A49\\\">=</span><span style=\\\"color:#24292E\\\"> r </span><span style=\\\"color:#D73A49\\\">-</span><span style=\\\"color:#24292E\\\"> m;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#005CC5\\\">    int</span><span style=\\\"color:#24292E\\\">[] L </span><span style=\\\"color:#D73A49\\\">=</span><span style=\\\"color:#24292E\\\"> [];</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#005CC5\\\">    int</span><span style=\\\"color:#24292E\\\">[] R </span><span style=\\\"color:#D73A49\\\">=</span><span style=\\\"color:#24292E\\\"> [];</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">    foreach </span><span style=\\\"color:#005CC5\\\">int</span><span style=\\\"color:#24292E\\\"> i </span><span style=\\\"color:#D73A49\\\">in</span><span style=\\\"color:#005CC5\\\"> int</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#6F42C1\\\">range</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#005CC5\\\">0</span><span style=\\\"color:#24292E\\\">, </span><span style=\\\"color:#E36209\\\">n1</span><span style=\\\"color:#24292E\\\">, </span><span style=\\\"color:#005CC5\\\">1</span><span style=\\\"color:#24292E\\\">) {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">        L[i] </span><span style=\\\"color:#D73A49\\\">=</span><span style=\\\"color:#24292E\\\"> a[l </span><span style=\\\"color:#D73A49\\\">+</span><span style=\\\"color:#24292E\\\"> i];</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">    }</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">    foreach </span><span style=\\\"color:#005CC5\\\">int</span><span style=\\\"color:#24292E\\\"> i </span><span style=\\\"color:#D73A49\\\">in</span><span style=\\\"color:#005CC5\\\"> int</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#6F42C1\\\">range</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#005CC5\\\">0</span><span style=\\\"color:#24292E\\\">, </span><span style=\\\"color:#E36209\\\">n2</span><span style=\\\"color:#24292E\\\">, </span><span style=\\\"color:#005CC5\\\">1</span><span style=\\\"color:#24292E\\\">) {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">        R[i] </span><span style=\\\"color:#D73A49\\\">=</span><span style=\\\"color:#24292E\\\"> a[m </span><span style=\\\"color:#D73A49\\\">+</span><span style=\\\"color:#24292E\\\"> i </span><span style=\\\"color:#D73A49\\\">+</span><span style=\\\"color:#005CC5\\\"> 1</span><span style=\\\"color:#24292E\\\">];</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">    }</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#005CC5\\\">    int</span><span style=\\\"color:#24292E\\\"> i </span><span style=\\\"color:#D73A49\\\">=</span><span style=\\\"color:#005CC5\\\"> 0</span><span style=\\\"color:#24292E\\\">;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#005CC5\\\">    int</span><span style=\\\"color:#24292E\\\"> j </span><span style=\\\"color:#D73A49\\\">=</span><span style=\\\"color:#005CC5\\\"> 0</span><span style=\\\"color:#24292E\\\">;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#005CC5\\\">    int</span><span style=\\\"color:#24292E\\\"> k </span><span style=\\\"color:#D73A49\\\">=</span><span style=\\\"color:#24292E\\\"> l;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">    while</span><span style=\\\"color:#24292E\\\"> (</span><span style=\\\"color:#E36209\\\">i</span><span style=\\\"color:#D73A49\\\"> &#x3C;</span><span style=\\\"color:#E36209\\\"> n1</span><span style=\\\"color:#D73A49\\\"> &#x26;&#x26;</span><span style=\\\"color:#E36209\\\"> j</span><span style=\\\"color:#D73A49\\\"> &#x3C;</span><span style=\\\"color:#E36209\\\"> n2</span><span style=\\\"color:#24292E\\\">) {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">        if</span><span style=\\\"color:#24292E\\\"> L[i] </span><span style=\\\"color:#D73A49\\\">&#x3C;=</span><span style=\\\"color:#24292E\\\"> R[j] {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">            a[k] </span><span style=\\\"color:#D73A49\\\">=</span><span style=\\\"color:#24292E\\\"> L[i];</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">            i </span><span style=\\\"color:#D73A49\\\">+=</span><span style=\\\"color:#005CC5\\\"> 1</span><span style=\\\"color:#24292E\\\">;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">        } </span><span style=\\\"color:#D73A49\\\">else</span><span style=\\\"color:#24292E\\\"> {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">            a[k] </span><span style=\\\"color:#D73A49\\\">=</span><span style=\\\"color:#24292E\\\"> R[j];</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">            j </span><span style=\\\"color:#D73A49\\\">+=</span><span style=\\\"color:#005CC5\\\"> 1</span><span style=\\\"color:#24292E\\\">;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">        }</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">        k </span><span style=\\\"color:#D73A49\\\">+=</span><span style=\\\"color:#005CC5\\\"> 1</span><span style=\\\"color:#24292E\\\">;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">    }</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">    while</span><span style=\\\"color:#24292E\\\"> (</span><span style=\\\"color:#E36209\\\">i</span><span style=\\\"color:#D73A49\\\"> &#x3C;</span><span style=\\\"color:#E36209\\\"> n1</span><span style=\\\"color:#24292E\\\">) {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">        a[k] </span><span style=\\\"color:#D73A49\\\">=</span><span style=\\\"color:#24292E\\\"> L[i];</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">        i </span><span style=\\\"color:#D73A49\\\">+=</span><span style=\\\"color:#005CC5\\\"> 1</span><span style=\\\"color:#24292E\\\">;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">        k </span><span style=\\\"color:#D73A49\\\">+=</span><span style=\\\"color:#005CC5\\\"> 1</span><span style=\\\"color:#24292E\\\">;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">    }</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">    while</span><span style=\\\"color:#24292E\\\"> (</span><span style=\\\"color:#E36209\\\">j</span><span style=\\\"color:#D73A49\\\"> &#x3C;</span><span style=\\\"color:#E36209\\\"> n2</span><span style=\\\"color:#24292E\\\">) {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">        a[k] </span><span style=\\\"color:#D73A49\\\">=</span><span style=\\\"color:#24292E\\\"> R[j];</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">        j </span><span style=\\\"color:#D73A49\\\">+=</span><span style=\\\"color:#005CC5\\\"> 1</span><span style=\\\"color:#24292E\\\">;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">        k </span><span style=\\\"color:#D73A49\\\">+=</span><span style=\\\"color:#005CC5\\\"> 1</span><span style=\\\"color:#24292E\\\">;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">    }</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">}</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">isolated</span><span style=\\\"color:#D73A49\\\"> function</span><span style=\\\"color:#6F42C1\\\"> isSortedArray</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#005CC5\\\">int</span><span style=\\\"color:#24292E\\\">[] </span><span style=\\\"color:#E36209\\\">sortedArr</span><span style=\\\"color:#24292E\\\">) </span><span style=\\\"color:#D73A49\\\">returns</span><span style=\\\"color:#005CC5\\\"> boolean</span><span style=\\\"color:#24292E\\\"> {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">    foreach </span><span style=\\\"color:#005CC5\\\">int</span><span style=\\\"color:#24292E\\\"> i </span><span style=\\\"color:#D73A49\\\">in</span><span style=\\\"color:#005CC5\\\"> 0</span><span style=\\\"color:#24292E\\\"> ..</span><span style=\\\"color:#D73A49\\\">&#x3C;</span><span style=\\\"color:#24292E\\\"> sortedArr.</span><span style=\\\"color:#6F42C1\\\">length</span><span style=\\\"color:#24292E\\\">() </span><span style=\\\"color:#D73A49\\\">-</span><span style=\\\"color:#005CC5\\\"> 1</span><span style=\\\"color:#24292E\\\"> {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">        if</span><span style=\\\"color:#24292E\\\"> (sortedArr[i] </span><span style=\\\"color:#D73A49\\\">></span><span style=\\\"color:#24292E\\\"> sortedArr[i </span><span style=\\\"color:#D73A49\\\">+</span><span style=\\\"color:#005CC5\\\"> 1</span><span style=\\\"color:#24292E\\\">]) {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">            return</span><span style=\\\"color:#D73A49\\\"> false</span><span style=\\\"color:#24292E\\\">;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">        }</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">    }</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">    return</span><span style=\\\"color:#D73A49\\\"> true</span><span style=\\\"color:#24292E\\\">;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">}</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">isolated</span><span style=\\\"color:#D73A49\\\"> function</span><span style=\\\"color:#6F42C1\\\"> createRandomIntArray</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#005CC5\\\">int</span><span style=\\\"color:#E36209\\\"> size</span><span style=\\\"color:#24292E\\\">) </span><span style=\\\"color:#D73A49\\\">returns</span><span style=\\\"color:#005CC5\\\"> int</span><span style=\\\"color:#24292E\\\">[]</span><span style=\\\"color:#D73A49\\\">|error</span><span style=\\\"color:#24292E\\\"> {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#005CC5\\\">    int</span><span style=\\\"color:#24292E\\\">[] array </span><span style=\\\"color:#D73A49\\\">=</span><span style=\\\"color:#24292E\\\"> [];</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">    foreach </span><span style=\\\"color:#005CC5\\\">int</span><span style=\\\"color:#24292E\\\"> i </span><span style=\\\"color:#D73A49\\\">in</span><span style=\\\"color:#005CC5\\\"> 0</span><span style=\\\"color:#24292E\\\"> ..</span><span style=\\\"color:#D73A49\\\">&#x3C;</span><span style=\\\"color:#24292E\\\"> size {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">        array.</span><span style=\\\"color:#6F42C1\\\">push</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#D73A49\\\">check</span><span style=\\\"color:#E36209\\\"> random</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#6F42C1\\\">createIntInRange</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#005CC5\\\">0</span><span style=\\\"color:#24292E\\\">, </span><span style=\\\"color:#005CC5\\\">int</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">MAX_VALUE));</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">    }</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">    return</span><span style=\\\"color:#24292E\\\"> array;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">}</span></span></code></pre>\"],[-16176648,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color:#fff;color:#24292e\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">import</span><span style=\\\"color:#24292E\\\"> ballerina/http;</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">type</span><span style=\\\"color:#6F42C1\\\"> Country</span><span style=\\\"color:#D73A49\\\"> record</span><span style=\\\"color:#24292E\\\"> {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#005CC5\\\">    string</span><span style=\\\"color:#24292E\\\"> country;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#005CC5\\\">    int</span><span style=\\\"color:#24292E\\\"> population;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#005CC5\\\">    string</span><span style=\\\"color:#24292E\\\"> continent;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#005CC5\\\">    int</span><span style=\\\"color:#24292E\\\"> cases;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#005CC5\\\">    int</span><span style=\\\"color:#24292E\\\"> deaths;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">};</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">type</span><span style=\\\"color:#6F42C1\\\"> Data</span><span style=\\\"color:#D73A49\\\"> record</span><span style=\\\"color:#24292E\\\"> {</span><span style=\\\"color:#D73A49\\\">|</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#005CC5\\\">    string</span><span style=\\\"color:#24292E\\\"> country;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#005CC5\\\">    string</span><span style=\\\"color:#24292E\\\"> continent;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#005CC5\\\">    int</span><span style=\\\"color:#24292E\\\"> population;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#005CC5\\\">    decimal</span><span style=\\\"color:#24292E\\\"> caseFatalityRatio;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">|</span><span style=\\\"color:#24292E\\\">};</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">http</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">Client diseaseEp </span><span style=\\\"color:#D73A49\\\">=</span><span style=\\\"color:#D73A49\\\"> check</span><span style=\\\"color:#D73A49\\\"> new</span><span style=\\\"color:#24292E\\\"> (</span><span style=\\\"color:#032F62\\\">\\\"https://disease.sh/v3\\\"</span><span style=\\\"color:#24292E\\\">);</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">final</span><span style=\\\"color:#24292E\\\"> Country[] </span><span style=\\\"color:#D73A49\\\">&#x26;</span><span style=\\\"color:#D73A49\\\"> readonly</span><span style=\\\"color:#24292E\\\"> countries;</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">function</span><span style=\\\"color:#6F42C1\\\"> init</span><span style=\\\"color:#24292E\\\">() </span><span style=\\\"color:#D73A49\\\">returns</span><span style=\\\"color:#D73A49\\\"> error?</span><span style=\\\"color:#24292E\\\"> {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">    countries </span><span style=\\\"color:#D73A49\\\">=</span><span style=\\\"color:#D73A49\\\"> check</span><span style=\\\"color:#24292E\\\"> diseaseEp</span><span style=\\\"color:#D73A49\\\">->/</span><span style=\\\"color:#24292E\\\">covid\\\\</span><span style=\\\"color:#D73A49\\\">-</span><span style=\\\"color:#005CC5\\\">19</span><span style=\\\"color:#D73A49\\\">/</span><span style=\\\"color:#24292E\\\">countries;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">}</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">service</span><span style=\\\"color:#6F42C1\\\"> /covid19/countries</span><span style=\\\"color:#D73A49\\\"> on</span><span style=\\\"color:#D73A49\\\"> new</span><span style=\\\"color:#24292E\\\"> http:Listener(</span><span style=\\\"color:#005CC5\\\">8080</span><span style=\\\"color:#24292E\\\">) {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">    resource</span><span style=\\\"color:#D73A49\\\"> function</span><span style=\\\"color:#6F42C1\\\"> get</span><span style=\\\"color:#6F42C1\\\"> summary</span><span style=\\\"color:#24292E\\\">() </span><span style=\\\"color:#D73A49\\\">returns</span><span style=\\\"color:#005CC5\\\"> json</span><span style=\\\"color:#24292E\\\"> {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">        Data[] listResult </span><span style=\\\"color:#D73A49\\\">=</span><span style=\\\"color:#D73A49\\\"> from</span><span style=\\\"color:#005CC5\\\"> var</span><span style=\\\"color:#24292E\\\"> {country, continent, population, cases, deaths} </span><span style=\\\"color:#D73A49\\\">in</span><span style=\\\"color:#24292E\\\"> countries</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">            where</span><span style=\\\"color:#6F42C1\\\"> hasSignificantPopulation</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#E36209\\\">population</span><span style=\\\"color:#24292E\\\">, </span><span style=\\\"color:#E36209\\\">deaths</span><span style=\\\"color:#24292E\\\">)</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">            let</span><span style=\\\"color:#005CC5\\\"> decimal</span><span style=\\\"color:#24292E\\\"> caseFatalityRatio </span><span style=\\\"color:#D73A49\\\">=</span><span style=\\\"color:#D73A49\\\"> &#x3C;</span><span style=\\\"color:#005CC5\\\">decimal</span><span style=\\\"color:#D73A49\\\">></span><span style=\\\"color:#24292E\\\">deaths </span><span style=\\\"color:#D73A49\\\">/</span><span style=\\\"color:#D73A49\\\"> &#x3C;</span><span style=\\\"color:#005CC5\\\">decimal</span><span style=\\\"color:#D73A49\\\">></span><span style=\\\"color:#24292E\\\">cases </span><span style=\\\"color:#D73A49\\\">*</span><span style=\\\"color:#005CC5\\\"> 100</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">            order</span><span style=\\\"color:#D73A49\\\"> by</span><span style=\\\"color:#24292E\\\"> caseFatalityRatio </span><span style=\\\"color:#D73A49\\\">descending</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">            limit</span><span style=\\\"color:#005CC5\\\"> 1000</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">            select</span><span style=\\\"color:#24292E\\\"> {country, continent, population, caseFatalityRatio};</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">        return</span><span style=\\\"color:#6F42C1\\\"> getTopSortedValues</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#E36209\\\">listResult</span><span style=\\\"color:#24292E\\\">);</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">    }</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">    isolated</span><span style=\\\"color:#D73A49\\\"> resource</span><span style=\\\"color:#D73A49\\\"> function</span><span style=\\\"color:#6F42C1\\\"> get</span><span style=\\\"color:#6F42C1\\\"> names</span><span style=\\\"color:#24292E\\\">() </span><span style=\\\"color:#D73A49\\\">returns</span><span style=\\\"color:#005CC5\\\"> json</span><span style=\\\"color:#24292E\\\"> {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">        return</span><span style=\\\"color:#D73A49\\\"> from</span><span style=\\\"color:#005CC5\\\"> var</span><span style=\\\"color:#24292E\\\"> {country, population, deaths} </span><span style=\\\"color:#D73A49\\\">in</span><span style=\\\"color:#24292E\\\"> countries</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">            where</span><span style=\\\"color:#6F42C1\\\"> hasNonZeroPopulation</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#E36209\\\">population</span><span style=\\\"color:#24292E\\\">, </span><span style=\\\"color:#E36209\\\">deaths</span><span style=\\\"color:#24292E\\\">)</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">            select</span><span style=\\\"color:#24292E\\\"> {country};</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">    }</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">}</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">isolated</span><span style=\\\"color:#D73A49\\\"> function</span><span style=\\\"color:#6F42C1\\\"> getTopSortedValues</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#E36209\\\">Data</span><span style=\\\"color:#24292E\\\">[] </span><span style=\\\"color:#E36209\\\">listResult</span><span style=\\\"color:#24292E\\\">) </span><span style=\\\"color:#D73A49\\\">returns</span><span style=\\\"color:#005CC5\\\"> json</span><span style=\\\"color:#24292E\\\">[] {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#005CC5\\\">    json</span><span style=\\\"color:#24292E\\\">[] sortedArray </span><span style=\\\"color:#D73A49\\\">=</span><span style=\\\"color:#24292E\\\"> listResult.</span><span style=\\\"color:#6F42C1\\\">sort</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#032F62\\\">\\\"ascending\\\"</span><span style=\\\"color:#24292E\\\">, </span><span style=\\\"color:#E36209\\\">getKey</span><span style=\\\"color:#24292E\\\">);</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">    return</span><span style=\\\"color:#6F42C1\\\"> getTopElements</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#E36209\\\">sortedArray</span><span style=\\\"color:#24292E\\\">);</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">}</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">isolated</span><span style=\\\"color:#D73A49\\\"> function</span><span style=\\\"color:#6F42C1\\\"> getTopElements</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#005CC5\\\">json</span><span style=\\\"color:#24292E\\\">[] </span><span style=\\\"color:#E36209\\\">sortedArray</span><span style=\\\"color:#24292E\\\">) </span><span style=\\\"color:#D73A49\\\">returns</span><span style=\\\"color:#005CC5\\\"> json</span><span style=\\\"color:#24292E\\\">[] {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">    return</span><span style=\\\"color:#D73A49\\\"> from</span><span style=\\\"color:#005CC5\\\"> var</span><span style=\\\"color:#24292E\\\"> i </span><span style=\\\"color:#D73A49\\\">in</span><span style=\\\"color:#24292E\\\"> sortedArray</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">        limit</span><span style=\\\"color:#005CC5\\\"> 10</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">        select</span><span style=\\\"color:#24292E\\\"> i;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">}</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">isolated</span><span style=\\\"color:#D73A49\\\"> function</span><span style=\\\"color:#6F42C1\\\"> hasSignificantPopulation</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#005CC5\\\">int</span><span style=\\\"color:#E36209\\\"> population</span><span style=\\\"color:#24292E\\\">, </span><span style=\\\"color:#005CC5\\\">int</span><span style=\\\"color:#E36209\\\"> deaths</span><span style=\\\"color:#24292E\\\">) </span><span style=\\\"color:#D73A49\\\">returns</span><span style=\\\"color:#005CC5\\\"> boolean</span><span style=\\\"color:#24292E\\\"> {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">    return</span><span style=\\\"color:#24292E\\\"> population </span><span style=\\\"color:#D73A49\\\">>=</span><span style=\\\"color:#005CC5\\\"> 100</span><span style=\\\"color:#D73A49\\\"> &#x26;&#x26;</span><span style=\\\"color:#24292E\\\"> deaths </span><span style=\\\"color:#D73A49\\\">>=</span><span style=\\\"color:#005CC5\\\"> 10</span><span style=\\\"color:#24292E\\\">;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">}</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">isolated</span><span style=\\\"color:#D73A49\\\"> function</span><span style=\\\"color:#6F42C1\\\"> hasNonZeroPopulation</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#005CC5\\\">int</span><span style=\\\"color:#E36209\\\"> population</span><span style=\\\"color:#24292E\\\">, </span><span style=\\\"color:#005CC5\\\">int</span><span style=\\\"color:#E36209\\\"> deaths</span><span style=\\\"color:#24292E\\\">) </span><span style=\\\"color:#D73A49\\\">returns</span><span style=\\\"color:#005CC5\\\"> boolean</span><span style=\\\"color:#24292E\\\"> {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">    return</span><span style=\\\"color:#24292E\\\"> population </span><span style=\\\"color:#D73A49\\\">>=</span><span style=\\\"color:#005CC5\\\"> 0</span><span style=\\\"color:#D73A49\\\"> &#x26;&#x26;</span><span style=\\\"color:#24292E\\\"> deaths </span><span style=\\\"color:#D73A49\\\">>=</span><span style=\\\"color:#005CC5\\\"> 0</span><span style=\\\"color:#24292E\\\">;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">}</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">isolated</span><span style=\\\"color:#D73A49\\\"> function</span><span style=\\\"color:#6F42C1\\\"> getKey</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#D73A49\\\">record</span><span style=\\\"color:#24292E\\\"> {</span><span style=\\\"color:#D73A49\\\">|</span><span style=\\\"color:#005CC5\\\">string</span><span style=\\\"color:#24292E\\\"> country; </span><span style=\\\"color:#005CC5\\\">string</span><span style=\\\"color:#24292E\\\"> continent; </span><span style=\\\"color:#005CC5\\\">int</span><span style=\\\"color:#24292E\\\"> population; </span><span style=\\\"color:#005CC5\\\">decimal</span><span style=\\\"color:#24292E\\\"> caseFatalityRatio;</span><span style=\\\"color:#D73A49\\\">|</span><span style=\\\"color:#24292E\\\">} </span><span style=\\\"color:#E36209\\\">recordVal</span><span style=\\\"color:#24292E\\\">) </span><span style=\\\"color:#D73A49\\\">returns</span><span style=\\\"color:#005CC5\\\"> string</span><span style=\\\"color:#24292E\\\"> {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">    return</span><span style=\\\"color:#24292E\\\"> recordVal.country;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">}</span></span></code></pre>\"]]"},"__N_SSG":true}