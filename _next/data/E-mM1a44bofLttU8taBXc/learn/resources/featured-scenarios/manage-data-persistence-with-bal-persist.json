{"pageProps":{"frontmatter":{"layout":"ballerina-building-a-data-service-with-bal-persist-left-nav-pages-swanlake","title":"Manage data persistence with bal persist","description":"This guide describes how to model your application data and use a tool to generate client APIs to access the data store in Ballerina.","keywords":"Ballerina, data service, data store, database, in-memory, Google Sheets, REST, API","permalink":"/learn/manage_data_persistence-with-bal-persist/","active":"manage_data_persistence-with-bal-persist","intro":"This guide helps you understand the basics of the `bal persist` feature, which allows you to manage data persistence easily. This same data service can also be written using the Ballerina SQL connectors, which require you to write SQL queries to perform CRUD operations against the DB servers. With the `bal persist` feature, you only need to write the `data model`. Based on the model, the client object and record types are generated to interact with the data store.","redirect_from":["/learn/manage-data-persistence-with-bal-persist/","/learn/manage-data-persistence-with-bal-persist","/learn/manage-data-persistence-with-bal-persist","/learn/getting-started/manage-data-persistence-with-bal-persist/","/learn/getting-started/manage_data_persistence-with-bal-persist"]},"content":"\n## Set up the prerequisites\n\nTo complete this tutorial, you need:\n\n1. [Ballerina 2201.6.0 (Swan Lake)](/learn/get-started/) or greater\n2. A text editor\n>**Tip:** Preferably, <a href=\"https://code.visualstudio.com/\" target=\"_blank\">Visual Studio Code</a> with the\n<a href=\"https://wso2.com/ballerina/vscode/docs/\" target=\"_blank\">Ballerina extension</a> installed.\n3. A command terminal\n\n## Understand the implementation\n\nThis guide describes how to interact with the data store and perform operations against it using `bal persist`. This will cover the basic use case of creating, reading, updating, and deleting records on a data store in an organization. It also elaborates on how you can create an HTTP RESTful API using Ballerina that can be used to perform basic CRUD operations on the data store.\n\n![Data Service Architecture](/learn/images/bal-persist-scenario-diagram.png \"Data Service Architecture\")\n\n>**Info:** This guide uses an in-memory data store for simplicity. However, the described methodology can also be applied to work with MySQL, MSSQL, and Google Sheets, as the `bal persist` currently offers support for these three data stores: in-memory tables, MySQL and MSSQL databases, and Google Sheets.\n\n## Create a Ballerina package\n\nBallerina uses packages to group code. You need to create a Ballerina package and write the business logic in it. In the terminal, execute the command below to create the Ballerina package for the implementation.\n\n> **Info:** For more information on Ballerina packages, see [Organize Ballerina code](/learn/organize-ballerina-code/).\n\n```\n$ bal new rainier\n``` \n\nThis creates a directory named `rainier` with the files below.\n\n```\n.\n├── rainier\n│   ├── Ballerina.toml\n│   └── main.bal\n```\n\n## Initialize `bal persist` in the project\n\nThe `bal persist` initialization takes care of the basics needed to start the development. In the terminal, execute the command below to initialize `bal persist` in the Ballerina package.\n\n```\n$ bal persist init --module store\n```\n\nAlong with the `bal persist init` command, you can specify the `datastore` that you are going to use in the application and also the `module` that you need to add the generated code to. Both these parameters are optional. If you don’t provide them, the datastore will be set to `inmemory`, and the module will be set to `root` module by default.\n\nThis changes the Ballerina package as follows.\n\n```\n├── rainier\n│   ├── persist\n│   │\t\t└── model.bal\n│   ├── Ballerina.toml\n│   └── main.bal\n\n```\nit also adds the following configuration to the `Ballerina.toml` file.\n\n```toml\n[persist]\ndatastore = \"inmemory\"\nmodule = \"rainier.store\"\n```\n\n\nThese configurations are referred to when generating client objects for the data model. The recommendation is not to change these values. If you want to change them, remove them from the `Ballerina.toml` file and reinitialize `bal persist`.\n\nThe next step is to define your data model in the schema file in the`persist/model.bal` file.\n\n## Model your data\n\nThe data model can be defined in the schema file inside the `persist` directory. You can use the empty file added by the `persist init` command for this.\n\nFor more information on defining a data model, see the [Data Model Definition](/learn/persist-model/) documentation. In order to simplify this demonstration, only the `Employee` entity is added to the schema file. You can add as many as you want for your application and add relationships between entities.\nOnce defined, the schema file will be as follows.\n\n```ballerina\nimport ballerina/persist as _;\nimport ballerina/time;\n\npublic type Employee record {|\n   readonly string id;\n   string firstName;\n   string lastName;\n   string email;\n   string phone;\n   time:Date hireDate;\n   string? managerId;\n   string jobTitle;\n|};\n```\n\nThis model is used to set up the underlying datastore (e.g., set up the tables in the underlying database) and also as the base for the generated client APIs.\n\n## Generate the client object, types, and scripts\n\nNow, you can generate the client objects, types, and SQL scripts for your model by running the command in your terminal.\n\n```\n$ bal persist generate\n```\n\nThis changes the Ballerina package as follows.\n\n```\n├── rainier\n│   ├── generated\n│   │\t\t└── store\n│   │\t\t│\t├── persist_client.bal\n│   │\t\t│\t└── persist_types.bal\n│   ├── persist\n│   │\t\t└── model.bal\n│   ├── Ballerina.toml\n│   └── main.bal\n    \n```\n\nThe `persist generate` will parse the `persist/model.bal` definition file and generate the following.\n\n|         File          |                                         Description                                         |\n|:---------------------:|:-------------------------------------------------------------------------------------------:|\n| `persist_client.bal`  |                This is the client that is used to persist and retrieve data.                |\n|  `persist_types.bal`  |       This contains the record types that will be used to persist and retrieve data.        |\n\n\n\n> Note: All of the above auto-generated BAL files should not be modified.\n\n> Note: If you use other data stores like MySQL, MSSQL, or Google Sheets, additional files will get created to handle runtime configurations and scripts to set up the database/worksheet. Since `in-memory` is used, you don’t need to do any configuration or setting-up before running the application.\n\n## Query your database with client API\n\nFirst, you need to instantiate the generated client object inside the `rainier.store` module like below.\n\n```ballerina\nimport rainier.store;\n\nstore:Client sClient = check new();\n```\n\nYou can use this `sClient` as the client to query your database. It provides five resource methods to query. Let’s explore each of the methods of the client separately. You can use the `main.bal` file created inside your project to explore the functionalities.\n\n### Create a new `Employee` record\n\nLet’s start with a query to create a new `Employee` record in the database and log the results to the console. Update the following in your `main.bal` file.\n\n```ballerina\nimport ballerina/io;\nimport rainier.store;\n\n\nfinal store:Client sClient = check new();\n\n\npublic function main() returns error? {\n   store:EmployeeInsert employee1 = {\n       id: \"emp_01\",\n       firstName: \"John\",\n       lastName: \"Doe\",\n       email: \"johnd@xyz.com\",\n       phone: \"1234567890\",\n       hireDate: {\n           year: 2020,\n           month: 10,\n           day: 10\n       },\n       managerId: \"mng_01\",\n       jobTitle: \"Software Engineer\"\n   };\n\n\n   string[] employeeIds = check sClient->/employees.post([employee1]);\n   io:println(\"Inserted employee id: \" + employeeIds[0]);\n}\n```\n\nYou can run your Ballerina project with the following command.\n\n```\n$ bal run\nCompiling source\n        foo/rainier:0.1.0\n\n\nRunning executable\n\nInserted employee id: emp_01\n```\n\nThis creates the first database record with the client API. The next sections describe how to read data from the database.\n\n### Retrieve all `Employee` records\n\nLet’s try to fetch all the records inserted into the database. The client API offers the `get` resource method, which returns a stream of the return type. The return type can be either a complete `Employee` record or a custom record with a subset of fields.\n\nReplace the previous code and add the new `get` call instead.\n\n```ballerina\nimport ballerina/io;\nimport rainier.store;\nimport ballerina/persist;\n\n\nfinal store:Client sClient = check new ();\n\n\npublic function main() returns error? {\n   // Get the complete `Employee` record.\n   stream<store:Employee, persist:Error?> employees = sClient->/employees;\n   check from var employee in employees\n       do {\n           io:println(employee);\n       };\n\n\n   // Get only the `id`, `firstName`, and `lastName` fields.\n   stream<EmployeeName, persist:Error?> empNames = sClient->/employees;\n   check from var name in empNames\n       do {\n           io:println(name);\n       };\n}\n\n\ntype EmployeeName record {|\n   string id;\n   string firstName;\n   string lastName;\n|};\n```\n\nRun the Ballerina project again.\n\n```\n$ bal run\n\nCompiling source\n        foo/rainier:0.1.0\n\n\nRunning executable\n\n{\"id\":\"emp_01\",\"firstName\":\"John\",\"lastName\":\"Doe\",\"email\":\"johnd@xyz.com\",\"phone\":\"1234567890\",\"hireDate\":{\"year\":2020,\"month\":10,\"day\":10},\"manager_id\":\"mng_01\",\"job_title\":\"Software Engineer\"}\n\n{\"employee_id\":\"emp_01\",\"first_name\":\"John\",\"last_name\":\"Doe\"}\n```\n\n>**Note:** Even if there is a single `Employee` record, the resource method returns a Ballerina stream object and you need to iterate through the stream to access the records.\nThe client also provides the `get by key` method, which returns only one record. Let’s explore that method.\n\n### Retrieve the `Employee` record by key\n\nIf you know the key of the record you need to fetch from the database, you can pass the key as a path param to the `get` method.\n\nReplace the previous code and add the new `get by key` call instead,\n\n```ballerina\nimport ballerina/io;\nimport rainier.store;\n\n\nfinal store:Client sClient = check new ();\n\n\npublic function main() returns error? {\n   string empId = \"emp_01\";\n   // Get the complete `Employee` record.\n   store:Employee employee = check sClient->/employees/[empId];\n   io:println(employee);\n\n\n   // Get only the `employee_id`, `first_name`, and `last_name` fields.\n   EmployeeName employeeName = check sClient->/employees/[empId];\n   io:println(employeeName);\n}\n\n\ntype EmployeeName record {|\n   string id;\n   string firstName;\n   string lastName;\n|};\n```\n\nRun the Ballerina project again.\n\n```\n$ bal run\n\nCompiling source\n        foo/rainier:0.1.0\n\n\nRunning executable\n\n{\"id\":\"emp_01\",\"firstName\":\"John\",\"lastName\":\"Doe\",\"email\":\"johnd@xyz.com\",\"phone\":\"1234567890\",\"hireDate\":{\"year\":2020,\"month\":10,\"day\":10},\"managerId\":\"mng_01\",\"jobTitle\":\"Software Engineer\"}\n\n{\"id\":\"emp_01\",\"firstName\":\"John\",\"lastName\":\"Doe\"}\n```\n\nYou will get the same results as you have only one record. Let’s explore the `update` function.\n\n### Update the `Employee` record\n\nWith the client API, you can easily update the record with the given ID. You only need to pass the fields that need to be updated with the new values. In this case, The job title of the given employee is updated from `Software Engineer` to `Senior Software Engineer`.\n\nReplace the previous code and add the new `update` call instead.\n\n```ballerina\nimport ballerina/io;\nimport rainier.store;\n\n\nfinal store:Client sClient = check new ();\n\n\npublic function main() returns error? {\n   string empId = \"emp_01\";\n\n\n   // Update the job title of the employee with the given ID.\n   store:Employee employee = check sClient->/employees/[empId].put({\n       jobTitle: \"Senior Software Engineer\"\n   });\n   io:println(employee);\n}\n```\n\nRun the Ballerina project again.\n\n```\n$ bal run\n\nCompiling source\n        foo/rainier:0.1.0\n\n\nRunning executable\n\n{\"id\":\"emp_01\",\"firstName\":\"John\",\"lastName\":\"Doe\",\"email\":\"johnd@xyz.com\",\"phone\":\"1234567890\",\"hireDate\":{\"year\":2020,\"month\":10,\"day\":10},\"managerId\":\"mng_01\",\"jobTitle\":\"Senior Software Engineer\"}\n```\n\nNow, you have successfully executed the `CREATE`, `READ`, and `UPDATE` queries against your database. Let’s explore the final `DELETE` query in the next section.\n\n### Delete the `Employee` record\n\nSimilar to the client `update` call, you can use the `delete` action to delete the record with the given ID.\n\nReplace the previous code and add the new `delete` call instead.\n\n```ballerina\nimport ballerina/io;\nimport ballerina/persist;\nimport rainier.store;\n\n\nfinal store:Client sClient = check new ();\n\n\npublic function main() returns error? {\n   string empId = \"emp_01\";\n\n\n   // Delete the employee with the given ID.\n   _ = check sClient->/employees/[empId].delete();\n\n\n   // Check if the employee is deleted.\n   store:Employee|persist:Error result = sClient->/employees/[empId].get();\n   if result is persist:NotFoundError {\n       io:println(\"Employee not found\");\n   } else {\n       io:println(\"Employee found\");\n   }\n}\n```\n\nRun the Ballerina project again.\n\n```\n$ bal run\n\nCompiling source\n        foo/rainier:0.1.0\n\n\nRunning executable\n\nEmployee not found\n```\n\nYou just run all the queries against your database successfully. Your next task is to expose the database queries via an HTTP RESTful API to build a data service.\n\n## Expose the database via an HTTP RESTful API\n\nAfter you have defined the methods necessary to manipulate the database, expose these selectively via an HTTP RESTful API.\n\nFor this, you need to create an HTTP service, and within the service, you can define resource methods to provide access to the database. The complete code of the service will be as follows.\n\nReplace the previous code and add the service code instead.\n\n```ballerina\nimport ballerina/http;\nimport ballerina/persist;\nimport rainier.store;\n\n\nfinal store:Client sClient = check new();\n\n\nservice /employees on new http:Listener(8080) {\n\n\n   isolated resource function post .(store:EmployeeInsert emp) returns string|error? {\n       string[] employeeIds = check sClient->/employees.post([emp]);\n       return employeeIds[0];\n   }\n  \n   isolated resource function get [string id]() returns store:Employee|error {\n       return check sClient->/employees/[id];\n   }\n  \n   resource function get .() returns store:Employee[]|error? {\n       stream<store:Employee, persist:Error?> resultStream = sClient->/employees;\n       return check from store:Employee employee in resultStream\n           select employee;\n   }\n\n\n   isolated resource function put [string id](store:EmployeeUpdate emp) returns store:Employee|error? {\n       return check sClient->/employees/[id].put(emp);\n   }\n  \n   isolated resource function delete [string id]() returns store:Employee|error? {\n       return check sClient->/employees/[id].delete();      \n   }\n}\n```\n\nRun the Ballerina project again,\n\n```\n$ bal run\n\nCompiling source\n        foo/rainier:0.1.0\n\n\nRunning executable\n```\n\n> **Info:** This creates an `/employees` endpoint on port 8080, which can be accessed via a browser at http://locahost:8080/employees.\n\n### Try the service\n\nInvoke the defined resource method by sending the POST request below to http://localhost:8080/employees with the required data as a JSON payload.\n\n```\n$ curl -X POST http://localhost:8080/employees/ -H \"Content-Type: application/json\" -d \"{ \\\"id\\\": \\\"6\\\", \\\"firstName\\\": \\\"test\\\", \\\"lastName\\\": \\\"test\\\", \\\"email\\\": \\\"test@test.com\\\", \\\"phone\\\": \\\"882 771 110\\\", \\\"hireDate\\\": { \\\"year\\\": 2021, \\\"month\\\": 12, \\\"day\\\": 16 }, \\\"managerId\\\": \\\"1\\\", \\\"jobTitle\\\": \\\"Sales Manager\\\" }\"\n```\n \nThe entered employee ID `6` will be returned as the response.\n","id":"manage-data-persistence-with-bal-persist","sub":"featured-scenarios","third":"","slug":"featured-scenarios/manage-data-persistence-with-bal-persist","codes":"[[-1078922858,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color: #fff\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">[</span><span style=\\\"color: #6F42C1\\\">persist</span><span style=\\\"color: #24292E\\\">]</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">datastore = </span><span style=\\\"color: #032F62\\\">&quot;inmemory&quot;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">module = </span><span style=\\\"color: #032F62\\\">&quot;rainier.store&quot;</span></span></code></pre>\"],[-1857447104,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color: #fff\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">import</span><span style=\\\"color: #24292E\\\"> ballerina/persist </span><span style=\\\"color: #D73A49\\\">as</span><span style=\\\"color: #24292E\\\"> _;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">import</span><span style=\\\"color: #24292E\\\"> ballerina/time;</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">public</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">type</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #6F42C1\\\">Employee</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">record</span><span style=\\\"color: #24292E\\\"> {</span><span style=\\\"color: #D73A49\\\">|</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">   </span><span style=\\\"color: #D73A49\\\">readonly</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #005CC5\\\">string</span><span style=\\\"color: #24292E\\\"> id;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">   </span><span style=\\\"color: #005CC5\\\">string</span><span style=\\\"color: #24292E\\\"> firstName;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">   </span><span style=\\\"color: #005CC5\\\">string</span><span style=\\\"color: #24292E\\\"> lastName;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">   </span><span style=\\\"color: #005CC5\\\">string</span><span style=\\\"color: #24292E\\\"> email;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">   </span><span style=\\\"color: #005CC5\\\">string</span><span style=\\\"color: #24292E\\\"> phone;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">   time</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\">Date hireDate;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">   </span><span style=\\\"color: #005CC5\\\">string</span><span style=\\\"color: #24292E\\\">? managerId;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">   </span><span style=\\\"color: #005CC5\\\">string</span><span style=\\\"color: #24292E\\\"> jobTitle;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">|</span><span style=\\\"color: #24292E\\\">};</span></span></code></pre>\"],[-1047712398,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color: #fff\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">import</span><span style=\\\"color: #24292E\\\"> rainier.store;</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">store</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\">Client sClient </span><span style=\\\"color: #D73A49\\\">=</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">check</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">new</span><span style=\\\"color: #24292E\\\">();</span></span></code></pre>\"],[734441728,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color: #fff\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">import</span><span style=\\\"color: #24292E\\\"> ballerina/io;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">import</span><span style=\\\"color: #24292E\\\"> rainier.store;</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">final</span><span style=\\\"color: #24292E\\\"> store</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\">Client sClient </span><span style=\\\"color: #D73A49\\\">=</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">check</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">new</span><span style=\\\"color: #24292E\\\">();</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">public</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">function</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #6F42C1\\\">main</span><span style=\\\"color: #24292E\\\">() </span><span style=\\\"color: #D73A49\\\">returns</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">error?</span><span style=\\\"color: #24292E\\\"> {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">   store</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\">EmployeeInsert employee1 </span><span style=\\\"color: #D73A49\\\">=</span><span style=\\\"color: #24292E\\\"> {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">       id</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #032F62\\\">&quot;emp_01&quot;</span><span style=\\\"color: #24292E\\\">,</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">       firstName</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #032F62\\\">&quot;John&quot;</span><span style=\\\"color: #24292E\\\">,</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">       lastName</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #032F62\\\">&quot;Doe&quot;</span><span style=\\\"color: #24292E\\\">,</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">       email</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #032F62\\\">&quot;johnd@xyz.com&quot;</span><span style=\\\"color: #24292E\\\">,</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">       phone</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #032F62\\\">&quot;1234567890&quot;</span><span style=\\\"color: #24292E\\\">,</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">       hireDate</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\"> {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">           year</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #005CC5\\\">2020</span><span style=\\\"color: #24292E\\\">,</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">           month</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #005CC5\\\">10</span><span style=\\\"color: #24292E\\\">,</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">           day</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #005CC5\\\">10</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">       },</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">       managerId</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #032F62\\\">&quot;mng_01&quot;</span><span style=\\\"color: #24292E\\\">,</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">       jobTitle</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #032F62\\\">&quot;Software Engineer&quot;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">   };</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">   </span><span style=\\\"color: #005CC5\\\">string</span><span style=\\\"color: #24292E\\\">[] employeeIds </span><span style=\\\"color: #D73A49\\\">=</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">check</span><span style=\\\"color: #24292E\\\"> sClient</span><span style=\\\"color: #D73A49\\\">-&gt;/</span><span style=\\\"color: #24292E\\\">employees.</span><span style=\\\"color: #6F42C1\\\">post</span><span style=\\\"color: #24292E\\\">([employee1]);</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">   io</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #6F42C1\\\">println</span><span style=\\\"color: #24292E\\\">(</span><span style=\\\"color: #032F62\\\">&quot;Inserted employee id: &quot;</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">+</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #E36209\\\">employeeIds</span><span style=\\\"color: #24292E\\\">[</span><span style=\\\"color: #005CC5\\\">0</span><span style=\\\"color: #24292E\\\">]);</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">}</span></span></code></pre>\"],[-767531578,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color: #fff\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">import</span><span style=\\\"color: #24292E\\\"> ballerina/io;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">import</span><span style=\\\"color: #24292E\\\"> rainier.store;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">import</span><span style=\\\"color: #24292E\\\"> ballerina/persist;</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">final</span><span style=\\\"color: #24292E\\\"> store</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\">Client sClient </span><span style=\\\"color: #D73A49\\\">=</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">check</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">new</span><span style=\\\"color: #24292E\\\"> ();</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">public</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">function</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #6F42C1\\\">main</span><span style=\\\"color: #24292E\\\">() </span><span style=\\\"color: #D73A49\\\">returns</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">error?</span><span style=\\\"color: #24292E\\\"> {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">   </span><span style=\\\"color: #6A737D\\\">// Get the complete `Employee` record.</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">   </span><span style=\\\"color: #D73A49\\\">stream&lt;</span><span style=\\\"color: #24292E\\\">store</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\">Employee, persist</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\">Error?</span><span style=\\\"color: #D73A49\\\">&gt;</span><span style=\\\"color: #24292E\\\"> employees </span><span style=\\\"color: #D73A49\\\">=</span><span style=\\\"color: #24292E\\\"> sClient</span><span style=\\\"color: #D73A49\\\">-&gt;/</span><span style=\\\"color: #24292E\\\">employees;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">   </span><span style=\\\"color: #D73A49\\\">check</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">from</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #005CC5\\\">var</span><span style=\\\"color: #24292E\\\"> employee </span><span style=\\\"color: #D73A49\\\">in</span><span style=\\\"color: #24292E\\\"> employees</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">       </span><span style=\\\"color: #D73A49\\\">do</span><span style=\\\"color: #24292E\\\"> {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">           io</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #6F42C1\\\">println</span><span style=\\\"color: #24292E\\\">(</span><span style=\\\"color: #E36209\\\">employee</span><span style=\\\"color: #24292E\\\">);</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">       };</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">   </span><span style=\\\"color: #6A737D\\\">// Get only the `id`, `firstName`, and `lastName` fields.</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">   </span><span style=\\\"color: #D73A49\\\">stream&lt;</span><span style=\\\"color: #24292E\\\">EmployeeName, persist</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\">Error?</span><span style=\\\"color: #D73A49\\\">&gt;</span><span style=\\\"color: #24292E\\\"> empNames </span><span style=\\\"color: #D73A49\\\">=</span><span style=\\\"color: #24292E\\\"> sClient</span><span style=\\\"color: #D73A49\\\">-&gt;/</span><span style=\\\"color: #24292E\\\">employees;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">   </span><span style=\\\"color: #D73A49\\\">check</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">from</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #005CC5\\\">var</span><span style=\\\"color: #24292E\\\"> name </span><span style=\\\"color: #D73A49\\\">in</span><span style=\\\"color: #24292E\\\"> empNames</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">       </span><span style=\\\"color: #D73A49\\\">do</span><span style=\\\"color: #24292E\\\"> {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">           io</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #6F42C1\\\">println</span><span style=\\\"color: #24292E\\\">(</span><span style=\\\"color: #E36209\\\">name</span><span style=\\\"color: #24292E\\\">);</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">       };</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">}</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">type</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #6F42C1\\\">EmployeeName</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">record</span><span style=\\\"color: #24292E\\\"> {</span><span style=\\\"color: #D73A49\\\">|</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">   </span><span style=\\\"color: #005CC5\\\">string</span><span style=\\\"color: #24292E\\\"> id;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">   </span><span style=\\\"color: #005CC5\\\">string</span><span style=\\\"color: #24292E\\\"> firstName;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">   </span><span style=\\\"color: #005CC5\\\">string</span><span style=\\\"color: #24292E\\\"> lastName;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">|</span><span style=\\\"color: #24292E\\\">};</span></span></code></pre>\"],[803797410,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color: #fff\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">import</span><span style=\\\"color: #24292E\\\"> ballerina/io;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">import</span><span style=\\\"color: #24292E\\\"> rainier.store;</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">final</span><span style=\\\"color: #24292E\\\"> store</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\">Client sClient </span><span style=\\\"color: #D73A49\\\">=</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">check</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">new</span><span style=\\\"color: #24292E\\\"> ();</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">public</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">function</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #6F42C1\\\">main</span><span style=\\\"color: #24292E\\\">() </span><span style=\\\"color: #D73A49\\\">returns</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">error?</span><span style=\\\"color: #24292E\\\"> {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">   </span><span style=\\\"color: #005CC5\\\">string</span><span style=\\\"color: #24292E\\\"> empId </span><span style=\\\"color: #D73A49\\\">=</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #032F62\\\">&quot;emp_01&quot;</span><span style=\\\"color: #24292E\\\">;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">   </span><span style=\\\"color: #6A737D\\\">// Get the complete `Employee` record.</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">   store</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\">Employee employee </span><span style=\\\"color: #D73A49\\\">=</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">check</span><span style=\\\"color: #24292E\\\"> sClient</span><span style=\\\"color: #D73A49\\\">-&gt;/</span><span style=\\\"color: #24292E\\\">employees</span><span style=\\\"color: #D73A49\\\">/</span><span style=\\\"color: #24292E\\\">[empId];</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">   io</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #6F42C1\\\">println</span><span style=\\\"color: #24292E\\\">(</span><span style=\\\"color: #E36209\\\">employee</span><span style=\\\"color: #24292E\\\">);</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">   </span><span style=\\\"color: #6A737D\\\">// Get only the `employee_id`, `first_name`, and `last_name` fields.</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">   EmployeeName employeeName </span><span style=\\\"color: #D73A49\\\">=</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">check</span><span style=\\\"color: #24292E\\\"> sClient</span><span style=\\\"color: #D73A49\\\">-&gt;/</span><span style=\\\"color: #24292E\\\">employees</span><span style=\\\"color: #D73A49\\\">/</span><span style=\\\"color: #24292E\\\">[empId];</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">   io</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #6F42C1\\\">println</span><span style=\\\"color: #24292E\\\">(</span><span style=\\\"color: #E36209\\\">employeeName</span><span style=\\\"color: #24292E\\\">);</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">}</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">type</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #6F42C1\\\">EmployeeName</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">record</span><span style=\\\"color: #24292E\\\"> {</span><span style=\\\"color: #D73A49\\\">|</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">   </span><span style=\\\"color: #005CC5\\\">string</span><span style=\\\"color: #24292E\\\"> id;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">   </span><span style=\\\"color: #005CC5\\\">string</span><span style=\\\"color: #24292E\\\"> firstName;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">   </span><span style=\\\"color: #005CC5\\\">string</span><span style=\\\"color: #24292E\\\"> lastName;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">|</span><span style=\\\"color: #24292E\\\">};</span></span></code></pre>\"],[935958818,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color: #fff\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">import</span><span style=\\\"color: #24292E\\\"> ballerina/io;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">import</span><span style=\\\"color: #24292E\\\"> rainier.store;</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">final</span><span style=\\\"color: #24292E\\\"> store</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\">Client sClient </span><span style=\\\"color: #D73A49\\\">=</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">check</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">new</span><span style=\\\"color: #24292E\\\"> ();</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">public</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">function</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #6F42C1\\\">main</span><span style=\\\"color: #24292E\\\">() </span><span style=\\\"color: #D73A49\\\">returns</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">error?</span><span style=\\\"color: #24292E\\\"> {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">   </span><span style=\\\"color: #005CC5\\\">string</span><span style=\\\"color: #24292E\\\"> empId </span><span style=\\\"color: #D73A49\\\">=</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #032F62\\\">&quot;emp_01&quot;</span><span style=\\\"color: #24292E\\\">;</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">   </span><span style=\\\"color: #6A737D\\\">// Update the job title of the employee with the given ID.</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">   store</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\">Employee employee </span><span style=\\\"color: #D73A49\\\">=</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">check</span><span style=\\\"color: #24292E\\\"> sClient</span><span style=\\\"color: #D73A49\\\">-&gt;/</span><span style=\\\"color: #24292E\\\">employees</span><span style=\\\"color: #D73A49\\\">/</span><span style=\\\"color: #24292E\\\">[empId].</span><span style=\\\"color: #6F42C1\\\">put</span><span style=\\\"color: #24292E\\\">({</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">       jobTitle</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #032F62\\\">&quot;Senior Software Engineer&quot;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">   });</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">   io</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #6F42C1\\\">println</span><span style=\\\"color: #24292E\\\">(</span><span style=\\\"color: #E36209\\\">employee</span><span style=\\\"color: #24292E\\\">);</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">}</span></span></code></pre>\"],[1473033176,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color: #fff\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">import</span><span style=\\\"color: #24292E\\\"> ballerina/io;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">import</span><span style=\\\"color: #24292E\\\"> ballerina/persist;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">import</span><span style=\\\"color: #24292E\\\"> rainier.store;</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">final</span><span style=\\\"color: #24292E\\\"> store</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\">Client sClient </span><span style=\\\"color: #D73A49\\\">=</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">check</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">new</span><span style=\\\"color: #24292E\\\"> ();</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">public</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">function</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #6F42C1\\\">main</span><span style=\\\"color: #24292E\\\">() </span><span style=\\\"color: #D73A49\\\">returns</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">error?</span><span style=\\\"color: #24292E\\\"> {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">   </span><span style=\\\"color: #005CC5\\\">string</span><span style=\\\"color: #24292E\\\"> empId </span><span style=\\\"color: #D73A49\\\">=</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #032F62\\\">&quot;emp_01&quot;</span><span style=\\\"color: #24292E\\\">;</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">   </span><span style=\\\"color: #6A737D\\\">// Delete the employee with the given ID.</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">   _ </span><span style=\\\"color: #D73A49\\\">=</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">check</span><span style=\\\"color: #24292E\\\"> sClient</span><span style=\\\"color: #D73A49\\\">-&gt;/</span><span style=\\\"color: #24292E\\\">employees</span><span style=\\\"color: #D73A49\\\">/</span><span style=\\\"color: #24292E\\\">[empId].</span><span style=\\\"color: #6F42C1\\\">delete</span><span style=\\\"color: #24292E\\\">();</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">   </span><span style=\\\"color: #6A737D\\\">// Check if the employee is deleted.</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">   store</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\">Employee</span><span style=\\\"color: #D73A49\\\">|</span><span style=\\\"color: #24292E\\\">persist:Error result </span><span style=\\\"color: #D73A49\\\">=</span><span style=\\\"color: #24292E\\\"> sClient</span><span style=\\\"color: #D73A49\\\">-&gt;/</span><span style=\\\"color: #24292E\\\">employees</span><span style=\\\"color: #D73A49\\\">/</span><span style=\\\"color: #24292E\\\">[empId].</span><span style=\\\"color: #6F42C1\\\">get</span><span style=\\\"color: #24292E\\\">();</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">   </span><span style=\\\"color: #D73A49\\\">if</span><span style=\\\"color: #24292E\\\"> result </span><span style=\\\"color: #D73A49\\\">is</span><span style=\\\"color: #24292E\\\"> persist</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\">NotFoundError {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">       io</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #6F42C1\\\">println</span><span style=\\\"color: #24292E\\\">(</span><span style=\\\"color: #032F62\\\">&quot;Employee not found&quot;</span><span style=\\\"color: #24292E\\\">);</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">   } </span><span style=\\\"color: #D73A49\\\">else</span><span style=\\\"color: #24292E\\\"> {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">       io</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #6F42C1\\\">println</span><span style=\\\"color: #24292E\\\">(</span><span style=\\\"color: #032F62\\\">&quot;Employee found&quot;</span><span style=\\\"color: #24292E\\\">);</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">   }</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">}</span></span></code></pre>\"],[1314745154,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color: #fff\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">import</span><span style=\\\"color: #24292E\\\"> ballerina/http;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">import</span><span style=\\\"color: #24292E\\\"> ballerina/persist;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">import</span><span style=\\\"color: #24292E\\\"> rainier.store;</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">final</span><span style=\\\"color: #24292E\\\"> store</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\">Client sClient </span><span style=\\\"color: #D73A49\\\">=</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">check</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">new</span><span style=\\\"color: #24292E\\\">();</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">service</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #6F42C1\\\">/employees</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">on</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">new</span><span style=\\\"color: #24292E\\\"> http:Listener(</span><span style=\\\"color: #005CC5\\\">8080</span><span style=\\\"color: #24292E\\\">) {</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">   </span><span style=\\\"color: #D73A49\\\">isolated</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">resource</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">function</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #6F42C1\\\">post</span><span style=\\\"color: #24292E\\\"> .(</span><span style=\\\"color: #E36209\\\">store</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\">EmployeeInsert emp) </span><span style=\\\"color: #D73A49\\\">returns</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #005CC5\\\">string</span><span style=\\\"color: #D73A49\\\">|error?</span><span style=\\\"color: #24292E\\\"> {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">       </span><span style=\\\"color: #005CC5\\\">string</span><span style=\\\"color: #24292E\\\">[] employeeIds </span><span style=\\\"color: #D73A49\\\">=</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">check</span><span style=\\\"color: #24292E\\\"> sClient</span><span style=\\\"color: #D73A49\\\">-&gt;/</span><span style=\\\"color: #24292E\\\">employees.</span><span style=\\\"color: #6F42C1\\\">post</span><span style=\\\"color: #24292E\\\">([emp]);</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">       </span><span style=\\\"color: #D73A49\\\">return</span><span style=\\\"color: #24292E\\\"> employeeIds[</span><span style=\\\"color: #005CC5\\\">0</span><span style=\\\"color: #24292E\\\">];</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">   }</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">  </span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">   </span><span style=\\\"color: #D73A49\\\">isolated</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">resource</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">function</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #6F42C1\\\">get</span><span style=\\\"color: #24292E\\\"> [</span><span style=\\\"color: #005CC5\\\">string</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #E36209\\\">id</span><span style=\\\"color: #24292E\\\">]() </span><span style=\\\"color: #D73A49\\\">returns</span><span style=\\\"color: #24292E\\\"> store</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\">Employee</span><span style=\\\"color: #D73A49\\\">|error</span><span style=\\\"color: #24292E\\\"> {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">       </span><span style=\\\"color: #D73A49\\\">return</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">check</span><span style=\\\"color: #24292E\\\"> sClient</span><span style=\\\"color: #D73A49\\\">-&gt;/</span><span style=\\\"color: #24292E\\\">employees</span><span style=\\\"color: #D73A49\\\">/</span><span style=\\\"color: #24292E\\\">[id];</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">   }</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">  </span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">   </span><span style=\\\"color: #D73A49\\\">resource</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">function</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #6F42C1\\\">get</span><span style=\\\"color: #24292E\\\"> .() </span><span style=\\\"color: #D73A49\\\">returns</span><span style=\\\"color: #24292E\\\"> store</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\">Employee[]</span><span style=\\\"color: #D73A49\\\">|error</span><span style=\\\"color: #24292E\\\">? {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">       </span><span style=\\\"color: #D73A49\\\">stream&lt;</span><span style=\\\"color: #24292E\\\">store</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\">Employee, persist</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\">Error?</span><span style=\\\"color: #D73A49\\\">&gt;</span><span style=\\\"color: #24292E\\\"> resultStream </span><span style=\\\"color: #D73A49\\\">=</span><span style=\\\"color: #24292E\\\"> sClient</span><span style=\\\"color: #D73A49\\\">-&gt;/</span><span style=\\\"color: #24292E\\\">employees;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">       </span><span style=\\\"color: #D73A49\\\">return</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">check</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">from</span><span style=\\\"color: #24292E\\\"> store</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\">Employee employee </span><span style=\\\"color: #D73A49\\\">in</span><span style=\\\"color: #24292E\\\"> resultStream</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">           </span><span style=\\\"color: #D73A49\\\">select</span><span style=\\\"color: #24292E\\\"> employee;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">   }</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">   </span><span style=\\\"color: #D73A49\\\">isolated</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">resource</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">function</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #6F42C1\\\">put</span><span style=\\\"color: #24292E\\\"> [</span><span style=\\\"color: #005CC5\\\">string</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #E36209\\\">id</span><span style=\\\"color: #24292E\\\">](</span><span style=\\\"color: #E36209\\\">store</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\">EmployeeUpdate emp) </span><span style=\\\"color: #D73A49\\\">returns</span><span style=\\\"color: #24292E\\\"> store</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\">Employee</span><span style=\\\"color: #D73A49\\\">|error</span><span style=\\\"color: #24292E\\\">? {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">       </span><span style=\\\"color: #D73A49\\\">return</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">check</span><span style=\\\"color: #24292E\\\"> sClient</span><span style=\\\"color: #D73A49\\\">-&gt;/</span><span style=\\\"color: #24292E\\\">employees</span><span style=\\\"color: #D73A49\\\">/</span><span style=\\\"color: #24292E\\\">[id].</span><span style=\\\"color: #6F42C1\\\">put</span><span style=\\\"color: #24292E\\\">(</span><span style=\\\"color: #E36209\\\">emp</span><span style=\\\"color: #24292E\\\">);</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">   }</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">  </span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">   </span><span style=\\\"color: #D73A49\\\">isolated</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">resource</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">function</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #6F42C1\\\">delete</span><span style=\\\"color: #24292E\\\"> [</span><span style=\\\"color: #005CC5\\\">string</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #E36209\\\">id</span><span style=\\\"color: #24292E\\\">]() </span><span style=\\\"color: #D73A49\\\">returns</span><span style=\\\"color: #24292E\\\"> store</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\">Employee</span><span style=\\\"color: #D73A49\\\">|error</span><span style=\\\"color: #24292E\\\">? {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">       </span><span style=\\\"color: #D73A49\\\">return</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">check</span><span style=\\\"color: #24292E\\\"> sClient</span><span style=\\\"color: #D73A49\\\">-&gt;/</span><span style=\\\"color: #24292E\\\">employees</span><span style=\\\"color: #D73A49\\\">/</span><span style=\\\"color: #24292E\\\">[id].</span><span style=\\\"color: #6F42C1\\\">delete</span><span style=\\\"color: #24292E\\\">();      </span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">   }</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">}</span></span></code></pre>\"]]"},"__N_SSG":true}