{"pageProps":{"frontmatter":{"layout":"ballerina-cli-documentation-left-nav-pages-swanlake","title":"gRPC tool","description":"The `Protocol Buffers to Ballerina` tool provides capabilities to generate Ballerina source code for the Protocol Buffer definition.","keywords":"ballerina, protocol buffers, programming language","permalink":"/learn/cli-documentation/grpc/","active":"grpc","intro":"Protocol Buffers is an open-source cross-platform data format used to serialize structured data. gRPC uses Protocol Buffers as Interface Definition Language to create service contracts, detailing all of its remote methods and message formats. The `Protocol Buffers to Ballerina` tooling makes it easy for users to develop a service documented in a Protocol Buffers by generating Ballerina service/client stub files and skeletons."},"content":"\n## Prepare the service definition\n\nThe example below shows a sample Protocol Buffers definition (`helloworld.proto` file).\n\n```proto\nsyntax = \"proto3\";\n\npackage helloworld;\n\n// The greeting service definition.\nservice Greeter {\n // Sends a greeting\n rpc sayHello (HelloRequest) returns (HelloReply);\n}\n\n// The request message with the user's name.\nmessage HelloRequest {\n string name = 1;\n}\n\n// The response message with the greetings\nmessage HelloReply {\n string message = 1;\n}\n```\n**Note:** The sample service definition is taken from the [gRPC official site](https://grpc.io/docs/what-is-grpc/introduction/).\n\n## Usage\n\nThe code generation tool can produce `service/client stub files` and `service/client skeletons` in the Ballerina Language.\n \n>**Info:** In Ballerina, Protocol Buffers serialization is supported only in the gRPC module. Therefore, you can only use this tool to generate Ballerina source code for gRPC service definitions.\n\nYou can generate Ballerina source code using the following command.\n\n```\n$ bal grpc --input <proto-file-path> \n         [--output <path>] \n         [--mode client|service]\n         [--proto-path <proto-directory>]\n```\n\n## Command options\n\n| Parameter      | Description                                                                                                                                                                                                                                                                                                                                                  | Mandatory/Optional |\n|----------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------|\n| `--input`  | Path of the `.proto` definition file or a directory containing multiple `.proto` files.                                                                                                                                                                                                                         | Mandatory           |\n| `--output`     | Location of the generated Ballerina source files. If the output path is not specified, the output is written to a directory corresponding to the package in the Protocol Buffers definition. If the package is not specified, the output is written to a directory named 'temp' in the current location.                                                                                                                                          | Optional           |\n| `--mode`     | Set the mode as client or service to generate code samples. If not specified, only the stub file is generated.                                                                                                                                          | Optional           |\n| `-- proto-path`     | Path to a directory in which to look for `.proto` files when resolving import directives. If omitted, the current directory is used. The `.proto` file specified in the `input` must reside in the `proto-path` so that the compiler can determine its canonical name.                                                                                                                                         | Optional           |\n\n## Generate the stub \n\nExecute the following command to generate only the client/service stub file.\n\n```\n$ bal grpc --input helloworld.proto --output stubs\n```\n\nOnce you execute the command, only the stub file (`helloworld_pb.bal`) is generated inside the `stubs` directory.\n\n## Generate the stub and service template\n\nExecute the below command to generate the client/service stub and service template files.\n\n```\n$ bal grpc --input helloworld.proto --mode service --output service\n```\n\nOnce you execute the command, the stub file (`helloworld_pb.bal`) and the service template file (`greeter_service.bal`) are generated inside the service directory.\n\n> **Note:** If you have multiple services in a Protocol Buffers definition, this command will generate a stub file with common message types and a service template file for each service definition. This is to avoid duplicating message types in all the service files.\n\n## Generate the stub and client template\n\nExecute the following command to generate the client/service stub and client template files.\n\n```\n$ bal grpc --input helloworld.proto --mode client --output client\n```\n\nOnce you execute the command, the stub file (`helloworld_pb.bal`) and the client template file (`greeter_client.bal`) are generated inside the client directory.\n","id":"grpc-tool","sub":"","third":"","slug":"grpc-tool","codes":"[[-2036654305,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color:#fff;color:#24292e\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span>syntax = \\\"proto3\\\";</span></span>\\n<span class=\\\"line\\\"><span></span></span>\\n<span class=\\\"line\\\"><span>package helloworld;</span></span>\\n<span class=\\\"line\\\"><span></span></span>\\n<span class=\\\"line\\\"><span>// The greeting service definition.</span></span>\\n<span class=\\\"line\\\"><span>service Greeter {</span></span>\\n<span class=\\\"line\\\"><span> // Sends a greeting</span></span>\\n<span class=\\\"line\\\"><span> rpc sayHello (HelloRequest) returns (HelloReply);</span></span>\\n<span class=\\\"line\\\"><span>}</span></span>\\n<span class=\\\"line\\\"><span></span></span>\\n<span class=\\\"line\\\"><span>// The request message with the user's name.</span></span>\\n<span class=\\\"line\\\"><span>message HelloRequest {</span></span>\\n<span class=\\\"line\\\"><span> string name = 1;</span></span>\\n<span class=\\\"line\\\"><span>}</span></span>\\n<span class=\\\"line\\\"><span></span></span>\\n<span class=\\\"line\\\"><span>// The response message with the greetings</span></span>\\n<span class=\\\"line\\\"><span>message HelloReply {</span></span>\\n<span class=\\\"line\\\"><span> string message = 1;</span></span>\\n<span class=\\\"line\\\"><span>}</span></span></code></pre>\"]]"},"__N_SSG":true}