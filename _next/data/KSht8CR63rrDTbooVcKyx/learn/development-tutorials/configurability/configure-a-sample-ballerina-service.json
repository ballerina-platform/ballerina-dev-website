{"pageProps":{"frontmatter":{"layout":"ballerina-configurable-left-nav-pages-swanlake","title":"Configure a sample Ballerina service","description":"Ballerina supports configurability through the configurable, module-level variables.","keywords":"ballerina, programming language, configurable, variables","permalink":"/learn/configure-a-sample-ballerina-service/","active":"configure-a-sample-ballerina-service/","intro":"Configurability enables users to modify the system behavior through external user inputs. Ballerina Language provides an in-built functionality to configure values at runtime through configurable  module-level variables."},"content":"\nConsider the following step-by-step guide to configuring a Ballerina package that contains an HTTP service.\n\n1. Create a Ballerina package using the following command.\n\n    ```\n    $ bal new greetings\n    ```\n\n2. Replace the content of the file `main.bal` with the following.\n\n```ballerina\nimport ballerina/http;\n\ntype Greeting record {|\n    string to;\n    string content;\n|};\n\nconfigurable int port = 9090;\nconfigurable Greeting greeting = ?;\n\nservice http:Service / on new http:Listener(port) {\n    resource function post greeting() returns string {\n        string message = string `Hello ${greeting.to}! ${greeting.content}`;\n        return message;\n    }\n}\n```\n\n   Here, we created a Ballerina package named `greetings` that contains configurable variables `port` and `greeting` with\n   respective types `int` and  `Greeting`. These variables are used in the HTTP service where the resource method\n   `greeting()` provides a configured message.<br>\n   The variable `port` is initialized with a default value `9090`, which indicates that the configuration is optional. This\n   value will be used for the variable initialization in case the configuration value will not be provided by the user at the runtime.<br>\n   The variable `greeting` is initialized with the `?` syntax, which indicates that providing a configuration value is mandatory. Therefore,\n   the program will finish the execution abruptly with a runtime exception, if the value is not provided at the runtime.\n\n3. To provide the values for `port` and `greeting` through a configuration file, create a file named `Config.toml`\n   with the following content in the current working directory.\n\n   ```toml\n   port = 8080\n \n   [greeting]\n   to = \"Tom\"\n   content = \"Good Morning!\"\n   ```\n\n4. Execute the following command to build and execute the program.\n   ```\n   $ bal run\n   ```\n\n   The output will be as follows.\n\n   ```\n   Compiling source\n        sample/greetings:0.1.0\n\n   Running executable\n   ```\n   This will start the HTTP service on the configured endpoint `8080`.\n\n\n6. To verify the configuration, execute the following command.\n   ```\n   $ curl http://localhost:8080/greeting -X POST\n   ```\n   The response will be similar to the following.\n   ```\n   Hello Tom! Good Morning!\n   ```\n","id":"configure-a-sample-ballerina-service","sub":"configurability","third":"","slug":"configurability/configure-a-sample-ballerina-service","codes":"[[627031371,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color:#fff;color:#24292e\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">import</span><span style=\\\"color:#24292E\\\"> ballerina/http;</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">type</span><span style=\\\"color:#6F42C1\\\"> Greeting</span><span style=\\\"color:#D73A49\\\"> record</span><span style=\\\"color:#24292E\\\"> {</span><span style=\\\"color:#D73A49\\\">|</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#005CC5\\\">    string</span><span style=\\\"color:#24292E\\\"> to;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#005CC5\\\">    string</span><span style=\\\"color:#24292E\\\"> content;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">|</span><span style=\\\"color:#24292E\\\">};</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">configurable</span><span style=\\\"color:#005CC5\\\"> int</span><span style=\\\"color:#24292E\\\"> port </span><span style=\\\"color:#D73A49\\\">=</span><span style=\\\"color:#005CC5\\\"> 9090</span><span style=\\\"color:#24292E\\\">;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">configurable</span><span style=\\\"color:#24292E\\\"> Greeting greeting </span><span style=\\\"color:#D73A49\\\">=</span><span style=\\\"color:#D73A49\\\"> ?</span><span style=\\\"color:#24292E\\\">;</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">service</span><span style=\\\"color:#24292E\\\"> http:Service / </span><span style=\\\"color:#D73A49\\\">on</span><span style=\\\"color:#D73A49\\\"> new</span><span style=\\\"color:#24292E\\\"> http:Listener(</span><span style=\\\"color:#E36209\\\">port</span><span style=\\\"color:#24292E\\\">) {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">    resource</span><span style=\\\"color:#D73A49\\\"> function</span><span style=\\\"color:#6F42C1\\\"> post</span><span style=\\\"color:#6F42C1\\\"> greeting</span><span style=\\\"color:#24292E\\\">() </span><span style=\\\"color:#D73A49\\\">returns</span><span style=\\\"color:#005CC5\\\"> string</span><span style=\\\"color:#24292E\\\"> {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#005CC5\\\">        string</span><span style=\\\"color:#24292E\\\"> message </span><span style=\\\"color:#D73A49\\\">=</span><span style=\\\"color:#005CC5\\\"> string</span><span style=\\\"color:#032F62\\\"> `Hello ${</span><span style=\\\"color:#24292E\\\">greeting</span><span style=\\\"color:#032F62\\\">.</span><span style=\\\"color:#24292E\\\">to</span><span style=\\\"color:#032F62\\\">}! ${</span><span style=\\\"color:#24292E\\\">greeting</span><span style=\\\"color:#032F62\\\">.</span><span style=\\\"color:#24292E\\\">content</span><span style=\\\"color:#032F62\\\">}`</span><span style=\\\"color:#24292E\\\">;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">        return</span><span style=\\\"color:#24292E\\\"> message;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">    }</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">}</span></span></code></pre>\"],[-1203529527,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color:#fff;color:#24292e\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">port = </span><span style=\\\"color:#005CC5\\\">8080</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">[</span><span style=\\\"color:#6F42C1\\\">greeting</span><span style=\\\"color:#24292E\\\">]</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">to = </span><span style=\\\"color:#032F62\\\">\\\"Tom\\\"</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">content = </span><span style=\\\"color:#032F62\\\">\\\"Good Morning!\\\"</span></span></code></pre>\"]]"},"__N_SSG":true}