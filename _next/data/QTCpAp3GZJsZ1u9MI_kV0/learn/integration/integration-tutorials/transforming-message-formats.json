{"pageProps":{"frontmatter":{"layout":"ballerina-transforming-message-formats-left-nav-pages-swanlake","title":"Transforming message formats","permalink":"/learn/transforming-message-formats","description":"Integration tutorial to transform messages into different formats.","keywords":"ballerina, programming language, client, restful-api, integration","active":"transforming-message-formats","intro":"This tutorial helps you understand how Ballerina can be used to transform messages."},"content":"\n## Overview\n\nIn this tutorial, you will develop a service via which you can reserve appointments at hospitals. The requests are transformed from one format to another and forwarded to the hospital service to reserve the appointment.\n\nTo implement this use case, you will develop a REST service with a single resource using Visual Studio Code with the Ballerina Swan Lake extension. The resource will receive the user request, transform the payload to the format expected by the hospital service, send a request with the transformed payload to the hospital service to make a reservation, and respond with the reservation details.\n\nThe flow is as follows\n\n1. Receive a request with a JSON payload similar to the following.\n\n    ```json\n    {\n        \"firstName\": \"John\",\n        \"lastName\": \"Doe\",\n        \"dob\": \"1940-03-19\",\n        \"ssn\": [234, 23, 525],\n        \"address\": \"California\",\n        \"phone\": \"8770586755\",\n        \"email\": \"johndoe@gmail.com\",\n        \"doctor\": \"thomas collins\",\n        \"hospitalId\": \"grandoak\",\n        \"hospital\": \"grand oak community hospital\",\n        \"cardNo\": \"7844481124110331\",\n        \"appointmentDate\": \"2017-04-02\"\n    }\n    ```\n\n2. Transform the request payload to the following form.\n\n    ```json\n    {\n        \"patient\": {\n            \"name\": \"John Doe\",\n            \"dob\": \"1940-03-19\",\n            \"ssn\": \"234-23-525\",\n            \"address\": \"California\",\n            \"phone\": \"8770586755\",\n            \"email\": \"johndoe@gmail.com\",\n            \"card_no\": \"7844481124110331\"\n        },\n        \"doctor\": \"thomas collins\",\n        \"hospital\": \"grand oak community hospital\",\n        \"appointment_date\": \"2017-04-02\"\n    }\n    ```\n\n3. Send a request to the hospital service and retrieve the response which will be similar to the following. \n\n    ```json\n    {\n        \"appointmentNumber\": 8,\n        \"doctor\": {\n            \"name\": \"thomas collins\",\n            \"hospital\": \"grand oak community hospital\",\n            \"category\": \"surgery\",\n            \"availability\": \"9.00 a.m - 11.00 a.m\",\n            \"fee\": 7000.0\n        },\n        \"patient\": {\n            \"name\": \"John Doe\",\n            \"dob\": \"1940-03-19\",\n            \"ssn\": \"234-23-525\",\n            \"address\": \"California\",\n            \"phone\": \"8770586755\",\n            \"email\": \"johndoe@gmail.com\"\n        },\n        \"hospital\": \"grand oak community hospital\",\n        \"confirmed\": false,\n        \"appointmentDate\": \"2017-04-02\"\n    }\n    ```\n\n### Concepts covered\n\n- REST API\n- HTTP client\n- Data mapper\n\n## Develop the application\n\n### Step 1: Set up the workspace\n\nInstall [Ballerina Swan Lake](https://ballerina.io/downloads/) and the [Ballerina Swan Lake VS Code extension](https://marketplace.visualstudio.com/items?itemName=wso2.ballerina) on VS Code.\n\n### Step 2: Develop the service\n\nFollow the instructions given in this section to develop the service.\n\n1. Create a new Ballerina project using the `bal` command and open it in VS Code.\n\n    ```\n    $ bal new transforming-message-formats\n    ```\n\n2. Introduce the source code in files with the `.bal` extension (e.g., the `main.bal` file).\n\n    Import the\n    - `ballerina/http` module to develop the REST API and define the client that can be used to send requests to the backend services\n    - `ballerina/log` module to log debug, error, or info level information for each client request\n\n    ```ballerina\n    import ballerina/http;\n    import ballerina/log;\n    ```\n\n3. Define two [configurable variables](https://ballerina.io/learn/by-example/#configurability) for the port on which the listener should listen and the URL of the hospital service.\n\n    ```ballerina\n    configurable int port = 8290;\n    configurable string hospitalServiceUrl = \"http://localhost:9090\";\n    ```\n\n4. Define an [`http:Client`](https://ballerina.io/learn/by-example/#http-client) client to send requests to the backend hospital service.\n\n    ```ballerina\n    final http:Client hospitalServiceEP = check initializeHttpClient();\n\n    function initializeHttpClient() returns http:Client|error => new (hospitalServiceUrl);\n    ```\n\n    > **Note** The argument passed to the `new` expression (`hospitalServiceUrl`) is the URL of the backend hospital service.\n    > \n    > Here, a separate function is used to initialize the client to aid with testing. Alternatively, the `new` expression can be used directly to initialize the client.\n    >\n    > ```ballerina\n    > final http:Client hospitalServiceEP = new (hospitalServiceUrl);\n    >```\n\n5. Use the data mapper to define the `transform` function which transforms a `HealthcareReservation` record, representing the payload, to a `HospitalReservation` record.\n\n    ![Data mapper guide](/learn/images/tutorial_transforming_message_formats_data_mapper_guide.gif)\n\n    The data mapper view of the completed `transform` function is shown below.\n\n    ![Data mapper view](/learn/images/tutorial_transforming_message_formats_data_mapper_view.png)\n\n    The source code of the `transform` function will be as follows.\n\n    ```ballerina\n    isolated function transform(HealthcareReservation reservation) returns HospitalReservation => \n        let var ssn = reservation.ssn in {\n            patient: {\n                name: reservation.firstName + \" \" + reservation.lastName,\n                dob: reservation.dob,\n                ssn: string `${ssn[0]}-${ssn[1]}-${ssn[2]}`,\n                address: reservation.address,\n                phone: reservation.phone,\n                email: reservation.email\n            },\n            doctor: reservation.doctor,\n            hospital: reservation.hospital,\n            appointment_date: reservation.appointmentDate\n        };\n    ```\n\n6. Define the rest of the records corresponding to the response payload from the hospital service.\n\n    ```ballerina\n    type Doctor record {|\n        string name;\n        string hospital;\n        string category;\n        string availability;\n        decimal fee;\n    |};\n\n    type ReservationResponse record {|\n        int appointmentNumber;\n        Doctor doctor;\n        Patient patient;\n        string hospital;\n        boolean confirmed;\n        string appointmentDate;\n    |};\n    ```\n\n7. Define the [HTTP service (REST API)](https://ballerina.io/learn/by-example/#rest-service) that has the resource that accepts user requests, transforms the payload, makes a call to the backend hospital service to make the reservation, and responds to the client.\n\n    ```ballerina\n    service /healthcare on new http:Listener(port) {\n        isolated resource function post categories/[string category]/reserve(HealthcareReservation payload)\n                returns ReservationResponse|http:NotFound|http:InternalServerError {\n            \n        }\n    }\n    ```\n\n    - Use `/healthcare` as the service path (or the context) of the service which is attached to the listener listening on port `port`. \n\n    - The HTTP resource allows the `POST` operation on resource path `/categories/{category}/reserve`, where `category` (corresponding to the specialization) is a path parameter.\n\n    - Use `HealthcareReservation` as a parameter indicating that the resource expects a JSON object corresponding to `HealthcareReservation` as the payload. \n\n    - Use `ReservationResponse|http:NotFound|http:InternalServerError` as the return type to indicate that the response will have a JSON payload corresponding to `ReservationResponse` on success or the response will be an `http:NotFound` or `http:InternalServerError` response on error.\n\n8. Implement the logic.\n\n    ```ballerina\n    service /healthcare on new http:Listener(port) {\n        isolated resource function post categories/[string category]/reserve(HealthcareReservation payload)\n                returns ReservationResponse|http:NotFound|http:InternalServerError {\n            HospitalReservation hospitalReservation = transform(payload);\n\n            ReservationResponse|http:ClientError resp =\n                        hospitalServiceEP->/[payload.hospitalId]/categories/[category]/reserve.post(hospitalReservation);\n\n            if resp is ReservationResponse {\n                log:printDebug(\"Reservation request successful\",\n                                name = hospitalReservation.patient.name,\n                                appointmentNumber = resp.appointmentNumber);\n                return resp;\n            }\n\n            log:printError(\"Reservation request failed\", resp);\n            if resp is http:ClientRequestError {\n                return <http:NotFound> {body: \"Unknown hospital, doctor or category\"};\n            }\n\n            return <http:InternalServerError> {body: resp.message()};\n        }\n    }\n    ```\n\n    - Use the `transform` function to transform the payload from a `HealthcareReservation` record to a `HospitalReservation` record.\n\n        ```ballerina\n        HospitalReservation hospitalReservation = transform(payload);\n        ```\n\n    - Use the transformed payload in the request to the hospital service and get the response. Here, The `hospitalId` and `category` values are used as path parameters.\n\n        ```ballerina\n        ReservationResponse|http:ClientError resp =\n                        hospitalServiceEP->/[payload.hospitalId]/categories/[category]/reserve.post(hospitalReservation);\n        ```\n\n    - The `log` functions are used to [log](https://ballerina.io/learn/by-example/#log) information at `INFO`, `DEBUG`, and `ERROR` log levels.\n\n    - Use the `is` check to check whether the response is `ReservationResponse` and return it as is (i.e., reservation successful).\n\n        ```ballerina\n        if resp is ReservationResponse {\n            log:printDebug(\"Reservation request successful\",\n                            name = hospitalReservation.patient.name,\n                            appointmentNumber = resp.appointmentNumber);\n            return resp;\n        }\n        ```\n\n    - If the response is not a `ReservationResponse` record, log the information at `ERROR` level. Return a \"NotFound\" response if the response from the hospital service is a `http:ClientRequestError` response or an \"InternalServerError\" response otherwise.\n\n        ```ballerina\n        log:printError(\"Reservation request failed\", resp);\n        if resp is http:ClientRequestError {\n            return <http:NotFound> {body: \"Unknown hospital, doctor or category\"};\n        }\n\n        return <http:InternalServerError> {body: resp.message()};\n        ```\n\nYou have successfully developed the required service.\n\n#### Complete source code\n\n```ballerina\nimport ballerina/http;\nimport ballerina/log;\n\nconfigurable int port = 8290;\nconfigurable string hospitalServiceUrl = \"http://localhost:9090\";\n\nfinal http:Client hospitalServiceEP = check initializeHttpClient();\n\nfunction initializeHttpClient() returns http:Client|error => new (hospitalServiceUrl);\n\ntype HealthcareReservation record {|\n    string firstName;\n    string lastName;\n    string dob;\n    int[3] ssn;\n    string address;\n    string phone;\n    string email;\n    string doctor;\n    string hospitalId;\n    string hospital;\n    string cardNo;\n    string appointmentDate;\n|};\n\ntype Patient record {|\n    string name;\n    string dob;\n    string ssn;\n    string address;\n    string phone;\n    string email;\n|};\n\ntype HospitalReservation record {|\n    Patient patient;\n    string doctor;\n    string hospital;\n    string appointment_date;\n|};\n\ntype Doctor record {|\n    string name;\n    string hospital;\n    string category;\n    string availability;\n    decimal fee;\n|};\n\ntype ReservationResponse record {|\n    int appointmentNumber;\n    Doctor doctor;\n    Patient patient;\n    string hospital;\n    boolean confirmed;\n    string appointmentDate;\n|};\n\nservice /healthcare on new http:Listener(port) {\n    isolated resource function post categories/[string category]/reserve(HealthcareReservation payload)\n            returns ReservationResponse|http:NotFound|http:InternalServerError {\n        HospitalReservation hospitalReservation = transform(payload);\n\n        ReservationResponse|http:ClientError resp =\n                    hospitalServiceEP->/[payload.hospitalId]/categories/[category]/reserve.post(hospitalReservation);\n\n        if resp is ReservationResponse {\n            log:printDebug(\"Reservation request successful\",\n                            name = hospitalReservation.patient.name,\n                            appointmentNumber = resp.appointmentNumber);\n            return resp;\n        }\n\n        log:printError(\"Reservation request failed\", resp);\n        if resp is http:ClientRequestError {\n            return <http:NotFound> {body: \"Unknown hospital, doctor or category\"};\n        }\n\n        return <http:InternalServerError> {body: resp.message()};\n    }\n}\n\nisolated function transform(HealthcareReservation reservation) returns HospitalReservation => \n    let var ssn = reservation.ssn in {\n        patient: {\n            name: reservation.firstName + \" \" + reservation.lastName,\n            dob: reservation.dob,\n            ssn: string `${ssn[0]}-${ssn[1]}-${ssn[2]}`,\n            address: reservation.address,\n            phone: reservation.phone,\n            email: reservation.email\n        },\n        doctor: reservation.doctor,\n        hospital: reservation.hospital,\n        appointment_date: reservation.appointmentDate\n    };\n```\n\n#### Sequence Diagram\n\nThe [sequence diagram view](https://wso2.com/ballerina/vscode/docs/implement-the-code/sequence-diagram-view/) for the implemented resource method is the following.\n\n<img src=\"/learn/images/tutorial_transforming_message_formats_diagram.png\" alt=\"Sequence Diagram\" height=\"800\" style=\"width:auto; max-width:100%\">\n\n### Step 3: Build and run the service\n\nYou can run this service by navigating to the project root and using the `bal run` command.\n\n```\ntransforming-message-formats$ bal run\nCompiling source\n        integration_tutorials/transforming_message_formats:0.1.0\n\nRunning executable\n```\n\n### Step 4: Try out the use case\n\nLet's test the use case by sending a request to the service.\n\n#### Start the backend service\n\nDownload the JAR file for the [backend service](https://github.com/ballerina-guides/integration-tutorials/blob/main/backends/hospital-service/hospitalservice.jar) and execute the following command to start the service:\n\n```\n$ bal run hospitalservice.jar\n```\n\n#### Send a request\n\nLet's send a request to the service using cURL as follows.\n\n1. Install and set up [cURL](https://curl.se/) as your client.\n\n2. Create a file named `request.json` with the request payload.\n\n    ```json\n    {\n        \"firstName\": \"John\",\n        \"lastName\": \"Doe\",\n        \"dob\": \"1940-03-19\",\n        \"ssn\": [234, 23, 525],\n        \"address\": \"California\",\n        \"phone\": \"8770586755\",\n        \"email\": \"johndoe@gmail.com\",\n        \"doctor\": \"thomas collins\",\n        \"hospitalId\": \"grandoak\",\n        \"hospital\": \"grand oak community hospital\",\n        \"cardNo\": \"7844481124110331\",\n        \"appointmentDate\": \"2017-04-02\"\n    }\n    ```\n\n3. Execute the following command.\n\n    ```\n    $ curl -v -X POST --data @request.json http://localhost:8290/healthcare/categories/surgery/reserve --header \"Content-Type:application/json\"\n    ```\n\n#### Verify the response\n\nYou will see a response similar to the following for a successful appointment reservation.\n\n```json\n{\n    \"appointmentNumber\": 8,\n    \"doctor\": {\n        \"name\": \"thomas collins\",\n        \"hospital\": \"grand oak community hospital\",\n        \"category\": \"surgery\",\n        \"availability\": \"9.00 a.m - 11.00 a.m\",\n        \"fee\": 7000.0\n    },\n    \"patient\": {\n        \"name\": \"John Doe\",\n        \"dob\": \"1940-03-19\",\n        \"ssn\": \"234-23-525\",\n        \"address\": \"California\",\n        \"phone\": \"8770586755\",\n        \"email\": \"johndoe@gmail.com\"\n    },\n    \"hospital\": \"grand oak community hospital\",\n    \"confirmed\": false,\n    \"appointmentDate\": \"2017-04-02\"\n}\n```\n\n## Complete implementation\n\nCheck out the [complete implementation](https://github.com/ballerina-guides/integration-tutorials/tree/main/transforming-message-formats) on GitHub.\n\n## References\n\n- [`ballerina/http` API docs](https://lib.ballerina.io/ballerina/http/latest)\n- [`ballerina/log` API docs](https://lib.ballerina.io/ballerina/log/latest)\n","slug":"transforming-message-formats","codes":"[[1005720838,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color: #fff\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">{</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #005CC5\\\">&quot;firstName&quot;</span><span style=\\\"color: #24292E\\\">: </span><span style=\\\"color: #032F62\\\">&quot;John&quot;</span><span style=\\\"color: #24292E\\\">,</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #005CC5\\\">&quot;lastName&quot;</span><span style=\\\"color: #24292E\\\">: </span><span style=\\\"color: #032F62\\\">&quot;Doe&quot;</span><span style=\\\"color: #24292E\\\">,</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #005CC5\\\">&quot;dob&quot;</span><span style=\\\"color: #24292E\\\">: </span><span style=\\\"color: #032F62\\\">&quot;1940-03-19&quot;</span><span style=\\\"color: #24292E\\\">,</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #005CC5\\\">&quot;ssn&quot;</span><span style=\\\"color: #24292E\\\">: [</span><span style=\\\"color: #005CC5\\\">234</span><span style=\\\"color: #24292E\\\">, </span><span style=\\\"color: #005CC5\\\">23</span><span style=\\\"color: #24292E\\\">, </span><span style=\\\"color: #005CC5\\\">525</span><span style=\\\"color: #24292E\\\">],</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #005CC5\\\">&quot;address&quot;</span><span style=\\\"color: #24292E\\\">: </span><span style=\\\"color: #032F62\\\">&quot;California&quot;</span><span style=\\\"color: #24292E\\\">,</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #005CC5\\\">&quot;phone&quot;</span><span style=\\\"color: #24292E\\\">: </span><span style=\\\"color: #032F62\\\">&quot;8770586755&quot;</span><span style=\\\"color: #24292E\\\">,</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #005CC5\\\">&quot;email&quot;</span><span style=\\\"color: #24292E\\\">: </span><span style=\\\"color: #032F62\\\">&quot;johndoe@gmail.com&quot;</span><span style=\\\"color: #24292E\\\">,</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #005CC5\\\">&quot;doctor&quot;</span><span style=\\\"color: #24292E\\\">: </span><span style=\\\"color: #032F62\\\">&quot;thomas collins&quot;</span><span style=\\\"color: #24292E\\\">,</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #005CC5\\\">&quot;hospitalId&quot;</span><span style=\\\"color: #24292E\\\">: </span><span style=\\\"color: #032F62\\\">&quot;grandoak&quot;</span><span style=\\\"color: #24292E\\\">,</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #005CC5\\\">&quot;hospital&quot;</span><span style=\\\"color: #24292E\\\">: </span><span style=\\\"color: #032F62\\\">&quot;grand oak community hospital&quot;</span><span style=\\\"color: #24292E\\\">,</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #005CC5\\\">&quot;cardNo&quot;</span><span style=\\\"color: #24292E\\\">: </span><span style=\\\"color: #032F62\\\">&quot;7844481124110331&quot;</span><span style=\\\"color: #24292E\\\">,</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #005CC5\\\">&quot;appointmentDate&quot;</span><span style=\\\"color: #24292E\\\">: </span><span style=\\\"color: #032F62\\\">&quot;2017-04-02&quot;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">}</span></span></code></pre>\"],[-307942898,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color: #fff\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">{</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #005CC5\\\">&quot;patient&quot;</span><span style=\\\"color: #24292E\\\">: {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">        </span><span style=\\\"color: #005CC5\\\">&quot;name&quot;</span><span style=\\\"color: #24292E\\\">: </span><span style=\\\"color: #032F62\\\">&quot;John Doe&quot;</span><span style=\\\"color: #24292E\\\">,</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">        </span><span style=\\\"color: #005CC5\\\">&quot;dob&quot;</span><span style=\\\"color: #24292E\\\">: </span><span style=\\\"color: #032F62\\\">&quot;1940-03-19&quot;</span><span style=\\\"color: #24292E\\\">,</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">        </span><span style=\\\"color: #005CC5\\\">&quot;ssn&quot;</span><span style=\\\"color: #24292E\\\">: </span><span style=\\\"color: #032F62\\\">&quot;234-23-525&quot;</span><span style=\\\"color: #24292E\\\">,</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">        </span><span style=\\\"color: #005CC5\\\">&quot;address&quot;</span><span style=\\\"color: #24292E\\\">: </span><span style=\\\"color: #032F62\\\">&quot;California&quot;</span><span style=\\\"color: #24292E\\\">,</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">        </span><span style=\\\"color: #005CC5\\\">&quot;phone&quot;</span><span style=\\\"color: #24292E\\\">: </span><span style=\\\"color: #032F62\\\">&quot;8770586755&quot;</span><span style=\\\"color: #24292E\\\">,</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">        </span><span style=\\\"color: #005CC5\\\">&quot;email&quot;</span><span style=\\\"color: #24292E\\\">: </span><span style=\\\"color: #032F62\\\">&quot;johndoe@gmail.com&quot;</span><span style=\\\"color: #24292E\\\">,</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">        </span><span style=\\\"color: #005CC5\\\">&quot;card_no&quot;</span><span style=\\\"color: #24292E\\\">: </span><span style=\\\"color: #032F62\\\">&quot;7844481124110331&quot;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    },</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #005CC5\\\">&quot;doctor&quot;</span><span style=\\\"color: #24292E\\\">: </span><span style=\\\"color: #032F62\\\">&quot;thomas collins&quot;</span><span style=\\\"color: #24292E\\\">,</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #005CC5\\\">&quot;hospital&quot;</span><span style=\\\"color: #24292E\\\">: </span><span style=\\\"color: #032F62\\\">&quot;grand oak community hospital&quot;</span><span style=\\\"color: #24292E\\\">,</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #005CC5\\\">&quot;appointment_date&quot;</span><span style=\\\"color: #24292E\\\">: </span><span style=\\\"color: #032F62\\\">&quot;2017-04-02&quot;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">}</span></span></code></pre>\"],[1007133881,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color: #fff\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">{</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #005CC5\\\">&quot;appointmentNumber&quot;</span><span style=\\\"color: #24292E\\\">: </span><span style=\\\"color: #005CC5\\\">8</span><span style=\\\"color: #24292E\\\">,</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #005CC5\\\">&quot;doctor&quot;</span><span style=\\\"color: #24292E\\\">: {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">        </span><span style=\\\"color: #005CC5\\\">&quot;name&quot;</span><span style=\\\"color: #24292E\\\">: </span><span style=\\\"color: #032F62\\\">&quot;thomas collins&quot;</span><span style=\\\"color: #24292E\\\">,</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">        </span><span style=\\\"color: #005CC5\\\">&quot;hospital&quot;</span><span style=\\\"color: #24292E\\\">: </span><span style=\\\"color: #032F62\\\">&quot;grand oak community hospital&quot;</span><span style=\\\"color: #24292E\\\">,</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">        </span><span style=\\\"color: #005CC5\\\">&quot;category&quot;</span><span style=\\\"color: #24292E\\\">: </span><span style=\\\"color: #032F62\\\">&quot;surgery&quot;</span><span style=\\\"color: #24292E\\\">,</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">        </span><span style=\\\"color: #005CC5\\\">&quot;availability&quot;</span><span style=\\\"color: #24292E\\\">: </span><span style=\\\"color: #032F62\\\">&quot;9.00 a.m - 11.00 a.m&quot;</span><span style=\\\"color: #24292E\\\">,</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">        </span><span style=\\\"color: #005CC5\\\">&quot;fee&quot;</span><span style=\\\"color: #24292E\\\">: </span><span style=\\\"color: #005CC5\\\">7000.0</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    },</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #005CC5\\\">&quot;patient&quot;</span><span style=\\\"color: #24292E\\\">: {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">        </span><span style=\\\"color: #005CC5\\\">&quot;name&quot;</span><span style=\\\"color: #24292E\\\">: </span><span style=\\\"color: #032F62\\\">&quot;John Doe&quot;</span><span style=\\\"color: #24292E\\\">,</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">        </span><span style=\\\"color: #005CC5\\\">&quot;dob&quot;</span><span style=\\\"color: #24292E\\\">: </span><span style=\\\"color: #032F62\\\">&quot;1940-03-19&quot;</span><span style=\\\"color: #24292E\\\">,</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">        </span><span style=\\\"color: #005CC5\\\">&quot;ssn&quot;</span><span style=\\\"color: #24292E\\\">: </span><span style=\\\"color: #032F62\\\">&quot;234-23-525&quot;</span><span style=\\\"color: #24292E\\\">,</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">        </span><span style=\\\"color: #005CC5\\\">&quot;address&quot;</span><span style=\\\"color: #24292E\\\">: </span><span style=\\\"color: #032F62\\\">&quot;California&quot;</span><span style=\\\"color: #24292E\\\">,</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">        </span><span style=\\\"color: #005CC5\\\">&quot;phone&quot;</span><span style=\\\"color: #24292E\\\">: </span><span style=\\\"color: #032F62\\\">&quot;8770586755&quot;</span><span style=\\\"color: #24292E\\\">,</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">        </span><span style=\\\"color: #005CC5\\\">&quot;email&quot;</span><span style=\\\"color: #24292E\\\">: </span><span style=\\\"color: #032F62\\\">&quot;johndoe@gmail.com&quot;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    },</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #005CC5\\\">&quot;hospital&quot;</span><span style=\\\"color: #24292E\\\">: </span><span style=\\\"color: #032F62\\\">&quot;grand oak community hospital&quot;</span><span style=\\\"color: #24292E\\\">,</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #005CC5\\\">&quot;confirmed&quot;</span><span style=\\\"color: #24292E\\\">: </span><span style=\\\"color: #005CC5\\\">false</span><span style=\\\"color: #24292E\\\">,</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #005CC5\\\">&quot;appointmentDate&quot;</span><span style=\\\"color: #24292E\\\">: </span><span style=\\\"color: #032F62\\\">&quot;2017-04-02&quot;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">}</span></span></code></pre>\"],[-539073824,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color: #fff\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">import</span><span style=\\\"color: #24292E\\\"> ballerina/http;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">import</span><span style=\\\"color: #24292E\\\"> ballerina/log;</span></span></code></pre>\"],[-24587877,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color: #fff\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">configurable</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #005CC5\\\">int</span><span style=\\\"color: #24292E\\\"> port </span><span style=\\\"color: #D73A49\\\">=</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #005CC5\\\">8290</span><span style=\\\"color: #24292E\\\">;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">configurable</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #005CC5\\\">string</span><span style=\\\"color: #24292E\\\"> hospitalServiceUrl </span><span style=\\\"color: #D73A49\\\">=</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #032F62\\\">&quot;http://localhost:9090&quot;</span><span style=\\\"color: #24292E\\\">;</span></span></code></pre>\"],[-448006004,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color: #fff\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">final</span><span style=\\\"color: #24292E\\\"> http</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\">Client hospitalServiceEP </span><span style=\\\"color: #D73A49\\\">=</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">check</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #6F42C1\\\">initializeHttpClient</span><span style=\\\"color: #24292E\\\">();</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">function</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #6F42C1\\\">initializeHttpClient</span><span style=\\\"color: #24292E\\\">() </span><span style=\\\"color: #D73A49\\\">returns</span><span style=\\\"color: #24292E\\\"> http</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\">Client</span><span style=\\\"color: #D73A49\\\">|error</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">=&gt;</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">new</span><span style=\\\"color: #24292E\\\"> (</span><span style=\\\"color: #E36209\\\">hospitalServiceUrl</span><span style=\\\"color: #24292E\\\">);</span></span></code></pre>\"],[-1654441597,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color: #fff\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">&gt;</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">final</span><span style=\\\"color: #24292E\\\"> http</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\">Client hospitalServiceEP </span><span style=\\\"color: #D73A49\\\">=</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">new</span><span style=\\\"color: #24292E\\\"> (</span><span style=\\\"color: #E36209\\\">hospitalServiceUrl</span><span style=\\\"color: #24292E\\\">);</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">&gt;</span><span style=\\\"color: #032F62\\\">```</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #032F62\\\">se the data mapper to define the `</span><span style=\\\"color: #6F42C1\\\">transform</span><span style=\\\"color: #032F62\\\">` function which transforms a `</span><span style=\\\"color: #6F42C1\\\">HealthcareReservation</span><span style=\\\"color: #032F62\\\">` record, representing the payload, to a `</span><span style=\\\"color: #6F42C1\\\">HospitalReservation</span><span style=\\\"color: #032F62\\\">` record.</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #032F62\\\">![Data mapper guide](/learn/images/tutorial_transforming_message_formats_data_mapper_guide.gif)</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #032F62\\\">The data mapper view of the completed `</span><span style=\\\"color: #6F42C1\\\">transform</span><span style=\\\"color: #032F62\\\">` function is shown below.</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #032F62\\\">![Data mapper view](/learn/images/tutorial_transforming_message_formats_data_mapper_view.png)</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #032F62\\\">The source code of the `</span><span style=\\\"color: #6F42C1\\\">transform</span><span style=\\\"color: #032F62\\\">` function will be as follows.</span></span></code></pre>\"],[1798520861,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color: #fff\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">type</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #6F42C1\\\">Doctor</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">record</span><span style=\\\"color: #24292E\\\"> {</span><span style=\\\"color: #D73A49\\\">|</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #005CC5\\\">string</span><span style=\\\"color: #24292E\\\"> name;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #005CC5\\\">string</span><span style=\\\"color: #24292E\\\"> hospital;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #005CC5\\\">string</span><span style=\\\"color: #24292E\\\"> category;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #005CC5\\\">string</span><span style=\\\"color: #24292E\\\"> availability;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #005CC5\\\">decimal</span><span style=\\\"color: #24292E\\\"> fee;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">|</span><span style=\\\"color: #24292E\\\">};</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">type</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #6F42C1\\\">ReservationResponse</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">record</span><span style=\\\"color: #24292E\\\"> {</span><span style=\\\"color: #D73A49\\\">|</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #005CC5\\\">int</span><span style=\\\"color: #24292E\\\"> appointmentNumber;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    Doctor doctor;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    Patient patient;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #005CC5\\\">string</span><span style=\\\"color: #24292E\\\"> hospital;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #005CC5\\\">boolean</span><span style=\\\"color: #24292E\\\"> confirmed;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #005CC5\\\">string</span><span style=\\\"color: #24292E\\\"> appointmentDate;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">|</span><span style=\\\"color: #24292E\\\">};</span></span></code></pre>\"],[807379663,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color: #fff\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">service</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #6F42C1\\\">/healthcare</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">on</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">new</span><span style=\\\"color: #24292E\\\"> http:Listener(</span><span style=\\\"color: #E36209\\\">port</span><span style=\\\"color: #24292E\\\">) {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #D73A49\\\">isolated</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">resource</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">function</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #6F42C1\\\">post</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #6F42C1\\\">categories</span><span style=\\\"color: #24292E\\\">/[</span><span style=\\\"color: #005CC5\\\">string</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #E36209\\\">category</span><span style=\\\"color: #24292E\\\">]/reserve(</span><span style=\\\"color: #E36209\\\">HealthcareReservation</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #E36209\\\">payload</span><span style=\\\"color: #24292E\\\">)</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">            </span><span style=\\\"color: #D73A49\\\">returns</span><span style=\\\"color: #24292E\\\"> ReservationResponse</span><span style=\\\"color: #D73A49\\\">|</span><span style=\\\"color: #24292E\\\">http</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\">NotFound</span><span style=\\\"color: #D73A49\\\">|</span><span style=\\\"color: #24292E\\\">http:InternalServerError {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">        </span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    }</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">}</span></span></code></pre>\"],[902396643,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color: #fff\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">service</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #6F42C1\\\">/healthcare</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">on</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">new</span><span style=\\\"color: #24292E\\\"> http:Listener(</span><span style=\\\"color: #E36209\\\">port</span><span style=\\\"color: #24292E\\\">) {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #D73A49\\\">isolated</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">resource</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">function</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #6F42C1\\\">post</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #6F42C1\\\">categories</span><span style=\\\"color: #24292E\\\">/[</span><span style=\\\"color: #005CC5\\\">string</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #E36209\\\">category</span><span style=\\\"color: #24292E\\\">]/reserve(</span><span style=\\\"color: #E36209\\\">HealthcareReservation</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #E36209\\\">payload</span><span style=\\\"color: #24292E\\\">)</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">            </span><span style=\\\"color: #D73A49\\\">returns</span><span style=\\\"color: #24292E\\\"> ReservationResponse</span><span style=\\\"color: #D73A49\\\">|</span><span style=\\\"color: #24292E\\\">http</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\">NotFound</span><span style=\\\"color: #D73A49\\\">|</span><span style=\\\"color: #24292E\\\">http:InternalServerError {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">        HospitalReservation hospitalReservation </span><span style=\\\"color: #D73A49\\\">=</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #6F42C1\\\">transform</span><span style=\\\"color: #24292E\\\">(</span><span style=\\\"color: #E36209\\\">payload</span><span style=\\\"color: #24292E\\\">);</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">        ReservationResponse</span><span style=\\\"color: #D73A49\\\">|</span><span style=\\\"color: #24292E\\\">http</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\">ClientError resp </span><span style=\\\"color: #D73A49\\\">=</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">                    hospitalServiceEP</span><span style=\\\"color: #D73A49\\\">-&gt;/</span><span style=\\\"color: #24292E\\\">[payload.hospitalId]</span><span style=\\\"color: #D73A49\\\">/</span><span style=\\\"color: #24292E\\\">categories</span><span style=\\\"color: #D73A49\\\">/</span><span style=\\\"color: #24292E\\\">[category]</span><span style=\\\"color: #D73A49\\\">/</span><span style=\\\"color: #24292E\\\">reserve.</span><span style=\\\"color: #6F42C1\\\">post</span><span style=\\\"color: #24292E\\\">(</span><span style=\\\"color: #E36209\\\">hospitalReservation</span><span style=\\\"color: #24292E\\\">);</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">        </span><span style=\\\"color: #D73A49\\\">if</span><span style=\\\"color: #24292E\\\"> resp </span><span style=\\\"color: #D73A49\\\">is</span><span style=\\\"color: #24292E\\\"> ReservationResponse {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">            log</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #6F42C1\\\">printDebug</span><span style=\\\"color: #24292E\\\">(</span><span style=\\\"color: #032F62\\\">&quot;Reservation request successful&quot;</span><span style=\\\"color: #24292E\\\">,</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">                            </span><span style=\\\"color: #E36209\\\">name</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">=</span><span style=\\\"color: #24292E\\\"> hospitalReservation.patient.name,</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">                            </span><span style=\\\"color: #E36209\\\">appointmentNumber</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">=</span><span style=\\\"color: #24292E\\\"> resp.appointmentNumber);</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">            </span><span style=\\\"color: #D73A49\\\">return</span><span style=\\\"color: #24292E\\\"> resp;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">        }</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">        log</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #6F42C1\\\">printError</span><span style=\\\"color: #24292E\\\">(</span><span style=\\\"color: #032F62\\\">&quot;Reservation request failed&quot;</span><span style=\\\"color: #24292E\\\">, </span><span style=\\\"color: #E36209\\\">resp</span><span style=\\\"color: #24292E\\\">);</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">        </span><span style=\\\"color: #D73A49\\\">if</span><span style=\\\"color: #24292E\\\"> resp </span><span style=\\\"color: #D73A49\\\">is</span><span style=\\\"color: #24292E\\\"> http</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\">ClientRequestError {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">            </span><span style=\\\"color: #D73A49\\\">return</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">&lt;</span><span style=\\\"color: #24292E\\\">http</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\">NotFound</span><span style=\\\"color: #D73A49\\\">&gt;</span><span style=\\\"color: #24292E\\\"> {body</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #032F62\\\">&quot;Unknown hospital, doctor or category&quot;</span><span style=\\\"color: #24292E\\\">};</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">        }</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">        </span><span style=\\\"color: #D73A49\\\">return</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">&lt;</span><span style=\\\"color: #24292E\\\">http</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\">InternalServerError</span><span style=\\\"color: #D73A49\\\">&gt;</span><span style=\\\"color: #24292E\\\"> {body</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\"> resp.</span><span style=\\\"color: #6F42C1\\\">message</span><span style=\\\"color: #24292E\\\">()};</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    }</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">}</span></span></code></pre>\"],[996379173,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color: #fff\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">HospitalReservation hospitalReservation </span><span style=\\\"color: #D73A49\\\">=</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #6F42C1\\\">transform</span><span style=\\\"color: #24292E\\\">(</span><span style=\\\"color: #E36209\\\">payload</span><span style=\\\"color: #24292E\\\">);</span></span></code></pre>\"],[-2021364807,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color: #fff\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">ReservationResponse</span><span style=\\\"color: #D73A49\\\">|</span><span style=\\\"color: #24292E\\\">http</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\">ClientError resp </span><span style=\\\"color: #D73A49\\\">=</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">                hospitalServiceEP</span><span style=\\\"color: #D73A49\\\">-&gt;/</span><span style=\\\"color: #24292E\\\">[payload.hospitalId]</span><span style=\\\"color: #D73A49\\\">/</span><span style=\\\"color: #24292E\\\">categories</span><span style=\\\"color: #D73A49\\\">/</span><span style=\\\"color: #24292E\\\">[category]</span><span style=\\\"color: #D73A49\\\">/</span><span style=\\\"color: #24292E\\\">reserve.</span><span style=\\\"color: #6F42C1\\\">post</span><span style=\\\"color: #24292E\\\">(</span><span style=\\\"color: #E36209\\\">hospitalReservation</span><span style=\\\"color: #24292E\\\">);</span></span></code></pre>\"],[-24936005,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color: #fff\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">if</span><span style=\\\"color: #24292E\\\"> resp </span><span style=\\\"color: #D73A49\\\">is</span><span style=\\\"color: #24292E\\\"> ReservationResponse {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    log</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #6F42C1\\\">printDebug</span><span style=\\\"color: #24292E\\\">(</span><span style=\\\"color: #032F62\\\">&quot;Reservation request successful&quot;</span><span style=\\\"color: #24292E\\\">,</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">                    </span><span style=\\\"color: #E36209\\\">name</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">=</span><span style=\\\"color: #24292E\\\"> hospitalReservation.patient.name,</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">                    </span><span style=\\\"color: #E36209\\\">appointmentNumber</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">=</span><span style=\\\"color: #24292E\\\"> resp.appointmentNumber);</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #D73A49\\\">return</span><span style=\\\"color: #24292E\\\"> resp;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">}</span></span></code></pre>\"],[-1711298907,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color: #fff\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">log</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #6F42C1\\\">printError</span><span style=\\\"color: #24292E\\\">(</span><span style=\\\"color: #032F62\\\">&quot;Reservation request failed&quot;</span><span style=\\\"color: #24292E\\\">, </span><span style=\\\"color: #E36209\\\">resp</span><span style=\\\"color: #24292E\\\">);</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">if</span><span style=\\\"color: #24292E\\\"> resp </span><span style=\\\"color: #D73A49\\\">is</span><span style=\\\"color: #24292E\\\"> http</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\">ClientRequestError {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #D73A49\\\">return</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">&lt;</span><span style=\\\"color: #24292E\\\">http</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\">NotFound</span><span style=\\\"color: #D73A49\\\">&gt;</span><span style=\\\"color: #24292E\\\"> {body</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #032F62\\\">&quot;Unknown hospital, doctor or category&quot;</span><span style=\\\"color: #24292E\\\">};</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">}</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">return</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">&lt;</span><span style=\\\"color: #24292E\\\">http</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\">InternalServerError</span><span style=\\\"color: #D73A49\\\">&gt;</span><span style=\\\"color: #24292E\\\"> {body</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\"> resp.</span><span style=\\\"color: #6F42C1\\\">message</span><span style=\\\"color: #24292E\\\">()};</span></span></code></pre>\"],[1293894606,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color: #fff\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">import</span><span style=\\\"color: #24292E\\\"> ballerina/http;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">import</span><span style=\\\"color: #24292E\\\"> ballerina/log;</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">configurable</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #005CC5\\\">int</span><span style=\\\"color: #24292E\\\"> port </span><span style=\\\"color: #D73A49\\\">=</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #005CC5\\\">8290</span><span style=\\\"color: #24292E\\\">;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">configurable</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #005CC5\\\">string</span><span style=\\\"color: #24292E\\\"> hospitalServiceUrl </span><span style=\\\"color: #D73A49\\\">=</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #032F62\\\">&quot;http://localhost:9090&quot;</span><span style=\\\"color: #24292E\\\">;</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">final</span><span style=\\\"color: #24292E\\\"> http</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\">Client hospitalServiceEP </span><span style=\\\"color: #D73A49\\\">=</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">check</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #6F42C1\\\">initializeHttpClient</span><span style=\\\"color: #24292E\\\">();</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">function</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #6F42C1\\\">initializeHttpClient</span><span style=\\\"color: #24292E\\\">() </span><span style=\\\"color: #D73A49\\\">returns</span><span style=\\\"color: #24292E\\\"> http</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\">Client</span><span style=\\\"color: #D73A49\\\">|error</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">=&gt;</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">new</span><span style=\\\"color: #24292E\\\"> (</span><span style=\\\"color: #E36209\\\">hospitalServiceUrl</span><span style=\\\"color: #24292E\\\">);</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">type</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #6F42C1\\\">HealthcareReservation</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">record</span><span style=\\\"color: #24292E\\\"> {</span><span style=\\\"color: #D73A49\\\">|</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #005CC5\\\">string</span><span style=\\\"color: #24292E\\\"> firstName;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #005CC5\\\">string</span><span style=\\\"color: #24292E\\\"> lastName;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #005CC5\\\">string</span><span style=\\\"color: #24292E\\\"> dob;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #005CC5\\\">int</span><span style=\\\"color: #24292E\\\">[</span><span style=\\\"color: #005CC5\\\">3</span><span style=\\\"color: #24292E\\\">] ssn;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #005CC5\\\">string</span><span style=\\\"color: #24292E\\\"> address;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #005CC5\\\">string</span><span style=\\\"color: #24292E\\\"> phone;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #005CC5\\\">string</span><span style=\\\"color: #24292E\\\"> email;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #005CC5\\\">string</span><span style=\\\"color: #24292E\\\"> doctor;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #005CC5\\\">string</span><span style=\\\"color: #24292E\\\"> hospitalId;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #005CC5\\\">string</span><span style=\\\"color: #24292E\\\"> hospital;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #005CC5\\\">string</span><span style=\\\"color: #24292E\\\"> cardNo;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #005CC5\\\">string</span><span style=\\\"color: #24292E\\\"> appointmentDate;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">|</span><span style=\\\"color: #24292E\\\">};</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">type</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #6F42C1\\\">Patient</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">record</span><span style=\\\"color: #24292E\\\"> {</span><span style=\\\"color: #D73A49\\\">|</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #005CC5\\\">string</span><span style=\\\"color: #24292E\\\"> name;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #005CC5\\\">string</span><span style=\\\"color: #24292E\\\"> dob;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #005CC5\\\">string</span><span style=\\\"color: #24292E\\\"> ssn;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #005CC5\\\">string</span><span style=\\\"color: #24292E\\\"> address;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #005CC5\\\">string</span><span style=\\\"color: #24292E\\\"> phone;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #005CC5\\\">string</span><span style=\\\"color: #24292E\\\"> email;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">|</span><span style=\\\"color: #24292E\\\">};</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">type</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #6F42C1\\\">HospitalReservation</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">record</span><span style=\\\"color: #24292E\\\"> {</span><span style=\\\"color: #D73A49\\\">|</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    Patient patient;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #005CC5\\\">string</span><span style=\\\"color: #24292E\\\"> doctor;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #005CC5\\\">string</span><span style=\\\"color: #24292E\\\"> hospital;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #005CC5\\\">string</span><span style=\\\"color: #24292E\\\"> appointment_date;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">|</span><span style=\\\"color: #24292E\\\">};</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">type</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #6F42C1\\\">Doctor</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">record</span><span style=\\\"color: #24292E\\\"> {</span><span style=\\\"color: #D73A49\\\">|</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #005CC5\\\">string</span><span style=\\\"color: #24292E\\\"> name;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #005CC5\\\">string</span><span style=\\\"color: #24292E\\\"> hospital;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #005CC5\\\">string</span><span style=\\\"color: #24292E\\\"> category;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #005CC5\\\">string</span><span style=\\\"color: #24292E\\\"> availability;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #005CC5\\\">decimal</span><span style=\\\"color: #24292E\\\"> fee;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">|</span><span style=\\\"color: #24292E\\\">};</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">type</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #6F42C1\\\">ReservationResponse</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">record</span><span style=\\\"color: #24292E\\\"> {</span><span style=\\\"color: #D73A49\\\">|</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #005CC5\\\">int</span><span style=\\\"color: #24292E\\\"> appointmentNumber;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    Doctor doctor;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    Patient patient;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #005CC5\\\">string</span><span style=\\\"color: #24292E\\\"> hospital;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #005CC5\\\">boolean</span><span style=\\\"color: #24292E\\\"> confirmed;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #005CC5\\\">string</span><span style=\\\"color: #24292E\\\"> appointmentDate;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">|</span><span style=\\\"color: #24292E\\\">};</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">service</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #6F42C1\\\">/healthcare</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">on</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">new</span><span style=\\\"color: #24292E\\\"> http:Listener(</span><span style=\\\"color: #E36209\\\">port</span><span style=\\\"color: #24292E\\\">) {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #D73A49\\\">isolated</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">resource</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">function</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #6F42C1\\\">post</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #6F42C1\\\">categories</span><span style=\\\"color: #24292E\\\">/[</span><span style=\\\"color: #005CC5\\\">string</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #E36209\\\">category</span><span style=\\\"color: #24292E\\\">]/reserve(</span><span style=\\\"color: #E36209\\\">HealthcareReservation</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #E36209\\\">payload</span><span style=\\\"color: #24292E\\\">)</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">            </span><span style=\\\"color: #D73A49\\\">returns</span><span style=\\\"color: #24292E\\\"> ReservationResponse</span><span style=\\\"color: #D73A49\\\">|</span><span style=\\\"color: #24292E\\\">http</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\">NotFound</span><span style=\\\"color: #D73A49\\\">|</span><span style=\\\"color: #24292E\\\">http:InternalServerError {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">        HospitalReservation hospitalReservation </span><span style=\\\"color: #D73A49\\\">=</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #6F42C1\\\">transform</span><span style=\\\"color: #24292E\\\">(</span><span style=\\\"color: #E36209\\\">payload</span><span style=\\\"color: #24292E\\\">);</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">        ReservationResponse</span><span style=\\\"color: #D73A49\\\">|</span><span style=\\\"color: #24292E\\\">http</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\">ClientError resp </span><span style=\\\"color: #D73A49\\\">=</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">                    hospitalServiceEP</span><span style=\\\"color: #D73A49\\\">-&gt;/</span><span style=\\\"color: #24292E\\\">[payload.hospitalId]</span><span style=\\\"color: #D73A49\\\">/</span><span style=\\\"color: #24292E\\\">categories</span><span style=\\\"color: #D73A49\\\">/</span><span style=\\\"color: #24292E\\\">[category]</span><span style=\\\"color: #D73A49\\\">/</span><span style=\\\"color: #24292E\\\">reserve.</span><span style=\\\"color: #6F42C1\\\">post</span><span style=\\\"color: #24292E\\\">(</span><span style=\\\"color: #E36209\\\">hospitalReservation</span><span style=\\\"color: #24292E\\\">);</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">        </span><span style=\\\"color: #D73A49\\\">if</span><span style=\\\"color: #24292E\\\"> resp </span><span style=\\\"color: #D73A49\\\">is</span><span style=\\\"color: #24292E\\\"> ReservationResponse {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">            log</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #6F42C1\\\">printDebug</span><span style=\\\"color: #24292E\\\">(</span><span style=\\\"color: #032F62\\\">&quot;Reservation request successful&quot;</span><span style=\\\"color: #24292E\\\">,</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">                            </span><span style=\\\"color: #E36209\\\">name</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">=</span><span style=\\\"color: #24292E\\\"> hospitalReservation.patient.name,</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">                            </span><span style=\\\"color: #E36209\\\">appointmentNumber</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">=</span><span style=\\\"color: #24292E\\\"> resp.appointmentNumber);</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">            </span><span style=\\\"color: #D73A49\\\">return</span><span style=\\\"color: #24292E\\\"> resp;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">        }</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">        log</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #6F42C1\\\">printError</span><span style=\\\"color: #24292E\\\">(</span><span style=\\\"color: #032F62\\\">&quot;Reservation request failed&quot;</span><span style=\\\"color: #24292E\\\">, </span><span style=\\\"color: #E36209\\\">resp</span><span style=\\\"color: #24292E\\\">);</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">        </span><span style=\\\"color: #D73A49\\\">if</span><span style=\\\"color: #24292E\\\"> resp </span><span style=\\\"color: #D73A49\\\">is</span><span style=\\\"color: #24292E\\\"> http</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\">ClientRequestError {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">            </span><span style=\\\"color: #D73A49\\\">return</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">&lt;</span><span style=\\\"color: #24292E\\\">http</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\">NotFound</span><span style=\\\"color: #D73A49\\\">&gt;</span><span style=\\\"color: #24292E\\\"> {body</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #032F62\\\">&quot;Unknown hospital, doctor or category&quot;</span><span style=\\\"color: #24292E\\\">};</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">        }</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">        </span><span style=\\\"color: #D73A49\\\">return</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">&lt;</span><span style=\\\"color: #24292E\\\">http</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\">InternalServerError</span><span style=\\\"color: #D73A49\\\">&gt;</span><span style=\\\"color: #24292E\\\"> {body</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\"> resp.</span><span style=\\\"color: #6F42C1\\\">message</span><span style=\\\"color: #24292E\\\">()};</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    }</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">}</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">isolated</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">function</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #6F42C1\\\">transform</span><span style=\\\"color: #24292E\\\">(</span><span style=\\\"color: #E36209\\\">HealthcareReservation</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #E36209\\\">reservation</span><span style=\\\"color: #24292E\\\">) </span><span style=\\\"color: #D73A49\\\">returns</span><span style=\\\"color: #24292E\\\"> HospitalReservation </span><span style=\\\"color: #D73A49\\\">=&gt;</span><span style=\\\"color: #24292E\\\"> </span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #D73A49\\\">let</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #005CC5\\\">var</span><span style=\\\"color: #24292E\\\"> ssn </span><span style=\\\"color: #D73A49\\\">=</span><span style=\\\"color: #24292E\\\"> reservation.ssn </span><span style=\\\"color: #D73A49\\\">in</span><span style=\\\"color: #24292E\\\"> {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">        patient</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\"> {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">            name</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\"> reservation.firstName + </span><span style=\\\"color: #032F62\\\">&quot; &quot;</span><span style=\\\"color: #24292E\\\"> + reservation.lastName,</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">            dob</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\"> reservation.dob,</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">            ssn</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\"> string </span><span style=\\\"color: #032F62\\\">`${</span><span style=\\\"color: #24292E\\\">ssn</span><span style=\\\"color: #032F62\\\">[</span><span style=\\\"color: #005CC5\\\">0</span><span style=\\\"color: #032F62\\\">]</span><span style=\\\"color: #032F62\\\">}-${</span><span style=\\\"color: #24292E\\\">ssn</span><span style=\\\"color: #032F62\\\">[</span><span style=\\\"color: #005CC5\\\">1</span><span style=\\\"color: #032F62\\\">]</span><span style=\\\"color: #032F62\\\">}-${</span><span style=\\\"color: #24292E\\\">ssn</span><span style=\\\"color: #032F62\\\">[</span><span style=\\\"color: #005CC5\\\">2</span><span style=\\\"color: #032F62\\\">]</span><span style=\\\"color: #032F62\\\">}`</span><span style=\\\"color: #24292E\\\">,</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">            address</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\"> reservation.address,</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">            phone</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\"> reservation.phone,</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">            email</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\"> reservation.email</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">        },</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">        doctor</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\"> reservation.doctor,</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">        hospital</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\"> reservation.hospital,</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">        appointment_date</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\"> reservation.appointmentDate</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    };</span></span></code></pre>\"]]"},"__N_SSG":true}