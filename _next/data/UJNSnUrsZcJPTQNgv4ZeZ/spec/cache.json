{"pageProps":{"frontmatter":{},"content":"# Specification: Ballerina Cache Library\n\n_Owners_: @daneshk @kalaiyarasiganeshalingam  \n_Reviewers_: @daneshk  \n_Created_: 2021/12/01  \n_Updated_: 2022/02/17  \n_Edition_: Swan Lake  \n\n## Introduction\nThis is the specification for the Cache standard library of [Ballerina language](https://ballerina.io/), which provides a mechanism to manage frequently accessed data in-memory by using a semi-persistent mapping from key to value.\n\nThe Cache library specification has evolved and may continue to evolve in the future. The released versions of the specification can be found under the relevant GitHub tag.\n\nIf you have any feedback or suggestions about the library, start a discussion via a [GitHub issue](https://github.com/ballerina-platform/ballerina-standard-library/issues) or in the [Discord server](https://discord.gg/ballerinalang). Based on the outcome of the discussion, the specification and implementation can be updated. Community feedback is always welcome. Any accepted proposal, which affects the specification is stored under `/docs/proposals`. Proposals under discussion can be found with the label `type/proposal` in GitHub.\n\nThe conforming implementation of the specification is released and included in the distribution. Any deviation from the specification is considered a bug.\n\n## Contents\n1. [Overview](#1-overview)\n2. [Eviction](#2-eviction)\n3. [Operations](#3-operations)\n    * 3.1. [Put](#31-put)\n    * 3.2. [Get](#32-get)\n    * 3.3. [invalidate](#33-invalidate)\n    * 3.4. [invalidateAll](#34-invalidateall)\n    * 3.5. [hasKey](#35-haskey)\n    * 3.6. [keys](#36-keys)\n    * 3.7. [size](#37-size)\n    * 3.8. [capacity](#38-capacity)\n\n## 1. Overview\nThis specification elaborates functionalities available in the Cache library.\n\nThis library is based on the [Least Recently Used (LRU)](https://en.wikipedia.org/wiki/Cache_replacement_policies#Least_recently_used_(LRU)) algorithm and can be initialized by configuring the following properties:\n\n- capacity - Maximum number of entries allowed in the cache.\n- evictionFactor - The factor by which the entries will be evicted once the cache is full.\n- evictionPolicy - The policy which is used to evict entries once the cache is full.\n- defaultMaxAge - The max-age (in second) which all the cache entries are valid. '-1' means, the entries are valid forever.\n- cleanupInterval - The interval (in seconds) of the recurrence task, which will clean up the cache.\n\n## 2. Eviction\nThe cache eviction is a process to eliminate entry/entries from the cache by following the mechanism. The entries will be evicted in case of the following scenarios:\n\n- When getting the entry, if the returning cache entry has expired, it gets removed.\n- When putting the entry, if the cache size has reached its capacity, the number of entries gets removed. Entries are eliminated in terms of LRU policy, and the number of entries is also calculated by the capacity of the cache and the eviction factor.\n- If `cleanupInterval` (optional property of the `cacheConfig`) is configured, the recurrence task will remove the expired cache entries based on the configured interval. \n\n## 3. Operations\nThe cache defines the most basic operations on a collection of cache entries, which entails basic reading, writing, and deleting individual cache items. This is thread-safe. Hence, data can be safely accessed by multiple concurrent threads.\n\n### 3.1. Put\nThis adds the given key-value pair to the cache with an entry expiration time. The value can be in any of the ballerina types, but it is not allowed \nto insert `()` as the value of the cache since it doesn't make sense to have nil value. If the cache previously contained a value associated with the provided key, the old value will be replaced by the newly-provided value.\n```ballerina\ncheck cache.put(\"key\", \"value\");\n```\n\n### 3.2. Get\nThis is used to fetch the cached value associated with the provided key.\n\n```ballerina\nany value = check cache.get(\"key\");\n```\n\n### 3.3. Invalidate\nThis is used to discard a cached entry from the cache by its unique key.\n\n```ballerina\ncheck cache.invalidate(\"key\");\n```\n\n### 3.4. InvalidateAll\nThis is used to discard all the cached values from the cache.\n\n```ballerina\ncheck cache.invalidateAll();\n```\n\n### 3.5. HasKey\nThis is used to check whether the given key has an associated cached value.\n\n```ballerina\nboolean result = cache.hasKey(\"key\");\n```\n\n### 3.6. Keys\nThis is used to get a list of all the keys in the cache.\n\n```ballerina\nstring[] keys = cache.keys();\n```\n\n### 3.7. Size\nThis is used to get the size of the cache.\n```ballerina\nint result = cache.size();\n```\n\n### 3.8. Capacity\nThis is used to get the capacity of the cache.\n```ballerina\nint result = cache.capacity();\n```\n"},"__N_SSG":true}