{"pageProps":{"frontmatter":{},"content":"# Specification: Ballerina WebSubHub Library\n\n_Owners_: @shafreenAnfar @chamil321 @ayeshLK    \n_Reviewers_: @shafreenAnfar    \n_Created_: 2021/11/23  \n_Updated_: 2022/12/08  \n_Edition_: Swan Lake  \n\n## Introduction\n\nThis is the specification for the WebSubHub standard library of [Ballerina language](https://ballerina.io/), which provides WebSub compliant `hub` and `publisher` related functionalities.\n\nThe WebSubHub library specification has evolved and may continue to evolve in the future. The released versions of the specification can be found under the relevant Github tag. \n\nIf you have any feedback or suggestions about the library, start a discussion via a [GitHub issue](https://github.com/ballerina-platform/ballerina-standard-library/issues) or in the [Discord server](https://discord.gg/ballerinalang). Based on the outcome of the discussion, the specification and implementation can be updated. Community feedback is always welcome. Any accepted proposal which affects the specification is stored under `/docs/proposals`. Proposals under discussion can be found with the label `type/proposal` in Github.\n\nThe conforming implementation of the specification is released and included in the distribution. Any deviation from the specification is considered a bug.\n\n## Contents  \n1. [Overview](#1-overview)  \n2. [Hub](#2-hub)\n   * 2.1. [Listener](#21-listener)\n     * 2.1.1 [Configuration](#211-configuration)\n     * 2.1.2 [Initialization](#212-initialization)\n     * 2.1.3 [Methods](#213-methods)\n   * 2.2. [Service](#22-service)\n     * 2.2.1. [Annotation](#221-annotation)\n     * 2.2.2. [Methods](#222-methods)\n       * 2.2.2.1. [onRegisterTopic](#2221-onregistertopic)\n       * 2.2.2.2. [onDeregisterTopic](#2222-onderegistertopic)\n       * 2.2.2.3. [onEventMessage](#2223-oneventmessage)\n       * 2.2.2.4. [onSubscription](#2224-onsubscription)\n       * 2.2.2.5. [onSubscriptionValidation](#2225-onsubscriptionvalidation)\n       * 2.2.2.6. [onSubscriptionIntentVerified](#2226-onsubscriptionintentverified)\n       * 2.2.2.7. [onUnsubscritpion](#2227-onunsubscritpion)\n       * 2.2.2.8. [onUnsubscriptionValidation](#2228-onunsubscriptionvalidation)\n       * 2.2.2.9. [onUnsubscriptionIntenVerified](#2229-onunsubscriptionintenverified)\n     * 2.2.3. [Controller](#223-controller)\n   * 2.3. [Hub Client](#23-hub-client)\n     * 2.3.1. [Initialization](#231-initialization)\n     * 2.3.2. [Distribute Content](#232-distribute-content)\n3. [Publisher Client](#3-publisher-client)\n4. [Common Client Configuration](#4-common-client-configuration)\n\n## 1. Overview\n\n[WebSub](https://www.w3.org/TR/websub/) is a real-time content delivery protocol over HTTP(S) and it is a specification \nwhich evolved from [PubSubHubbub](https://github.com/pubsubhubbub/PubSubHubbub).\n\nWebSub specification describes three main roles: \n- Publisher: Advertises a `topic` and `hub` URL on one or more resource URLs.\n- Subscriber: Discovers the `hub` and topic URL given a resource URL, subscribes to updates at the `hub`, and accepts \ncontent distribution requests from the `hub`.\n- Hub: Handles subscription requests and distributes the content to subscribers when the corresponding topic URL has \nbeen updated.\n\n`WebSubHub` is a library which is derived from the WebSub specification which could be used by developers to implement \nWebSub compliant `hub` services and `publisher` clients. Since WebSub specification has limited details on the \nrelationship between `publisher` and `hub`, the Ballerina standard library team has made minor improvements to the \noriginal protocol to provide a seamless developer experience.\n\n## 2. Hub\n\nWebSub `hub` is the exchange point for `publisher` and `subscriber`. \n\nIt has the following responsibilities:\n* Handles/manages WebSub topics.\n* Handles/manages WebSub subscriptions.\n* Handles WebSub content distribution.\n\nThe `hub` is designed in the form of `listener` and `service`.\n- `websubhub:Listener`: A listener end-point to which `websubhub:Service` could be attached. \n- `websubhub:Service`: An API service, which receives WebSub events.\n\nIn addition to `websubhub:Listener` and `websubhub:Service`, `websubhub:HubClient` is available which could be used to \nnotify content updates to the subscribers.\n\n### 2.1. Listener\n\nThe `websubhub:Listener` opens the given port and attaches the provided `websubhub:Service` object to the given \nservice-path. `websubhub:Listener` can be initialized either by providing a port with listener configurations or by \nproviding an `http:Listener`.\n\n#### 2.1.1. Configuration \n\nWhen initializing a `websubhub:Listener`, following configurations could be provided.   \n```ballerina\n# Provides a set of configurations for configure the underlying HTTP listener of the WebSubHub listener.\npublic type ListenerConfiguration record {|\n    *http:ListenerConfiguration;\n|};\n```\n\nFor more details on the available configurations please refer [`http:ListenerConfiguration`](https://lib.ballerina.io/ballerina/http/latest#ListenerConfiguration).\n\n#### 2.1.2. Initialization\n\nThe `websubhub:Listener` could be initialized by providing either a port with `websubhub:ListenerConfiguration` or by \nproviding an `http:Listener`.  \n```ballerina\n# Initiliazes the `websubhub:Listener` instance.\n# ```ballerina\n# listener websubhub:Listener hubListenerEp = check new (9090);\n# ```\n#\n# + listenTo - Port number or an `http:Listener` instance\n# + config - Custom `websubhub:ListenerConfiguration` to be provided to the underlying HTTP listener\n# + return - The `websubhub:Listener` or an `websubhub:Error` if the initialization failed\npublic isolated function init(int|http:Listener listenTo, *ListenerConfiguration config) returns websubhub:Error? {\n```\n\n#### 2.1.3. Methods \n\nFollowing APIs should be available in the `websubhub:Listener` to dynamically attach `websubhub:Service` objects to it.  \n```ballerina\n# Attaches the provided `websubhub:Service` to the `websubhub:Listener`.\n# ```ballerina\n# check hubListenerEp.attach('service, \"/hub\");\n# ```\n# \n# + 'service - The `websubhub:Service` object to attach\n# + name - The path of the service to be hosted\n# + return - An `websubhub:Error` if an error occurred during the service attaching process or else `()`\npublic isolated function attach(websubhub:Service 'service, string[]|string? name = ()) returns websubhub:Error?\n```\n\nFollowing APIs should be available in the `websubhub:Listener` to dynamically detach `websubhub:Service` objects from it.\n```ballerina\n# Detaches the provided `websubhub:Service` from the `websubhub:Listener`.\n# ```ballerina\n# check hubListenerEp.detach('service);\n# ```\n# \n# + s - The `websubhub:Service` object to be detached\n# + return - An `websubhub:Error` if an error occurred during the service detaching process or else `()`\npublic isolated function detach(websubhub:Service s) returns websubhub:Error?\n```\n\nFollowing APIs should be available to dynamically start the `websubhub:Listener`.\n```ballerina\n# Starts the registered service programmatically.\n# ```ballerina\n# check hubListenerEp.'start();\n# ```\n# \n# + return - An `websubhub:Error` if an error occurred during the listener-starting process or else `()`\npublic isolated function 'start() returns websubhub:Error?\n```\n\nFollowing APIs should be available to dynamically stop the `websubhub:Listener`.\n```ballerina\n# Gracefully stops the hub listener. Already-accepted requests will be served before the connection closure.\n# ```ballerina\n# check hubListenerEp.gracefulStop();\n# ```\n# \n# + return - An `websubhub:Error` if an error occurred during the listener-stopping process\npublic isolated function gracefulStop() returns websubhub:Error?\n\n# Stops the service listener immediately.\n# ```ballerina\n# check hubListenerEp.immediateStop();\n# ```\n# \n# + return - An `websubhub:Error` if an error occurred during the listener-stopping process or else `()`\npublic isolated function immediateStop() returns websubhub:Error?\n```\n\n### 2.2. Service\n\n`websubhub:Service` is responsible for handling the received events. Underlying `http:Service` will receive the original \nrequest, and then it will trigger the WebSubHub dispatcher which will invoke the respective remote method with the event \ndetails.\n\nFollowing is the type-definition for `websubhub:Service`.\n```ballerina\npublic type Service distinct service object {\n    // Sample POST request hub.mode=register&hub.topic=http://foo.com/bar\n    // Sample 200 OK response hub.mode=accepted or 200 OK hub.mode=denied&hub.reason=unauthorized\n    remote function onRegisterTopic(websubhub:TopicRegistration msg)\n        returns websubhub:TopicRegistrationSuccess|websubhub:TopicRegistrationError|error;\n\n    // Sample POST request hub.mode=unregister&hub.topic=http://foo.com/bar\n    // Sample 200 OK response hub.mode=accepted or 200 OK hub.mode=denied&hub.reason=unauthorized \n    remote function onDeregisterTopic(websubhub:TopicDeregistration msg)\n        returns websubhub:TopicDeregistrationSuccess|websubhub:TopicDeregistrationError|error;\n\n    // Sample POST request with content type x-www-form-urlencoded hub.mode=publish&hub.topic=http://foo.com/bar\n    // for other content types such as xml, json and octect-stream hub.mode=publish should be in query string.\n    // Sample 200 OK response hub.mode=accepted or 200 OK hub.mode=denied&hub.reason=unauthorized \n    remote function onUpdateMessage(websubhub:UpdateMessage msg)\n        returns websubhub:Acknowledgement|websubhub:UpdateMessageError|error;\n\n    // Sample POST request hub.mode=subscribe&hub.topic=http://foo.com/bar \n    remote function onSubscription(websubhub:Subscription msg)\n        returns websubhub:SubscriptionAccepted|websubhub:SubscriptionPermanentRedirect|\n        websubhub:SubscriptionTemporaryRedirect|websubhub:BadSubscriptionError|\n        websubhub:InternalSubscriptionError|error;\n        \n    remote function onSubscriptionValidation(websubhub:Subscription msg)\n        returns websubhub:SubscriptionDeniedError|error?;\n\n    remote function onSubscriptionIntentVerified(websubhub:VerifiedSubscription msg) returns error?;\n\n    // Sample POST request hub.mode=unsubscribe&hub.topic=http://foo.com/bar\n    remote function onUnsubscription(websubhub:Unsubscription msg)\n        returns websubhub:UnsubscriptionAccepted|websubhub:BadUnsubscriptionError|\n        websubhub:InternalUnsubscriptionError|error;\n\n    remote function onUnsubscriptionValidation(websubhub:Unsubscription msg)\n        returns websubhub:UnsubscriptionDeniedError|error?;\n\n    remote function onUnsubscriptionIntentVerified(websubhub:VerifiedUnsubscription msg) returns error?;\n};\n```\n\n#### 2.2.1. Annotation \n\nApart from the listener level configurations a `hub` will require few additional configurations. Hence, there should be \n`websubhub:ServiceConfig` a service-level-annotation for `websubhub:Service` which contains\n`websubhub:ServiceConfiguration` record.\n```ballerina\n# Configuration for a WebSub Hub service.\n#\n# + leaseSeconds - The period for which the subscription is expected to be active in the `hub`\n# + webHookConfig - HTTP client configurations for subscription/unsubscription intent verification\n# + autoVerifySubscriptionIntent - Configuration to enable or disable automatic subscription verification\npublic type ServiceConfiguration record {|\n    int leaseSeconds?;\n    ClientConfiguration webHookConfig?;\n    boolean autoVerifySubscriptionIntent = false;\n|};\n```\n\n#### 2.2.2. Methods\n\n##### 2.2.2.1. onRegisterTopic\n\nThis remote method is invoked when the `publisher` sends a request to register a `topic` to the `hub`.\n```ballerina\n# Registers a `topic` in the hub.\n# \n# + msg - Details related to the topic-registration\n# + return - `websubhub:TopicRegistrationSuccess` if topic registration is successful, `websubhub:TopicRegistrationError`\n#            if topic registration failed or `error` if there is any unexpected error\nremote function onRegisterTopic(websubhub:TopicRegistration msg)\n    returns websubhub:TopicRegistrationSuccess|websubhub:TopicRegistrationError|error;\n```\n\n##### 2.2.2.2. onDeregisterTopic\n\nThis remote method is invoked when the `publisher` sends a request to remove a `topic` from the `hub`.\n```ballerina\n# Deregisters a `topic` in the hub.\n# \n# + msg - Details related to the topic-deregistration\n# + return - `websubhub:TopicDeregistrationSuccess` if topic deregistration is successful, `websubhub:TopicDeregistrationError`\n#            if topic deregistration failed or `error` if there is any unexpected error\nremote function onDeregisterTopic(websubhub:TopicDeregistration msg)\n    returns websubhub:TopicDeregistrationSuccess|websubhub:TopicDeregistrationError|error;\n```\n\n##### 2.2.2.3. onEventMessage\n\nThis remote method is invoked when the `publisher` sends a request to notify the `hub` about content update for a \n`topic`.\n```ballerina\n# Publishes content to the hub.\n# \n# + msg - Details of the published content\n# + return - `websubhub:Acknowledgement` if publish content is successful, `websubhub:UpdateMessageError`\n#            if publish content failed or `error` if there is any unexpected error\nremote function onUpdateMessage(websubhub:UpdateMessage msg)\n    returns websubhub:Acknowledgement|websubhub:UpdateMessageError|error;\n```\n\n##### 2.2.2.4. onSubscription\n\nThis remote method is invoked when the `subscriber` sends a request to subscribe for a `topic` in the `hub`. (This is an\noptional remote method.)\n```ballerina\n# Subscribes a `subscriber` to the hub.\n# \n# + msg - Details of the subscription\n# + return - `websubhub:SubscriptionAccepted` if subscription is accepted from the hub, `websubhub:BadSubscriptionError`\n#            if subscription is denied from the hub, `websubhub:SubscriptionPermanentRedirect` or a `websubhub:SubscriptionTemporaryRedirect`\n#            if the subscription request is redirected from the `hub`, `websubhub:InternalSubscriptionError` if there is an internal error \n#            while processing the subscription request or `error` if there is any unexpected error\nremote function onSubscription(websubhub:Subscription msg)\n    returns websubhub:SubscriptionAccepted|websubhub:SubscriptionPermanentRedirect|\n        websubhub:SubscriptionTemporaryRedirect|websubhub:BadSubscriptionError|\n        websubhub:InternalSubscriptionError|error;\n```\n\n##### 2.2.2.5. onSubscriptionValidation\n\nThis remote method is invoked when subscription request from the `subscriber` is accepted from the `hub`. `hub` could \nenforce additional validation for the subscription request when this method is invoked. If the validations are failed \nthe `hub` could deny the subscription request by responding with `websubhub:SubscriptionDeniedError`. (This is an \noptional remote method.)\n```ballerina\n# Validates a incomming subscription request.\n# \n# + msg - Details of the subscription\n# + return - `websubhub:SubscriptionDeniedError` if the subscription is denied by the hub, `error` if there is any unexpected error or else `()`\nremote function onSubscriptionValidation(websubhub:Subscription msg) \n    returns websubhub:SubscriptionDeniedError|error?;\n```\n\n##### 2.2.2.6. onSubscriptionIntentVerified\n\nThis remote method is invoked after the `hub` verifies the subscription request.\n```ballerina\n# Processes a verified subscription request.\n# \n# + msg - Details of the subscription\n# + return - `error` if there is any unexpected error or else `()`\nremote function onSubscriptionIntentVerified(websubhub:VerifiedSubscription msg) returns error?;\n```\n\n##### 2.2.2.7. onUnsubscritpion\n\nThis remote method is invoked when the `subscriber` sends a request to unsubscribe from a `topic` in the `hub`. (This is \nan optional remote method.)\n```ballerina\n# Unsubscribes a `subscriber` from the hub.\n# \n# + msg - Details of the unsubscription\n# + return - `websubhub:UnsubscriptionAccepted` if unsubscription is accepted from the hub, `websubhub:BadUnsubscriptionError`\n#            if unsubscription is denied from the hub, `websubhub:InternalUnsubscriptionError` if there is any internal error while processing the \n#             unsubscription request or `error` if there is any unexpected error\nremote function onUnsubscription(websubhub:Unsubscription msg)\n    returns websubhub:UnsubscriptionAccepted|websubhub:BadUnsubscriptionError|\n        websubhub:InternalUnsubscriptionError|error;\n```\n\n##### 2.2.2.8. onUnsubscriptionValidation\n\nThis remote method is invoked when unsubscription request from the `subscriber` is accepted from the `hub`. `hub` could\nenforce additional validation for the unsubscription request when this method is invoked. If the validations are failed\nthe `hub` could deny the unsubscription request by responding with `websubhub:UnsubscriptionDeniedError`. (This is an\noptional remote method.)\n```ballerina\n# Validates a incomming unsubscription request.\n# \n# + msg - Details of the unsubscription\n# + return - `websubhub:UnsubscriptionDeniedError` if the unsubscription is denied by the hub or else `()`\nremote function onUnsubscriptionValidation(websubhub:Unsubscription msg) \n    returns websubhub:UnsubscriptionDeniedError|error?;\n```\n\n##### 2.2.2.9. onUnsubscriptionIntenVerified\n\nThis remote method is invoked after the `hub` verifies the unsubscription request.\n```ballerina\n# Processes a verified unsubscription request.\n# \n# + msg - Details of the unsubscription\nremote function onUnsubscriptionIntentVerified(websubhub:VerifiedUnsubscription msg) returns error?;\n```\n\nWhile the below remote methods are strictly WebSub compliant,\n- onSubscription \n- onSubscriptionValidation\n- onSubscriptionIntentVerified \n- onUnsubscritpion \n- onUnsubscriptionValidation\n- onUnsubscriptionIntenVerified\n\nThe below remote methods are not, \n- onEventMessage\n- onRegisterTopic\n- onUnregisterTopic\n\nThis is due to the limited information in the WebSub specification on the relationship between the `publisher` and the \n`hub`.\n\nIn the event of a bad request from the `publisher` or the `subscriber`, the WebSubHub dispatcher will automatically send \nback the appropriate response to the client.\n\n#### 2.2.3. Controller\n\nWhen `autoVerifySubscriptionIntent` is enabled in the `websubhub:ServiceConfig` annotation, the `websubhub:Controller` can be used to mark a \nsubscription or unsubscription as verified. This class is initialized exclusively within the WebSubHub framework and provides the \nfollowing API.\n\n```ballerina\ntype Controller object {\n\n    # Marks a particular subscription as verified.\n    #\n    # + subscription - The `websubhub:Subscription` or `websubhub:Unsubscription` message\n    # + return - A `websubhub:Error` if the `websubhub:Service` has not enabled subscription auto-verification, \n    #           or else nil\n    public isolated function markAsVerified(Subscription|Unsubscription subscription) returns Error?;\n\n    # Checks whether a particular subscription has been marked as verified. Please note that this \n    # is an internal API which is used within the WebSubHub dispatcher to identify whether \n    # to skip the subscrition intent verification for the subscription or unsubscription.\n    # \n    # + subscription - The `websubhub:Subscription` or `websubhub:Unsubscription` message\n    # + return - A `true` if the subscrition/unsubscription has been marked as verified or else `false`\n    isolated function skipSubscriptionVerification(Subscription|Unsubscription subscription) returns boolean;\n};\n```\n\n> Note: The `websubhub:Controller` will be available only as an optional parameter in the `onSubscription` and `onUnsubscription` remote methods of the `websubhub:Service`.\n\n### 2.3. Hub Client\n\nIn accordance with the [WebSub specification](https://www.w3.org/TR/websub/#content-distribution), `WebSubHub` package \nhas provided support for `websubhub:HubClient` which could be used to distribute content-updates to `subscribers`.\n\n#### 2.3.1. Initialization\n\nSince the relationship of the `subscriber` and the `topic` is unique in the `hub`, `websubhub:HubClient` is designed to \nbe initialized per `subscription` basis. Hence, `websubhub:HubClient` could be initialized by providing \n`websubhub:Subscription` and optional `websubhub:ClientConfiguration`. \n```ballerina\n# Record to represent the subscription request body.\n# \n# + hub - URL of the `hub` to which the subscriber has subscribed\n# + hubMode - Current `hub` action\n# + hubCallback - Callback URL for subscriber to receive distributed content\n# + hubTopic - Topic to which subscriber has subscribed\n# + hubLeaseSeconds - Amount of time in seconds during when the subscription is valid\n# + hubSecret - Secret Key to sign the distributed content\npublic type Subscription record {\n    string hub;\n    string hubMode;\n    string hubCallback;\n    string hubTopic;\n    string? hubLeaseSeconds = ();\n    string? hubSecret = ();\n};\n\npublic isolated function init(websubhub:Subscription subscription, *websubhub:ClientConfiguration config) returns websubhub:Error?\n```\n\n#### 2.3.2. Distribute Content\n\n`websubhub:HubClient` should provide following API to be used to deliver content to the `subscriber`.\n```ballerina\n# Record to represent a WebSub content delivery.\n#\n# + headers - Additional Request headers to include when distributing content\n# + contentType - The content-type of the payload\n# + content - The payload to be sent\npublic type ContentDistributionMessage record {|\n    map<string|string[]>? headers = ();\n    string? contentType = ();\n    json|xml|string|byte[]? content;\n|};\n\ntype HubClient client object {\n    # Distributes the published content to the subscribers.\n    # ```ballerina\n    # ContentDistributionSuccess publishUpdate = check websubHubClientEP->notifyContentDistribution({ content: \"This is sample content\" });\n    # ```\n    #\n    # + msg - Content to be distributed to the topic subscriber \n    # + return - An `websubhub:Error` if an exception occurred, a `websubhub:SubscriptionDeletedError` if the subscriber responded with `HTTP 410`,\n    #            or else a `websubhub:ContentDistributionSuccess` for successful content delivery\n    remote function notifyContentDistribution(websubhub:ContentDistributionMessage msg) \n            returns websubhub:ContentDistributionSuccess|websubhub:SubscriptionDeletedError|websubhub:Error;\n};\n```\n\n## 3. Publisher Client  \n\nWebSub `publisher`, has two main responsibilities:  \n- Advertise `topics` in a `hub`  \n- Publish/Update content for the `topics` registered in a `hub`\n\n### 3.1. Initialization\n\n`websubhub:PublisherClient` can be initialized by providing the hub URL and optional `websubhub:ClientConfiguration`. \n```ballerina\n# Initializes the `websub:PublisherClient`.\n# ```ballerina\n# websub:PublisherClient publisherClient = check new(\"http://localhost:9191/websub/publish\");\n# ```\n#\n# + hubUrl    - The URL to publish/notify updates\n# + config - The `websubhub:ClientConfiguration` for the underlying client or else `()`\n# + return - The `websubhub:PublisherClient` or an `websubhub:Error` if the initialization failed\npublic isolated function init(string hubUrl, *websubhub:ClientConfiguration config) returns websubhub:Error?\n```\n\n### 3.2. Register/Deregister Topics\n\n`websubhub:PublisherClient` could be used to register/deregister topics in a `hub`.\n\n**registerTopic**\n\nThis remote method is invoked when the `publisher` tries to register a `topic` in a particular `hub`.\n```ballerina\n# Registers a topic in a Ballerina WebSub Hub to which the subscribers can subscribe and the publisher will publish updates.\n# ```ballerina\n# websubhub:TopicRegistrationSuccess response = check publisherClient->registerTopic(\"http://websubpubtopic.com\");\n# ```\n#\n# + topic - The topic to register\n# + return - A `websubhub:TopicRegistrationError` if an error occurred registering the topic or else `websubhub:TopicRegistrationSuccess`\nremote function registerTopic(string topic) returns websubhub:TopicRegistrationSuccess|websubhub:TopicRegistrationError\n```\n\n**deregisterTopic**\n\nThis remote method is invoked when the `publisher` tries to deregister a `topic` from a particular `hub`.\n```ballerina\n# Deregisters a topic in a Ballerina WebSub Hub.\n# ```ballerina\n# websubhub:TopicDeregistrationSuccess response = check publisherClient->deregisterTopic(\"http://websubpubtopic.com\");\n# ```\n#\n# + topic - The topic to deregister\n# + return - A `websubhub:TopicDeregistrationError` if an error occurred un registering the topic or else `websubhub:TopicDeregistrationSuccess`\nremote function deregisterTopic(string topic) returns websubhub:TopicDeregistrationSuccess|websubhub:TopicDeregistrationError\n```\n\n### 3.2. Update Content\n\n`websubhub:PublisherClient` has the capability to notify the content-update for a `topic` to the `hub`.\n\n**publishUpdate**\n\nThis remote method is used to directly send the content-update for a `topic` to the `hub`.\n```ballerina\n# Publishes an update to a remote Ballerina WebSub Hub.\n# ```ballerina\n# websubhub:Acknowledgement response = check publisherClient->publishUpdate(\"http://websubpubtopic.com\",{\"action\": \"publish\",\n# \"mode\": \"remote-hub\"});\n# ```\n#\n# + topic - The topic for which the update occurred\n# + payload - The update payload\n# + contentType - The type of the update content to set as the `ContentType` header\n# + return - A `websubhub:UpdateMessageError`if an error occurred with the update or else `websubhub:Acknowledgement`\nremote function publishUpdate(string topic, map<string>|string|xml|json|byte[] payload, string? contentType = ()) \n    returns websubhub:Acknowledgement|websubhub:UpdateMessageError\n```\n\n**notifyUpdate**\n\nThis remote method is used to notify the `hub`, that the `topic` has been updated.\n```ballerina\n# Notifies a remote WebSubHub from which an update is available to fetch for hubs that require publishing.\n# ```ballerina\n#  websubhub:Acknowledgement|websubhub:UpdateMessageError response = check publisherClient->notifyUpdate(\"http://websubpubtopic.com\");\n# ```\n#\n# + topic - The topic for which the update occurred\n# + return - A `websubhub:UpdateMessageError` if an error occurred with the notification or else `websubhub:Acknowledgement`\nremote function notifyUpdate(string topic) returns websubhub:Acknowledgement|websubhub:UpdateMessageError\n```\n\n### 4. Common Client Configuration\n\nWebSubHub library provides following client configurations to be used when initializing `websubhub:HubClient`/`websubhub:PublisherClient`.\n```ballerina\n# Record to represent client configuration for HubClient / PublisherClient\n# \n# + httpVersion - The HTTP version understood by the client\n# + http1Settings - Configurations related to HTTP/1.x protocol\n# + http2Settings - Configurations related to HTTP/2 protocol\n# + timeout - The maximum time to wait (in seconds) for a response before closing the connection\n# + poolConfig - Configurations associated with request pooling\n# + auth - Configurations related to client authentication\n# + retryConfig - Configurations associated with retrying\n# + responseLimits - Configurations associated with inbound response size limits\n# + secureSocket - SSL/TLS related options\n# + circuitBreaker - Configurations associated with the behaviour of the Circuit Breaker\npublic type ClientConfiguration record {|\n    string httpVersion = HTTP_1_1;\n    http:ClientHttp1Settings http1Settings = {};\n    http:ClientHttp2Settings http2Settings = {};\n    decimal timeout = 60;\n    http:PoolConfiguration poolConfig?;\n    http:ClientAuthConfig auth?;\n    http:RetryConfig retryConfig?;\n    http:ResponseLimitConfigs responseLimits = {};\n    http:ClientSecureSocket secureSocket?;\n    http:CircuitBreakerConfig circuitBreaker?;\n|};\n```\n","codeSnippets":"[[-1004128824,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color:#fff;color:#24292e\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># Provides a set of configurations for configure the underlying HTTP listener of the WebSubHub listener.</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">public</span><span style=\\\"color:#D73A49\\\"> type</span><span style=\\\"color:#6F42C1\\\"> ListenerConfiguration</span><span style=\\\"color:#D73A49\\\"> record</span><span style=\\\"color:#24292E\\\"> {</span><span style=\\\"color:#D73A49\\\">|</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">    *</span><span style=\\\"color:#24292E\\\">http</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">ListenerConfiguration;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">|</span><span style=\\\"color:#24292E\\\">};</span></span></code></pre>\"],[-1115792531,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color:#fff;color:#24292e\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># Initiliazes the `websubhub:Listener` instance.</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># ```ballerina</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># listener websubhub:Listener hubListenerEp = check new (9090);</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># ```</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\">#</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">listenTo</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">Port number or an `http:Listener` instance</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">config</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">Custom `websubhub:ListenerConfiguration` to be provided to the underlying HTTP listener</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">return</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">The `websubhub:Listener` or an `websubhub:Error` if the initialization failed</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">public</span><span style=\\\"color:#D73A49\\\"> isolated</span><span style=\\\"color:#D73A49\\\"> function</span><span style=\\\"color:#6F42C1\\\"> init</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#005CC5\\\">int</span><span style=\\\"color:#D73A49\\\">|</span><span style=\\\"color:#E36209\\\">http</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">Listener listenTo, *</span><span style=\\\"color:#E36209\\\">ListenerConfiguration</span><span style=\\\"color:#E36209\\\"> config</span><span style=\\\"color:#24292E\\\">) </span><span style=\\\"color:#D73A49\\\">returns</span><span style=\\\"color:#24292E\\\"> websubhub</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">Error? {</span></span></code></pre>\"],[702871758,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color:#fff;color:#24292e\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># Attaches the provided `websubhub:Service` to the `websubhub:Listener`.</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># ```ballerina</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># check hubListenerEp.attach('service, \\\"/hub\\\");</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># ```</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">'service</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">The `websubhub:Service` object to attach</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">name</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">The path of the service to be hosted</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">return</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">An `websubhub:Error` if an error occurred during the service attaching process or else `()`</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">public</span><span style=\\\"color:#D73A49\\\"> isolated</span><span style=\\\"color:#D73A49\\\"> function</span><span style=\\\"color:#6F42C1\\\"> attach</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#E36209\\\">websubhub</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">Service 'service, </span><span style=\\\"color:#005CC5\\\">string</span><span style=\\\"color:#24292E\\\">[]</span><span style=\\\"color:#D73A49\\\">|</span><span style=\\\"color:#005CC5\\\">string</span><span style=\\\"color:#24292E\\\">? </span><span style=\\\"color:#E36209\\\">name</span><span style=\\\"color:#D73A49\\\"> =</span><span style=\\\"color:#24292E\\\"> ()) </span><span style=\\\"color:#D73A49\\\">returns</span><span style=\\\"color:#24292E\\\"> websubhub</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">Error?</span></span></code></pre>\"],[-1114320739,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color:#fff;color:#24292e\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># Detaches the provided `websubhub:Service` from the `websubhub:Listener`.</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># ```ballerina</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># check hubListenerEp.detach('service);</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># ```</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">s</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">The `websubhub:Service` object to be detached</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">return</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">An `websubhub:Error` if an error occurred during the service detaching process or else `()`</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">public</span><span style=\\\"color:#D73A49\\\"> isolated</span><span style=\\\"color:#D73A49\\\"> function</span><span style=\\\"color:#6F42C1\\\"> detach</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#E36209\\\">websubhub</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">Service s) </span><span style=\\\"color:#D73A49\\\">returns</span><span style=\\\"color:#24292E\\\"> websubhub</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">Error?</span></span></code></pre>\"],[1013494611,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color:#fff;color:#24292e\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># Starts the registered service programmatically.</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># ```ballerina</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># check hubListenerEp.'start();</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># ```</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">return</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">An `websubhub:Error` if an error occurred during the listener-starting process or else `()`</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">public</span><span style=\\\"color:#D73A49\\\"> isolated</span><span style=\\\"color:#D73A49\\\"> function</span><span style=\\\"color:#24292E\\\"> 'start() </span><span style=\\\"color:#D73A49\\\">returns</span><span style=\\\"color:#24292E\\\"> websubhub</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">Error?</span></span></code></pre>\"],[-1736110672,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color:#fff;color:#24292e\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># Gracefully stops the hub listener. Already-accepted requests will be served before the connection closure.</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># ```ballerina</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># check hubListenerEp.gracefulStop();</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># ```</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">return</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">An `websubhub:Error` if an error occurred during the listener-stopping process</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">public</span><span style=\\\"color:#D73A49\\\"> isolated</span><span style=\\\"color:#D73A49\\\"> function</span><span style=\\\"color:#6F42C1\\\"> gracefulStop</span><span style=\\\"color:#24292E\\\">() </span><span style=\\\"color:#D73A49\\\">returns</span><span style=\\\"color:#24292E\\\"> websubhub</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">Error?</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\"># Stops the </span><span style=\\\"color:#D73A49\\\">service</span><span style=\\\"color:#D73A49\\\"> listener</span><span style=\\\"color:#24292E\\\"> immediately.</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\"># ```ballerina</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\"># </span><span style=\\\"color:#D73A49\\\">check</span><span style=\\\"color:#24292E\\\"> hubListenerEp.immediateStop();</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># ```</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">return</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">An `websubhub:Error` if an error occurred during the listener-stopping process or else `()`</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">public</span><span style=\\\"color:#D73A49\\\"> isolated</span><span style=\\\"color:#D73A49\\\"> function</span><span style=\\\"color:#6F42C1\\\"> immediateStop</span><span style=\\\"color:#24292E\\\">() </span><span style=\\\"color:#D73A49\\\">returns</span><span style=\\\"color:#24292E\\\"> websubhub</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">Error?</span></span></code></pre>\"],[876711768,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color:#fff;color:#24292e\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">public</span><span style=\\\"color:#D73A49\\\"> type</span><span style=\\\"color:#6F42C1\\\"> Service</span><span style=\\\"color:#D73A49\\\"> distinct</span><span style=\\\"color:#D73A49\\\"> service</span><span style=\\\"color:#D73A49\\\"> object</span><span style=\\\"color:#24292E\\\"> {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\">    // Sample POST request hub.mode=register&#x26;hub.topic=http://foo.com/bar</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\">    // Sample 200 OK response hub.mode=accepted or 200 OK hub.mode=denied&#x26;hub.reason=unauthorized</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">    remote</span><span style=\\\"color:#D73A49\\\"> function</span><span style=\\\"color:#6F42C1\\\"> onRegisterTopic</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#E36209\\\">websubhub</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">TopicRegistration msg)</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">        returns</span><span style=\\\"color:#24292E\\\"> websubhub</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">TopicRegistrationSuccess</span><span style=\\\"color:#D73A49\\\">|</span><span style=\\\"color:#24292E\\\">websubhub:TopicRegistrationError</span><span style=\\\"color:#D73A49\\\">|error</span><span style=\\\"color:#24292E\\\">;</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\">    // Sample POST request hub.mode=unregister&#x26;hub.topic=http://foo.com/bar</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\">    // Sample 200 OK response hub.mode=accepted or 200 OK hub.mode=denied&#x26;hub.reason=unauthorized </span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">    remote</span><span style=\\\"color:#D73A49\\\"> function</span><span style=\\\"color:#6F42C1\\\"> onDeregisterTopic</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#E36209\\\">websubhub</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">TopicDeregistration msg)</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">        returns</span><span style=\\\"color:#24292E\\\"> websubhub</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">TopicDeregistrationSuccess</span><span style=\\\"color:#D73A49\\\">|</span><span style=\\\"color:#24292E\\\">websubhub:TopicDeregistrationError</span><span style=\\\"color:#D73A49\\\">|error</span><span style=\\\"color:#24292E\\\">;</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\">    // Sample POST request with content type x-www-form-urlencoded hub.mode=publish&#x26;hub.topic=http://foo.com/bar</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\">    // for other content types such as xml, json and octect-stream hub.mode=publish should be in query string.</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\">    // Sample 200 OK response hub.mode=accepted or 200 OK hub.mode=denied&#x26;hub.reason=unauthorized </span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">    remote</span><span style=\\\"color:#D73A49\\\"> function</span><span style=\\\"color:#6F42C1\\\"> onUpdateMessage</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#E36209\\\">websubhub</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">UpdateMessage msg)</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">        returns</span><span style=\\\"color:#24292E\\\"> websubhub</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">Acknowledgement</span><span style=\\\"color:#D73A49\\\">|</span><span style=\\\"color:#24292E\\\">websubhub:UpdateMessageError</span><span style=\\\"color:#D73A49\\\">|error</span><span style=\\\"color:#24292E\\\">;</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\">    // Sample POST request hub.mode=subscribe&#x26;hub.topic=http://foo.com/bar </span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">    remote</span><span style=\\\"color:#D73A49\\\"> function</span><span style=\\\"color:#6F42C1\\\"> onSubscription</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#E36209\\\">websubhub</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">Subscription msg)</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">        returns</span><span style=\\\"color:#24292E\\\"> websubhub</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">SubscriptionAccepted</span><span style=\\\"color:#D73A49\\\">|</span><span style=\\\"color:#24292E\\\">websubhub:SubscriptionPermanentRedirect</span><span style=\\\"color:#D73A49\\\">|</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">        websubhub</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">SubscriptionTemporaryRedirect</span><span style=\\\"color:#D73A49\\\">|</span><span style=\\\"color:#24292E\\\">websubhub:BadSubscriptionError</span><span style=\\\"color:#D73A49\\\">|</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">        websubhub</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">InternalSubscriptionError</span><span style=\\\"color:#D73A49\\\">|error</span><span style=\\\"color:#24292E\\\">;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">        </span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">    remote</span><span style=\\\"color:#D73A49\\\"> function</span><span style=\\\"color:#6F42C1\\\"> onSubscriptionValidation</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#E36209\\\">websubhub</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">Subscription msg)</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">        returns</span><span style=\\\"color:#24292E\\\"> websubhub</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">SubscriptionDeniedError</span><span style=\\\"color:#D73A49\\\">|error</span><span style=\\\"color:#24292E\\\">?;</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">    remote</span><span style=\\\"color:#D73A49\\\"> function</span><span style=\\\"color:#6F42C1\\\"> onSubscriptionIntentVerified</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#E36209\\\">websubhub</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">VerifiedSubscription msg) </span><span style=\\\"color:#D73A49\\\">returns</span><span style=\\\"color:#D73A49\\\"> error?</span><span style=\\\"color:#24292E\\\">;</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\">    // Sample POST request hub.mode=unsubscribe&#x26;hub.topic=http://foo.com/bar</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">    remote</span><span style=\\\"color:#D73A49\\\"> function</span><span style=\\\"color:#6F42C1\\\"> onUnsubscription</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#E36209\\\">websubhub</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">Unsubscription msg)</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">        returns</span><span style=\\\"color:#24292E\\\"> websubhub</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">UnsubscriptionAccepted</span><span style=\\\"color:#D73A49\\\">|</span><span style=\\\"color:#24292E\\\">websubhub:BadUnsubscriptionError</span><span style=\\\"color:#D73A49\\\">|</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">        websubhub</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">InternalUnsubscriptionError</span><span style=\\\"color:#D73A49\\\">|error</span><span style=\\\"color:#24292E\\\">;</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">    remote</span><span style=\\\"color:#D73A49\\\"> function</span><span style=\\\"color:#6F42C1\\\"> onUnsubscriptionValidation</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#E36209\\\">websubhub</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">Unsubscription msg)</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">        returns</span><span style=\\\"color:#24292E\\\"> websubhub</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">UnsubscriptionDeniedError</span><span style=\\\"color:#D73A49\\\">|error</span><span style=\\\"color:#24292E\\\">?;</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">    remote</span><span style=\\\"color:#D73A49\\\"> function</span><span style=\\\"color:#6F42C1\\\"> onUnsubscriptionIntentVerified</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#E36209\\\">websubhub</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">VerifiedUnsubscription msg) </span><span style=\\\"color:#D73A49\\\">returns</span><span style=\\\"color:#D73A49\\\"> error?</span><span style=\\\"color:#24292E\\\">;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">};</span></span></code></pre>\"],[-904371941,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color:#fff;color:#24292e\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># Configuration for a WebSub Hub service.</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\">#</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">leaseSeconds</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">The period for which the subscription is expected to be active in the `hub`</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">webHookConfig</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">HTTP client configurations for subscription/unsubscription intent verification</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">autoVerifySubscriptionIntent</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">Configuration to enable or disable automatic subscription verification</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">public</span><span style=\\\"color:#D73A49\\\"> type</span><span style=\\\"color:#6F42C1\\\"> ServiceConfiguration</span><span style=\\\"color:#D73A49\\\"> record</span><span style=\\\"color:#24292E\\\"> {</span><span style=\\\"color:#D73A49\\\">|</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#005CC5\\\">    int</span><span style=\\\"color:#24292E\\\"> leaseSeconds?;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">    ClientConfiguration webHookConfig</span><span style=\\\"color:#D73A49\\\">?</span><span style=\\\"color:#24292E\\\">;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#005CC5\\\">    boolean</span><span style=\\\"color:#24292E\\\"> autoVerifySubscriptionIntent </span><span style=\\\"color:#D73A49\\\">=</span><span style=\\\"color:#D73A49\\\"> false</span><span style=\\\"color:#24292E\\\">;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">|</span><span style=\\\"color:#24292E\\\">};</span></span></code></pre>\"],[-2062928407,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color:#fff;color:#24292e\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># Registers a `topic` in the hub.</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">msg</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">Details related to the topic-registration</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">return</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">`websubhub:TopicRegistrationSuccess` if topic registration is successful, `websubhub:TopicRegistrationError`</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\">#            if topic registration failed or `error` if there is any unexpected error</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">remote</span><span style=\\\"color:#D73A49\\\"> function</span><span style=\\\"color:#6F42C1\\\"> onRegisterTopic</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#E36209\\\">websubhub</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">TopicRegistration msg)</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">    returns</span><span style=\\\"color:#24292E\\\"> websubhub</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">TopicRegistrationSuccess</span><span style=\\\"color:#D73A49\\\">|</span><span style=\\\"color:#24292E\\\">websubhub:TopicRegistrationError</span><span style=\\\"color:#D73A49\\\">|error</span><span style=\\\"color:#24292E\\\">;</span></span></code></pre>\"],[-1747424213,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color:#fff;color:#24292e\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># Deregisters a `topic` in the hub.</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">msg</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">Details related to the topic-deregistration</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">return</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">`websubhub:TopicDeregistrationSuccess` if topic deregistration is successful, `websubhub:TopicDeregistrationError`</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\">#            if topic deregistration failed or `error` if there is any unexpected error</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">remote</span><span style=\\\"color:#D73A49\\\"> function</span><span style=\\\"color:#6F42C1\\\"> onDeregisterTopic</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#E36209\\\">websubhub</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">TopicDeregistration msg)</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">    returns</span><span style=\\\"color:#24292E\\\"> websubhub</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">TopicDeregistrationSuccess</span><span style=\\\"color:#D73A49\\\">|</span><span style=\\\"color:#24292E\\\">websubhub:TopicDeregistrationError</span><span style=\\\"color:#D73A49\\\">|error</span><span style=\\\"color:#24292E\\\">;</span></span></code></pre>\"],[852607048,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color:#fff;color:#24292e\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># Publishes content to the hub.</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">msg</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">Details of the published content</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">return</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">`websubhub:Acknowledgement` if publish content is successful, `websubhub:UpdateMessageError`</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\">#            if publish content failed or `error` if there is any unexpected error</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">remote</span><span style=\\\"color:#D73A49\\\"> function</span><span style=\\\"color:#6F42C1\\\"> onUpdateMessage</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#E36209\\\">websubhub</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">UpdateMessage msg)</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">    returns</span><span style=\\\"color:#24292E\\\"> websubhub</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">Acknowledgement</span><span style=\\\"color:#D73A49\\\">|</span><span style=\\\"color:#24292E\\\">websubhub:UpdateMessageError</span><span style=\\\"color:#D73A49\\\">|error</span><span style=\\\"color:#24292E\\\">;</span></span></code></pre>\"],[1431793772,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color:#fff;color:#24292e\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># Subscribes a `subscriber` to the hub.</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">msg</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">Details of the subscription</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">return</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">`websubhub:SubscriptionAccepted` if subscription is accepted from the hub, `websubhub:BadSubscriptionError`</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\">#            if subscription is denied from the hub, `websubhub:SubscriptionPermanentRedirect` or a `websubhub:SubscriptionTemporaryRedirect`</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\">#            if the subscription request is redirected from the `hub`, `websubhub:InternalSubscriptionError` if there is an internal error </span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\">#            while processing the subscription request or `error` if there is any unexpected error</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">remote</span><span style=\\\"color:#D73A49\\\"> function</span><span style=\\\"color:#6F42C1\\\"> onSubscription</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#E36209\\\">websubhub</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">Subscription msg)</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">    returns</span><span style=\\\"color:#24292E\\\"> websubhub</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">SubscriptionAccepted</span><span style=\\\"color:#D73A49\\\">|</span><span style=\\\"color:#24292E\\\">websubhub:SubscriptionPermanentRedirect</span><span style=\\\"color:#D73A49\\\">|</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">        websubhub</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">SubscriptionTemporaryRedirect</span><span style=\\\"color:#D73A49\\\">|</span><span style=\\\"color:#24292E\\\">websubhub:BadSubscriptionError</span><span style=\\\"color:#D73A49\\\">|</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">        websubhub</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">InternalSubscriptionError</span><span style=\\\"color:#D73A49\\\">|error</span><span style=\\\"color:#24292E\\\">;</span></span></code></pre>\"],[-793787441,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color:#fff;color:#24292e\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># Validates a incomming subscription request.</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">msg</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">Details of the subscription</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">return</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">`websubhub:SubscriptionDeniedError` if the subscription is denied by the hub, `error` if there is any unexpected error or else `()`</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">remote</span><span style=\\\"color:#D73A49\\\"> function</span><span style=\\\"color:#6F42C1\\\"> onSubscriptionValidation</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#E36209\\\">websubhub</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">Subscription msg) </span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">    returns</span><span style=\\\"color:#24292E\\\"> websubhub</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">SubscriptionDeniedError</span><span style=\\\"color:#D73A49\\\">|error</span><span style=\\\"color:#24292E\\\">?;</span></span></code></pre>\"],[-86739074,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color:#fff;color:#24292e\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># Processes a verified subscription request.</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">msg</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">Details of the subscription</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">return</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">`error` if there is any unexpected error or else `()`</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">remote</span><span style=\\\"color:#D73A49\\\"> function</span><span style=\\\"color:#6F42C1\\\"> onSubscriptionIntentVerified</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#E36209\\\">websubhub</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">VerifiedSubscription msg) </span><span style=\\\"color:#D73A49\\\">returns</span><span style=\\\"color:#D73A49\\\"> error?</span><span style=\\\"color:#24292E\\\">;</span></span></code></pre>\"],[-945679947,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color:#fff;color:#24292e\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># Unsubscribes a `subscriber` from the hub.</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">msg</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">Details of the unsubscription</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">return</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">`websubhub:UnsubscriptionAccepted` if unsubscription is accepted from the hub, `websubhub:BadUnsubscriptionError`</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\">#            if unsubscription is denied from the hub, `websubhub:InternalUnsubscriptionError` if there is any internal error while processing the </span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\">#             unsubscription request or `error` if there is any unexpected error</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">remote</span><span style=\\\"color:#D73A49\\\"> function</span><span style=\\\"color:#6F42C1\\\"> onUnsubscription</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#E36209\\\">websubhub</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">Unsubscription msg)</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">    returns</span><span style=\\\"color:#24292E\\\"> websubhub</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">UnsubscriptionAccepted</span><span style=\\\"color:#D73A49\\\">|</span><span style=\\\"color:#24292E\\\">websubhub:BadUnsubscriptionError</span><span style=\\\"color:#D73A49\\\">|</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">        websubhub</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">InternalUnsubscriptionError</span><span style=\\\"color:#D73A49\\\">|error</span><span style=\\\"color:#24292E\\\">;</span></span></code></pre>\"],[856756900,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color:#fff;color:#24292e\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># Validates a incomming unsubscription request.</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">msg</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">Details of the unsubscription</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">return</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">`websubhub:UnsubscriptionDeniedError` if the unsubscription is denied by the hub or else `()`</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">remote</span><span style=\\\"color:#D73A49\\\"> function</span><span style=\\\"color:#6F42C1\\\"> onUnsubscriptionValidation</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#E36209\\\">websubhub</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">Unsubscription msg) </span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">    returns</span><span style=\\\"color:#24292E\\\"> websubhub</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">UnsubscriptionDeniedError</span><span style=\\\"color:#D73A49\\\">|error</span><span style=\\\"color:#24292E\\\">?;</span></span></code></pre>\"],[807038110,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color:#fff;color:#24292e\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># Processes a verified unsubscription request.</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">msg</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">Details of the unsubscription</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">remote</span><span style=\\\"color:#D73A49\\\"> function</span><span style=\\\"color:#6F42C1\\\"> onUnsubscriptionIntentVerified</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#E36209\\\">websubhub</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">VerifiedUnsubscription msg) </span><span style=\\\"color:#D73A49\\\">returns</span><span style=\\\"color:#D73A49\\\"> error?</span><span style=\\\"color:#24292E\\\">;</span></span></code></pre>\"],[-352119968,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color:#fff;color:#24292e\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">type</span><span style=\\\"color:#6F42C1\\\"> Controller</span><span style=\\\"color:#D73A49\\\"> object</span><span style=\\\"color:#24292E\\\"> {</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\">    # Marks a particular subscription as verified.</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\">    #</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\">    # </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">subscription</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">The `websubhub:Subscription` or `websubhub:Unsubscription` message</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\">    # </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">return</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">A `websubhub:Error` if the `websubhub:Service` has not enabled subscription auto-verification, </span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\">    #           or else nil</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">    public</span><span style=\\\"color:#D73A49\\\"> isolated</span><span style=\\\"color:#D73A49\\\"> function</span><span style=\\\"color:#6F42C1\\\"> markAsVerified</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#E36209\\\">Subscription</span><span style=\\\"color:#D73A49\\\">|</span><span style=\\\"color:#E36209\\\">Unsubscription</span><span style=\\\"color:#E36209\\\"> subscription</span><span style=\\\"color:#24292E\\\">) </span><span style=\\\"color:#D73A49\\\">returns</span><span style=\\\"color:#24292E\\\"> Error</span><span style=\\\"color:#D73A49\\\">?</span><span style=\\\"color:#24292E\\\">;</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\">    # Checks whether a particular subscription has been marked as verified. Please note that this </span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\">    # is an internal API which is used within the WebSubHub dispatcher to identify whether </span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\">    # to skip the subscrition intent verification for the subscription or unsubscription.</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\">    # </span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\">    # </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">subscription</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">The `websubhub:Subscription` or `websubhub:Unsubscription` message</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\">    # </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">return</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">A `true` if the subscrition/unsubscription has been marked as verified or else `false`</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">    isolated</span><span style=\\\"color:#D73A49\\\"> function</span><span style=\\\"color:#6F42C1\\\"> skipSubscriptionVerification</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#E36209\\\">Subscription</span><span style=\\\"color:#D73A49\\\">|</span><span style=\\\"color:#E36209\\\">Unsubscription</span><span style=\\\"color:#E36209\\\"> subscription</span><span style=\\\"color:#24292E\\\">) </span><span style=\\\"color:#D73A49\\\">returns</span><span style=\\\"color:#005CC5\\\"> boolean</span><span style=\\\"color:#24292E\\\">;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">};</span></span></code></pre>\"],[227248062,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color:#fff;color:#24292e\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># Record to represent the subscription request body.</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">hub</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">URL of the `hub` to which the subscriber has subscribed</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">hubMode</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">Current `hub` action</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">hubCallback</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">Callback URL for subscriber to receive distributed content</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">hubTopic</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">Topic to which subscriber has subscribed</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">hubLeaseSeconds</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">Amount of time in seconds during when the subscription is valid</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">hubSecret</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">Secret Key to sign the distributed content</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">public</span><span style=\\\"color:#D73A49\\\"> type</span><span style=\\\"color:#6F42C1\\\"> Subscription</span><span style=\\\"color:#D73A49\\\"> record</span><span style=\\\"color:#24292E\\\"> {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#005CC5\\\">    string</span><span style=\\\"color:#24292E\\\"> hub;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#005CC5\\\">    string</span><span style=\\\"color:#24292E\\\"> hubMode;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#005CC5\\\">    string</span><span style=\\\"color:#24292E\\\"> hubCallback;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#005CC5\\\">    string</span><span style=\\\"color:#24292E\\\"> hubTopic;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#005CC5\\\">    string</span><span style=\\\"color:#24292E\\\">? hubLeaseSeconds </span><span style=\\\"color:#D73A49\\\">=</span><span style=\\\"color:#24292E\\\"> ();</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#005CC5\\\">    string</span><span style=\\\"color:#24292E\\\">? hubSecret </span><span style=\\\"color:#D73A49\\\">=</span><span style=\\\"color:#24292E\\\"> ();</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">};</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">public</span><span style=\\\"color:#D73A49\\\"> isolated</span><span style=\\\"color:#D73A49\\\"> function</span><span style=\\\"color:#6F42C1\\\"> init</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#E36209\\\">websubhub</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">Subscription subscription, *</span><span style=\\\"color:#E36209\\\">websubhub</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">ClientConfiguration config) </span><span style=\\\"color:#D73A49\\\">returns</span><span style=\\\"color:#24292E\\\"> websubhub</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">Error?</span></span></code></pre>\"],[644674547,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color:#fff;color:#24292e\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># Record to represent a WebSub content delivery.</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\">#</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">headers</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">Additional Request headers to include when distributing content</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">contentType</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">The content-type of the payload</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">content</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">The payload to be sent</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">public</span><span style=\\\"color:#D73A49\\\"> type</span><span style=\\\"color:#6F42C1\\\"> ContentDistributionMessage</span><span style=\\\"color:#D73A49\\\"> record</span><span style=\\\"color:#24292E\\\"> {</span><span style=\\\"color:#D73A49\\\">|</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">    map&#x3C;</span><span style=\\\"color:#005CC5\\\">string</span><span style=\\\"color:#D73A49\\\">|</span><span style=\\\"color:#005CC5\\\">string</span><span style=\\\"color:#24292E\\\">[]</span><span style=\\\"color:#D73A49\\\">></span><span style=\\\"color:#24292E\\\">? headers </span><span style=\\\"color:#D73A49\\\">=</span><span style=\\\"color:#24292E\\\"> ();</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#005CC5\\\">    string</span><span style=\\\"color:#24292E\\\">? contentType </span><span style=\\\"color:#D73A49\\\">=</span><span style=\\\"color:#24292E\\\"> ();</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#005CC5\\\">    json</span><span style=\\\"color:#D73A49\\\">|</span><span style=\\\"color:#005CC5\\\">xml</span><span style=\\\"color:#D73A49\\\">|</span><span style=\\\"color:#005CC5\\\">string</span><span style=\\\"color:#D73A49\\\">|</span><span style=\\\"color:#005CC5\\\">byte</span><span style=\\\"color:#24292E\\\">[]? content;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">|</span><span style=\\\"color:#24292E\\\">};</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">type</span><span style=\\\"color:#6F42C1\\\"> HubClient</span><span style=\\\"color:#D73A49\\\"> client</span><span style=\\\"color:#D73A49\\\"> object</span><span style=\\\"color:#24292E\\\"> {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\">    # Distributes the published content to the subscribers.</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\">    # ```ballerina</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\">    # ContentDistributionSuccess publishUpdate = check websubHubClientEP->notifyContentDistribution({ content: \\\"This is sample content\\\" });</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\">    # ```</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\">    #</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\">    # </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">msg</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">Content to be distributed to the topic subscriber </span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\">    # </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">return</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">An `websubhub:Error` if an exception occurred, a `websubhub:SubscriptionDeletedError` if the subscriber responded with `HTTP 410`,</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\">    #            or else a `websubhub:ContentDistributionSuccess` for successful content delivery</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">    remote</span><span style=\\\"color:#D73A49\\\"> function</span><span style=\\\"color:#6F42C1\\\"> notifyContentDistribution</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#E36209\\\">websubhub</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">ContentDistributionMessage msg) </span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">            returns</span><span style=\\\"color:#24292E\\\"> websubhub</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">ContentDistributionSuccess</span><span style=\\\"color:#D73A49\\\">|</span><span style=\\\"color:#24292E\\\">websubhub:SubscriptionDeletedError</span><span style=\\\"color:#D73A49\\\">|</span><span style=\\\"color:#24292E\\\">websubhub:Error;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">};</span></span></code></pre>\"],[-1297816318,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color:#fff;color:#24292e\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># Initializes the `websub:PublisherClient`.</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># ```ballerina</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># websub:PublisherClient publisherClient = check new(\\\"http://localhost:9191/websub/publish\\\");</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># ```</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\">#</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">hubUrl</span><span style=\\\"color:#D73A49\\\">    - </span><span style=\\\"color:#6A737D\\\">The URL to publish/notify updates</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">config</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">The `websubhub:ClientConfiguration` for the underlying client or else `()`</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">return</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">The `websubhub:PublisherClient` or an `websubhub:Error` if the initialization failed</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">public</span><span style=\\\"color:#D73A49\\\"> isolated</span><span style=\\\"color:#D73A49\\\"> function</span><span style=\\\"color:#6F42C1\\\"> init</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#005CC5\\\">string</span><span style=\\\"color:#E36209\\\"> hubUrl</span><span style=\\\"color:#24292E\\\">, *</span><span style=\\\"color:#E36209\\\">websubhub</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">ClientConfiguration config) </span><span style=\\\"color:#D73A49\\\">returns</span><span style=\\\"color:#24292E\\\"> websubhub</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">Error?</span></span></code></pre>\"],[-101257706,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color:#fff;color:#24292e\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># Registers a topic in a Ballerina WebSub Hub to which the subscribers can subscribe and the publisher will publish updates.</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># ```ballerina</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># websubhub:TopicRegistrationSuccess response = check publisherClient->registerTopic(\\\"http://websubpubtopic.com\\\");</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># ```</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\">#</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">topic</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">The topic to register</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">return</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">A `websubhub:TopicRegistrationError` if an error occurred registering the topic or else `websubhub:TopicRegistrationSuccess`</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">remote</span><span style=\\\"color:#D73A49\\\"> function</span><span style=\\\"color:#6F42C1\\\"> registerTopic</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#005CC5\\\">string</span><span style=\\\"color:#E36209\\\"> topic</span><span style=\\\"color:#24292E\\\">) </span><span style=\\\"color:#D73A49\\\">returns</span><span style=\\\"color:#24292E\\\"> websubhub</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">TopicRegistrationSuccess</span><span style=\\\"color:#D73A49\\\">|</span><span style=\\\"color:#24292E\\\">websubhub:TopicRegistrationError</span></span></code></pre>\"],[1284857191,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color:#fff;color:#24292e\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># Deregisters a topic in a Ballerina WebSub Hub.</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># ```ballerina</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># websubhub:TopicDeregistrationSuccess response = check publisherClient->deregisterTopic(\\\"http://websubpubtopic.com\\\");</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># ```</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\">#</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">topic</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">The topic to deregister</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">return</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">A `websubhub:TopicDeregistrationError` if an error occurred un registering the topic or else `websubhub:TopicDeregistrationSuccess`</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">remote</span><span style=\\\"color:#D73A49\\\"> function</span><span style=\\\"color:#6F42C1\\\"> deregisterTopic</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#005CC5\\\">string</span><span style=\\\"color:#E36209\\\"> topic</span><span style=\\\"color:#24292E\\\">) </span><span style=\\\"color:#D73A49\\\">returns</span><span style=\\\"color:#24292E\\\"> websubhub</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">TopicDeregistrationSuccess</span><span style=\\\"color:#D73A49\\\">|</span><span style=\\\"color:#24292E\\\">websubhub:TopicDeregistrationError</span></span></code></pre>\"],[1647341384,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color:#fff;color:#24292e\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># Publishes an update to a remote Ballerina WebSub Hub.</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># ```ballerina</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># websubhub:Acknowledgement response = check publisherClient->publishUpdate(\\\"http://websubpubtopic.com\\\",{\\\"action\\\": \\\"publish\\\",</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># \\\"mode\\\": \\\"remote-hub\\\"});</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># ```</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\">#</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">topic</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">The topic for which the update occurred</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">payload</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">The update payload</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">contentType</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">The type of the update content to set as the `ContentType` header</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">return</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">A `websubhub:UpdateMessageError`if an error occurred with the update or else `websubhub:Acknowledgement`</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">remote</span><span style=\\\"color:#D73A49\\\"> function</span><span style=\\\"color:#6F42C1\\\"> publishUpdate</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#005CC5\\\">string</span><span style=\\\"color:#E36209\\\"> topic</span><span style=\\\"color:#24292E\\\">, </span><span style=\\\"color:#D73A49\\\">map&#x3C;</span><span style=\\\"color:#005CC5\\\">string</span><span style=\\\"color:#D73A49\\\">>|</span><span style=\\\"color:#005CC5\\\">string</span><span style=\\\"color:#D73A49\\\">|</span><span style=\\\"color:#005CC5\\\">xml</span><span style=\\\"color:#D73A49\\\">|</span><span style=\\\"color:#005CC5\\\">json</span><span style=\\\"color:#D73A49\\\">|</span><span style=\\\"color:#005CC5\\\">byte</span><span style=\\\"color:#24292E\\\">[] </span><span style=\\\"color:#E36209\\\">payload</span><span style=\\\"color:#24292E\\\">, </span><span style=\\\"color:#005CC5\\\">string</span><span style=\\\"color:#E36209\\\">?</span><span style=\\\"color:#E36209\\\"> contentType</span><span style=\\\"color:#D73A49\\\"> =</span><span style=\\\"color:#24292E\\\"> ()) </span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">    returns</span><span style=\\\"color:#24292E\\\"> websubhub</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">Acknowledgement</span><span style=\\\"color:#D73A49\\\">|</span><span style=\\\"color:#24292E\\\">websubhub:UpdateMessageError</span></span></code></pre>\"],[1176130068,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color:#fff;color:#24292e\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># Notifies a remote WebSubHub from which an update is available to fetch for hubs that require publishing.</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># ```ballerina</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\">#  websubhub:Acknowledgement|websubhub:UpdateMessageError response = check publisherClient->notifyUpdate(\\\"http://websubpubtopic.com\\\");</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># ```</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\">#</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">topic</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">The topic for which the update occurred</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">return</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">A `websubhub:UpdateMessageError` if an error occurred with the notification or else `websubhub:Acknowledgement`</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">remote</span><span style=\\\"color:#D73A49\\\"> function</span><span style=\\\"color:#6F42C1\\\"> notifyUpdate</span><span style=\\\"color:#24292E\\\">(</span><span style=\\\"color:#005CC5\\\">string</span><span style=\\\"color:#E36209\\\"> topic</span><span style=\\\"color:#24292E\\\">) </span><span style=\\\"color:#D73A49\\\">returns</span><span style=\\\"color:#24292E\\\"> websubhub</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">Acknowledgement</span><span style=\\\"color:#D73A49\\\">|</span><span style=\\\"color:#24292E\\\">websubhub:UpdateMessageError</span></span></code></pre>\"],[-1637574604,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color:#fff;color:#24292e\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># Record to represent client configuration for HubClient / PublisherClient</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">httpVersion</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">The HTTP version understood by the client</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">http1Settings</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">Configurations related to HTTP/1.x protocol</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">http2Settings</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">Configurations related to HTTP/2 protocol</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">timeout</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">The maximum time to wait (in seconds) for a response before closing the connection</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">poolConfig</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">Configurations associated with request pooling</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">auth</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">Configurations related to client authentication</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">retryConfig</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">Configurations associated with retrying</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">responseLimits</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">Configurations associated with inbound response size limits</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">secureSocket</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">SSL/TLS related options</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\"># </span><span style=\\\"color:#D73A49\\\">+ </span><span style=\\\"color:#24292E\\\">circuitBreaker</span><span style=\\\"color:#D73A49\\\"> - </span><span style=\\\"color:#6A737D\\\">Configurations associated with the behaviour of the Circuit Breaker</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">public</span><span style=\\\"color:#D73A49\\\"> type</span><span style=\\\"color:#6F42C1\\\"> ClientConfiguration</span><span style=\\\"color:#D73A49\\\"> record</span><span style=\\\"color:#24292E\\\"> {</span><span style=\\\"color:#D73A49\\\">|</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#005CC5\\\">    string</span><span style=\\\"color:#24292E\\\"> httpVersion </span><span style=\\\"color:#D73A49\\\">=</span><span style=\\\"color:#24292E\\\"> HTTP_1_1;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">    http</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">ClientHttp1Settings http1Settings </span><span style=\\\"color:#D73A49\\\">=</span><span style=\\\"color:#24292E\\\"> {};</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">    http</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">ClientHttp2Settings http2Settings </span><span style=\\\"color:#D73A49\\\">=</span><span style=\\\"color:#24292E\\\"> {};</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#005CC5\\\">    decimal</span><span style=\\\"color:#24292E\\\"> timeout </span><span style=\\\"color:#D73A49\\\">=</span><span style=\\\"color:#005CC5\\\"> 60</span><span style=\\\"color:#24292E\\\">;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">    http</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">PoolConfiguration poolConfig?;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">    http</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">ClientAuthConfig auth?;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">    http</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">RetryConfig retryConfig?;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">    http</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">ResponseLimitConfigs responseLimits </span><span style=\\\"color:#D73A49\\\">=</span><span style=\\\"color:#24292E\\\"> {};</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">    http</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">ClientSecureSocket secureSocket?;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">    http</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">CircuitBreakerConfig circuitBreaker?;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">|</span><span style=\\\"color:#24292E\\\">};</span></span></code></pre>\"]]"},"__N_SSG":true}