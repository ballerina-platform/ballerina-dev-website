{"pageProps":{"samples":{"code":"<pre class=\"shiki github-light\" style=\"background-color:#fff;color:#24292e\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color:#D73A49\">import</span><span style=\"color:#24292E\"> ballerina/log;</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">import</span><span style=\"color:#24292E\"> ballerinax/googleapis.people </span><span style=\"color:#D73A49\">as</span><span style=\"color:#24292E\"> gPeople;</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">import</span><span style=\"color:#24292E\"> ballerinax/hubspot.crm.contact </span><span style=\"color:#D73A49\">as</span><span style=\"color:#24292E\"> hubspotContact;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D73A49\">configurable</span><span style=\"color:#005CC5\"> string</span><span style=\"color:#24292E\"> gPeopleAccessToken </span><span style=\"color:#D73A49\">=</span><span style=\"color:#D73A49\"> ?</span><span style=\"color:#24292E\">;</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">configurable</span><span style=\"color:#005CC5\"> string</span><span style=\"color:#24292E\"> hubspotAccessToken </span><span style=\"color:#D73A49\">=</span><span style=\"color:#D73A49\"> ?</span><span style=\"color:#24292E\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D73A49\">final</span><span style=\"color:#24292E\"> gPeople</span><span style=\"color:#D73A49\">:</span><span style=\"color:#24292E\">FieldMask[] personFields </span><span style=\"color:#D73A49\">=</span><span style=\"color:#24292E\"> [gPeople</span><span style=\"color:#D73A49\">:</span><span style=\"color:#24292E\">NAME, gPeople</span><span style=\"color:#D73A49\">:</span><span style=\"color:#24292E\">EMAIL_ADDRESS];</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">public</span><span style=\"color:#D73A49\"> function</span><span style=\"color:#6F42C1\"> main</span><span style=\"color:#24292E\">() </span><span style=\"color:#D73A49\">returns</span><span style=\"color:#D73A49\"> error?</span><span style=\"color:#24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">    gPeople</span><span style=\"color:#D73A49\">:</span><span style=\"color:#24292E\">Client gPeople </span><span style=\"color:#D73A49\">=</span><span style=\"color:#D73A49\"> check</span><span style=\"color:#D73A49\"> new</span><span style=\"color:#24292E\"> ({auth</span><span style=\"color:#D73A49\">:</span><span style=\"color:#24292E\"> {token: gPeopleAccessToken}});</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">    hubspotContact</span><span style=\"color:#D73A49\">:</span><span style=\"color:#24292E\">Client hubspot </span><span style=\"color:#D73A49\">=</span><span style=\"color:#D73A49\"> check</span><span style=\"color:#D73A49\"> new</span><span style=\"color:#24292E\"> ({auth</span><span style=\"color:#D73A49\">:</span><span style=\"color:#24292E\"> {token: hubspotAccessToken}});</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">    hubspotContact</span><span style=\"color:#D73A49\">:</span><span style=\"color:#24292E\">CollectionResponseSimplePublicObjectWithAssociationsForwardPaging hubspotResponse </span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">        =</span><span style=\"color:#D73A49\"> check</span><span style=\"color:#24292E\"> hubspot</span><span style=\"color:#D73A49\">-></span><span style=\"color:#6F42C1\">getPage</span><span style=\"color:#24292E\">();</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D73A49\">    foreach </span><span style=\"color:#24292E\">hubspotContact</span><span style=\"color:#D73A49\">:</span><span style=\"color:#24292E\">SimplePublicObjectWithAssociations hubspotContact </span><span style=\"color:#D73A49\">in</span><span style=\"color:#24292E\"> hubspotResponse.results {</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">        map&#x3C;</span><span style=\"color:#005CC5\">anydata</span><span style=\"color:#D73A49\">></span><span style=\"color:#24292E\"> contactProperties </span><span style=\"color:#D73A49\">=</span><span style=\"color:#24292E\"> hubspotContact.properties;</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">        gPeople</span><span style=\"color:#D73A49\">:</span><span style=\"color:#24292E\">EmailAddress emailAddress </span><span style=\"color:#D73A49\">=</span><span style=\"color:#24292E\"> {};</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">        gPeople</span><span style=\"color:#D73A49\">:</span><span style=\"color:#24292E\">Name name </span><span style=\"color:#D73A49\">=</span><span style=\"color:#24292E\"> {};</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">        gPeople</span><span style=\"color:#D73A49\">:</span><span style=\"color:#24292E\">Person googleContact </span><span style=\"color:#D73A49\">=</span><span style=\"color:#24292E\"> {};</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">    </span></span>\n<span class=\"line\"><span style=\"color:#005CC5\">        anydata</span><span style=\"color:#24292E\"> emailInHubspot </span><span style=\"color:#D73A49\">=</span><span style=\"color:#24292E\"> contactProperties[</span><span style=\"color:#032F62\">\"email\"</span><span style=\"color:#24292E\">];</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">        if</span><span style=\"color:#24292E\"> emailInHubspot </span><span style=\"color:#D73A49\">is</span><span style=\"color:#005CC5\"> string</span><span style=\"color:#24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">            emailAddress.value </span><span style=\"color:#D73A49\">=</span><span style=\"color:#24292E\"> emailInHubspot;</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">            googleContact.emailAddresses </span><span style=\"color:#D73A49\">=</span><span style=\"color:#24292E\"> [emailAddress];</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">        }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#005CC5\">        anydata</span><span style=\"color:#24292E\"> firstnameInHubspot </span><span style=\"color:#D73A49\">=</span><span style=\"color:#24292E\"> contactProperties[</span><span style=\"color:#032F62\">\"firstname\"</span><span style=\"color:#24292E\">];</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">        if</span><span style=\"color:#24292E\"> firstnameInHubspot </span><span style=\"color:#D73A49\">is</span><span style=\"color:#005CC5\"> string</span><span style=\"color:#24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">            name.givenName </span><span style=\"color:#D73A49\">=</span><span style=\"color:#24292E\"> firstnameInHubspot;</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">        }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#005CC5\">        anydata</span><span style=\"color:#24292E\"> lastnameInHubspot </span><span style=\"color:#D73A49\">=</span><span style=\"color:#24292E\"> contactProperties[</span><span style=\"color:#032F62\">\"lastname\"</span><span style=\"color:#24292E\">];</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">        if</span><span style=\"color:#24292E\"> lastnameInHubspot </span><span style=\"color:#D73A49\">is</span><span style=\"color:#005CC5\"> string</span><span style=\"color:#24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">            name.familyName </span><span style=\"color:#D73A49\">=</span><span style=\"color:#24292E\"> lastnameInHubspot;</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">        }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D73A49\">        if</span><span style=\"color:#24292E\"> name?.givenName </span><span style=\"color:#D73A49\">is</span><span style=\"color:#005CC5\"> string</span><span style=\"color:#D73A49\"> ||</span><span style=\"color:#24292E\"> name?.familyName </span><span style=\"color:#D73A49\">is</span><span style=\"color:#005CC5\"> string</span><span style=\"color:#24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">            googleContact.names </span><span style=\"color:#D73A49\">=</span><span style=\"color:#24292E\"> [name];</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">        }</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">        </span></span>\n<span class=\"line\"><span style=\"color:#24292E\">        gPeople</span><span style=\"color:#D73A49\">:</span><span style=\"color:#24292E\">PersonResponse</span><span style=\"color:#D73A49\">|error</span><span style=\"color:#24292E\"> createdContact </span><span style=\"color:#D73A49\">=</span><span style=\"color:#24292E\"> gPeople</span><span style=\"color:#D73A49\">-></span><span style=\"color:#6F42C1\">createContact</span><span style=\"color:#24292E\">(</span><span style=\"color:#E36209\">googleContact</span><span style=\"color:#24292E\">, </span><span style=\"color:#E36209\">personFields</span><span style=\"color:#24292E\">);</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">        if</span><span style=\"color:#24292E\"> createdContact </span><span style=\"color:#D73A49\">is</span><span style=\"color:#D73A49\"> error</span><span style=\"color:#24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">            log</span><span style=\"color:#D73A49\">:</span><span style=\"color:#6F42C1\">printError</span><span style=\"color:#24292E\">(</span><span style=\"color:#005CC5\">string</span><span style=\"color:#032F62\"> `Failed to add contact ${</span><span style=\"color:#24292E\">hubspotContact</span><span style=\"color:#032F62\">.</span><span style=\"color:#24292E\">id</span><span style=\"color:#032F62\">} to Google Contacts!`</span><span style=\"color:#24292E\">, </span><span style=\"color:#E36209\">createdContact</span><span style=\"color:#24292E\">);</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">            continue</span><span style=\"color:#24292E\">;</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">        }</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">        log</span><span style=\"color:#D73A49\">:</span><span style=\"color:#6F42C1\">printInfo</span><span style=\"color:#24292E\">(</span><span style=\"color:#005CC5\">string</span><span style=\"color:#032F62\"> `Contact ${</span><span style=\"color:#24292E\">hubspotContact</span><span style=\"color:#032F62\">.</span><span style=\"color:#24292E\">id</span><span style=\"color:#032F62\">} added to Google Contacts successfully!`</span><span style=\"color:#24292E\">);</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">    }</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">}</span></span></code></pre>"},"content":"\nimport ballerina/log;\nimport ballerinax/googleapis.people as gPeople;\nimport ballerinax/hubspot.crm.contact as hubspotContact;\n\nconfigurable string gPeopleAccessToken = ?;\nconfigurable string hubspotAccessToken = ?;\n\nfinal gPeople:FieldMask[] personFields = [gPeople:NAME, gPeople:EMAIL_ADDRESS];\npublic function main() returns error? {\n    gPeople:Client gPeople = check new ({auth: {token: gPeopleAccessToken}});\n    hubspotContact:Client hubspot = check new ({auth: {token: hubspotAccessToken}});\n    hubspotContact:CollectionResponseSimplePublicObjectWithAssociationsForwardPaging hubspotResponse \n        = check hubspot->getPage();\n\n    foreach hubspotContact:SimplePublicObjectWithAssociations hubspotContact in hubspotResponse.results {\n        map<anydata> contactProperties = hubspotContact.properties;\n        gPeople:EmailAddress emailAddress = {};\n        gPeople:Name name = {};\n        gPeople:Person googleContact = {};\n    \n        anydata emailInHubspot = contactProperties[\"email\"];\n        if emailInHubspot is string {\n            emailAddress.value = emailInHubspot;\n            googleContact.emailAddresses = [emailAddress];\n        }\n\n        anydata firstnameInHubspot = contactProperties[\"firstname\"];\n        if firstnameInHubspot is string {\n            name.givenName = firstnameInHubspot;\n        }\n\n        anydata lastnameInHubspot = contactProperties[\"lastname\"];\n        if lastnameInHubspot is string {\n            name.familyName = lastnameInHubspot;\n        }\n\n        if name?.givenName is string || name?.familyName is string {\n            googleContact.names = [name];\n        }\n        \n        gPeople:PersonResponse|error createdContact = gPeople->createContact(googleContact, personFields);\n        if createdContact is error {\n            log:printError(string `Failed to add contact ${hubspotContact.id} to Google Contacts!`, createdContact);\n            continue;\n        }\n        log:printInfo(string `Contact ${hubspotContact.id} added to Google Contacts successfully!`);\n    }\n}\n  \n"},"__N_SSG":true}