{"pageProps":{"frontmatter":{"layout":"ballerina-left-nav-release-notes","title":"Swan Lake Beta2","permalink":"/downloads/swan-lake-release-notes/swan-lake-beta2/","active":"swan-lake-beta2","redirect_from":["/downloads/swan-lake-release-notes/swan-lake-beta2"]},"content":"## Overview of Ballerina Swan Lake Beta2\n\n<em>This is the second beta release leading up to the Ballerina Swan Lake GA release.</em> \n\nIt introduces the new language features planned for the Swan Lake GA release and includes improvements and bug fixes done to the compiler, runtime, standard library, and developer tooling after the Swan Lake Beta1 release.\n\n## Updating Ballerina\n\nIf you are already using Ballerina, use the [Ballerina update tool](/learn/cli-documentation/update-tool/) to directly update to Ballerina Swan Lake Beta2. \n\nFirst, run the command below to update the update tool to its latest version. \n\n> `bal update`\n\nIf your **update tool is below version 0.8.14**, use the `ballerina update` command.\n\nNext, run the command below to update to Swan Lake Beta2.\n\n> `bal dist pull slbeta2`\n\n## Installing Ballerina\n\nIf you have not installed Ballerina, then download the [installers](/downloads/#swanlake) to install.\n\n## Language updates\n\n### Improvements\n\n- Introduced the support for recursive tuple types.\n\n    ```ballerina\n    type RecursiveType [int, RecursiveType[]];\n\n    public function main() {\n        RecursiveType a = [1];\n        RecursiveType b = [1, []];\n        RecursiveType c = [1, [a]];\n    }\n    ```\n\n- Changed the static type of the string iteration from `string` to `string:Char`.\n\n    ```ballerina\n    public function main() {\n        string str = \"foo\";\n\n        foreach string:Char s in str {\n            io:println(s);\n        }\n\n        record {|string:Char value;|}? next = str.iterator().next();\n\n        if !(next is ()) {\n            io:println(next.value);\n        }\n    }\n    ```\n\n### Bug fixes\n\nTo view bug fixes, see the [GitHub milestone for Swan Lake Beta2](https://github.com/ballerina-platform/ballerina-lang/issues?q=is%3Aissue+is%3Aclosed+milestone%3A%22Ballerina+Swan+Lake+-+Beta2%22+label%3AType%2FBug+label%3ATeam%2FCompilerFE).\n\n## Runtime updates\n\n### Improvements\n\n- Introduced `configurable` variables of union types via the TOML syntax. \n\n    ```ballerina\n    configurable map<anydata> myMap = ?;\n    configurable int|string id = ?;\n    ```\n\n**TOML:**\n\n```toml\nid = \"12345\"\n\n[myMap]\nname = \"John\"\nage = 10\n```\n\n### Bug fixes\n\nTo view bug fixes, see the [GitHub milestone for Swan Lake Beta2](https://github.com/ballerina-platform/ballerina-lang/issues?q=is%3Aissue+is%3Aclosed+milestone%3A%22Ballerina+Swan+Lake+-+Beta2%22+label%3AType%2FBug+label%3ATeam%2FjBallerina).\n\n## Standard library updates\n\n### New features\n\n#### `log` package\n\nAdded observability span context values to log messages when observability is enabled.\n\n#### `io` package\n\nIntroduced the `io:fprint` and `io:fprintln` APIs which allow users to print content to a given stream (standard error or standard out).\n\n```ballerina\nio:fprint(io:stderr, \"Unexpected error occurred\");\nio:fprintln(io:stderr, \"Unexpected error occurred\");\nio:fprint(io:stdout, \"Passed without an error\");\nio:fprintln(io:stdout, \"Passed without an error\");\n```\n\n#### `websocket` package\n\nIntroduced declarative auth support for the server-side. \n\n#### `websub` package\n\nAdded a utility method to retrieve HTTP headers from the `websub:ContentDistributionMessage`.\n\n### Improvements\n\n#### Database packages\n\nMade the return type of the stream to be inferred now as a second parameter to the query remote method.\n\n**Previous syntax**\n\n```ballerina\nstream<record {}, error> resultStream = \njdbcClient->query(`SELECT * FROM Customers`,Customer);\n\nstream<Customer, sql:Error> customerStream = \n        <stream<Customer, sql:Error>>resultStream;\n```\n\nAccording to the previous syntax, you can give the `Customer` record as the expected record type of the stream but you cannot get that stream directly. To do that, you have to cast the returned stream to the expected stream. Therefore, this has been improved to directly access data as an expected record type.\n\n**New syntax**\n\n```ballerina\nstream<Customer, error> customerStream = sqlClient->query(`SELECT * FROM Customers`);\n```\n\n#### `http` package\n\n- Updated to respond with a 202 Accepted response when the resource function returns nil. If the `http:Caller` is used in the resource, then, returning nil from the resource leads to a 500 Internal Server Error response.\n- Updated to log the error stack trace when an error is returned from the resource function and on connection failures.\n- Updated to log a warning when the same request is responded more than one time.\n\n#### `graphql` package\n\n- Made the GraphQL resource execution non-blocking.\n- Updated to send a `BAD_REQUEST` status code for the responses with document validation errors.\n\n#### `ftp` package\n\n- Changed the `get`, `append`, and `put` method APIs to support `stream` instead of using `io:ReadableByteChannel` for reading and writing files.\n- Updated to support the FTP protocol with password and private key based authentications.\n\n#### `websub` package\n\n- Updated to log the error stack trace when an error is returned from the remote function of the subscriber service.\n- Updated to return module-specific errors from the WebSub public APIs.\n- Updated to allow non-remote methods in the subscriber service.\n\n#### `websubhub` package\n\n- Updated to log the error stack trace when an error is returned from the remote function of the hub service.\n- Updated to return the module-specific errors from the WebSubHub public APIs.\n- Updated to allow non-remote methods in the Hub Service.\n- Updated to allow `http:Headers` as an optional parameter in specific remote methods (`onRegisterTopic`/`onDeregisterTopic`/`onUpdateMessage`/`onSubscription`/`onUnsubscription`).\n\n### Bug fixes\n\nTo view bug fixes, see the [GitHub milestone for Swan Lake Beta2](https://github.com/ballerina-platform/ballerina-standard-library/issues?q=is%3Aclosed+is%3Aissue+milestone%3A%22Swan+Lake+Beta2%22+label%3AType%2FBug).\n\n## Code to Cloud updates\n\n### Bug fixes\n\nTo view bug fixes, see the [GitHub milestone for Swan Lake Beta2](https://github.com/ballerina-platform/module-ballerina-c2c/issues?q=is%3Aissue+is%3Aclosed+label%3AType%2FBug+milestone%3A%22Ballerina+Swan+Lake+-+Beta2%22).\n\n## Developer tools updates\n\n### New features\n\n#### Debugger \n- Added expression evaluation support for client remote method call actions.\n- Added support to show the child element count inline (without having to expand the parent element) for Ballerina structured (i.e., Map, List, Table, XML, and JSON) variables.\n\n### Improvements\n\n#### Bindgen tool\n\nChanged the default bindings mapping approach to generate module-level mappings instead of having to use an explicit flag for this behavior. Generation of single directory mappings is facilitated using the `[(-o|--output) <output-path>]` option.\n\n#### Test framework\n\n- Added support for a map of tuples as the data set for data provider functions.\n- Added case-based filtering when running tests against data sets.\n\n### Bug fixes\n\nTo view bug fixes, see the GitHub milestone for Swan Lake Beta2 of the repositories below.\n\n- [Language Server](https://github.com/ballerina-platform/ballerina-lang/issues?q=is%3Aclosed+milestone%3A%22Ballerina+Swan+Lake+-+Beta2%22+label%3ATeam%2FLanguageServer)\n- [Debugger](https://github.com/ballerina-platform/ballerina-lang/issues?q=is%3Aissue+label%3AType%2FBug+label%3AArea%2FDebugger+is%3Aclosed+milestone%3A%22Ballerina+Swan+Lake+-+Beta2%22)\n- [Test framework](https://github.com/ballerina-platform/ballerina-lang/issues?q=is%3Aissue+label%3ATeam%2FTestFramework+milestone%3A%22Ballerina+Swan+Lake+-+Beta2%22+label%3AType%2FBug+)\n","id":"swan-lake-beta2","codeSnippets":"[[1235333381,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color: #fff\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">type</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #6F42C1\\\">RecursiveType</span><span style=\\\"color: #24292E\\\"> [</span><span style=\\\"color: #005CC5\\\">int</span><span style=\\\"color: #24292E\\\">, </span><span style=\\\"color: #E36209\\\">RecursiveType</span><span style=\\\"color: #24292E\\\">[]];</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">public</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">function</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #6F42C1\\\">main</span><span style=\\\"color: #24292E\\\">() {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    RecursiveType a </span><span style=\\\"color: #D73A49\\\">=</span><span style=\\\"color: #24292E\\\"> [</span><span style=\\\"color: #005CC5\\\">1</span><span style=\\\"color: #24292E\\\">];</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    RecursiveType b </span><span style=\\\"color: #D73A49\\\">=</span><span style=\\\"color: #24292E\\\"> [</span><span style=\\\"color: #005CC5\\\">1</span><span style=\\\"color: #24292E\\\">, []];</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    RecursiveType c </span><span style=\\\"color: #D73A49\\\">=</span><span style=\\\"color: #24292E\\\"> [</span><span style=\\\"color: #005CC5\\\">1</span><span style=\\\"color: #24292E\\\">, [a]];</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">}</span></span></code></pre>\"],[371378527,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color: #fff\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">public</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">function</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #6F42C1\\\">main</span><span style=\\\"color: #24292E\\\">() {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #005CC5\\\">string</span><span style=\\\"color: #24292E\\\"> str </span><span style=\\\"color: #D73A49\\\">=</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #032F62\\\">&quot;foo&quot;</span><span style=\\\"color: #24292E\\\">;</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #D73A49\\\">foreach </span><span style=\\\"color: #005CC5\\\">string</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\">Char s </span><span style=\\\"color: #D73A49\\\">in</span><span style=\\\"color: #24292E\\\"> str {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">        io</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #6F42C1\\\">println</span><span style=\\\"color: #24292E\\\">(</span><span style=\\\"color: #E36209\\\">s</span><span style=\\\"color: #24292E\\\">);</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    }</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #D73A49\\\">record</span><span style=\\\"color: #24292E\\\"> {</span><span style=\\\"color: #D73A49\\\">|</span><span style=\\\"color: #005CC5\\\">string</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\">Char value;</span><span style=\\\"color: #D73A49\\\">|</span><span style=\\\"color: #24292E\\\">}</span><span style=\\\"color: #D73A49\\\">?</span><span style=\\\"color: #24292E\\\"> next </span><span style=\\\"color: #D73A49\\\">=</span><span style=\\\"color: #24292E\\\"> str.</span><span style=\\\"color: #6F42C1\\\">iterator</span><span style=\\\"color: #24292E\\\">().</span><span style=\\\"color: #6F42C1\\\">next</span><span style=\\\"color: #24292E\\\">();</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    </span><span style=\\\"color: #D73A49\\\">if</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">!</span><span style=\\\"color: #24292E\\\">(</span><span style=\\\"color: #E36209\\\">next</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">is</span><span style=\\\"color: #24292E\\\"> ()) {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">        io</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #6F42C1\\\">println</span><span style=\\\"color: #24292E\\\">(next.value);</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">    }</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">}</span></span></code></pre>\"],[-520056257,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color: #fff\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">configurable</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">map&lt;</span><span style=\\\"color: #005CC5\\\">anydata</span><span style=\\\"color: #D73A49\\\">&gt;</span><span style=\\\"color: #24292E\\\"> myMap </span><span style=\\\"color: #D73A49\\\">=</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">?</span><span style=\\\"color: #24292E\\\">;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">configurable</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #005CC5\\\">int</span><span style=\\\"color: #D73A49\\\">|</span><span style=\\\"color: #005CC5\\\">string</span><span style=\\\"color: #24292E\\\"> id </span><span style=\\\"color: #D73A49\\\">=</span><span style=\\\"color: #24292E\\\"> </span><span style=\\\"color: #D73A49\\\">?</span><span style=\\\"color: #24292E\\\">;</span></span></code></pre>\"],[214469899,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color: #fff\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">id = </span><span style=\\\"color: #032F62\\\">&quot;12345&quot;</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">[</span><span style=\\\"color: #6F42C1\\\">myMap</span><span style=\\\"color: #24292E\\\">]</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">name = </span><span style=\\\"color: #032F62\\\">&quot;John&quot;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">age = </span><span style=\\\"color: #005CC5\\\">10</span></span></code></pre>\"],[-1431968250,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color: #fff\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">io</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #6F42C1\\\">fprint</span><span style=\\\"color: #24292E\\\">(</span><span style=\\\"color: #E36209\\\">io</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\">stderr, </span><span style=\\\"color: #032F62\\\">&quot;Unexpected error occurred&quot;</span><span style=\\\"color: #24292E\\\">);</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">io</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #6F42C1\\\">fprintln</span><span style=\\\"color: #24292E\\\">(</span><span style=\\\"color: #E36209\\\">io</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\">stderr, </span><span style=\\\"color: #032F62\\\">&quot;Unexpected error occurred&quot;</span><span style=\\\"color: #24292E\\\">);</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">io</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #6F42C1\\\">fprint</span><span style=\\\"color: #24292E\\\">(</span><span style=\\\"color: #E36209\\\">io</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\">stdout, </span><span style=\\\"color: #032F62\\\">&quot;Passed without an error&quot;</span><span style=\\\"color: #24292E\\\">);</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">io</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #6F42C1\\\">fprintln</span><span style=\\\"color: #24292E\\\">(</span><span style=\\\"color: #E36209\\\">io</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\">stdout, </span><span style=\\\"color: #032F62\\\">&quot;Passed without an error&quot;</span><span style=\\\"color: #24292E\\\">);</span></span></code></pre>\"],[1061506904,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color: #fff\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">stream&lt;record</span><span style=\\\"color: #24292E\\\"> {}, </span><span style=\\\"color: #D73A49\\\">error&gt;</span><span style=\\\"color: #24292E\\\"> resultStream </span><span style=\\\"color: #D73A49\\\">=</span><span style=\\\"color: #24292E\\\"> </span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">jdbcClient</span><span style=\\\"color: #D73A49\\\">-&gt;</span><span style=\\\"color: #6F42C1\\\">query</span><span style=\\\"color: #24292E\\\">(</span><span style=\\\"color: #032F62\\\">`SELECT * FROM Customers`</span><span style=\\\"color: #24292E\\\">,</span><span style=\\\"color: #E36209\\\">Customer</span><span style=\\\"color: #24292E\\\">);</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">stream&lt;</span><span style=\\\"color: #24292E\\\">Customer, sql</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\">Error</span><span style=\\\"color: #D73A49\\\">&gt;</span><span style=\\\"color: #24292E\\\"> customerStream </span><span style=\\\"color: #D73A49\\\">=</span><span style=\\\"color: #24292E\\\"> </span></span>\\n<span class=\\\"line\\\"><span style=\\\"color: #24292E\\\">        </span><span style=\\\"color: #D73A49\\\">&lt;stream&lt;</span><span style=\\\"color: #24292E\\\">Customer, sql</span><span style=\\\"color: #D73A49\\\">:</span><span style=\\\"color: #24292E\\\">Error</span><span style=\\\"color: #D73A49\\\">&gt;&gt;</span><span style=\\\"color: #24292E\\\">resultStream;</span></span></code></pre>\"],[556117144,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color: #fff\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color: #D73A49\\\">stream&lt;</span><span style=\\\"color: #24292E\\\">Customer, </span><span style=\\\"color: #D73A49\\\">error&gt;</span><span style=\\\"color: #24292E\\\"> customerStream </span><span style=\\\"color: #D73A49\\\">=</span><span style=\\\"color: #24292E\\\"> sqlClient</span><span style=\\\"color: #D73A49\\\">-&gt;</span><span style=\\\"color: #6F42C1\\\">query</span><span style=\\\"color: #24292E\\\">(</span><span style=\\\"color: #032F62\\\">`SELECT * FROM Customers`</span><span style=\\\"color: #24292E\\\">);</span></span></code></pre>\"]]"},"__N_SSG":true}