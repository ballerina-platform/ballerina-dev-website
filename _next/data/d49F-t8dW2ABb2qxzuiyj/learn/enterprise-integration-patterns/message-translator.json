{"pageProps":{"tagline":"Transform one message format to another","desc":"The Message Translator transforms messages from one structure to another.","category":"Messaging Systems","index":4,"helps":"Ballerina comes with a data mapper as part of its Visual Studio Code extension, allowing you to effortlessly map data from one record to another. Ballerina query expression syntax enables you to filter, order, and aggregate values to craft custom message values. Ballerina provides convenient tools like `JSON as Record` and `XML as Record`, which automatically generate Ballerina records based on sample JSON or XML input values.","tags":["Message Translator","Message Endpoint"],"link":"https://www.enterpriseintegrationpatterns.com/patterns/messaging/MessageTranslator.html","content":[{"headerCode":"<pre class=\"shiki github-light\" style=\"background-color: #fff\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #D73A49\">import</span><span style=\"color: #24292E\"> ballerina/http;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #D73A49\">public</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">type</span><span style=\"color: #24292E\"> </span><span style=\"color: #6F42C1\">SalesData</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">record</span><span style=\"color: #24292E\"> {</span><span style=\"color: #D73A49\">|</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    Customer customer;</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    Oppotunity[] opportunities;</span></span>\n<span class=\"line\"><span style=\"color: #D73A49\">|</span><span style=\"color: #24292E\">};</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #D73A49\">public</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">type</span><span style=\"color: #24292E\"> </span><span style=\"color: #6F42C1\">Customer</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">record</span><span style=\"color: #24292E\"> {</span><span style=\"color: #D73A49\">|</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    </span><span style=\"color: #005CC5\">string</span><span style=\"color: #24292E\"> id;</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    </span><span style=\"color: #005CC5\">string</span><span style=\"color: #24292E\"> name;</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    </span><span style=\"color: #005CC5\">string</span><span style=\"color: #24292E\"> email;</span></span>\n<span class=\"line\"><span style=\"color: #D73A49\">|</span><span style=\"color: #24292E\">};</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #D73A49\">public</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">type</span><span style=\"color: #24292E\"> </span><span style=\"color: #6F42C1\">Oppotunity</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">record</span><span style=\"color: #24292E\"> {</span><span style=\"color: #D73A49\">|</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    </span><span style=\"color: #005CC5\">string</span><span style=\"color: #24292E\"> id;</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    </span><span style=\"color: #005CC5\">decimal</span><span style=\"color: #24292E\"> amount;</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    </span><span style=\"color: #005CC5\">string</span><span style=\"color: #24292E\"> closeDate;</span></span>\n<span class=\"line\"><span style=\"color: #D73A49\">|</span><span style=\"color: #24292E\">};</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #D73A49\">public</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">type</span><span style=\"color: #24292E\"> </span><span style=\"color: #6F42C1\">QuickBooksInvoice</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">record</span><span style=\"color: #24292E\"> {</span><span style=\"color: #D73A49\">|</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    </span><span style=\"color: #005CC5\">string</span><span style=\"color: #24292E\"> customerId;</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    Invoice[] invoices;</span></span>\n<span class=\"line\"><span style=\"color: #D73A49\">|</span><span style=\"color: #24292E\">};</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #D73A49\">public</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">type</span><span style=\"color: #24292E\"> </span><span style=\"color: #6F42C1\">Invoice</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">record</span><span style=\"color: #24292E\"> {</span><span style=\"color: #D73A49\">|</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    </span><span style=\"color: #005CC5\">string</span><span style=\"color: #24292E\"> id;</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    </span><span style=\"color: #005CC5\">decimal</span><span style=\"color: #24292E\"> amount;</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    </span><span style=\"color: #005CC5\">string</span><span style=\"color: #24292E\"> invoiceDate;</span></span>\n<span class=\"line\"><span style=\"color: #D73A49\">|</span><span style=\"color: #24292E\">};</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #D73A49\">final</span><span style=\"color: #24292E\"> http</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">Client quickBooks </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">new</span><span style=\"color: #24292E\"> (</span><span style=\"color: #032F62\">&quot;http://api.quickbooks.com.balmock.io&quot;</span><span style=\"color: #24292E\">);</span></span>\n<span class=\"line\"></span></code></pre>","mainCode":"<pre class=\"shiki github-light\" style=\"background-color: #fff\" tabindex=\"0\"><code><span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #D73A49\">service</span><span style=\"color: #24292E\"> </span><span style=\"color: #6F42C1\">/api/v1/analytics</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">on</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">new</span><span style=\"color: #24292E\"> http:Listener(</span><span style=\"color: #005CC5\">8080</span><span style=\"color: #24292E\">) {</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #24292E\">    </span><span style=\"color: #D73A49\">resource</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">function</span><span style=\"color: #24292E\"> </span><span style=\"color: #6F42C1\">post</span><span style=\"color: #24292E\"> </span><span style=\"color: #6F42C1\">sales</span><span style=\"color: #24292E\">(</span><span style=\"color: #E36209\">SalesData</span><span style=\"color: #24292E\"> </span><span style=\"color: #E36209\">salesData</span><span style=\"color: #24292E\">) </span><span style=\"color: #D73A49\">returns</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">error?</span><span style=\"color: #24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        QuickBooksInvoice quickBooksInvoice </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span><span style=\"color: #6F42C1\">translate</span><span style=\"color: #24292E\">(</span><span style=\"color: #E36209\">salesData</span><span style=\"color: #24292E\">);</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        _ </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> quickBooks</span><span style=\"color: #D73A49\">-&gt;/</span><span style=\"color: #24292E\">v3</span><span style=\"color: #D73A49\">/</span><span style=\"color: #24292E\">company</span><span style=\"color: #D73A49\">/</span><span style=\"color: #24292E\">REALM012</span><span style=\"color: #D73A49\">/</span><span style=\"color: #24292E\">invoice.</span><span style=\"color: #6F42C1\">post</span><span style=\"color: #24292E\">(</span><span style=\"color: #E36209\">quickBooksInvoice</span><span style=\"color: #24292E\">, </span><span style=\"color: #E36209\">targetType</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> http</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">Response);</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    }</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #D73A49\">function</span><span style=\"color: #24292E\"> </span><span style=\"color: #6F42C1\">translate</span><span style=\"color: #24292E\">(</span><span style=\"color: #E36209\">SalesData</span><span style=\"color: #24292E\"> </span><span style=\"color: #E36209\">salesData</span><span style=\"color: #24292E\">) </span><span style=\"color: #D73A49\">returns</span><span style=\"color: #24292E\"> QuickBooksInvoice {</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    </span><span style=\"color: #D73A49\">return</span><span style=\"color: #24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        customerId</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> salesData.customer.id,</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        invoices</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> from </span><span style=\"color: #005CC5\">var</span><span style=\"color: #24292E\"> oppotunity </span><span style=\"color: #D73A49\">in</span><span style=\"color: #24292E\"> salesData.opportunities</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">                  </span><span style=\"color: #D73A49\">select</span><span style=\"color: #24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">                      id</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> oppotunity.id,</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">                      amount</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> oppotunity.amount,</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">                      invoiceDate</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> oppotunity.closeDate</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">                  }</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    };</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">}</span></span>\n<span class=\"line\"></span></code></pre>","raw":"import ballerina/http;\n\npublic type SalesData record {|\n    Customer customer;\n    Oppotunity[] opportunities;\n|};\n\npublic type Customer record {|\n    string id;\n    string name;\n    string email;\n|};\n\npublic type Oppotunity record {|\n    string id;\n    decimal amount;\n    string closeDate;\n|};\n\npublic type QuickBooksInvoice record {|\n    string customerId;\n    Invoice[] invoices;\n|};\n\npublic type Invoice record {|\n    string id;\n    decimal amount;\n    string invoiceDate;\n|};\n\nfinal http:Client quickBooks = check new (\"http://api.quickbooks.com.balmock.io\");\n\nservice /api/v1/analytics on new http:Listener(8080) {\n\n    resource function post sales(SalesData salesData) returns error? {\n        QuickBooksInvoice quickBooksInvoice = translate(salesData);\n        _ = check quickBooks->/v3/company/REALM012/invoice.post(quickBooksInvoice, targetType = http:Response);\n    }\n}\n\nfunction translate(SalesData salesData) returns QuickBooksInvoice {\n    return {\n        customerId: salesData.customer.id,\n        invoices: from var oppotunity in salesData.opportunities\n                  select {\n                      id: oppotunity.id,\n                      amount: oppotunity.amount,\n                      invoiceDate: oppotunity.closeDate\n                  }\n    };\n}\n","name":"message-translator.bal"}],"name":" Message Translator"},"__N_SSG":true}