{"pageProps":{"samples":{"code":"<pre class=\"shiki github-light\" style=\"background-color: #fff\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #D73A49\">service</span><span style=\"color: #24292E\"> </span><span style=\"color: #6F42C1\">/finance</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">on</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">new</span><span style=\"color: #24292E\"> http:Listener(</span><span style=\"color: #005CC5\">8080</span><span style=\"color: #24292E\">) {</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #24292E\">  </span><span style=\"color: #D73A49\">resource</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">function</span><span style=\"color: #24292E\"> </span><span style=\"color: #6F42C1\">post</span><span style=\"color: #24292E\"> </span><span style=\"color: #6F42C1\">customers</span><span style=\"color: #24292E\">/[</span><span style=\"color: #005CC5\">int</span><span style=\"color: #24292E\"> </span><span style=\"color: #E36209\">id</span><span style=\"color: #24292E\">]/accounts(</span><span style=\"color: #E36209\">BankAccountReq</span><span style=\"color: #24292E\"> </span><span style=\"color: #E36209\">req</span><span style=\"color: #24292E\">) </span><span style=\"color: #D73A49\">returns</span><span style=\"color: #24292E\"> BankAccount</span><span style=\"color: #D73A49\">|error</span><span style=\"color: #24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">      http</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">Client iban </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">new</span><span style=\"color: #24292E\">(</span><span style=\"color: #032F62\">&quot;http://api.iban.com.balmock.io&quot;</span><span style=\"color: #24292E\">);</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">      IbanRequest ibanReq </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> { country_iso</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> req.country ?</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> </span><span style=\"color: #032F62\">&quot;US&quot;</span><span style=\"color: #24292E\">, nid</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> req.accountNumber };</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">      IbanResponse ibanRes </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> iban</span><span style=\"color: #D73A49\">-&gt;/</span><span style=\"color: #24292E\">clients</span><span style=\"color: #D73A49\">/</span><span style=\"color: #24292E\">api</span><span style=\"color: #D73A49\">/</span><span style=\"color: #24292E\">banksuite</span><span style=\"color: #D73A49\">/</span><span style=\"color: #24292E\">nid.</span><span style=\"color: #6F42C1\">post</span><span style=\"color: #24292E\">(</span><span style=\"color: #E36209\">ibanReq</span><span style=\"color: #24292E\">);</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">      </span><span style=\"color: #005CC5\">string</span><span style=\"color: #24292E\"> bankCode </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> ibanRes.bank_code;</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">      http</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">Client intuit </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">new</span><span style=\"color: #24292E\">(</span><span style=\"color: #032F62\">&quot;http://api.intuit.com.balmock.io&quot;</span><span style=\"color: #24292E\">);</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">      </span><span style=\"color: #D73A49\">return</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> intuit</span><span style=\"color: #D73A49\">-&gt;/</span><span style=\"color: #24292E\">quickbooks</span><span style=\"color: #D73A49\">/</span><span style=\"color: #24292E\">v4</span><span style=\"color: #D73A49\">/</span><span style=\"color: #24292E\">customers</span><span style=\"color: #D73A49\">/</span><span style=\"color: #24292E\">[id]</span><span style=\"color: #D73A49\">/</span><span style=\"color: #24292E\">bank</span><span style=\"color: #D73A49\">-</span><span style=\"color: #24292E\">accounts.</span><span style=\"color: #6F42C1\">post</span><span style=\"color: #24292E\">({ </span><span style=\"color: #D73A49\">...</span><span style=\"color: #24292E\">req, bankCode });</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">  }</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">}</span></span></code></pre>"},"content":"\nservice /finance on new http:Listener(8080) {\n\n  resource function post customers/[int id]/accounts(BankAccountReq req) returns BankAccount|error {\n      http:Client iban = check new(\"http://api.iban.com.balmock.io\");\n      IbanRequest ibanReq = { country_iso: req.country ?: \"US\", nid: req.accountNumber };\n      IbanResponse ibanRes = check iban->/clients/api/banksuite/nid.post(ibanReq);\n      string bankCode = ibanRes.bank_code;\n      http:Client intuit = check new(\"http://api.intuit.com.balmock.io\");\n      return check intuit->/quickbooks/v4/customers/[id]/bank-accounts.post({ ...req, bankCode });\n  }\n}\n"},"__N_SSG":true}