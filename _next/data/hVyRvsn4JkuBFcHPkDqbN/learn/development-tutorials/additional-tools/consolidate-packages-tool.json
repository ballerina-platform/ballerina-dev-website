{"pageProps":{"frontmatter":{"layout":"ballerina-consolidate-packages-support-left-nav-pages-swanlake","title":"Consolidate-packages tool","description":"The consolidate-packages tool provides CLI commands and a build tool to consolidate services into a single executable.","keywords":"ballerina, programming language, consolidate packages, consolidate-packages, monolith","permalink":"/learn/consolidate-packages-tool/","active":"consolidate-packages-tool","intro":"The consolidate-packages tool allows you to create a single executable by consolidating multiple Ballerina services. These services can either be pulled from Ballerina Central or used directly from your local environment without needing to publish them to a remote repository."},"content":"\n## Consolidate packages from the Ballerina Central\n\n## Define the consolidator package\nCreate a new package and add the `consolidate-packages` tool entry, along with the required services for consolidation, in the `Ballerina.toml` file, as shown in the example below. Services can be added or removed as needed by updating the values provided for the `options.services` array.\n\n```toml\n[package]\norg = \"myorg\"\nname = \"myapp\"\nversion = \"0.1.0\"\n\n[[tool.consolidate-packages]]\nid = \"consolidateSvc\"\noptions.services = [\"myorg/order\", \"myorg/checkout\"]\n```\n\n## Consolidate locally published packages\n\nIn some projects, services are developed together but do not require publishing to the central repository, as they are consumed within the same project. For these cases, the tool enables the consolidation of multiple packages into a single executable without requiring publication to any remote repository. The packages can be published to the local repository and consolidated using the steps below:\n\n1. Publish packages required to consolidate to the local repository.\n\n```\n$ bal push --repository local\n```\n\n2. Include the packages as local dependencies in the `Ballerina.toml` of the consolidator package.\n\n```toml\n[[dependency]]\norg = \"myorg\"\nname = \"menu\"\nversion = \"1.1.0\"\nrepository = \"local\"\n```\n\n## Using the CLI tool\n\nThe CLI tool helps automate the consolidation process, which is typically useful in CI/CD workflows.\n\n### Installation\n\nExecute the command below to pull the tool.\n\n```\n$ bal tool pull consolidate-packages\n```\n\n### Creating a new consolidator package\n\n```\n$ bal consolidate-packages new --package-path <path> <comma-separated-list-of-services> \n```\n\nFor example,\n\n```\n$ bal consolidate-packages new --package-path hotel-app myorg/order,myorg/checkout\n```\n\n#### Create a consolidated package using locally published packages\n\n```\n$ bal consolidate-packages new --package-path hotel-app myorg/menu:0.1.0,myorg/ad:0.1.0 --repository=local\n```\n>**Note:** The version is mandatory when specifying a package from the local repository\n\n### Adding new services to an existing package\n\nExecute the following command from the package root directory.\n\n```\n$ bal consolidate-packages add <comma-separated-list-of-services>\n```\n\nFor example,\n\n```\n$ cd hotel-app\n$ bal consolidate-packages add myorg/customer,myorg/inventory\n```\n\n#### Add locally published packages\n\n```\n$ cd hotel-app\n$ bal consolidate-packages add myorg/customer:0.1.0,myorg/inventory:0.1.0 --repository=local\n```\n\n### Removing services from an existing package\nExecute the following command from the package root directory.\n\n```\n$ bal consolidate-packages remove <comma-separated-list-of-services>\n```\n\nFor example,\n\n```\n$ bal consolidate-packages remove myorg/menu,myorg/ad\n```\n\nRun `bal consolidate-packages --help` for more information about the commands. \n","id":"consolidate-packages-tool","sub":"additional-tools","third":"","slug":"additional-tools/consolidate-packages-tool","codes":"[[6618945,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color:#fff;color:#24292e\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">[</span><span style=\\\"color:#6F42C1\\\">package</span><span style=\\\"color:#24292E\\\">]</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">org = </span><span style=\\\"color:#032F62\\\">\\\"myorg\\\"</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">name = </span><span style=\\\"color:#032F62\\\">\\\"myapp\\\"</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">version = </span><span style=\\\"color:#032F62\\\">\\\"0.1.0\\\"</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">[[</span><span style=\\\"color:#6F42C1\\\">tool</span><span style=\\\"color:#24292E\\\">.</span><span style=\\\"color:#6F42C1\\\">consolidate-packages</span><span style=\\\"color:#24292E\\\">]]</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">id = </span><span style=\\\"color:#032F62\\\">\\\"consolidateSvc\\\"</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">options.services = [</span><span style=\\\"color:#032F62\\\">\\\"myorg/order\\\"</span><span style=\\\"color:#24292E\\\">, </span><span style=\\\"color:#032F62\\\">\\\"myorg/checkout\\\"</span><span style=\\\"color:#24292E\\\">]</span></span></code></pre>\"],[-416352684,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color:#fff;color:#24292e\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">[[</span><span style=\\\"color:#6F42C1\\\">dependency</span><span style=\\\"color:#24292E\\\">]]</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">org = </span><span style=\\\"color:#032F62\\\">\\\"myorg\\\"</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">name = </span><span style=\\\"color:#032F62\\\">\\\"menu\\\"</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">version = </span><span style=\\\"color:#032F62\\\">\\\"1.1.0\\\"</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">repository = </span><span style=\\\"color:#032F62\\\">\\\"local\\\"</span></span></code></pre>\"]]"},"__N_SSG":true}