{"pageProps":{"samples":{"client-auth":{"frontmatter":{"title":"Securely interact with internal/external services","description":"Ballerina back-ends can securely call services with the necessary security features such as client-side OAuth2, mutual TLS, and JWT-encapsulated user data.","url":"https://github.com/ballerina-guides/bff-samples/tree/main/securely_consume_services_from_backends","image":""},"code":"<pre class=\"shiki github-light\" style=\"background-color:#fff;color:#24292e\" tabindex=\"0\"><code><button type=\"button\" title=\"Copy\" aria-label=\"Copy\" data=\"service /logistics on new http:Listener(9090) {\n    resource function post cargos(Cargo cargo) \n            returns http:Ok|http:InternalServerError {\n        cargoTable.add(cargo);\n        http:Client serviceClient = getServiceClient(cargo.cargoType);\n        http:Response|error res = serviceClient->post(&#x22;/shipments&#x22;, cargo);\n        if res is http:Response &#x26;&#x26; res.statusCode == 202 {\n            return <http:Ok>{body: &#x22;Successfully submitted the shipment&#x22;};\n        }\n        return <http:InternalServerError>{\n            body: {message: &#x22;Error occurred while submitting the shipment&#x22;}\n        };\n    };\n\n    resource function get cargos() returns Cargo[] {\n        return cargoTable.toArray();\n    };\n}\" class=\"rehype-pretty-copy\" onclick=\"navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);this.setAttribute(&#x27;title&#x27;, &#x27;Copied&#x27;);this.setAttribute(&#x27;aria-label&#x27;, &#x27;Copied&#x27;);window.setTimeout(() => {this.classList.remove(&#x27;rehype-pretty-copied&#x27;);this.setAttribute(&#x27;title&#x27;, &#x27;Copy&#x27;);this.setAttribute(&#x27;aria-label&#x27;, &#x27;Copy&#x27;);}, 3000);\"><span class=\"ready\"></span><span class=\"success\"></span></button><span class=\"line\"><span style=\"color:#D73A49\">service</span><span style=\"color:#6F42C1\"> /logistics</span><span style=\"color:#D73A49\"> on</span><span style=\"color:#D73A49\"> new</span><span style=\"color:#24292E\"> http:Listener(</span><span style=\"color:#005CC5\">9090</span><span style=\"color:#24292E\">) {</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">    resource</span><span style=\"color:#D73A49\"> function</span><span style=\"color:#6F42C1\"> post</span><span style=\"color:#6F42C1\"> cargos</span><span style=\"color:#24292E\">(</span><span style=\"color:#E36209\">Cargo</span><span style=\"color:#E36209\"> cargo</span><span style=\"color:#24292E\">) </span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">            returns</span><span style=\"color:#24292E\"> http</span><span style=\"color:#D73A49\">:</span><span style=\"color:#24292E\">Ok</span><span style=\"color:#D73A49\">|</span><span style=\"color:#24292E\">http:InternalServerError {</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">        cargoTable.</span><span style=\"color:#6F42C1\">add</span><span style=\"color:#24292E\">(</span><span style=\"color:#E36209\">cargo</span><span style=\"color:#24292E\">);</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">        http</span><span style=\"color:#D73A49\">:</span><span style=\"color:#24292E\">Client serviceClient </span><span style=\"color:#D73A49\">=</span><span style=\"color:#6F42C1\"> getServiceClient</span><span style=\"color:#24292E\">(cargo.cargoType);</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">        http</span><span style=\"color:#D73A49\">:</span><span style=\"color:#24292E\">Response</span><span style=\"color:#D73A49\">|error</span><span style=\"color:#24292E\"> res </span><span style=\"color:#D73A49\">=</span><span style=\"color:#24292E\"> serviceClient</span><span style=\"color:#D73A49\">-></span><span style=\"color:#6F42C1\">post</span><span style=\"color:#24292E\">(</span><span style=\"color:#032F62\">\"/shipments\"</span><span style=\"color:#24292E\">, </span><span style=\"color:#E36209\">cargo</span><span style=\"color:#24292E\">);</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">        if</span><span style=\"color:#24292E\"> res </span><span style=\"color:#D73A49\">is</span><span style=\"color:#24292E\"> http</span><span style=\"color:#D73A49\">:</span><span style=\"color:#24292E\">Response &#x26;&#x26; res.statusCode </span><span style=\"color:#D73A49\">==</span><span style=\"color:#005CC5\"> 202</span><span style=\"color:#24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">            return</span><span style=\"color:#D73A49\"> &#x3C;</span><span style=\"color:#24292E\">http</span><span style=\"color:#D73A49\">:</span><span style=\"color:#24292E\">Ok</span><span style=\"color:#D73A49\">></span><span style=\"color:#24292E\">{body</span><span style=\"color:#D73A49\">:</span><span style=\"color:#032F62\"> \"Successfully submitted the shipment\"</span><span style=\"color:#24292E\">};</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">        }</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">        return</span><span style=\"color:#D73A49\"> &#x3C;</span><span style=\"color:#24292E\">http</span><span style=\"color:#D73A49\">:</span><span style=\"color:#24292E\">InternalServerError</span><span style=\"color:#D73A49\">></span><span style=\"color:#24292E\">{</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">            body</span><span style=\"color:#D73A49\">:</span><span style=\"color:#24292E\"> {message: </span><span style=\"color:#032F62\">\"Error occurred while submitting the shipment\"</span><span style=\"color:#24292E\">}</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">        };</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">    };</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D73A49\">    resource</span><span style=\"color:#D73A49\"> function</span><span style=\"color:#6F42C1\"> get</span><span style=\"color:#6F42C1\"> cargos</span><span style=\"color:#24292E\">() </span><span style=\"color:#D73A49\">returns</span><span style=\"color:#24292E\"> Cargo[] {</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">        return</span><span style=\"color:#24292E\"> cargoTable.</span><span style=\"color:#6F42C1\">toArray</span><span style=\"color:#24292E\">();</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">    };</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">}</span></span><style>:root {--copy-icon: url(\"data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 448 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg' style='float: right;'%3E%3Ctitle%3ECopy%3C/title%3E%3Cpath d='M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z'%3E%3C/path%3E%3C/svg%3E\");--success-icon: url(\"data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 512 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg'%3E%3Ctitle%3ECopied%3C/title%3E%3Cpath d='M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z'%3E%3C/path%3E%3C/svg%3E\");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {background-color: transparent;border: none;right: 1px;padding: 0;width: 16px;height: 16px;display: flex;margin-top: -20px;margin-right: 8px;position: absolute;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}.Code_codeSnippet__ayQ3y button.rehype-pretty-copy {margin-top: -10px;}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></pre>"},"constraint-validation":{"frontmatter":{"title":"Validate payload constraints in web back-ends","description":"Ballerina's inherent JSON capabilities enable the direct mapping of JSON data into Ballerina records, incorporating functionalities such as constraint validations.","url":"https://github.com/ballerina-guides/bff-samples/tree/main/validate_payloads_constraints_in_web_backends","image":""},"code":"<pre class=\"shiki github-light\" style=\"background-color:#fff;color:#24292e\" tabindex=\"0\"><code><button type=\"button\" title=\"Copy\" aria-label=\"Copy\" data=\"type Order record {|\n    readonly string id;\n    @constraint:String {\n        pattern: {\n            value: re &#x60;C-[0-9]{3}&#x60;,\n            message: &#x22;Customer id should be in the format C-XXX&#x22;\n        }\n    }\n    string customerId;\n    string? shipId;\n    string date;\n    OrderStatus status;\n    @constraint:Int {\n        minValue: {value: 1, message: &#x22;Quantity should be greater than one&#x22;},\n        maxValue: {value: 10, message: &#x22;Quantity should not exceed 10&#x22;}\n    }\n    int quantity;\n    string item;\n|};\n\nservice /sales on new http:Listener(9090) {\n    resource function post orders(Order orderRequest)\n            returns Order|http:BadRequest {\n        if orders.hasKey(orderRequest.id) {\n            return <http:BadRequest>{\n                body: string &#x60;Order id already exists.&#x60;\n            };\n        }\n        orders.add(orderRequest);\n        return orderRequest;\n    }\n}\" class=\"rehype-pretty-copy\" onclick=\"navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);this.setAttribute(&#x27;title&#x27;, &#x27;Copied&#x27;);this.setAttribute(&#x27;aria-label&#x27;, &#x27;Copied&#x27;);window.setTimeout(() => {this.classList.remove(&#x27;rehype-pretty-copied&#x27;);this.setAttribute(&#x27;title&#x27;, &#x27;Copy&#x27;);this.setAttribute(&#x27;aria-label&#x27;, &#x27;Copy&#x27;);}, 3000);\"><span class=\"ready\"></span><span class=\"success\"></span></button><span class=\"line\"><span style=\"color:#D73A49\">type</span><span style=\"color:#6F42C1\"> Order</span><span style=\"color:#D73A49\"> record</span><span style=\"color:#24292E\"> {</span><span style=\"color:#D73A49\">|</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">    readonly</span><span style=\"color:#005CC5\"> string</span><span style=\"color:#24292E\"> id;</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">    @</span><span style=\"color:#005CC5\">constraint</span><span style=\"color:#24292E\">:</span><span style=\"color:#005CC5\">String</span><span style=\"color:#24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">        pattern</span><span style=\"color:#D73A49\">:</span><span style=\"color:#24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">            value</span><span style=\"color:#D73A49\">:</span><span style=\"color:#005CC5\"> re</span><span style=\"color:#24292E\"> `C-</span><span style=\"color:#005CC5\">[0-9]</span><span style=\"color:#D73A49\">{3}</span><span style=\"color:#24292E\">`,</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">            message</span><span style=\"color:#D73A49\">:</span><span style=\"color:#032F62\"> \"Customer id should be in the format C-XXX\"</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">        }</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">    }</span></span>\n<span class=\"line\"><span style=\"color:#005CC5\">    string</span><span style=\"color:#24292E\"> customerId;</span></span>\n<span class=\"line\"><span style=\"color:#005CC5\">    string</span><span style=\"color:#24292E\">? shipId;</span></span>\n<span class=\"line\"><span style=\"color:#005CC5\">    string</span><span style=\"color:#24292E\"> date;</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">    OrderStatus status;</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">    @</span><span style=\"color:#005CC5\">constraint</span><span style=\"color:#24292E\">:</span><span style=\"color:#005CC5\">Int</span><span style=\"color:#24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">        minValue</span><span style=\"color:#D73A49\">:</span><span style=\"color:#24292E\"> {value: </span><span style=\"color:#005CC5\">1</span><span style=\"color:#24292E\">, message</span><span style=\"color:#D73A49\">:</span><span style=\"color:#032F62\"> \"Quantity should be greater than one\"</span><span style=\"color:#24292E\">},</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">        maxValue</span><span style=\"color:#D73A49\">:</span><span style=\"color:#24292E\"> {value: </span><span style=\"color:#005CC5\">10</span><span style=\"color:#24292E\">, message</span><span style=\"color:#D73A49\">:</span><span style=\"color:#032F62\"> \"Quantity should not exceed 10\"</span><span style=\"color:#24292E\">}</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">    }</span></span>\n<span class=\"line\"><span style=\"color:#005CC5\">    int</span><span style=\"color:#24292E\"> quantity;</span></span>\n<span class=\"line\"><span style=\"color:#005CC5\">    string</span><span style=\"color:#24292E\"> item;</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">|</span><span style=\"color:#24292E\">};</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D73A49\">service</span><span style=\"color:#6F42C1\"> /sales</span><span style=\"color:#D73A49\"> on</span><span style=\"color:#D73A49\"> new</span><span style=\"color:#24292E\"> http:Listener(</span><span style=\"color:#005CC5\">9090</span><span style=\"color:#24292E\">) {</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">    resource</span><span style=\"color:#D73A49\"> function</span><span style=\"color:#6F42C1\"> post</span><span style=\"color:#6F42C1\"> orders</span><span style=\"color:#24292E\">(</span><span style=\"color:#E36209\">Order</span><span style=\"color:#E36209\"> orderRequest</span><span style=\"color:#24292E\">)</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">            returns</span><span style=\"color:#24292E\"> Order</span><span style=\"color:#D73A49\">|</span><span style=\"color:#24292E\">http</span><span style=\"color:#D73A49\">:</span><span style=\"color:#24292E\">BadRequest {</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">        if</span><span style=\"color:#24292E\"> orders.</span><span style=\"color:#6F42C1\">hasKey</span><span style=\"color:#24292E\">(orderRequest.id) {</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">            return</span><span style=\"color:#D73A49\"> &#x3C;</span><span style=\"color:#24292E\">http</span><span style=\"color:#D73A49\">:</span><span style=\"color:#24292E\">BadRequest</span><span style=\"color:#D73A49\">></span><span style=\"color:#24292E\">{</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">                body</span><span style=\"color:#D73A49\">:</span><span style=\"color:#24292E\"> string </span><span style=\"color:#032F62\">`Order id already exists.`</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">            };</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">        }</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">        orders.</span><span style=\"color:#6F42C1\">add</span><span style=\"color:#24292E\">(</span><span style=\"color:#E36209\">orderRequest</span><span style=\"color:#24292E\">);</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">        return</span><span style=\"color:#24292E\"> orderRequest;</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">    }</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">}</span></span><style>:root {--copy-icon: url(\"data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 448 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg' style='float: right;'%3E%3Ctitle%3ECopy%3C/title%3E%3Cpath d='M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z'%3E%3C/path%3E%3C/svg%3E\");--success-icon: url(\"data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 512 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg'%3E%3Ctitle%3ECopied%3C/title%3E%3Cpath d='M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z'%3E%3C/path%3E%3C/svg%3E\");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {background-color: transparent;border: none;right: 1px;padding: 0;width: 16px;height: 16px;display: flex;margin-top: -20px;margin-right: 8px;position: absolute;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}.Code_codeSnippet__ayQ3y button.rehype-pretty-copy {margin-top: -10px;}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></pre>"},"deployment":{"frontmatter":{"title":"Develop flexible & scalable back-ends","description":"Ballerina-based back-ends offer the flexibility to manage varying loads. Components can be deployed and scaled independently, providing flexibility and scalability, particularly on platforms like Kubernetes.<br><br>In addition, Ballerina back-ends can be instantly taken to production by deploying in Choreo, a comprehensive app development platform with pre-built CI/CD pipelines, multi-environment support, and robust monitoring for Ballerina apps.","url":"https://wso2.com/choreo/internal-developer-platform","image":"images/choreo-ipaas-image-v2.png"},"code":""},"graphql":{"frontmatter":{"title":"Efficiently expose complex data with GraphQL","description":"With Ballerina's built-in GraphQL functionality, developers can simply expose Ballerina records via GraphQL services, facilitating querying and selectively fetching complex data structures.","url":"https://github.com/ballerina-guides/bff-samples/tree/main/expose_complex_data_with_graphql","image":""},"code":"<pre class=\"shiki github-light\" style=\"background-color:#fff;color:#24292e\" tabindex=\"0\"><code><button type=\"button\" title=\"Copy\" aria-label=\"Copy\" data=\"type Order record {|\n    readonly string id;\n    string customerId;\n    string? shipId;\n    Address? shippingAddress;\n    string date;\n    OrderStatus status;\n    int quantity;\n    string item;\n|};\n\ntype Address record {|\n    string number;\n    string street;\n    string city;\n    string state;\n|};\n\nservice /sales on new graphql:Listener(9090) {\n    resource function get orders(string? customerId) returns Order[] {\n        if customerId is () {\n            return orders.toArray();\n        }\n        return from Order entry in orders\n            where entry.customerId == customerId\n            select entry;\n    }\n}\" class=\"rehype-pretty-copy\" onclick=\"navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);this.setAttribute(&#x27;title&#x27;, &#x27;Copied&#x27;);this.setAttribute(&#x27;aria-label&#x27;, &#x27;Copied&#x27;);window.setTimeout(() => {this.classList.remove(&#x27;rehype-pretty-copied&#x27;);this.setAttribute(&#x27;title&#x27;, &#x27;Copy&#x27;);this.setAttribute(&#x27;aria-label&#x27;, &#x27;Copy&#x27;);}, 3000);\"><span class=\"ready\"></span><span class=\"success\"></span></button><span class=\"line\"><span style=\"color:#D73A49\">type</span><span style=\"color:#6F42C1\"> Order</span><span style=\"color:#D73A49\"> record</span><span style=\"color:#24292E\"> {</span><span style=\"color:#D73A49\">|</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">    readonly</span><span style=\"color:#005CC5\"> string</span><span style=\"color:#24292E\"> id;</span></span>\n<span class=\"line\"><span style=\"color:#005CC5\">    string</span><span style=\"color:#24292E\"> customerId;</span></span>\n<span class=\"line\"><span style=\"color:#005CC5\">    string</span><span style=\"color:#24292E\">? shipId;</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">    Address</span><span style=\"color:#D73A49\">?</span><span style=\"color:#24292E\"> shippingAddress;</span></span>\n<span class=\"line\"><span style=\"color:#005CC5\">    string</span><span style=\"color:#24292E\"> date;</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">    OrderStatus status;</span></span>\n<span class=\"line\"><span style=\"color:#005CC5\">    int</span><span style=\"color:#24292E\"> quantity;</span></span>\n<span class=\"line\"><span style=\"color:#005CC5\">    string</span><span style=\"color:#24292E\"> item;</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">|</span><span style=\"color:#24292E\">};</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D73A49\">type</span><span style=\"color:#6F42C1\"> Address</span><span style=\"color:#D73A49\"> record</span><span style=\"color:#24292E\"> {</span><span style=\"color:#D73A49\">|</span></span>\n<span class=\"line\"><span style=\"color:#005CC5\">    string</span><span style=\"color:#24292E\"> number;</span></span>\n<span class=\"line\"><span style=\"color:#005CC5\">    string</span><span style=\"color:#24292E\"> street;</span></span>\n<span class=\"line\"><span style=\"color:#005CC5\">    string</span><span style=\"color:#24292E\"> city;</span></span>\n<span class=\"line\"><span style=\"color:#005CC5\">    string</span><span style=\"color:#24292E\"> state;</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">|</span><span style=\"color:#24292E\">};</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D73A49\">service</span><span style=\"color:#6F42C1\"> /sales</span><span style=\"color:#D73A49\"> on</span><span style=\"color:#D73A49\"> new</span><span style=\"color:#24292E\"> graphql:Listener(</span><span style=\"color:#005CC5\">9090</span><span style=\"color:#24292E\">) {</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">    resource</span><span style=\"color:#D73A49\"> function</span><span style=\"color:#6F42C1\"> get</span><span style=\"color:#6F42C1\"> orders</span><span style=\"color:#24292E\">(</span><span style=\"color:#005CC5\">string</span><span style=\"color:#24292E\">? </span><span style=\"color:#E36209\">customerId</span><span style=\"color:#24292E\">) </span><span style=\"color:#D73A49\">returns</span><span style=\"color:#24292E\"> Order[] {</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">        if</span><span style=\"color:#24292E\"> customerId </span><span style=\"color:#D73A49\">is</span><span style=\"color:#24292E\"> () {</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">            return</span><span style=\"color:#24292E\"> orders.</span><span style=\"color:#6F42C1\">toArray</span><span style=\"color:#24292E\">();</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">        }</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">        return</span><span style=\"color:#D73A49\"> from</span><span style=\"color:#24292E\"> Order entry </span><span style=\"color:#D73A49\">in</span><span style=\"color:#24292E\"> orders</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">            where</span><span style=\"color:#24292E\"> entry.customerId </span><span style=\"color:#D73A49\">==</span><span style=\"color:#24292E\"> customerId</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">            select</span><span style=\"color:#24292E\"> entry;</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">    }</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">}</span></span><style>:root {--copy-icon: url(\"data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 448 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg' style='float: right;'%3E%3Ctitle%3ECopy%3C/title%3E%3Cpath d='M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z'%3E%3C/path%3E%3C/svg%3E\");--success-icon: url(\"data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 512 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg'%3E%3Ctitle%3ECopied%3C/title%3E%3Cpath d='M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z'%3E%3C/path%3E%3C/svg%3E\");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {background-color: transparent;border: none;right: 1px;padding: 0;width: 16px;height: 16px;display: flex;margin-top: -20px;margin-right: 8px;position: absolute;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}.Code_codeSnippet__ayQ3y button.rehype-pretty-copy {margin-top: -10px;}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></pre>"},"json-support":{"frontmatter":{"title":"Streamline back-end data handling","description":"Ballerina has built-in support for multi-part payloads, constraint validations, transformations, and, enrichments for working with complex payloads.","url":"https://github.com/ballerina-guides/bff-samples/tree/main/handle-mulipart-form-data","image":""},"code":"<pre class=\"shiki github-light\" style=\"background-color:#fff;color:#24292e\" tabindex=\"0\"><code><button type=\"button\" title=\"Copy\" aria-label=\"Copy\" data=\"service /crm on new http:Listener(9090) {\n    \n    resource function get customers/[string customerId]/agreement() \n            returns byte[]|http:InternalServerError {\n        byte[]|error agreementForm = getAgreementForm(customerId);\n        if agreementForm is error {\n            return http:INTERNAL_SERVER_ERROR;\n        }\n        return agreementForm;\n    }\n\n    resource function post customers(http:Request request) \n                returns http:Created|http:InternalServerError {\n        do {\n            mime:Entity[] bodyParts = check request.getBodyParts();\n            string formData = check bodyParts[0].getText();\n            CustomerData data = check formData.fromJsonStringWithType();\n            byte[] image = check bodyParts[1].getByteArray();\n            byte[] agreemntForm = check bodyParts[2].getByteArray();\n            check registerCustomer(data, agreemntForm, image);\n            return http:CREATED;\n        } on fail {\n            return http:INTERNAL_SERVER_ERROR;\n        }\n    }\n}\" class=\"rehype-pretty-copy\" onclick=\"navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);this.setAttribute(&#x27;title&#x27;, &#x27;Copied&#x27;);this.setAttribute(&#x27;aria-label&#x27;, &#x27;Copied&#x27;);window.setTimeout(() => {this.classList.remove(&#x27;rehype-pretty-copied&#x27;);this.setAttribute(&#x27;title&#x27;, &#x27;Copy&#x27;);this.setAttribute(&#x27;aria-label&#x27;, &#x27;Copy&#x27;);}, 3000);\"><span class=\"ready\"></span><span class=\"success\"></span></button><span class=\"line\"><span style=\"color:#D73A49\">service</span><span style=\"color:#6F42C1\"> /crm</span><span style=\"color:#D73A49\"> on</span><span style=\"color:#D73A49\"> new</span><span style=\"color:#24292E\"> http:Listener(</span><span style=\"color:#005CC5\">9090</span><span style=\"color:#24292E\">) {</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">    </span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">    resource</span><span style=\"color:#D73A49\"> function</span><span style=\"color:#6F42C1\"> get</span><span style=\"color:#6F42C1\"> customers</span><span style=\"color:#24292E\">/[</span><span style=\"color:#005CC5\">string</span><span style=\"color:#E36209\"> customerId</span><span style=\"color:#24292E\">]/agreement() </span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">            returns</span><span style=\"color:#005CC5\"> byte</span><span style=\"color:#24292E\">[]</span><span style=\"color:#D73A49\">|</span><span style=\"color:#24292E\">http</span><span style=\"color:#D73A49\">:</span><span style=\"color:#24292E\">InternalServerError {</span></span>\n<span class=\"line\"><span style=\"color:#005CC5\">        byte</span><span style=\"color:#24292E\">[]</span><span style=\"color:#D73A49\">|error</span><span style=\"color:#24292E\"> agreementForm </span><span style=\"color:#D73A49\">=</span><span style=\"color:#6F42C1\"> getAgreementForm</span><span style=\"color:#24292E\">(</span><span style=\"color:#E36209\">customerId</span><span style=\"color:#24292E\">);</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">        if</span><span style=\"color:#24292E\"> agreementForm </span><span style=\"color:#D73A49\">is</span><span style=\"color:#D73A49\"> error</span><span style=\"color:#24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">            return</span><span style=\"color:#24292E\"> http</span><span style=\"color:#D73A49\">:</span><span style=\"color:#24292E\">INTERNAL_SERVER_ERROR;</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">        }</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">        return</span><span style=\"color:#24292E\"> agreementForm;</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D73A49\">    resource</span><span style=\"color:#D73A49\"> function</span><span style=\"color:#6F42C1\"> post</span><span style=\"color:#6F42C1\"> customers</span><span style=\"color:#24292E\">(</span><span style=\"color:#E36209\">http</span><span style=\"color:#D73A49\">:</span><span style=\"color:#24292E\">Request request) </span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">                returns</span><span style=\"color:#24292E\"> http</span><span style=\"color:#D73A49\">:</span><span style=\"color:#24292E\">Created</span><span style=\"color:#D73A49\">|</span><span style=\"color:#24292E\">http:InternalServerError {</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">        do</span><span style=\"color:#24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">            mime</span><span style=\"color:#D73A49\">:</span><span style=\"color:#24292E\">Entity[] bodyParts </span><span style=\"color:#D73A49\">=</span><span style=\"color:#D73A49\"> check</span><span style=\"color:#24292E\"> request.</span><span style=\"color:#6F42C1\">getBodyParts</span><span style=\"color:#24292E\">();</span></span>\n<span class=\"line\"><span style=\"color:#005CC5\">            string</span><span style=\"color:#24292E\"> formData </span><span style=\"color:#D73A49\">=</span><span style=\"color:#D73A49\"> check</span><span style=\"color:#24292E\"> bodyParts[</span><span style=\"color:#005CC5\">0</span><span style=\"color:#24292E\">].</span><span style=\"color:#6F42C1\">getText</span><span style=\"color:#24292E\">();</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">            CustomerData data </span><span style=\"color:#D73A49\">=</span><span style=\"color:#D73A49\"> check</span><span style=\"color:#24292E\"> formData.</span><span style=\"color:#6F42C1\">fromJsonStringWithType</span><span style=\"color:#24292E\">();</span></span>\n<span class=\"line\"><span style=\"color:#005CC5\">            byte</span><span style=\"color:#24292E\">[] image </span><span style=\"color:#D73A49\">=</span><span style=\"color:#D73A49\"> check</span><span style=\"color:#24292E\"> bodyParts[</span><span style=\"color:#005CC5\">1</span><span style=\"color:#24292E\">].</span><span style=\"color:#6F42C1\">getByteArray</span><span style=\"color:#24292E\">();</span></span>\n<span class=\"line\"><span style=\"color:#005CC5\">            byte</span><span style=\"color:#24292E\">[] agreemntForm </span><span style=\"color:#D73A49\">=</span><span style=\"color:#D73A49\"> check</span><span style=\"color:#24292E\"> bodyParts[</span><span style=\"color:#005CC5\">2</span><span style=\"color:#24292E\">].</span><span style=\"color:#6F42C1\">getByteArray</span><span style=\"color:#24292E\">();</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">            check</span><span style=\"color:#6F42C1\"> registerCustomer</span><span style=\"color:#24292E\">(</span><span style=\"color:#E36209\">data</span><span style=\"color:#24292E\">, </span><span style=\"color:#E36209\">agreemntForm</span><span style=\"color:#24292E\">, </span><span style=\"color:#E36209\">image</span><span style=\"color:#24292E\">);</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">            return</span><span style=\"color:#24292E\"> http</span><span style=\"color:#D73A49\">:</span><span style=\"color:#24292E\">CREATED;</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">        } </span><span style=\"color:#D73A49\">on</span><span style=\"color:#D73A49\"> fail</span><span style=\"color:#24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">            return</span><span style=\"color:#24292E\"> http</span><span style=\"color:#D73A49\">:</span><span style=\"color:#24292E\">INTERNAL_SERVER_ERROR;</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">        }</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">    }</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">}</span></span><style>:root {--copy-icon: url(\"data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 448 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg' style='float: right;'%3E%3Ctitle%3ECopy%3C/title%3E%3Cpath d='M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z'%3E%3C/path%3E%3C/svg%3E\");--success-icon: url(\"data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 512 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg'%3E%3Ctitle%3ECopied%3C/title%3E%3Cpath d='M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z'%3E%3C/path%3E%3C/svg%3E\");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {background-color: transparent;border: none;right: 1px;padding: 0;width: 16px;height: 16px;display: flex;margin-top: -20px;margin-right: 8px;position: absolute;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}.Code_codeSnippet__ayQ3y button.rehype-pretty-copy {margin-top: -10px;}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></pre>"},"persist":{"frontmatter":{"title":"Automate data access with Ballerina","description":"Ballerina's persistence features offer a straightforward way to create a data access layer for any complex application by providing a simplified interface for CRUD operations.","url":"https://github.com/ballerina-guides/bff-samples/tree/main/persistently-store-data-using-Ballerina","image":""},"code":"<pre class=\"shiki github-light\" style=\"background-color:#fff;color:#24292e\" tabindex=\"0\"><code><button type=\"button\" title=\"Copy\" aria-label=\"Copy\" data=\"Client dbClient = check new ();\n\nservice /sales on new http:Listener(9090) {\n    resource function get orders() returns Order[]|error {\n        return from Order entry in orderDatabase->/orders(Order)\n            select entry;\n    };\n\n    resource function post orders(Order orderEntry)\n            returns http:Ok|http:InternalServerError|http:BadRequest {\n        orderEntry.cargoId = getCargoId();\n        string[]|persist:Error result = orderDatabase->/orders.post([orderEntry]);\n        if result is string[] {\n            return http:OK;\n        } \n        if result is persist:ConstraintViolationError {\n            return <http:BadRequest>{\n                body: {message: string &#x60;Invalid cargo id: ${orderEntry.cargoId}&#x60;}\n            };\n        }\n        return http:INTERNAL_SERVER_ERROR;\n    };\n}\" class=\"rehype-pretty-copy\" onclick=\"navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);this.setAttribute(&#x27;title&#x27;, &#x27;Copied&#x27;);this.setAttribute(&#x27;aria-label&#x27;, &#x27;Copied&#x27;);window.setTimeout(() => {this.classList.remove(&#x27;rehype-pretty-copied&#x27;);this.setAttribute(&#x27;title&#x27;, &#x27;Copy&#x27;);this.setAttribute(&#x27;aria-label&#x27;, &#x27;Copy&#x27;);}, 3000);\"><span class=\"ready\"></span><span class=\"success\"></span></button><span class=\"line\"><span style=\"color:#24292E\">Client dbClient </span><span style=\"color:#D73A49\">=</span><span style=\"color:#D73A49\"> check</span><span style=\"color:#D73A49\"> new</span><span style=\"color:#24292E\"> ();</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D73A49\">service</span><span style=\"color:#6F42C1\"> /sales</span><span style=\"color:#D73A49\"> on</span><span style=\"color:#D73A49\"> new</span><span style=\"color:#24292E\"> http:Listener(</span><span style=\"color:#005CC5\">9090</span><span style=\"color:#24292E\">) {</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">    resource</span><span style=\"color:#D73A49\"> function</span><span style=\"color:#6F42C1\"> get</span><span style=\"color:#6F42C1\"> orders</span><span style=\"color:#24292E\">() </span><span style=\"color:#D73A49\">returns</span><span style=\"color:#24292E\"> Order[]</span><span style=\"color:#D73A49\">|error</span><span style=\"color:#24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">        return</span><span style=\"color:#D73A49\"> from</span><span style=\"color:#24292E\"> Order entry </span><span style=\"color:#D73A49\">in</span><span style=\"color:#24292E\"> orderDatabase</span><span style=\"color:#D73A49\">->/</span><span style=\"color:#6F42C1\">orders</span><span style=\"color:#24292E\">(</span><span style=\"color:#E36209\">Order</span><span style=\"color:#24292E\">)</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">            select</span><span style=\"color:#24292E\"> entry;</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">    };</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D73A49\">    resource</span><span style=\"color:#D73A49\"> function</span><span style=\"color:#6F42C1\"> post</span><span style=\"color:#6F42C1\"> orders</span><span style=\"color:#24292E\">(</span><span style=\"color:#E36209\">Order</span><span style=\"color:#E36209\"> orderEntry</span><span style=\"color:#24292E\">)</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">            returns</span><span style=\"color:#24292E\"> http</span><span style=\"color:#D73A49\">:</span><span style=\"color:#24292E\">Ok</span><span style=\"color:#D73A49\">|</span><span style=\"color:#24292E\">http:InternalServerError</span><span style=\"color:#D73A49\">|</span><span style=\"color:#24292E\">http:BadRequest {</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">        orderEntry.cargoId </span><span style=\"color:#D73A49\">=</span><span style=\"color:#6F42C1\"> getCargoId</span><span style=\"color:#24292E\">();</span></span>\n<span class=\"line\"><span style=\"color:#005CC5\">        string</span><span style=\"color:#24292E\">[]</span><span style=\"color:#D73A49\">|persist:</span><span style=\"color:#24292E\">Error result </span><span style=\"color:#D73A49\">=</span><span style=\"color:#24292E\"> orderDatabase</span><span style=\"color:#D73A49\">->/</span><span style=\"color:#24292E\">orders.</span><span style=\"color:#6F42C1\">post</span><span style=\"color:#24292E\">([orderEntry]);</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">        if</span><span style=\"color:#24292E\"> result </span><span style=\"color:#D73A49\">is</span><span style=\"color:#005CC5\"> string</span><span style=\"color:#24292E\">[] {</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">            return</span><span style=\"color:#24292E\"> http</span><span style=\"color:#D73A49\">:</span><span style=\"color:#24292E\">OK;</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">        } </span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">        if</span><span style=\"color:#24292E\"> result </span><span style=\"color:#D73A49\">is</span><span style=\"color:#24292E\"> persist</span><span style=\"color:#D73A49\">:</span><span style=\"color:#24292E\">ConstraintViolationError {</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">            return</span><span style=\"color:#D73A49\"> &#x3C;</span><span style=\"color:#24292E\">http</span><span style=\"color:#D73A49\">:</span><span style=\"color:#24292E\">BadRequest</span><span style=\"color:#D73A49\">></span><span style=\"color:#24292E\">{</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">                body</span><span style=\"color:#D73A49\">:</span><span style=\"color:#24292E\"> {message: string </span><span style=\"color:#032F62\">`Invalid cargo id: ${</span><span style=\"color:#24292E\">orderEntry</span><span style=\"color:#032F62\">.</span><span style=\"color:#24292E\">cargoId</span><span style=\"color:#032F62\">}`</span><span style=\"color:#24292E\">}</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">            };</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">        }</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">        return</span><span style=\"color:#24292E\"> http</span><span style=\"color:#D73A49\">:</span><span style=\"color:#24292E\">INTERNAL_SERVER_ERROR;</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">    };</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">}</span></span><style>:root {--copy-icon: url(\"data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 448 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg' style='float: right;'%3E%3Ctitle%3ECopy%3C/title%3E%3Cpath d='M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z'%3E%3C/path%3E%3C/svg%3E\");--success-icon: url(\"data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 512 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg'%3E%3Ctitle%3ECopied%3C/title%3E%3Cpath d='M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z'%3E%3C/path%3E%3C/svg%3E\");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {background-color: transparent;border: none;right: 1px;padding: 0;width: 16px;height: 16px;display: flex;margin-top: -20px;margin-right: 8px;position: absolute;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}.Code_codeSnippet__ayQ3y button.rehype-pretty-copy {margin-top: -10px;}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></pre>"},"rest-support":{"frontmatter":{"title":"Simplify back-end development with native REST features","description":"Ballerina provides REST features like path/query parameters, HTTP headers, status codes, and complex JSON structures as first-class citizens within the language itself.","url":"https://github.com/ballerina-guides/bff-samples/tree/main/restful-order-service","image":""},"code":"<pre class=\"shiki github-light\" style=\"background-color:#fff;color:#24292e\" tabindex=\"0\"><code><button type=\"button\" title=\"Copy\" aria-label=\"Copy\" data=\"service /sales on new http:Listener(9090) {\n\n    resource function get orders() returns Order[] {\n        return orders.toArray();\n    };\n\n    resource function get orders/[string id]() returns Order|http:NotFound {\n        return orders[id] ?: <http:NotFound>{\n            body: string &#x60;Order not found. Order ID: ${id}&#x60;\n        };\n    };\n\n    resource function post orders(Order orderRequest)\n            returns Order|http:BadRequest {\n        if orders.hasKey(orderRequest.id) {\n            return <http:BadRequest>{\n                body: string &#x60;Order id already exists.&#x60;\n            };\n        }\n        orders.add(orderRequest);\n        return orderRequest;\n    }\n}\" class=\"rehype-pretty-copy\" onclick=\"navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);this.setAttribute(&#x27;title&#x27;, &#x27;Copied&#x27;);this.setAttribute(&#x27;aria-label&#x27;, &#x27;Copied&#x27;);window.setTimeout(() => {this.classList.remove(&#x27;rehype-pretty-copied&#x27;);this.setAttribute(&#x27;title&#x27;, &#x27;Copy&#x27;);this.setAttribute(&#x27;aria-label&#x27;, &#x27;Copy&#x27;);}, 3000);\"><span class=\"ready\"></span><span class=\"success\"></span></button><span class=\"line\"><span style=\"color:#D73A49\">service</span><span style=\"color:#6F42C1\"> /sales</span><span style=\"color:#D73A49\"> on</span><span style=\"color:#D73A49\"> new</span><span style=\"color:#24292E\"> http:Listener(</span><span style=\"color:#005CC5\">9090</span><span style=\"color:#24292E\">) {</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D73A49\">    resource</span><span style=\"color:#D73A49\"> function</span><span style=\"color:#6F42C1\"> get</span><span style=\"color:#6F42C1\"> orders</span><span style=\"color:#24292E\">() </span><span style=\"color:#D73A49\">returns</span><span style=\"color:#24292E\"> Order[] {</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">        return</span><span style=\"color:#24292E\"> orders.</span><span style=\"color:#6F42C1\">toArray</span><span style=\"color:#24292E\">();</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">    };</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D73A49\">    resource</span><span style=\"color:#D73A49\"> function</span><span style=\"color:#6F42C1\"> get</span><span style=\"color:#6F42C1\"> orders</span><span style=\"color:#24292E\">/[</span><span style=\"color:#005CC5\">string</span><span style=\"color:#E36209\"> id</span><span style=\"color:#24292E\">]() </span><span style=\"color:#D73A49\">returns</span><span style=\"color:#24292E\"> Order</span><span style=\"color:#D73A49\">|</span><span style=\"color:#24292E\">http</span><span style=\"color:#D73A49\">:</span><span style=\"color:#24292E\">NotFound {</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">        return</span><span style=\"color:#24292E\"> orders[id] </span><span style=\"color:#D73A49\">?:</span><span style=\"color:#D73A49\"> &#x3C;</span><span style=\"color:#24292E\">http</span><span style=\"color:#D73A49\">:</span><span style=\"color:#24292E\">NotFound</span><span style=\"color:#D73A49\">></span><span style=\"color:#24292E\">{</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">            body</span><span style=\"color:#D73A49\">:</span><span style=\"color:#24292E\"> string </span><span style=\"color:#032F62\">`Order not found. Order ID: ${</span><span style=\"color:#24292E\">id</span><span style=\"color:#032F62\">}`</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">        };</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">    };</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D73A49\">    resource</span><span style=\"color:#D73A49\"> function</span><span style=\"color:#6F42C1\"> post</span><span style=\"color:#6F42C1\"> orders</span><span style=\"color:#24292E\">(</span><span style=\"color:#E36209\">Order</span><span style=\"color:#E36209\"> orderRequest</span><span style=\"color:#24292E\">)</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">            returns</span><span style=\"color:#24292E\"> Order</span><span style=\"color:#D73A49\">|</span><span style=\"color:#24292E\">http</span><span style=\"color:#D73A49\">:</span><span style=\"color:#24292E\">BadRequest {</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">        if</span><span style=\"color:#24292E\"> orders.</span><span style=\"color:#6F42C1\">hasKey</span><span style=\"color:#24292E\">(orderRequest.id) {</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">            return</span><span style=\"color:#D73A49\"> &#x3C;</span><span style=\"color:#24292E\">http</span><span style=\"color:#D73A49\">:</span><span style=\"color:#24292E\">BadRequest</span><span style=\"color:#D73A49\">></span><span style=\"color:#24292E\">{</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">                body</span><span style=\"color:#D73A49\">:</span><span style=\"color:#24292E\"> string </span><span style=\"color:#032F62\">`Order id already exists.`</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">            };</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">        }</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">        orders.</span><span style=\"color:#6F42C1\">add</span><span style=\"color:#24292E\">(</span><span style=\"color:#E36209\">orderRequest</span><span style=\"color:#24292E\">);</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">        return</span><span style=\"color:#24292E\"> orderRequest;</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">    }</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">}</span></span><style>:root {--copy-icon: url(\"data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 448 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg' style='float: right;'%3E%3Ctitle%3ECopy%3C/title%3E%3Cpath d='M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z'%3E%3C/path%3E%3C/svg%3E\");--success-icon: url(\"data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 512 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg'%3E%3Ctitle%3ECopied%3C/title%3E%3Cpath d='M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z'%3E%3C/path%3E%3C/svg%3E\");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {background-color: transparent;border: none;right: 1px;padding: 0;width: 16px;height: 16px;display: flex;margin-top: -20px;margin-right: 8px;position: absolute;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}.Code_codeSnippet__ayQ3y button.rehype-pretty-copy {margin-top: -10px;}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></pre>"},"security":{"frontmatter":{"title":"Comprehensive security for web back-ends","description":"Ballerina-based back-ends can simplify securing sensitive data during transit, validating server identity, managing CORS, and enforcing message type restrictions via annotations.","url":"https://github.com/ballerina-guides/bff-samples/tree/main/comprehensive-security-for-web-backends","image":""},"code":"<pre class=\"shiki github-light\" style=\"background-color:#fff;color:#24292e\" tabindex=\"0\"><code><button type=\"button\" title=\"Copy\" aria-label=\"Copy\" data=\"@http:ServiceConfig {\n    cors: {\n        allowOrigins: [&#x22;http://localhost:3000&#x22;, &#x22;http://www.hmart.com&#x22;],\n        allowHeaders: [&#x22;REQUEST_ID&#x22;],\n        exposeHeaders: [&#x22;RESPONSE_ID&#x22;],\n        maxAge: 84900\n    }\n}\nservice /sales on new http:Listener(9090,\n    secureSocket = {\n        key: {\n            certFile: &#x22;../path/to/cert&#x22;,\n            keyFile: &#x22;../path/to/private-key&#x22;\n        }\n    }\n) {\n    @http:ResourceConfig {\n        cors: {\n            allowOrigins: [&#x22;http://localhost:3000&#x22;, &#x22;http://www.hmart.com&#x22;],\n            allowCredentials: true\n        }\n    }\n    resource function post orders(Order orderEntry) returns http:Ok {\n        orderTable.add(orderEntry);\n        return <http:Ok>{body: {message: &#x22;Order submitted successfully&#x22;}};\n    };\n}\" class=\"rehype-pretty-copy\" onclick=\"navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);this.setAttribute(&#x27;title&#x27;, &#x27;Copied&#x27;);this.setAttribute(&#x27;aria-label&#x27;, &#x27;Copied&#x27;);window.setTimeout(() => {this.classList.remove(&#x27;rehype-pretty-copied&#x27;);this.setAttribute(&#x27;title&#x27;, &#x27;Copy&#x27;);this.setAttribute(&#x27;aria-label&#x27;, &#x27;Copy&#x27;);}, 3000);\"><span class=\"ready\"></span><span class=\"success\"></span></button><span class=\"line\"><span style=\"color:#24292E\">@</span><span style=\"color:#005CC5\">http</span><span style=\"color:#24292E\">:</span><span style=\"color:#005CC5\">ServiceConfig</span><span style=\"color:#24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">    cors</span><span style=\"color:#D73A49\">:</span><span style=\"color:#24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">        allowOrigins</span><span style=\"color:#D73A49\">:</span><span style=\"color:#24292E\"> [</span><span style=\"color:#032F62\">\"http://localhost:3000\"</span><span style=\"color:#24292E\">, </span><span style=\"color:#032F62\">\"http://www.hmart.com\"</span><span style=\"color:#24292E\">],</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">        allowHeaders</span><span style=\"color:#D73A49\">:</span><span style=\"color:#24292E\"> [</span><span style=\"color:#032F62\">\"REQUEST_ID\"</span><span style=\"color:#24292E\">],</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">        exposeHeaders</span><span style=\"color:#D73A49\">:</span><span style=\"color:#24292E\"> [</span><span style=\"color:#032F62\">\"RESPONSE_ID\"</span><span style=\"color:#24292E\">],</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">        maxAge</span><span style=\"color:#D73A49\">:</span><span style=\"color:#005CC5\"> 84900</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">    }</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">}</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">service</span><span style=\"color:#6F42C1\"> /sales</span><span style=\"color:#D73A49\"> on</span><span style=\"color:#D73A49\"> new</span><span style=\"color:#24292E\"> http:Listener(</span><span style=\"color:#005CC5\">9090</span><span style=\"color:#24292E\">,</span></span>\n<span class=\"line\"><span style=\"color:#E36209\">    secureSocket</span><span style=\"color:#D73A49\"> =</span><span style=\"color:#24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">        key:</span><span style=\"color:#24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">            certFile</span><span style=\"color:#D73A49\">:</span><span style=\"color:#032F62\"> \"../path/to/cert\"</span><span style=\"color:#24292E\">,</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">            keyFile</span><span style=\"color:#D73A49\">:</span><span style=\"color:#032F62\"> \"../path/to/private-key\"</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">        }</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">    }</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">) {</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">    @</span><span style=\"color:#005CC5\">http</span><span style=\"color:#24292E\">:</span><span style=\"color:#005CC5\">ResourceConfig</span><span style=\"color:#24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">        cors</span><span style=\"color:#D73A49\">:</span><span style=\"color:#24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">            allowOrigins</span><span style=\"color:#D73A49\">:</span><span style=\"color:#24292E\"> [</span><span style=\"color:#032F62\">\"http://localhost:3000\"</span><span style=\"color:#24292E\">, </span><span style=\"color:#032F62\">\"http://www.hmart.com\"</span><span style=\"color:#24292E\">],</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">            allowCredentials</span><span style=\"color:#D73A49\">:</span><span style=\"color:#005CC5\"> true</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">        }</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">    }</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">    resource</span><span style=\"color:#D73A49\"> function</span><span style=\"color:#6F42C1\"> post</span><span style=\"color:#6F42C1\"> orders</span><span style=\"color:#24292E\">(</span><span style=\"color:#E36209\">Order</span><span style=\"color:#E36209\"> orderEntry</span><span style=\"color:#24292E\">) </span><span style=\"color:#D73A49\">returns</span><span style=\"color:#24292E\"> http</span><span style=\"color:#D73A49\">:</span><span style=\"color:#24292E\">Ok {</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">        orderTable.</span><span style=\"color:#6F42C1\">add</span><span style=\"color:#24292E\">(</span><span style=\"color:#E36209\">orderEntry</span><span style=\"color:#24292E\">);</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">        return</span><span style=\"color:#D73A49\"> &#x3C;</span><span style=\"color:#24292E\">http</span><span style=\"color:#D73A49\">:</span><span style=\"color:#24292E\">Ok</span><span style=\"color:#D73A49\">></span><span style=\"color:#24292E\">{body</span><span style=\"color:#D73A49\">:</span><span style=\"color:#24292E\"> {message: </span><span style=\"color:#032F62\">\"Order submitted successfully\"</span><span style=\"color:#24292E\">}};</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">    };</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">}</span></span><style>:root {--copy-icon: url(\"data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 448 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg' style='float: right;'%3E%3Ctitle%3ECopy%3C/title%3E%3Cpath d='M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z'%3E%3C/path%3E%3C/svg%3E\");--success-icon: url(\"data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 512 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg'%3E%3Ctitle%3ECopied%3C/title%3E%3Cpath d='M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z'%3E%3C/path%3E%3C/svg%3E\");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {background-color: transparent;border: none;right: 1px;padding: 0;width: 16px;height: 16px;display: flex;margin-top: -20px;margin-right: 8px;position: absolute;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}.Code_codeSnippet__ayQ3y button.rehype-pretty-copy {margin-top: -10px;}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></pre>"},"server-auth":{"frontmatter":{"title":"Simplify user authentications and authorizations","description":"Ballerina apps can be seamlessly integrated with any OAuth2-compatible identity provider using a simple set of annotations.","url":"https://github.com/ballerina-guides/bff-samples/tree/main/connect_with_asgardeo_for_building_secure_services","image":""},"code":"<pre class=\"shiki github-light\" style=\"background-color:#fff;color:#24292e\" tabindex=\"0\"><code><button type=\"button\" title=\"Copy\" aria-label=\"Copy\" data=\"@http:ServiceConfig {\n    auth: [\n        {\n            jwtValidatorConfig: {\n                issuer: issuer,\n                audience: audience,\n                signatureConfig: {\n                    jwksConfig: {\n                        url: jwksUrl\n                    }\n                }\n            },\n            scopes: [&#x22;order_insert&#x22;, &#x22;order_read&#x22;, &#x22;cargo_insert&#x22;, &#x22;cargo_read&#x22;]\n        }\n    ]\n}\nservice /sales on new http:Listener(9090) {\n    @http:ResourceConfig {\n        auth: {\n            scopes: [&#x22;order_insert&#x22;]\n        }\n    }\n    resource function post orders(Order orders) returns http:Ok {\n        orderTable.add(orders);\n        return <http:Ok>{body: {message: &#x22;Order submitted successfully&#x22;}};\n    };\n}\" class=\"rehype-pretty-copy\" onclick=\"navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);this.setAttribute(&#x27;title&#x27;, &#x27;Copied&#x27;);this.setAttribute(&#x27;aria-label&#x27;, &#x27;Copied&#x27;);window.setTimeout(() => {this.classList.remove(&#x27;rehype-pretty-copied&#x27;);this.setAttribute(&#x27;title&#x27;, &#x27;Copy&#x27;);this.setAttribute(&#x27;aria-label&#x27;, &#x27;Copy&#x27;);}, 3000);\"><span class=\"ready\"></span><span class=\"success\"></span></button><span class=\"line\"><span style=\"color:#24292E\">@</span><span style=\"color:#005CC5\">http</span><span style=\"color:#24292E\">:</span><span style=\"color:#005CC5\">ServiceConfig</span><span style=\"color:#24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">    auth</span><span style=\"color:#D73A49\">:</span><span style=\"color:#24292E\"> [</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">        {</span></span>\n<span class=\"line\"><span style=\"color:#6F42C1\">            jwtValidatorConfig</span><span style=\"color:#24292E\">: {</span></span>\n<span class=\"line\"><span style=\"color:#6F42C1\">                issuer</span><span style=\"color:#24292E\">: issuer,</span></span>\n<span class=\"line\"><span style=\"color:#6F42C1\">                audience</span><span style=\"color:#24292E\">: audience,</span></span>\n<span class=\"line\"><span style=\"color:#6F42C1\">                signatureConfig</span><span style=\"color:#24292E\">: {</span></span>\n<span class=\"line\"><span style=\"color:#6F42C1\">                    jwksConfig</span><span style=\"color:#24292E\">: {</span></span>\n<span class=\"line\"><span style=\"color:#6F42C1\">                        url</span><span style=\"color:#24292E\">: jwksUrl</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">                    }</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">                }</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">            },</span></span>\n<span class=\"line\"><span style=\"color:#6F42C1\">            scopes</span><span style=\"color:#24292E\">: [</span><span style=\"color:#032F62\">\"order_insert\"</span><span style=\"color:#24292E\">, </span><span style=\"color:#032F62\">\"order_read\"</span><span style=\"color:#24292E\">, </span><span style=\"color:#032F62\">\"cargo_insert\"</span><span style=\"color:#24292E\">, </span><span style=\"color:#032F62\">\"cargo_read\"</span><span style=\"color:#24292E\">]</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">        }</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">    ]</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">}</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">service</span><span style=\"color:#6F42C1\"> /sales</span><span style=\"color:#D73A49\"> on</span><span style=\"color:#D73A49\"> new</span><span style=\"color:#24292E\"> http:Listener(</span><span style=\"color:#005CC5\">9090</span><span style=\"color:#24292E\">) {</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">    @</span><span style=\"color:#005CC5\">http</span><span style=\"color:#24292E\">:</span><span style=\"color:#005CC5\">ResourceConfig</span><span style=\"color:#24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">        auth</span><span style=\"color:#D73A49\">:</span><span style=\"color:#24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">            scopes</span><span style=\"color:#D73A49\">:</span><span style=\"color:#24292E\"> [</span><span style=\"color:#032F62\">\"order_insert\"</span><span style=\"color:#24292E\">]</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">        }</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">    }</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">    resource</span><span style=\"color:#D73A49\"> function</span><span style=\"color:#6F42C1\"> post</span><span style=\"color:#6F42C1\"> orders</span><span style=\"color:#24292E\">(</span><span style=\"color:#E36209\">Order</span><span style=\"color:#E36209\"> orders</span><span style=\"color:#24292E\">) </span><span style=\"color:#D73A49\">returns</span><span style=\"color:#24292E\"> http</span><span style=\"color:#D73A49\">:</span><span style=\"color:#24292E\">Ok {</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">        orderTable.</span><span style=\"color:#6F42C1\">add</span><span style=\"color:#24292E\">(</span><span style=\"color:#E36209\">orders</span><span style=\"color:#24292E\">);</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">        return</span><span style=\"color:#D73A49\"> &#x3C;</span><span style=\"color:#24292E\">http</span><span style=\"color:#D73A49\">:</span><span style=\"color:#24292E\">Ok</span><span style=\"color:#D73A49\">></span><span style=\"color:#24292E\">{body</span><span style=\"color:#D73A49\">:</span><span style=\"color:#24292E\"> {message: </span><span style=\"color:#032F62\">\"Order submitted successfully\"</span><span style=\"color:#24292E\">}};</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">    };</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">}</span></span><style>:root {--copy-icon: url(\"data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 448 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg' style='float: right;'%3E%3Ctitle%3ECopy%3C/title%3E%3Cpath d='M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z'%3E%3C/path%3E%3C/svg%3E\");--success-icon: url(\"data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 512 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg'%3E%3Ctitle%3ECopied%3C/title%3E%3Cpath d='M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z'%3E%3C/path%3E%3C/svg%3E\");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {background-color: transparent;border: none;right: 1px;padding: 0;width: 16px;height: 16px;display: flex;margin-top: -20px;margin-right: 8px;position: absolute;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}.Code_codeSnippet__ayQ3y button.rehype-pretty-copy {margin-top: -10px;}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></pre>"},"websockets":{"frontmatter":{"title":"Expose real-time data to front-ends via webSockets","description":"Ballerina allows real-time data to be streamed just by implementing a service. This comes with enterprise-ready security features like TLS, mutual TLS, and OAuth2.","url":"https://github.com/ballerina-guides/bff-samples/tree/main/exposing-realtime-data-using-websockets","image":""},"code":"<pre class=\"shiki github-light\" style=\"background-color:#fff;color:#24292e\" tabindex=\"0\"><code><button type=\"button\" title=\"Copy\" aria-label=\"Copy\" data=\"service /logistics on new websocket:Listener(9091) {\n    resource function get vehicles/[string vehicleId]() \n                            returns websocket:Service {\n        return new LocationService(vehicleId);\n    }\n}\n\ndistinct service class LocationService {\n    *websocket:Service;\n\n    remote function onOpen(websocket:Caller caller) returns error? {\n        // Create a new strand and allocate it to send the locations\n        _ = start self.routeLocationFromServerToClient(caller, self.vehicleId);\n        return;\n    }\n\n    function routeLocationFromServerToClient(\n            websocket:Caller caller, string vehicleId) returns error? {\n        while true {\n            Location currentLocation = {\n                latitude: check random:createIntInRange(668700, 1246700) * 1.0 \n                                        / 10000.0,\n                longitude: check random:createIntInRange(258400, 493800) * 1.0 \n                                        / 10000.0\n            };\n            check caller->writeMessage(currentLocation);\n            runtime:sleep(3);\n        }\n    }\n}\" class=\"rehype-pretty-copy\" onclick=\"navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);this.setAttribute(&#x27;title&#x27;, &#x27;Copied&#x27;);this.setAttribute(&#x27;aria-label&#x27;, &#x27;Copied&#x27;);window.setTimeout(() => {this.classList.remove(&#x27;rehype-pretty-copied&#x27;);this.setAttribute(&#x27;title&#x27;, &#x27;Copy&#x27;);this.setAttribute(&#x27;aria-label&#x27;, &#x27;Copy&#x27;);}, 3000);\"><span class=\"ready\"></span><span class=\"success\"></span></button><span class=\"line\"><span style=\"color:#D73A49\">service</span><span style=\"color:#6F42C1\"> /logistics</span><span style=\"color:#D73A49\"> on</span><span style=\"color:#D73A49\"> new</span><span style=\"color:#24292E\"> websocket:Listener(</span><span style=\"color:#005CC5\">9091</span><span style=\"color:#24292E\">) {</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">    resource</span><span style=\"color:#D73A49\"> function</span><span style=\"color:#6F42C1\"> get</span><span style=\"color:#6F42C1\"> vehicles</span><span style=\"color:#24292E\">/[</span><span style=\"color:#005CC5\">string</span><span style=\"color:#E36209\"> vehicleId</span><span style=\"color:#24292E\">]() </span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">                            returns</span><span style=\"color:#24292E\"> websocket</span><span style=\"color:#D73A49\">:</span><span style=\"color:#24292E\">Service {</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">        return</span><span style=\"color:#D73A49\"> new</span><span style=\"color:#6F42C1\"> LocationService</span><span style=\"color:#24292E\">(</span><span style=\"color:#E36209\">vehicleId</span><span style=\"color:#24292E\">);</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">    }</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">}</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D73A49\">distinct</span><span style=\"color:#D73A49\"> service class</span><span style=\"color:#6F42C1\"> LocationService</span><span style=\"color:#24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">    *</span><span style=\"color:#24292E\">websocket</span><span style=\"color:#D73A49\">:</span><span style=\"color:#24292E\">Service;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D73A49\">    remote</span><span style=\"color:#D73A49\"> function</span><span style=\"color:#6F42C1\"> onOpen</span><span style=\"color:#24292E\">(</span><span style=\"color:#E36209\">websocket</span><span style=\"color:#D73A49\">:</span><span style=\"color:#24292E\">Caller caller) </span><span style=\"color:#D73A49\">returns</span><span style=\"color:#D73A49\"> error?</span><span style=\"color:#24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color:#6A737D\">        // Create a new strand and allocate it to send the locations</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">        _ </span><span style=\"color:#D73A49\">=</span><span style=\"color:#D73A49\"> start</span><span style=\"color:#005CC5\"> self</span><span style=\"color:#24292E\">.</span><span style=\"color:#6F42C1\">routeLocationFromServerToClient</span><span style=\"color:#24292E\">(</span><span style=\"color:#E36209\">caller</span><span style=\"color:#24292E\">, </span><span style=\"color:#005CC5\">self</span><span style=\"color:#24292E\">.vehicleId);</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">        return</span><span style=\"color:#24292E\">;</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#D73A49\">    function</span><span style=\"color:#6F42C1\"> routeLocationFromServerToClient</span><span style=\"color:#24292E\">(</span></span>\n<span class=\"line\"><span style=\"color:#E36209\">            websocket</span><span style=\"color:#D73A49\">:</span><span style=\"color:#24292E\">Caller caller, </span><span style=\"color:#005CC5\">string</span><span style=\"color:#E36209\"> vehicleId</span><span style=\"color:#24292E\">) </span><span style=\"color:#D73A49\">returns</span><span style=\"color:#D73A49\"> error?</span><span style=\"color:#24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">        while</span><span style=\"color:#D73A49\"> true</span><span style=\"color:#24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">            Location currentLocation </span><span style=\"color:#D73A49\">=</span><span style=\"color:#24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">                latitude</span><span style=\"color:#D73A49\">:</span><span style=\"color:#D73A49\"> check</span><span style=\"color:#24292E\"> random:</span><span style=\"color:#6F42C1\">createIntInRange</span><span style=\"color:#24292E\">(</span><span style=\"color:#005CC5\">668700</span><span style=\"color:#24292E\">, </span><span style=\"color:#005CC5\">1246700</span><span style=\"color:#24292E\">) * </span><span style=\"color:#005CC5\">1.0</span><span style=\"color:#24292E\"> </span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">                                        /</span><span style=\"color:#005CC5\"> 10000.0</span><span style=\"color:#24292E\">,</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">                longitude</span><span style=\"color:#D73A49\">:</span><span style=\"color:#D73A49\"> check</span><span style=\"color:#24292E\"> random:</span><span style=\"color:#6F42C1\">createIntInRange</span><span style=\"color:#24292E\">(</span><span style=\"color:#005CC5\">258400</span><span style=\"color:#24292E\">, </span><span style=\"color:#005CC5\">493800</span><span style=\"color:#24292E\">) * </span><span style=\"color:#005CC5\">1.0</span><span style=\"color:#24292E\"> </span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">                                        /</span><span style=\"color:#005CC5\"> 10000.0</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">            };</span></span>\n<span class=\"line\"><span style=\"color:#D73A49\">            check</span><span style=\"color:#24292E\"> caller</span><span style=\"color:#D73A49\">-></span><span style=\"color:#6F42C1\">writeMessage</span><span style=\"color:#24292E\">(</span><span style=\"color:#E36209\">currentLocation</span><span style=\"color:#24292E\">);</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">            runtime</span><span style=\"color:#D73A49\">:</span><span style=\"color:#6F42C1\">sleep</span><span style=\"color:#24292E\">(</span><span style=\"color:#005CC5\">3</span><span style=\"color:#24292E\">);</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">        }</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">    }</span></span>\n<span class=\"line\"><span style=\"color:#24292E\">}</span></span><style>:root {--copy-icon: url(\"data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 448 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg' style='float: right;'%3E%3Ctitle%3ECopy%3C/title%3E%3Cpath d='M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z'%3E%3C/path%3E%3C/svg%3E\");--success-icon: url(\"data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 512 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg'%3E%3Ctitle%3ECopied%3C/title%3E%3Cpath d='M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z'%3E%3C/path%3E%3C/svg%3E\");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {background-color: transparent;border: none;right: 1px;padding: 0;width: 16px;height: 16px;display: flex;margin-top: -20px;margin-right: 8px;position: absolute;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}.Code_codeSnippet__ayQ3y button.rehype-pretty-copy {margin-top: -10px;}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></pre>"}}},"__N_SSG":true}