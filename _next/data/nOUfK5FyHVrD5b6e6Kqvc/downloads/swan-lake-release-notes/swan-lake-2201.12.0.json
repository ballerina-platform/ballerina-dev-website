{"pageProps":{"frontmatter":{"layout":"ballerina-left-nav-release-notes","title":"2201.12.0 (Swan Lake)","permalink":"/downloads/swan-lake-release-notes/2201.12.0/","active":"2201.12.0","redirect_from":["/downloads/swan-lake-release-notes/2201.12.0","/downloads/swan-lake-release-notes/2201.12.0-swan-lake/","/downloads/swan-lake-release-notes/2201.12.0-swan-lake","/downloads/swan-lake-release-notes/","/downloads/swan-lake-release-notes"]},"content":"\n## Overview of Ballerina Swan Lake Update 12 (2201.12.0)\n\n<em> Swan Lake Update 12 (2201.12.0) is the twelfth update release of Ballerina Swan Lake, and it includes a new set of features and significant improvements to the compiler, runtime, Ballerina library, and developer tooling. It is based on the 2024R1 version of the Language Specification.</em> \n\n## Update Ballerina\n\nUpdate your current Ballerina installation directly to 2201.12.0 using the [Ballerina Update Tool](/learn/update-tool/) as follows.\n\n1. Run `bal update` to get the latest version of the Update Tool.\n2. Run `bal dist update` to update to this latest distribution.\n\n## Install Ballerina\n\nIf you have not installed Ballerina, download the [installers](/downloads/#swanlake) to install.\n\n## Language updates\n\n### Bug fixes\n\nTo view bug fixes, see the [GitHub milestone for Swan Lake Update 12 (2201.12.0)](https://github.com/ballerina-platform/ballerina-lang/issues?q=is%3Aissue+label%3ATeam%2FCompilerFE+milestone%3A2201.12.0+is%3Aclosed+label%3AType%2FBug).\n\n## Runtime updates\n\n### Bug fixes\n\nTo view bug fixes, see the [GitHub milestone for Swan Lake Update 12 (2201.12.0)](https://github.com/ballerina-platform/ballerina-lang/issues?q=is%3Aissue+milestone%3A2201.12.0+label%3ATeam%2FjBallerina+label%3AType%2FBug+is%3Aclosed).\n\n## Ballerina library updates\n\n### New features\n\n#### `http` package\n\n- Introduced the default HTTP listener, allowing multiple services from different Ballerina packages to be attached to the same listener. By default, the listener runs on port `9090`\n\n  ```ballerina\n  import ballerina/http;\n\n  listener http:Listener httpListener = http:getDefaultListener();\n\n  service /api/v1 on httpListener {\n\n      resource function get greeting() returns string {\n          return \"Hello, World from Service 1!\";\n      }\n  }\n  ```\n\n  The port and configuration of the default listener can be customized in `Config.toml` as follows:\n\n  ```toml\n  [ballerina.http]\n  defaultListenerPort = 8080\n\n  [ballerina.http.defaultListenerConfig]\n  httpVersion = \"1.1\"\n\n  [ballerina.http.defaultListenerConfig.secureSocket.key]\n  path = \"resources/certs/ballerinaKeystore.p12\"\n  password = \"ballerina\"\n  ```\n- Added the following static analysis rules to the Ballerina scan tool\n\n  | RuleID           | Rule Kind     | Rule Description                                       |\n  |------------------|---------------|--------------------------------------------------------|\n  | ballerina/http:1 | VULNERABILITY | Avoid allowing default resource accessor               |\n  | ballerina/http:2 | VULNERABILITY | Avoid permissive Cross-Origin Resource Sharing         |\n\n- Introduced an API to convert an `http:Response` object into a `http:StatusCodeRecord`, which includes the status code, body, and headers\n\n  ```ballerina\n  http:Client clientEP = check new (\"localhost:9090/api\");\n  http:Response res = check clientEP->/path;\n  http:StatusCodeRecord statusCodeRes = check res.getStatusCodeRecord();\n  ```\n\n### Improvements\n\n#### `http` package\n\n- Improved HTTP client performance particularly when using a trust store with multiple certificates\n- Added TLS v1.3-supported cipher suites to the default listener configuration\n- Added support for **X25519MLKEM768** key encapsulation in TLS v1.3, replacing **X25519Kyber768** key encapsulation algorithm\n\n#### `persist` package\n\n- Added new `@sql:Schema` annotation to define the schema of a entity record in the database. The schema can be defined using the `@sql:Schema` annotation as follows:\n\n  ```ballerina\n  import ballerina/persist.sql;\n  \n  @sql:Schema {value: \"my_schema\"}\n  type Person record {|\n      readonly int id;\n      string name;\n      string address;\n  |};\n  ```\n  \n  The `@sql:Schema` annotation is currently supported for MSSQL and PostgreSQL databases.\n\n### Breaking changes\n\n#### `crypto` package\n\n- Updated the OIDs of Post-Quantum Algorithms\n  \n  Due to changes in [the FIPS standardization of post-quantum algorithms](https://csrc.nist.gov/projects/computer-security-objects-register/algorithm-registration), the OIDs for **MLDSA** and **MLKEM** algorithms have been updated. As a result, key pairs generated by the previous version of the crypto package and data encrypted using **MLDSA** or **MLKEM** will not be compatible with this release\n\n### Bug fixes\n\nTo view bug fixes, see the [GitHub milestone for Swan Lake Update 12 (2201.12.0)](https://github.com/ballerina-platform/ballerina-standard-library/issues?q=is%3Aclosed+is%3Aissue+milestone%3A%222201.12.0%22+label%3AType%2FBug).\n\n## Developer tools updates\n\n### New features\n\n#### Consolidate-packages tool\n\n- Introduced the `consolidated-packages` bal tool to generate code required to consolidate multiple Ballerina services into a single executable.\n- Simplifies service consolidation to enable monolith-style deployments.\n\n  ```toml\n  [package]\n  org = \"myorg\"\n  name = \"myapp\"\n  version = \"0.1.0\"\n\n  [[tool.consolidate-packages]]\n  id = \"consolidateSvc\"\n  options.services = [\"myorg/menu_service\", \"myorg/order_service\"]\n  ```\n\nAutomation tools and CI/CD pipelines can integrate the CLI tool to automatically generate a Ballerina package containing the consolidated services.\n\n- To install the tool, run:\n\n  ```\n  $ bal tool pull consolidate-packages \n  ```\n\n- To create a package, use:\n\n  ```\n  $ bal consolidate-packages new --package-path <path> <comma-separated-list-of-services> \n  ```\n\nFor more information, see [consolidate-packages tool](/learn/consolidate-packages-tool). \n\n#### Persist tool\n\n- Introduced support to define default schema for all entities in the database using configuration. This is an optional configuration and only supported in MSSQL and PostgreSQL. This can be set in the `Config.toml` file along with other database configurations as follows:\n\n  ```toml\n  [<packageName>.<moduleName>]\n  host = \"localhost\"\n  port = 5432\n  user = \"postgres\"\n  password = \"\"\n  database = \"\"\n  defaultSchema = \"EMPLOYEE\"\n  ```\n  The priority order for schema resolution is as follows:\n\n  1. The schema defined in the model using the `@sql:Schema` annotation.\n  2. The default schema specified in the `Config.toml` file.\n  3. The default schema of the database.\n\n### Bug fixes\n\nTo view bug fixes, see the GitHub milestone for Swan Lake Update 12 (2201.12.0) of the repositories below.\n\n- [Language server](https://github.com/ballerina-platform/ballerina-lang/issues?q=is%3Aissue+label%3ATeam%2FLanguageServer+milestone%3A2201.12.0+is%3Aclosed+label%3AType%2FBug+)\n- [OpenAPI](https://github.com/ballerina-platform/openapi-tools/issues?q=is%3Aissue+label%3AType%2FBug+milestone%3A%22Swan+Lake+2201.12.0%22+is%3Aclosed)\n","id":"swan-lake-2201.12.0","codeSnippets":"[[-1421447534,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color:#fff;color:#24292e\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">import</span><span style=\\\"color:#24292E\\\"> ballerina/http;</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">listener</span><span style=\\\"color:#24292E\\\"> http</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">Listener httpListener </span><span style=\\\"color:#D73A49\\\">=</span><span style=\\\"color:#24292E\\\"> http</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#6F42C1\\\">getDefaultListener</span><span style=\\\"color:#24292E\\\">();</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">service</span><span style=\\\"color:#6F42C1\\\"> /api/v1</span><span style=\\\"color:#D73A49\\\"> on</span><span style=\\\"color:#24292E\\\"> httpListener {</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">    resource</span><span style=\\\"color:#D73A49\\\"> function</span><span style=\\\"color:#6F42C1\\\"> get</span><span style=\\\"color:#6F42C1\\\"> greeting</span><span style=\\\"color:#24292E\\\">() </span><span style=\\\"color:#D73A49\\\">returns</span><span style=\\\"color:#005CC5\\\"> string</span><span style=\\\"color:#24292E\\\"> {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">        return</span><span style=\\\"color:#032F62\\\"> \\\"Hello, World from Service 1!\\\"</span><span style=\\\"color:#24292E\\\">;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">    }</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">}</span></span></code></pre>\"],[1586297310,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color:#fff;color:#24292e\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">[</span><span style=\\\"color:#6F42C1\\\">ballerina</span><span style=\\\"color:#24292E\\\">.</span><span style=\\\"color:#6F42C1\\\">http</span><span style=\\\"color:#24292E\\\">]</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">defaultListenerPort = </span><span style=\\\"color:#005CC5\\\">8080</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">[</span><span style=\\\"color:#6F42C1\\\">ballerina</span><span style=\\\"color:#24292E\\\">.</span><span style=\\\"color:#6F42C1\\\">http</span><span style=\\\"color:#24292E\\\">.</span><span style=\\\"color:#6F42C1\\\">defaultListenerConfig</span><span style=\\\"color:#24292E\\\">]</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">httpVersion = </span><span style=\\\"color:#032F62\\\">\\\"1.1\\\"</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">[</span><span style=\\\"color:#6F42C1\\\">ballerina</span><span style=\\\"color:#24292E\\\">.</span><span style=\\\"color:#6F42C1\\\">http</span><span style=\\\"color:#24292E\\\">.</span><span style=\\\"color:#6F42C1\\\">defaultListenerConfig</span><span style=\\\"color:#24292E\\\">.</span><span style=\\\"color:#6F42C1\\\">secureSocket</span><span style=\\\"color:#24292E\\\">.</span><span style=\\\"color:#6F42C1\\\">key</span><span style=\\\"color:#24292E\\\">]</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">path = </span><span style=\\\"color:#032F62\\\">\\\"resources/certs/ballerinaKeystore.p12\\\"</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">password = </span><span style=\\\"color:#032F62\\\">\\\"ballerina\\\"</span></span></code></pre>\"],[864527900,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color:#fff;color:#24292e\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">http</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">Client clientEP </span><span style=\\\"color:#D73A49\\\">=</span><span style=\\\"color:#D73A49\\\"> check</span><span style=\\\"color:#D73A49\\\"> new</span><span style=\\\"color:#24292E\\\"> (</span><span style=\\\"color:#032F62\\\">\\\"localhost:9090/api\\\"</span><span style=\\\"color:#24292E\\\">);</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">http</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">Response res </span><span style=\\\"color:#D73A49\\\">=</span><span style=\\\"color:#D73A49\\\"> check</span><span style=\\\"color:#24292E\\\"> clientEP</span><span style=\\\"color:#D73A49\\\">->/</span><span style=\\\"color:#24292E\\\">path;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">http</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#24292E\\\">StatusCodeRecord statusCodeRes </span><span style=\\\"color:#D73A49\\\">=</span><span style=\\\"color:#D73A49\\\"> check</span><span style=\\\"color:#24292E\\\"> res.</span><span style=\\\"color:#6F42C1\\\">getStatusCodeRecord</span><span style=\\\"color:#24292E\\\">();</span></span></code></pre>\"],[691402666,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color:#fff;color:#24292e\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">import</span><span style=\\\"color:#24292E\\\"> ballerina/persist.sql;</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">@</span><span style=\\\"color:#005CC5\\\">sql</span><span style=\\\"color:#24292E\\\">:</span><span style=\\\"color:#005CC5\\\">Schema</span><span style=\\\"color:#24292E\\\"> {value</span><span style=\\\"color:#D73A49\\\">:</span><span style=\\\"color:#032F62\\\"> \\\"my_schema\\\"</span><span style=\\\"color:#24292E\\\">}</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">type</span><span style=\\\"color:#6F42C1\\\"> Person</span><span style=\\\"color:#D73A49\\\"> record</span><span style=\\\"color:#24292E\\\"> {</span><span style=\\\"color:#D73A49\\\">|</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">    readonly</span><span style=\\\"color:#005CC5\\\"> int</span><span style=\\\"color:#24292E\\\"> id;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#005CC5\\\">    string</span><span style=\\\"color:#24292E\\\"> name;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#005CC5\\\">    string</span><span style=\\\"color:#24292E\\\"> address;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">|</span><span style=\\\"color:#24292E\\\">};</span></span></code></pre>\"],[1615108374,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color:#fff;color:#24292e\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">[</span><span style=\\\"color:#6F42C1\\\">package</span><span style=\\\"color:#24292E\\\">]</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">org = </span><span style=\\\"color:#032F62\\\">\\\"myorg\\\"</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">name = </span><span style=\\\"color:#032F62\\\">\\\"myapp\\\"</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">version = </span><span style=\\\"color:#032F62\\\">\\\"0.1.0\\\"</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">[[</span><span style=\\\"color:#6F42C1\\\">tool</span><span style=\\\"color:#24292E\\\">.</span><span style=\\\"color:#6F42C1\\\">consolidate-packages</span><span style=\\\"color:#24292E\\\">]]</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">id = </span><span style=\\\"color:#032F62\\\">\\\"consolidateSvc\\\"</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">options.services = [</span><span style=\\\"color:#032F62\\\">\\\"myorg/menu_service\\\"</span><span style=\\\"color:#24292E\\\">, </span><span style=\\\"color:#032F62\\\">\\\"myorg/order_service\\\"</span><span style=\\\"color:#24292E\\\">]</span></span></code></pre>\"],[-890607768,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color:#fff;color:#24292e\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">[</span><span style=\\\"color:#6F42C1\\\">&#x3C;packageName></span><span style=\\\"color:#24292E\\\">.</span><span style=\\\"color:#6F42C1\\\">&#x3C;moduleName></span><span style=\\\"color:#24292E\\\">]</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">host = </span><span style=\\\"color:#032F62\\\">\\\"localhost\\\"</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">port = </span><span style=\\\"color:#005CC5\\\">5432</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">user = </span><span style=\\\"color:#032F62\\\">\\\"postgres\\\"</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">password = </span><span style=\\\"color:#032F62\\\">\\\"\\\"</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">database = </span><span style=\\\"color:#032F62\\\">\\\"\\\"</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">defaultSchema = </span><span style=\\\"color:#032F62\\\">\\\"EMPLOYEE\\\"</span></span></code></pre>\"]]"},"__N_SSG":true}