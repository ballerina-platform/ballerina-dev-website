{"pageProps":{"frontmatter":{"layout":"ballerina-cloud-left-nav-pages-swanlake","title":"Virtual machine deployment","description":"If you prefer to execute Ballerina services directly on virtual machines (VMs) or bare metal servers without using containerization, you can follow these steps to set up and run your services in a production environment,","keywords":"ballerina, programming language, services, cloud, kubernetes, docker","active":"ballerina-deployment-guideLines","intro":"If you prefer to execute Ballerina services directly on virtual machines (VMs) or bare metal servers without using containerization, you can follow these steps to set up and run your services in a production environment,"},"content":"\n1. Prepare the Server Environment by provisioning the VM or Bare Metal Server.\n   - Ensure the server meets the hardware requirements for your application (CPU, memory, disk space, etc.).\n   - Configure the server OS (Linux is recommended for production).\n\n2. Install the Ballerina distribution from the [Ballerina Installation options.](https://ballerina.io/downloads/)\n\n3. Install any other dependencies your Ballerina service might need (e.g., database drivers, libraries).\n\n4. Write Ballerina code.\n\n      ```ballerina\n         import ballerina/http;\n            \n         service / on new http:Listener(9090) {\n             resource function get sayHello() returns string {\n                 return \"Hello World!\";\n             }\n         }\n      ```\n   > **Tip:** Organize the Project: Follow the standard Ballerina project structure, with a `Ballerina.toml` file and source organized in modules if needed. You can visit the [Organize Ballerina code](https://ballerina.io/learn/organize-ballerina-code/) for detailed information about packages and how you can manage the growth of your source code.\n   \n5. Build the Ballerina service.\n    \n    - Compile the service. This command creates an executable `.jar` file in the `target/bin` directory.\n      ```yaml\n      $ bal build\n      ```\n   > **Tip**: You can use GraalVM builds to compile Ballerina apps into native binaries, ensuring faster startup and lower memory usage compared to the JVM.\n   >\n   > ```\n   > $ bal build --graalvm\n   > ```\n   > See [Build the GraalVM executable](https://ballerina.io/learn/build-the-executable-locally/) for more information.\n\n## CI/CD integration with VMs\n\nThe [Ballerina GitHub](https://github.com/ballerina-platform/ballerina-action) action can automate the continuous integration and continuous deployment (CI/CD) process for a Ballerina project. Refer to the following sample workflow file. It is triggered by every push to the repository and automatically builds the project.\n```yaml\nname: Ballerina example\n\non: [push]\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n\n    steps:\n\t  # Step 1: Checkout the Repository\n      - name: Checkout\n        uses: actions/checkout@v1\n\n\t # Step 2: Build the Ballerina package\n      - name: Ballerina Build\n        uses: ballerina-platform/ballerina-action@master\n        with:\n          args: \n            pack\n          \n      # Step 3: Build the Ballerina package with GraalVm\n      #- name: Ballerina Build with GraalVm\n      #  uses: ballerina-platform/ballerina-action@master\n      #  with:\n      #    args: \n      #      build --graalvm\n```\nVM/Bare Metal Implementation:\n- **Step 01:** The push event can initiate a build and deployment process to the Kubernetes cluster.\n- **Step 02:** This step builds the Ballerina project, compiling the source code and preparing the necessary artifacts.\n    >Note: If you would like to build with GraalVM, uncomment the Step 3 section in the workflow file and comment out Step 2.\n","id":"virtual-machine-deployment","sub":"deployment-guide","third":"","slug":"deployment-guide/virtual-machine-deployment","codes":"[[-406101511,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color:#fff;color:#24292e\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">import</span><span style=\\\"color:#24292E\\\"> ballerina/http;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">   </span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">service</span><span style=\\\"color:#24292E\\\"> / </span><span style=\\\"color:#D73A49\\\">on</span><span style=\\\"color:#D73A49\\\"> new</span><span style=\\\"color:#24292E\\\"> http:Listener(</span><span style=\\\"color:#005CC5\\\">9090</span><span style=\\\"color:#24292E\\\">) {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">    resource</span><span style=\\\"color:#D73A49\\\"> function</span><span style=\\\"color:#6F42C1\\\"> get</span><span style=\\\"color:#6F42C1\\\"> sayHello</span><span style=\\\"color:#24292E\\\">() </span><span style=\\\"color:#D73A49\\\">returns</span><span style=\\\"color:#005CC5\\\"> string</span><span style=\\\"color:#24292E\\\"> {</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#D73A49\\\">        return</span><span style=\\\"color:#032F62\\\"> \\\"Hello World!\\\"</span><span style=\\\"color:#24292E\\\">;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">    }</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">}</span></span></code></pre>\"],[624140191,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color:#fff;color:#24292e\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color:#032F62\\\">$ bal build</span></span></code></pre>\"],[-1288964067,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color:#fff;color:#24292e\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color:#22863A\\\">name</span><span style=\\\"color:#24292E\\\">: </span><span style=\\\"color:#032F62\\\">Ballerina example</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#005CC5\\\">on</span><span style=\\\"color:#24292E\\\">: [</span><span style=\\\"color:#032F62\\\">push</span><span style=\\\"color:#24292E\\\">]</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#22863A\\\">jobs</span><span style=\\\"color:#24292E\\\">:</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#22863A\\\">  build</span><span style=\\\"color:#24292E\\\">:</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#22863A\\\">    runs-on</span><span style=\\\"color:#24292E\\\">: </span><span style=\\\"color:#032F62\\\">ubuntu-latest</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#22863A\\\">    steps</span><span style=\\\"color:#24292E\\\">:</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\">\\t  # Step 1: Checkout the Repository</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">      - </span><span style=\\\"color:#22863A\\\">name</span><span style=\\\"color:#24292E\\\">: </span><span style=\\\"color:#032F62\\\">Checkout</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#22863A\\\">        uses</span><span style=\\\"color:#24292E\\\">: </span><span style=\\\"color:#032F62\\\">actions/checkout@v1</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\">\\t # Step 2: Build the Ballerina package</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">      - </span><span style=\\\"color:#22863A\\\">name</span><span style=\\\"color:#24292E\\\">: </span><span style=\\\"color:#032F62\\\">Ballerina Build</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#22863A\\\">        uses</span><span style=\\\"color:#24292E\\\">: </span><span style=\\\"color:#032F62\\\">ballerina-platform/ballerina-action@master</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#22863A\\\">        with</span><span style=\\\"color:#24292E\\\">:</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#22863A\\\">          args</span><span style=\\\"color:#24292E\\\">: </span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#032F62\\\">            pack</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">          </span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\">      # Step 3: Build the Ballerina package with GraalVm</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\">      #- name: Ballerina Build with GraalVm</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\">      #  uses: ballerina-platform/ballerina-action@master</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\">      #  with:</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\">      #    args: </span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#6A737D\\\">      #      build --graalvm</span></span></code></pre>\"]]"},"__N_SSG":true}