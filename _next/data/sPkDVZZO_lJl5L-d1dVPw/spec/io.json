{"pageProps":{"frontmatter":{},"content":"# Specification: Ballerina I/O Library\n\n_Owners_: @daneshk @BuddhiWathsala  \n_Reviewers_: @daneshk  \n_Created_: 2021/12/04   \n_Updated_: 2022/02/17  \n_Edition_: Swan Lake \n\n## Introduction\nThis is the specification for the I/O standard library of [Ballerina language](https://ballerina.io/), which provides file related I/O operations.  \n\nThe I/O library specification has evolved and may continue to evolve in the future. The released versions of the specification can be found under the relevant GitHub tag. \n\nIf you have any feedback or suggestions about the library, start a discussion via a GitHub issue or in the [Discord server](https://discord.gg/ballerinalang). Based on the outcome of the discussion, the specification and implementation can be updated. Community feedback is always welcome. Any accepted proposal which affects the specification is stored under `/docs/proposals`. Proposals under discussion can be found with the label `type/proposal` in GitHub.\n\nThe conforming implementation of the specification is released and included in the distribution. Any deviation from the specification is considered a bug.\n\n## Contents\n1. [Overview](#1-overview)\n2. [Console I/O](#2-console-io)\n3. [Bytes I/O](#3-bytes-io)\n4. [Strings I/O](#4-strings-io)\n5. [CSV I/O](#5-csv-io)\n6. [JSON I/O](#6-json-io)\n7. [XML I/O](#7-xml-io)\n\n\n## 1. Overview\nBallerina I/O standard library has six aspects of I/O operations.\n1. Console I/O\n2. Bytes I/O\n3. Strings I/O\n4. CSV I/O\n5. JSON I/O\n6. XML I/O\n\n## 2. Console I/O\nConsole I/O contains APIs to read from the console, write to the console, and write to given output streams.\n\nThe following API reads content from standard input and return it as a string to the user.\n\n```ballerina\n# Retrieves the input read from the STDIN.\n# ```ballerina\n# string choice = io:readln(\"Enter choice 1 - 5: \");\n# string choice = io:readln();\n# ```\n#\n# + a - Any value to be printed\n# + return - Input read from the STDIN\npublic function readln(any? a = ()) returns string;\n```\n\nThe following two APIs write a given input to the standard output.\n\n```ballerina\n# Prints `any`, `error`, or string templates(such as `The respective int value is ${val}`) value(s) to the STDOUT.\n# ```ballerina\n# io:print(\"Start processing the CSV file from \", srcFileName);\n# ```\n#\n# + values - The value(s) to be printed\npublic isolated function print(Printable... values);\n\n# Prints `any`, `error` or string templates(such as `The respective int value is ${val}`) value(s) to the STDOUT\n# followed by a new line.\n# ```ballerina\n# io:println(\"Start processing the CSV file from \", srcFileName);\n# ```\n#\n# + values - The value(s) to be printed\npublic isolated function println(Printable... values);\n```\n\nHere, the `print` API prints the given `values` as it is and the `println` API prints the input followed by a new line.\nIn addition, both these print APIs support string templates as inputs like the following example.\n\n```ballerina\nimport ballerina/io;\n \npublic function main() {\n   string name = \"Harry\";\n   int age = 20;\n   io:println(`My name is ${name} and I am ${age} years old.`);\n}\n```\n\nThe following two APIs allow users to write a given set of inputs to a specific output stream (STDOUT or STDERR).\n\n```ballerina\n# Prints `any`, `error`, or string templates(such as `The respective int value is ${val}`) value(s) to\n# a given stream(STDOUT or STDERR).\n# ```ballerina\n# io:fprint(io:stderr, \"Unexpected error occurred\");\n# ```\n# + fileOutputStream - The output stream (`io:stdout` or `io:stderr`) content needs to be printed\n# + values - The value(s) to be printed\npublic isolated function fprint(FileOutputStream fileOutputStream, Printable... values);\n\n# Prints `any`, `error`, or string templates(such as `The respective int value is ${val}`) value(s) to\n# a given stream(STDOUT or STDERR) followed by a new line.\n# ```ballerina\n# io:fprintln(io:stderr, \"Unexpected error occurred\");\n# ```\n# + fileOutputStream - The output stream (`io:stdout` or `io:stderr`) content needs to be printed\n# + values - The value(s) to be printed\npublic isolated function fprintln(FileOutputStream fileOutputStream, Printable... values);\n```\n\nAs the `print` APIs, the `fprint` APIs also support string templates.\n\n## 3. Bytes I/O\n\nThe bytes I/O APIs can be further categorized based on their streaming capabilities as streaming and non-streaming APIs.\n\n**Non-Streaming APIs**\n\nThe following API reads the content of a given input file as a read-only bytes array and return it.\n\n```ballerina\n# Read the entire file content as a byte array.\n# ```ballerina\n# byte[]|io:Error content = io:fileReadBytes(\"./resources/myfile.txt\");\n# ```\n# + path - The path of the file\n# + return - A read-only byte array or an `io:Error`\npublic isolated function fileReadBytes(string path) returns readonly & byte[]|Error;\n```\n\nThe following API writes given bytes content to a given file.\n\n```ballerina\n# Write a set of bytes to a file.\n# ```ballerina\n# byte[] content = [60, 78, 39, 28];\n# io:Error? result = io:fileWriteBytes(\"./resources/myfile.txt\", content);\n# ```\n# + path - The path of the file\n# + content - Byte content to write\n# + option - To indicate whether to overwrite or append the given content\n# + return - An `io:Error` or else `()`\npublic isolated function fileWriteBytes(string path, byte[] content, FileWriteOption option = OVERWRITE) returns\nError?;\n```\n\nIn write APIs, users can specify the option, either overwriting the existing file or appending it to the given file.\n\n**Streaming APIs**\n\nThe following API reads the content of a given input file as a stream of blocks. Here, a block defines as a read-only bytes array.\n\n```ballerina\n# Read the entire file content as a stream of blocks.\n# ```ballerina\n# stream<io:Block, io:Error?>|io:Error content = io:fileReadBlocksAsStream(\"./resources/myfile.txt\", 1000);\n# ```\n# + path - The path of the file\n# + blockSize - An optional size of the byte block. The default size is 4KB\n# + return - A byte block stream or  an`io:Error`\npublic isolated function fileReadBlocksAsStream(string path, int blockSize = 4096) returns stream<Block, Error?>|\nError;\n```\n\nThe following API writes a given byte stream to a given file.\n\n```ballerina\n# Write a byte stream to a file.\n# ```ballerina\n# byte[] content = [[60, 78, 39, 28]];\n# stream<byte[], io:Error?> byteStream = content.toStream();\n# io:Error? result = io:fileWriteBlocksFromStream(\"./resources/myfile.txt\", byteStream);\n# ```\n# + path - The path of the file\n# + byteStream - Byte stream to write\n# + option - To indicate whether to overwrite or append the given content\n# + return - An `io:Error` or else `()`\npublic isolated function fileWriteBlocksFromStream(string path, stream<byte[], Error?> byteStream,\n                                                    FileWriteOption option = OVERWRITE) returns Error?;\n```\n\n## 4. Strings I/O\n\n**Non-Streaming APIs**\n\nThe following API reads the content of a given input file as a string.\n\n```ballerina\n# Reads the entire file content as a `string`.\n# The resulting string output does not contain the terminal carriage (e.g., `\\r` or `\\n`).\n# ```ballerina\n# string|io:Error content = io:fileReadString(\"./resources/myfile.txt\");\n# ```\n# + path - The path of the file\n# + return - The entire file content as a string or an `io:Error`\npublic isolated function fileReadString(string path) returns string|Error;\n```\n\nThe following API writes given string content to a given file.\n\n```ballerina\n# Write a string content to a file.\n# ```ballerina\n# string content = \"Hello Universe..!!\";\n# io:Error? result = io:fileWriteString(\"./resources/myfile.txt\", content);\n# ```\n# + path - The path of the file\n# + content - String content to write\n# + option - To indicate whether to overwrite or append the given content\n# + return - `()` when the writing was successful or an `io:Error`\npublic isolated function fileWriteString(string path, string content, FileWriteOption option = OVERWRITE) returns\nError?;\n```\n\nThe following API reads the content of a given input file line by line and return a string array, and the string array contains each line as a string.\n\n```ballerina\n# Reads the entire file content as a list of lines.\n# The resulting string array does not contain the terminal carriage (e.g., `\\r` or `\\n`).\n# ```ballerina\n# string[]|io:Error content = io:fileReadLines(\"./resources/myfile.txt\");\n# ```\n# + path - The path of the file\n# + return - The file as list of lines or an `io:Error`\npublic isolated function fileReadLines(string path) returns string[]|Error;\n```\n\nThe following API writes a given array of lines to a given file.\n\n```ballerina\n# Write an array of lines to a file.\n# During the writing operation, a newline character `\\n` will be added after each line.\n# ```ballerina\n# string[] content = [\"Hello Universe..!!\", \"How are you?\"];\n# io:Error? result = io:fileWriteLines(\"./resources/myfile.txt\", content);\n# ```\n# + path - The path of the file\n# + content - An array of string lines to write\n# + option - To indicate whether to overwrite or append the given content\n# + return - `()` when the writing was successful or an `io:Error`\npublic isolated function fileWriteLines(string path, string[] content, FileWriteOption option = OVERWRITE) returns\nError?;\n```\n\n**Streaming APIs**\n\nThe following API reads the content of a given input file as a stream of lines.\n\n```ballerina\n# Reads file content as a stream of lines.\n# The resulting stream does not contain the terminal carriage (e.g., `\\r` or `\\n`).\n# ```ballerina\n# stream<string, io:Error?>|io:Error content = io:fileReadLinesAsStream(\"./resources/myfile.txt\");\n# ```\n# + path - The path of the file\n# + return - The file content as a stream of strings or an `io:Error`\npublic isolated function fileReadLinesAsStream(string path) returns stream<string, Error?>|Error;\n```\n\nThe following API writes a given line stream to a given file.\n\n```ballerina\n# Write stream of lines to a file.\n# During the writing operation, a newline character `\\n` will be added after each line.\n# ```ballerina\n# string content = [\"Hello Universe..!!\", \"How are you?\"];\n# stream<string, io:Error?> lineStream = content.toStream();\n# io:Error? result = io:fileWriteLinesFromStream(\"./resources/myfile.txt\", lineStream);\n# ```\n# + path - The path of the file\n# + lineStream - A stream of lines to write\n# + option - To indicate whether to overwrite or append the given content\n# + return - `()` when the writing was successful or an `io:Error`\npublic isolated function fileWriteLinesFromStream(string path, stream<string, Error?> lineStream,\n                                                FileWriteOption option = OVERWRITE) returns Error?;\n```\n\n\n## 5. CSV I/O\n\n**Non-Streaming APIs**\n\nThe following API reads the content of a given CSV file as a string array of arrays. Here, each CSV record represents as a string array.\n\n```ballerina\n# Read file content as a CSV.\n# ```ballerina\n# string[][]|io:Error content = io:fileReadCsv(\"./resources/myfile.csv\");\n# map<anydata>[]|io:Error content = io:fileReadCsv(\"./resources/myfile.csv\");\n# ```\n# + path - The CSV file path\n# + skipHeaders - Number of headers, which should be skipped prior to reading records\n# + return - The entire CSV content in the channel as an array of string arrays or an `io:Error`\npublic isolated function fileReadCsv(string path, int skipHeaders = 0) returns string[][]|Error;\n```\n\nThe following API writes given CSV content to a given file. When writing a `Record[]` content to a CSV file in `OVERWRITE`, by default, headers will be written to the CSV file as unlike `string[][],` the order of record fields is not guaranteed. For `APPEND`, order of the existing csv file is inferred using the headers and used as the order.\n\n```ballerina\n# Write CSV content to a file. \n# If the input is a `Record[]` the headers are automatically written to the file.\n# ```ballerina\n# type Coord record {int x;int y;};\n# Coord[] contentRecord = [{x: 1,y: 2},{x: 1,y: 2}]\n# string[][] content = [[\"Anne\", \"Johnson\", \"SE\"], [\"John\", \"Cameron\", \"QA\"]];\n# io:Error? result = io:fileWriteCsv(\"./resources/myfile.csv\", content);\n# io:Error? resultRecord = io:fileWriteCsv(\"./resources/myfileRecord.csv\", contentRecord);\n# ```\n# + path - The CSV file path\n# + content - CSV content as an array of string arrays\n# + option - To indicate whether to overwrite or append the given content\n# + return - An `io:Error` or `()` when the writing was successful\npublic isolated function fileWriteCsv(string path, string[][] content, FileWriteOption option = OVERWRITE) returns\nError?;\n```\n\nThe following API reads the content of a given CSV file as a stream of string arrays. Here, each CSV record represents as a string array.\n\n```ballerina\n# Read file content as a CSV.\n# ```ballerina\n# stream<string[], io:Error?>|io:Error content = io:fileReadCsvAsStream(\"./resources/myfile.csv\");\n# stream<map<anydata>, io:Error?>|io:Error content = io:fileReadCsvAsStream(\"./resources/myfile.csv\");\n# ```\n# + path - The CSV file path\n# + return - The entire CSV content in the channel a stream of string arrays or an `io:Error`\npublic isolated function fileReadCsvAsStream(string path) returns stream<string[], Error?>|Error;\n```\n\nThe following API writes a given CSV stream to a given file.\n\n```ballerina\n# Write CSV record stream to a file.\n# ```ballerina\n# type Coord record {int x;int y;};\n# Coord[] contentRecord = [{x: 1,y: 2},{x: 1,y: 2}]\n# string[][] content = [[\"Anne\", \"Johnson\", \"SE\"], [\"John\", \"Cameron\", \"QA\"]];\n# stream<string[], io:Error?> stringStream = content.toStream();\n# stream<Coord, io:Error?> recordStream = contentRecord.toStream();\n# io:Error? result = io:fileWriteCsvFromStream(\"./resources/myfile.csv\", stringStream);\n# io:Error? resultRecord = io:fileWriteCsvFromStream(\"./resources/myfileRecord.csv\", recordStream);\n# ```\n# + path - The CSV file path\n# + content - A CSV record stream to be written\n# + option - To indicate whether to overwrite or append the given content\n# + return - An `io:Error` or `()` when the writing was successful\npublic isolated function fileWriteCsvFromStream(string path, stream<string[], Error?> content,\n                                                FileWriteOption option = OVERWRITE) returns Error?;\n```\n\n## 6. JSON I/O\n\nThe following API reads the content of a given JSON file and returns a Ballerina JSON object.\n\n```ballerina\n# Reads file content as a JSON.\n# ```ballerina\n# json|io:Error content = io:fileReadJson(\"./resources/myfile.json\");\n# ```\n# + path - The path of the JSON file\n# + return - The file content as a JSON object or an `io:Error`\npublic isolated function fileReadJson(string path) returns json|Error;\n```\n\nThe following API writes given JSON to a given file.\n\n```ballerina\n# Write a JSON to a file.\n# ```ballerina\n# json content = {\"name\": \"Anne\", \"age\": 30};\n# io:Error? result = io:fileWriteJson(\"./resources/myfile.json\", content);\n# ```\n# + path - The path of the JSON file\n# + content - JSON content to write\n# + return - `()` when the writing was successful or an `io:Error`\npublic isolated function fileWriteJson(string path, json content) returns Error?;\n```\n## 7. XML I/O\n\nThe following API reads the content of a given XML file and returns a Ballerina XML object.\n\n```ballerina\n# Reads file content as an XML.\n# ```ballerina\n# xml|io:Error content = io:fileReadXml(\"./resources/myfile.xml\");\n# ```\n# + path - The path of the XML file\n# + return - The file content as an XML or an `io:Error`\npublic isolated function fileReadXml(string path) returns xml|Error;\n```\n\nThe following API writes given XML to a given file.\n```ballerina\n# Write XML content to a file.\n# ```ballerina\n# xml content = xml `<book>The Lost World</book>`;\n# io:Error? result = io:fileWriteXml(\"./resources/myfile.xml\", content);\n# ```\n# + path - The path of the XML file\n# + content - XML content to write\n# + xmlOptions - XML writing options(XML entity type and DOCTYPE)\n# + fileWriteOption - file write option(`OVERWRITE` and `APPEND` are the possible values, and the default value is `OVERWRITE`)\n# + return - `()` value when the writing was successful or an `io:Error`\npublic isolated function fileWriteXml(string path, xml content, FileWriteOption fileWriteOption = OVERWRITE,\n                                    *XmlWriteOptions xmlOptions)  returns Error?;\n```\n\nThe XML entity type details can pass to the `fileWriteXml` using the `XmlWriteOptions`.\n\n```ballerina\n# Represents the XML entity type that needs to be written.\n#\n# + DOCUMENT_ENTITY - An XML document with a single root node\n# + EXTERNAL_PARSED_ENTITY - Externally parsed well-formed XML entity\npublic enum XmlEntityType {\n    DOCUMENT_ENTITY,\n    EXTERNAL_PARSED_ENTITY\n}\n\n# Represents the XML DOCTYPE entity.\n#\n# + system - the system identifier\n# + public - the public identifier\n# + internalSubset - internal DTD schema\npublic type XmlDoctype record {|\n    string? system = ();\n    string? 'public = ();\n    string? internalSubset = ();\n|};\n\n# The writing options of an XML.\n#\n# + xmlEntityType - the entity type of the XML input (the default value is `DOCUMENT_ENTITY`)\n# + doctype - XML DOCTYPE value (the default value is `()`)\npublic type XmlWriteOptions record {|\n    XmlEntityType xmlEntityType = DOCUMENT_ENTITY;\n    XmlDoctype? doctype = ();\n|};\n```\n\n"},"__N_SSG":true}