{"pageProps":{"frontmatter":{"layout":"ballerina-left-nav-release-notes","title":"Swan Lake Alpha1","permalink":"/downloads/swan-lake-release-notes/swan-lake-alpha1/","active":"swan-lake-alpha1","redirect_from":["/downloads/swan-lake-release-notes/swan-lake-alpha1"]},"content":"\n### Overview of Ballerina Swan Lake Alpha1  \n\nThis Alpha1 release includes the language features planned for the Ballerina Swan Lake release. Moreover, this release includes improvements and bug fixes to the compiler, runtime, standard library, and developer tooling. This release note lists only the features and updates added after the eighth preview of Ballerina Swan Lake.\n\n- [Updating Ballerina](#updating-ballerina)\n    - [For existing users](#for-existing-users)\n    - [For new users](#for-new-users)\n- [Highlights](#highlights)\n- [What is new in Ballerina Swan Lake Alpha1](#what-is-new-in-ballerina-swan-lake-alpha1)\n    - [Language](#language)\n        - [Intersection type support for errors](#intersection-type-support-for-errors)\n        - [Support for passing a closed record as the rest argument](#support-for-passing-a-closed-record-as-the-rest-argument)\n        - [Support for the empty XML value](#support-for-the-empty-xml-value)\n        - [Improvements to the match statement](#improvements-to-the-match-statement)\n        - [Support for cyclic union types](#support-for-cyclic-union-types)\n        - [Updated syntax for user-defined error construction](#updated-syntax-for-user-defined-error-construction)\n        - [Changes to casting with errors](#changes-to-casting-with-errors)\n        - [Changes to `toString` and `toBalString` with errors](#changes-to-tostring-and-tobalstring-with-errors)\n        - [Changes to object type inclusion with qualifiers](#changes-to-object-type-inclusion-with-qualifiers)\n        - [Changes to record type inclusion with rest descriptors](#changes-to-record-type-inclusion-with-rest-descriptors)\n        - [Improved listener declaration](#improved-listener-declaration)\n        - [Referring lang library modules without using quoted identifiers](#referring-lang-library-modules-without-using-quoted-identifiers)\n        - [Improved lang library methods](#improved-lang-library-methods)\n    - [Packages](#packages)\n        - [Introduction of hierarchical package names](#introduction-of-hierarchical-package-names)\n        - [Introduction of the dependencies TOML file](#introduction-of-the-dependencies-toml-file)\n        - [Support to accept an empty Ballerina TOML file](#support-to-accept-an-empty-ballerina-toml-file)\n    - [Runtime](#runtime)\n        - [Configurable](#configurable)\n    - [Developer tools](#developer-tools)\n        - [Language Server](#language-server)\n        - [Project API](#project-api)\n        - [Debugger](#debugger)\n        - [Test framework](#test-framework)\n        - [Bindgen tool](#bindgen-tool)\n        - [Maven resolver](#maven-resolver)\n        - [Ballerina Shell REPL [EXPERIMENTAL]](#ballerina-shell-repl-experimental)\n        - [Documentation](#documentation)\n    - [Standard library](#standard-library)\n        - [HTTP module improvements](#http-module-improvements)\n        - [WebSocket module improvements](#websocket-module-improvements)\n        - [gRPC module improvements](#grpc-module-improvements)\n        - [Security improvements](#security-improvements)\n        - [GraphQL module improvements](#graphql-module-improvements)\n        - [TCP module improvements](#tcp-module-improvements)\n        - [UDP module improvements](#udp-module-improvements)\n        - [Common changes in messaging modules](#common-changes-in-messaging-modules)\n        - [Kafka module improvements](#kafka-module-improvements)\n        - [NATS module improvements](#nats-module-improvements)\n        - [NATS streaming module improvements](#nats-streaming-module-improvements)\n        - [RabbitMQ module improvements](#rabbitmq-module-improvements)\n        - [Time module improvements](#time-module-improvements)\n        - [Rename system module to OS](#rename-system-module-to-os)\n        - [Runtime module improvements](#runtime-module-improvements)\n        - [Email module improvements](#email-module-improvements)\n        - [WebSub module improvements](#websub-module-improvements)\n        - [Introduced new modules](#introduced-new-modules)\n        - [Removed modules](#removed-modules)\n    - [Code to Cloud](#code-to-cloud)\n    - [Observability](#observability)\n    - [Breaking changes](#breaking-changes)\n    - [Taint analyzer update](#taint-analyzer-update)\n\n#### Updating Ballerina\n\nYou can use the update tool to update to Ballerina Swan Lake Alpha1 as follows.\n\n##### For existing users\n\nIf you are already using Ballerina, you can directly update your distribution to the Swan Lake channel using the [Ballerina update tool](/swan-lake/learn/keeping-ballerina-up-to-date/). To do this, first, execute the command below to get the update tool updated to its latest version. \n                        \n> `ballerina update`\n\nFrom now onwards, the `ballerina` command has to be issued as `bal`. Next, execute the command below to update to Swan Lake Alpha1.\n\n > `bal dist pull slalpha1`                 \n\nHowever, if you are using a Ballerina version below 1.1.0, install via the [installers](/downloads/#swanlake).\n\n##### For new users\n\nIf you have not installed Ballerina, then download the [installers](/downloads/#swanlake) to install.\n\n#### Highlights\n\n- Support for intersection types with errors\n- Support for more match patterns in the match statement\n- Support for cyclic union type descriptors\n- Changes to casting and `toString`/`toBalString` with errors\n- Changes to object-type and record-type inclusions\n- Improved listener declaration\n- The `ballerina` command has been renamed to `bal`\n- Introduction of hierarchical package names\n- Introduction of the `Dependencies.toml` file\n- Introduction of REPL support for Ballerina via the `bal shell` command\n- Improvements to developer tools such as the Language Server, Project API, Debugger, Test Framework, Bindgen Tool, Maven Resolver, and Documentation\n- Improvements to the HTTP, WebSocket, gRPC, security, GraphQL, Kafka, NATS, NATS Streaming, RabbitMQ, Time, Runtime, Email, and WebSub standard library modules\n- Introduction of the new Random, RegEx, TCP, UDP, and WebSubHub standard library modules\n- Code action and code completion support for Code to Cloud libraries in the VS Code plugin\n\n### What is new in Ballerina Swan Lake Alpha1\n\n#### Language\n\n##### Intersection type support for errors\n\nIntersection types are now allowed with `error` types. An `error` value will belong to the intersection type (`E1 & E2`) only if it belongs to each member error type (`E1` and `E2`) of the intersection. \n\n```ballerina\ntype InvalidCodeError error<record { int code; }>;\n\ntype UnavailableError error<record { string[] alternatives; }>;\n\ntype Error error<record { int code; string[] alternatives; boolean fatal; }>;\n\npublic function main() {\n    Error err = error Error(\"InvalidCode\", code = 1234, alternatives = [\"ballerina.io\"], fatal = true);\n\n    // Since `Error` is a subtype of both `InvalidCodeError` and `UnavailableError`\n    // it is a subtype of the intersection type of `InvalidCodeError` and `UnavailableError`.\n    // Thus `err` can be assigned to a variable of type `InvalidCodeError & UnavailableError`.\n    InvalidCodeError & UnavailableError intersection = err;\n}\n```\n\n#### Support for passing a closed record as the rest argument\n\nA closed record can be used as the rest argument in a function or method call. This is the same as passing each field in the record value as a named argument.\n\n```ballerina\nimport ballerina/io;\n\ntype SalaryDetails record {|\n    int annualIncrement = 20;\n    float bonusRate?;\n|};\n\nfunction printSalaryDetails(int baseSalary, int annualIncrement, float bonusRate = 0.02) {\n    io:println(\"Base Salary: \", baseSalary, \" | Annual Increment: \", annualIncrement, \" | Bonus Rate: \", bonusRate);\n}\n\npublic function main() {\n    SalaryDetails details = {\n        annualIncrement: 30,\n        bonusRate: 0.03\n    };\n    // Same as `printSalaryDetails(2500, annualIncrement = 30, bonusRate = 0.03);`\n    printSalaryDetails(2500, ...details);\n\n    details = {};\n    // Same as `printSalaryDetails(2500, annualIncrement = 20);`\n    printSalaryDetails(2500, ...details);\n}\n```\n\n##### Support for the empty XML value\n\nPreviously, it was possible to define a value of type `xml<never>` (i.e., the empty XML value) only using the `concat` XML lang library method. \n\n```ballerina\nxml<never> emptyXmlValue = <xml<never>>'xml:concat();\n```\n\nIt is now possible to directly create the empty XML value.\n\n```ballerina\nxml<never> emptyXmlValue = xml ``;\n```\n\n##### Improvements to the match statement\n\n###### Support for more match patterns\n\n**List match pattern**\n```ballerina\nmatch v {\n    var [a, b] => {\n        // Matches lists with 2 elements.\n    }    \n    var [a, [b, c], d]|var [a, b , c, d] => {\n        // Matches \n        // - lists with 3 elements where the second element is a list of 2 elements or\n        // - lists with 4 elements\n    }\n}\n```\n\n**Mapping match pattern**\n```ballerina\nmatch v {\n    {a: \"hello\", b: \"world\"} => {\n        // Match mappings that contain the field `a` with\n        // value \"hello\" and field `b` with value \"world\".\n    }\n    {a: var x} => {\n        // Match mappings that contain the field `a`.\n        // The value is assigned to the variable `x`\n        // and can be assigned within the block.\n        io:println(x);\n    }\n}\n```\n\n**Error match pattern**\n```ballerina\nmatch v {\n    error (\"Message\") => {\n        // Match errors with \"Message\" as the error message.\n    }\n    error () => {\n        // Match all errors.\n    }\n}\n```\n\n###### Improved type narrowing within match statements\n\nWhen code is executed through each match-clause, the type of the matched expression is narrowed. In the example below, the type of `v` in the last match clause is narrowed to `string`.\n\n```ballerina\nfunction getString(boolean|int|string v) returns string {\n    match v {\n        var a if a is int|boolean => {\n            return a.toString();\n        }\n        _ => {\n            return v; // Type of `v` is `string` here.\n        }\n    }\n}\n```\n\n##### Support for cyclic union types\n\nCyclic union types are now supported. A cyclic union type descriptor can directly refer to its identifier in its type descriptor.\n\n```ballerina\ntype Integers int|Integers[]|map<Integers>;\n\nIntegers intValue = 5;\nIntegers intArray = [1, 2, 3, 4];\nIntegers intMap = {i: 1, j: 2};\nIntegers integers = [intValue, intArray, intMap];\n```\n\n##### Updated syntax for user-defined error construction\n\nThe error constructor expression now requires the `error` keyword to construct a user-defined error.\n\n**Previous syntax:**\n```ballerina\nMyError myError = MyError(\"Message\");\n```\n \n**New syntax:**\n```ballerina\nMyError myError = error MyError(\"Message\");\n```\n\n#### Changes to casting with errors\n\nErrors cannot be cast away (i.e., if the value that is being cast can be an error, the type to which the cast is attempted should also have a subtype of error). \n\nThe following was allowed previously.\n\n```ballerina\nfunction foo() returns string|int|error {\n    return error(\"Error Message\");\n}\n\npublic function main() {\n    string s = <string>foo(); // Cast without considering the error.\n}\n```\n\nThis is now disallowed and can be rewritten as follows.\n\n\n1. Using `checkpanic` - This will preserve the `panic` behavior (but with a different error - the previous error was a cast error. Now, it will be the actual error returned by `foo()`).\n\n    ```ballerina\n    function foo() returns string|int|error {\n        return error(\"Error Message\");\n    }\n\n    public function main() {\n        // Use`checkpanic` to panic if `foo()` returns an error and then attempt the cast.\n        string s = <string>checkpanic foo();\n    }\n    ```\n\n2. Using `check` - Alternatively, if the function’s return type allows returning the error, `check` can be used before attempting the cast to return the error instead of panicking.\n\n    ```ballerina\n    function foo() returns string|int|error {\n        return error(\"Error Message\");\n    }\n\n    public function main() returns error? {\n        // Use`check` to return the error if `foo()` returns an error, and then attempt the cast.\n        string s = <string>check foo();\n    }\n    ```\n\n##### Changes to `toString` and `toBalString` with errors\n\nIt was previously possible to call `toString()` and `toBalString()` on unions of errors and non-errors.\n\n```ballerina\nfunction print(any|error val) {\n    string s = val.toString();\n}\n```\n\nThis has now been disallowed and the error scenarios need to be handled explicitly. The above example can be rewritten as follows.\n\n```ballerina\nfunction print(any|error val) {\n    string s = val is error ? val.toString() : val.toString();\n}\n```\n\n#### Changes to object type inclusion with qualifiers\n\n- When object type inclusion is used with an object type descriptor with qualifiers (`isolated`, `client`, `service`), it is now mandatory for the object in which the inclusion is done to also have these qualifiers.\n- Object type descriptors can no longer use object type inclusion with `readonly` classes.\n- Classes can use object type inclusion with `readonly` classes only if the including classes themselves are `readonly` classes.\n- The type reference in an object constructor expression can refer to a `readonly` class only if the object being constructed is `readonly`.\n\n#### Changes to record type inclusion with rest descriptors\n\nRecord type inclusion now copies the rest descriptor from the included type to the including type. The including type may override the rest descriptor. \n\n```ballerina\ntype Configuration record {|\n    int id;\n    decimal...;\n|};\n\ntype DefaultConfiguration record {|\n    // The rest descriptor is also copied.\n    *Configuration;\n    boolean active;\n|};\n\nDefaultConfiguration config = {\n    id: 1000,\n    active: true,\n    // Additional fields of type `decimal` can be specified since the rest descriptor\n    // is copied from `Configuration`.\n    \"factor\": 1.0,\n    \"index\": 0.0\n};\n```\n\nThe rest descriptor of the `DefaultConfiguration` is of type `decimal`.\n\n```ballerina\ntype Configuration record {|\n    int id;\n    decimal...;\n|};\n\ntype InclusiveConfiguration record {\n    // Since `InclusiveConfiguration` is an inclusive record type descriptor the \n    // `anydata` rest descriptor overrides the rest descriptor from `Configuration`.\n    *Configuration;\n    boolean active;\n};\n\nInclusiveConfiguration inclusiveConfig = {\n    id: 1002,\n    active: true,\n    // Additional fields of type `anydata` can be specified since the rest descriptor\n    // is overridden as `anydata`.\n    \"factor\": 1.0,\n    \"owner\": \"admin\"\n};\n\ntype ExclusiveConfiguration record {|\n    // The record type descriptor of  `ExclusiveConfiguration` overrides the rest \n    // descriptor from `Configuration`, making the rest descriptor of `ExclusiveConfiguration` \n    // be of type `boolean`.\n    *Configuration;\n    boolean active;\n    boolean...;\n|};\n\nExclusiveConfiguration exclusiveConfig = {\n    id: 1003,\n    active: false,\n    // Additional fields of type `boolean` can be specified since the rest descriptor is overridden.\n    \"allow\": true\n};\n```\n\nThe rest descriptor type of the `InclusiveConfiguration` is `anydata` and that of the `ExclusiveConfiguration` is `boolean`. The including records override the rest descriptor from the included record.\n\n##### Improved listener declaration  \n\nThe listener declaration is improved to allow using listener classes that may return an error on initialization. This allows the following listener declaration where the `init` method of `Listener` may return an error.\n\n```ballerina\nlistener lsn = new Listener();\n```\n\nBefore this change, `listener` authors had to use `panic` in the `init` method instead of returning an error if the `listener` object failed to initialize.\n\nIf the initialization of the listener object returns an error, module initialization will fail.\n\n```ballerina\nlistener lsn = new Listener();\n\npublic class Listener {\n\n    public isolated function 'start() returns error? {\n    }\n\n    public isolated function gracefulStop() returns error? {\n    }\n\n    public isolated function immediateStop() returns error? {\n    }\n\n    public isolated function detach(service object {} s) returns error? {\n    }\n\n    public isolated function attach(service object {} s, string[]|string? name = ()) returns error? {\n    }\n\n    public function init() returns error? {\n        ...\n        // Return an error if initialization failed due to some reason.\n        if (objectInitFailed) {\n            return error(\"Listener initialization failed\");\n        }\n    }\n}\n```\n\n**Previous syntax:**\n```ballerina\nlistener lsn = new Listener();\n\npublic class Listener {\n   ...\n   ...\n   // listener life cycle methods\n\n   public function init() {\n      ...\n      // object init failed due to some reason\n      if (object_init_failed) {\n         panic error(\"Listener initialization failed\");\n      }\n   }\n}\n```\n\n##### Referring lang library modules without using quoted identifiers\n\nLang library module prefixes can now be used without the initial quote. For example, both the approaches below are now supported.\n\n```ballerina\nint a = int:sum(1, 2);\n```\n\n```ballerina\nint a = 'int:sum(1, 2);\n```\n\n##### Improved lang library methods\n\n###### Introduction of the `includes` method\n\nA new lang library method named `includes`, which tests whether a `string` value includes another `string` value has been added to the `ballerina/lang.string` library. It accepts an optional second argument to indicate the index to start searching from. It returns `true` only if the string contains the other string at an index greater or equal to the start index. The value `false` will be returned otherwise.\n\n```ballerina\nstring str = \"Ballerina Programming Language\";\nboolean includes = str.includes(\"Language\", 10);\n```\n\n###### Introduction of the `sleep` method\n\nA new `sleep` method, which pauses the execution of the current strand for a specified time in seconds has been added to the `ballerina/lang.runtime` library.\n\n```ballerina\nruntime:sleep(2.0);\n```\n\n###### Introduction of the `getStackTrace` method\n\nA new `getStackTrace` method has been introduced in the `ballerina/lang.runtime` library to get a stack trace for the current call stack for the specified execution point. It returns an array of stack frames. \n\n```ballerina\nruntime:StackFrame[] stackFrames = runtime:getStackTrace();\n```\n\n###### Introduction of the `Cloneable` type\n\nA new type named `Cloneable` has been introduced to the `ballerina/lang.value` library. This is a cyclic union type. This type represents the values on which `clone` and `cloneReadOnly` can be applied on.\n\n```ballerina\npublic type Cloneable readonly|xml|Cloneable[]|map<Cloneable>|table<map<Cloneable>>;\n```\n\n#### Rename of the `ballerina/java` module\n\nThe `ballerina/java` module is renamed to `ballerina/jballerina.java`.\n\n#### Packages\n\n##### Introduction of hierarchical package names\n\nNow, the package name can take the form of `package-name := identifier(.identifer)*` meaning the dot (`.`) is allowed in the package name.\n\nThe following is a valid `Ballerina.toml` file.\n\n```toml\n[package]\norg = \"ballerinax\"\nname = \"observe.prometheus\"\nversion = \"1.0.0\"\n```\n\n##### Introduction of the dependencies TOML file\n\nThis is a dedicated file to maintain all the dependencies, which is expected to be created in the package root directory. All the dependencies which were previously declared in the `Ballerina.toml` file should be moved to this file now.\n\nA valid `Dependencies.toml` file will be as follows.\n\n```toml\n[[dependency]]\norg = \"ballerina\"\nname = \"io\"\nversion = \"0.5.5\"\n\n[[dependency]]\norg = \"ballerina\"\nname = \"log\"\nversion = \"1.0.5\"\n```\n\n##### Support to accept an empty Ballerina TOML file\n\nA valid Ballerina package can now contain an empty `Ballerina.toml` file. This makes it easier to convert an application/service written in a standalone Ballerina file to a Ballerina package.\n\n#### Runtime\n\nNew APIs are added for creating immutable Ballerina records and arrays from Java. \n\nThe new `ValueCreator.createReadonlyArrayValue` API creates a new `readonly` Ballerina array from the given Java array and the `ValueCreator.createReadonlyRecordValue` creates a new `readonly` Ballerina record.\n\n##### Configurable\n\nThe `configurable` feature is improved to support variables with decimal and arrays of `int`, `float`, `string`, `boolean`, and `decimal` types.\n\nFor example if the `Config.toml` file contains the following arrays, \n\n```toml\nints = [1,2,3]\nstrings = [\"red\", \"yellow\", \"green\"]\n```\n\nthey can be loaded as follows.\n\n```ballerina\nconfigurable int[] & readonly ints = ?;\nconfigurable string[] & readonly strings = ?;\n```\n\nConfigurations can be provided at runtime using the `Config.toml` file in the current working directory or by exporting the file path using the `BALCONFIGFILE` environment variable. For the tests, configurations can be overridden by having a `Config.toml` file inside the tests directory.\n\n#### Developer tools\n\n##### Language Server\n\n- `Find all Reference` Support\n- CodeLens support for `DocumentThis` is available to auto-generate documentation for public documentable constructs\n- CodeAction for `ChangeVariableType` is available to solve incompatible variable assignments\n\n##### Project API\n\nTOML and MD files are made a part of the Project API.\n\n##### Debugger\n\n- Enhanced table variable presentation with the support to view child entries\n- Introduced type test expression evaluation support\n\n##### Test framework\n\nSupport for function pointers in the `@test:Config {}` annotation. The fields `before`, `after`, `dependsOn` and `dataProvider`, which previously expected the name of the function as a `string`, now accept function pointers instead.\n\n##### Bindgen tool\nIntroduced a `-m|--modules` flag to generate module-level mappings for Java packages generated using the Bindgen tool.\n\n##### Maven resolver\nIntroduced support for specifying custom Maven repositories in the `Ballerina.toml` file. The configuration below can be used for this purpose.\n\n```toml\n[[platform.java11.repository]]\nid = \"<maven-repository-id>\"\nurl = \"<maven-repository-url>\"\nusername = \"<github-username>\"\npassword = \"<github-PAT>\"\n```\n\n##### Ballerina Shell REPL [EXPERIMENTAL]\n\nIntroduced Read-Evaluate-Print-Loop (REPL) support for Ballerina, which can be accessed via the `bal shell` command. Shell runs a REPL instance of Ballerina to enable running snippets of code. An example shell session is shown below:\n\n```bash\n> bal shell\nWelcome to Ballerina Shell REPL.\nType /exit to exit and /help to list available commands.\n\n=$ any a = 10\n\n=$ a is int\n\n=$ function add(int x, int y) returns int => x + y\n\n=$ add(3, 4)\n7\n\n=$ /exit \n| Bye!!!\n```\n\n##### Documentation\n\nNow, documentation URLs follow the `orgName/packageName/version/moduleName` structure.\n\n#### Standard library\n\n##### HTTP module improvements\n\n###### Allow multiple return types for the resource method\n\nThe `resource` method can return anydata type, an `http:Response` object, `StatusCode` records along with `error?`. Instead of using an `http:Caller`, the response can be sent similarly by returning from the method. \n\nWhen returning anydata, the `@http:Payload` annotation can be used to specify the content type of the response additionally. Otherwise, the default content type of the respective return value type will be added. \n\n```ballerina\nservice on new http:Listener(8080) {\n    resource function get hello () returns string {\n        return \"Hello\"; // Content type defaults to `text/plain`\n    }\n\n    resource function get goodbye () returns @http:Payload {mediaType: \"text/plain+id\"} string {\n        return \"\\\"Goodbye!\\\"\";\n    }\n}\n```\n\n##### Introduce status code response records\n\nWith the introduction of records for the most commonly used status codes, the response can be sent inline. \n\n```ballerina\nservice on helloEP {\n    resource function get hello () returns http:Ok? {\n        return {body: \"Hello world\", headers: {\"x-test\": \"123abc\"}, mediaType: \"text/plain\"};\n    }\n}\n```\n\n###### Introduce the response limit configuration\n\n\nThe `http:Client` facilitates validations on inbound responses based on size limits. Each response that exceeds the limits will be returned as an error.\n\n```ballerina\nhttp:Client clientEP = new (\"http://localhost:9092/hello\", config = {responseLimits: {\n        maxStatusLineLength: 50,\n        maxHeaderSize: 1000,\n        maxEntityBodySize: 50\n    }});\n```\n\n###### Improve listener/client return type to union with error\n\nListener and client initialization may return an error now. When the listener is used in a listener declaration, module initialization will fail if the listener initialization returns an error.\n\n**New syntax:**\n\n```ballerina\nhttp:Listener|http:ListenerError ep = new (9090);\nhttp:Client|http:ClientError myClient = new (\"http://localhost:9100\", {httpVersion: \"2.0\"});\n```\n\n###### Improve the `getHeader()` and `getHeaders()` return types to union with error\n\n**New syntax:**\n\n```ballerina\nstring|error value = request.getHeader(\"Content-Type\"); \nstring[]|error values = request.getHeaders(\"Accept\");\n```\n\n###### Remove status code related `http:Caller` methods\n\nThe `http:Caller` remote methods such as `ok()`, `created()`, `accepted()`, `noContent()`, `badRequest()`, `notFound()`, and `internalServerError()` were removed along with the response record introduction\n\n##### WebSocket module improvements\n\n- The Websocket module has been moved out of the HTTP module. Therefore, the import should be changed from `ballerina/http` to `ballerina/websocket`.\n- Introduced a new listener as follows for the WebSocket module.\n`listener websocket:Listener wsListener = new(9090);`\n- This module now has the two types of services below that are mandatory to work with WebSockets. \n    - `websocket:UpgradeService` - This handles the HTTP to WebSocket upgrade. This service has a single get resource, which returns a `websocket:Service` or an error. Optionally, this takes in the `http:Request` parameter. To accept the WebSocket upgrade, this resource should return a `websocket:Service`. Or else, to cancel the WebSocket upgrade, it must return a `websocket:UpgradeError`.\n    - `websocket:Service` - This handles the events after the WebSocket upgrade. This service has a predefined set of remote methods like `onTextMessage`, `onBinaryMessage`, `onError`, `onPing`, `onPong`, `onOpen`, `onClose`. Once the connection is successfully updated to a WebSocket connection, upon receiving WebSocket frames/messages, those will get dispatched to these remote methods. \n\n**New syntax:**\n\n```ballerina\nimport ballerina/http;\nimport ballerina/websocket;\n\nservice / basic on new websocket:Listener(9000) {\n    resource function get .(http:Request req) returns websocket:Service|websocket:UpgradeError {\n        return new WsService();\n    }\n}\nservice class WsService {\n*websocket:Service;\n    remote function onOpen(websocket:Caller caller) {\n    }\n    remote function onTextMessage(websocket:Caller caller, string text) {\n    }\n    remote function onBinaryMessage(websocket:Caller caller, byte[] b) {\n    }\n}\n```\n\nThe `onTextMessage` and `onBinaryMessage` will take in the complete WebSocket message. Unlike earlier versions, `onTextMessage` doesn't support data binding. WebSocket messages dispatched to this remote method will only be in the `string` format.\n\nThe `websocket:Caller` has `writeTextMessage`, `writeBinaryMessage`, `ping`, `pong`, and, `close` as remote methods. Unlike earlier versions, `writeTextMessage` doesn't support data binding. Complete messages only in the string format will be accepted by this.\n\n**New syntax:**\n\n```ballerina   \ncaller->writeTextMessage(text);\ncaller->writeBinaryMessage(byteArr);\n```\n\n- Introduced a WebSocket Async client\n    The WebSocket module now has a `websocket:AsyncClient`. This client can take in a `websocket:Service` as a callback service to receive WebSocket messages at the client initialization. This service has a predefined set of remote methods like `onTextMessage`, `onBinaryMessage`, `onError`, `onPing`, `onPong`, `onOpen`, and `onClose`. \n\n    **New syntax**\n\n    ```ballerina\n    import ballerina/websocket;\n\n    public function main() returns websocket:Error? {\n        websocket:AsyncClient wsClientEp = check new (\"ws://echo.websocket.org\", new ClientService());\n        var err = wsClientEp->writeTextMessage(\"Hello World!\");\n    }\n\n    service class ClientService {\n        *websocket:Service;\n        remote function onTextMessage(websocket:Caller conn, string text) {\n        }\n    }\n    ```\n\n    The `websocket:AsyncClient` has the `writeTextMessage`, `writeBinaryMessage`, `ping`, `pong`, and `close` remote methods. \n\n    **New syntax:**\n\n    ```ballerina\n    asyncClient>writeTextMessage(text);\n    asyncClient>writeBinaryMessage(byteArr);\n    ```\n\n- Improved the listener/client return type to union with error\n    Listener and client initialization may return an error now. When the listener is used in a listener declaration, module initialization will fail if the listener initialization returns an error.\n\n    **New syntax:**\n\n    ```ballerina\n    websocket:Listener|websocket:Error ep = new (9090); \n    websocket:AsyncClient|websocket:Error wsClient = new (\"ws://echo.websocket.org\");\n    ```\n\n##### gRPC module improvements\n\n###### Service changes\n\n- Enable returning specific data types directly from the remote methods (even record types and streams).\n    ```ballerina\n    service \"Chat\" on ep {\n        remote function chat(stream<string, error?> clientStream) returns stream<string, error?> {\n        }\n    }\n    ```\n- Add support to send/receive custom headers in the request/response path.\n\n###### Client changes\n\n- Clients have the capability to receive a stream object in the server streaming scenario.\n    ```ballerina\n    stream<string, grpc:Error?> result = check endpoint->chat(\"WSO2\");\n    ```\n- In the client and bidirectional streaming use cases, it returns a streaming client that has the capability to read and write data.\n    ```ballerina\n    grpc:StreamingClient streamingClient = check endpoint->chat();\n    // Send messages\n    check streamingClient->send(msg);\n    // Receives messages\n    var result = streamingClient->receive();\n    ```\n- Added the support to send/receive custom headers in the request/response path.\n\n###### Protobuf tool\n\n- Generate a custom caller object from the Protobuf tool\n- Generate a custom streaming client from the Protobuf tool\n- Update the Protobuf tool to generate specific types using langlib data types\n\n##### Security improvements\n\nBallerina listener authentication and authorization, and client authentication were completely redesigned. The new design is compatible with most of the standard libraries like HTTP, gRPC, WebSocket, etc.,\n\n###### HTTP listener authentication and authorization\n\nA Ballerina HTTP listener can be configured to authenticate and authorize the inbound requests. Ballerina has built-in support for the following listener authentication mechanisms.\n\n- Basic authentication\n- LDAP user store\n- JWT authentication\n- OAuth2 authentication\n\nFor more information, see [HTTP Listener Authentication and Authorization](/swan-lake/learn/security/authentication-and-authorization/#http-listener-authentication-and-authorization).\n\n###### HTTP client authentication\n\nThe Ballerina HTTP client can be configured to send authentication information to the endpoint being invoked. Ballerina has built-in support for the following client authentication mechanisms.\n\n- Basic authentication\n- JWT authentication\n- Self-signed JWT\n- Bearer token\n- OAuth2 authentication\n- Client credentials grant type\n- Password grant type\n- Direct token type\n\nFor more information, see [HTTP Client Authentication](/swan-lake/learn/security/authentication-and-authorization/#http-client-authentication).\n\n##### GraphQL module improvements\n\n###### Introspection support\n\nBallerina GraphQL services now support introspection queries on the schema.\n\n###### Improved resource methods\n\nGraphQL resources may now return error values.\n\n##### Common changes in messaging modules\n\n- The `resource` methods are changed to `remote` methods in the new listener APIs. \n- The `service` name is given as a string with the new Ballerina language changes.\n\n##### TCP module improvements\n\nThe Socket module is replaced by the TCP module. Therefore, the import statement needs to be changed from `ballerina/socket` to `ballerina/tcp`.\n\nNew APIs for the client and listener are introduced in the TCP module.\n\n###### Client changes\n\n- `tcp:Client` initialization may now return `tcp:Error` if an error occurs while initializing the client.\n- The name of the `write` method changed to `writeBytes`. You don’t have to explicitly write a while loop to ensure the data is written completely as before. Instead, the `writeBytes` method ensures to write the data completely.\n- The name of the `read` method changed to `readBytes`. This method now returns `readonly & byte[]` instead of `[byte[], int]`.\n\n**New syntax:**\n\n```ballerina\nimport ballerina/tcp;\n\npublic function main() returns tcp:Error? {\n\n    tcp:Client socketClient = check new (\"localhost\", 3000);\n\n    check socketClient->writeBytes(“Hello Ballerina”.toBytes());\n\n    readonly & byte[] receivedData = check socketClient->readBytes();\n\n    check socketClient->close();\n}\n```\n\n###### Service and listener changes\n\n**New syntax:**\n\n```ballerina\nlistener tcp:Listener socketListener = new (9090);\n```\n\nThe service type with resource methods is removed from the module. The new implementation has the following two types of services.\n\n1. `tcp:Service` which handles a TCP connection. This service has a predefined `onConnect` remote method that returns `tcp:ConnectionService` or `tcp:Error?`.\n2. `tcp: ConnectionService` which handles the traffic between the client and server. This can have the following optional remote methods.\n    - `remote function onBytes(readonly & byte[] data) returns Error? { }`\n    - `remote function onClose() returns Error? { }`\n    - `remote function onError(readonly & Error err) returns Error? { }`\n\nThe `read` method is removed from `tcp:Caller`. Also, the `write` method of `Caller` is renamed to `writeBytes`, which is similar to the Client’s `writeBytes` method.\n\n**New syntax:**\n\n```ballerina\nimport ballerina/tcp;\n\nservice on new tcp:Listener(3000) {\n    remote function onConnect(tcp:Caller caller) returns tcp:ConnectionService {\n        return new TCPService(caller);\n    }\n}\n\nservice class TCPService {\n    tcp:Caller caller;\n\n    public function init(tcp:Caller c) {\n        self.caller = c;\n    }\n\n    remote function onBytes(readonly & byte[] data) returns byte[]|tcp:Error? {\n        return data;\n    }\n\n    remote function onClose() returns tcp:Error? {\n    }\n\n    remote function onError(readonly & tcp:Error err) returns tcp:Error? {\n    }\n}\n```\n\n##### UDP module improvements\n\nThe UDP module has been moved out of the Socket module. Therefore, it is required to change the import from `ballerina/socket` to `ballerina/udp`.\n\n###### Client changes\n\n- `udp:Client` initialization may now return `udp:Error` if an error occurred while initializing the client.\n- The name of the `sendTo` method changed to `sendDatagram`. This takes a `udp:Datagram` as a parameter. You don’t need to explicitly write a while loop to ensure the data is written completely. The `writeBytes` method ensures to write the data completely.\n- The name of the `receiveFrom` method changed to `receiveDatagram`. This now returns `readonly & udp:Datagram` instead of `[byte[], int, socket:Address]`.\n\n    **New syntax:**\n\n    ```ballerina\n    import ballerina/udp;\n\n    public function main() returns udp:Error? {\n        udp:Client socketClient = check new;\n        udp:Datagram datagram = {\n            remoteHost: \"localhost\",\n            remotePort: 48829,\n            data: \"Hello Ballerina\".toBytes()\n        };\n        check socketClient->sendDatagram(datagram);\n        readonly & udp:Datagram result = check socketClient->receiveDatagram();\n        check socketClient->close();\n    }\n    ```\n\n  Introduced `ConnectClient` and `Listener` to the new UDP module as follows.\n\n    **ConnectClient:**\n\n    ```ballerina\n    import ballerina/udp;\n\n    public function main() returns udp:Error? {\n        udp:ConnectClient socketClient = check new (\"localhost\", 48829);\n        check socketClient->writeBytes(\"Hello Ballerina\".toBytes());\n        readonly & byte[] result = check socketClient->readBytes();\n        check socketClient->close();\n    }\n    ```\n\n    **Listener:**\n\n    ```ballerina\n    import ballerina/udp;\n\n    service on new udp:Listener(48829) {\n\n        remote function onBytes(readonly & byte[] data, udp:Caller caller) returns (readonly & byte[])|udp:Error? {\n            return data;\n        }\n\n        remote function onError(readonly & udp:Error err) {\n        }\n    }\n    ```\n\n##### Kafka module improvements\n\n###### Client changes\n\n- The `kafka:Consumer` is separated into `kafka:Listener` (asynchronous) and `kafka:Consumer` (synchronous). \n- The return type of the `init` methods of the `kafka:Producer` and `kafka:Consumer` is changed to `Error?`. \n- The `subscribeToPattern()` method of the `kafka:Consumer` is changed to `subscribeWithPattern()`.\n- A new record type named `ProducerRecord` is introduced for sending messages. \n\n    ```ballerina\n    public type ProducerRecord record {|\n        string topic;\n        byte[] key?;\n        byte[] value;\n        int timestamp?;\n        int partition?;\n    |};\n    ```\n\n- The `send()` method of the `kafka:Producer` is changed to `sendProducerRecord(ProducerRecord producerRecord)`. An example of sending a message with the new API is given below.\n\n    ```ballerina\n    string message = \"Hello World, Ballerina\";\n    kafkaProducer->sendProducerRecord({topic: \"test-kafka-topic\",\n                                       value: message.toBytes()});\n    ```\n\n###### Service and listener changes\n\n- The return type of the `init` method of `kafka:Listener` is changed to `Error?`. \n- Has a single type of service that supports the remote method below:\n    - `onConsumerRecord(kafka:Caller caller, kafka:ConsumerRecord[] record) {}`\n- The `kafka:Caller` is introduced to remote functions to commit offsets of the consumed records.\n- The new syntax with the service changes is given below.\n\n    ```ballerina\n    listener kafka:Listener kafkaListener = new (consumerConfigs);\n\n    service kafka:Service on kafkaListener {\n        remote function onConsumerRecord(kafka:Caller caller, kafka:ConsumerRecord[] records) {\n        // Process consumed records\n        }\n    }\n    ```\n\n##### NATS module improvements\n\n - The `ballerinax/nats` module is split into two packages as `ballerinax/nats` (NATS client) and `ballerinax/stan` (NATS Streaming client).\n- The `nats:Connection` object is removed entirely. \n- The `nats:Producer` client is renamed to `nats:Client`. \n- The return type of the `nats:Client` client is changed to `Error?`.\n- The `nats:Message` object is changed into a record type. \n\n    ```ballerina\n    public type Message record {|\n           byte[] content;\n           string subject;\n           string replyTo?;\n    |};\n    ```\n\n- The `publish()` method of the `nats:Producer` is changed to `publishMessage(Message message)` of the `nats:Client`. An example of sending a message with the new API is given below.\n\n    ```ballerina\n    string message = \"Hello from Ballerina\";\n\n    nats:Client natsClient = check new;\n\n    check natsClient->publishMessage({\n        content: message.toBytes(),\n        subject: \"demo.bbe.subject\"\n    });\n    ```\n\n###### Service and listener changes\n\n- The return type of the `init` method of `nats:Listener` is changed to `Error?`. \n- Has a single type of service that supports the two types of remote functions below:\n    - `onMessage(nats:Message message) {}`  \n    - `onRequest(nats:Message message) returns anydata {}` \n- A new `onRequest` remote method is introduced to directly reply to a message by returning a value if the `replyTo` subject is present.\n- If the subject name is not given in the `@nats:ServiceConfig`, the name of the service is considered as the subject name. \n- The new syntax with the service changes is given below.\n\n    ```ballerina\n    import ballerinax/nats;\n\n    listener nats:Listener subscription = new;\n\n    @nats:ServiceConfig {subject: \"demo.bbe.*\"}\n    service nats:Service on subscription {\n\n        remote function onMessage(nats:Message message) {\n        }\n    }\n    ```\n\n##### NATS streaming module improvements\n\nA new package named `ballerinax/stan` is introduced to handle the NATS Streaming Server related functionality.\n\n###### Client changes\n\n- `nats:Connection` is removed entirely from the NATS Streaming client as well. \n- `stan:Client` is introduced to handle the client-side functionality. \n- An example of sending messages using the new `ballerinax/stan` package to a NATS Streaming server is given below. \n\n    ```ballerina\n    import ballerinax/stan;\n\n    public function main() returns error? {\n        string message = \"Hello from Ballerina\";\n        stan:Client stanClient = check new;\n        string result = check stanClient->publishMessage({\n            content: message.toBytes(),\n            subject: \"demo\"\n        });\n    }\n    ```\n\n###### Service and listener changes\n\n- The return type of the `init` method of `stan:Listener` is `Error?`. \n- Has a single type of service that supports the `onMessage` remote method below:\n    `onMessage(nats:Message message) {}`\n- If the subject name is not given in the `@stan:ServiceConfig`, the name of the service is considered as the subject name. \n- The new syntax with the service changes is given below.\n\n    ```ballerina\n    import ballerinax/stan;\n\n    listener stan:Listener lis = new;\n\n    @stan:ServiceConfig {subject: \"demo\"}\n    service stan:Service on lis {\n        remote function onMessage(stan:Message message) {\n        }\n    }\n    ```\n\n\n##### RabbitMQ module improvements\n\n###### Client changes\n\n- `rabbitmq:Connection` is removed entirely.\n- `rabbitmq:Channel` is renamed to `rabbitmq:Client`, which will handle the client-side functionality. The `init` method of `rabbitmq:Client` returns `Error?`.\n- The `rabbitmq:Message` object is changed into a record type.\n\n    ```ballerina\n    public type Message record {|\n        byte[] content;\n        string routingKey;\n        string exchange = \"\";\n        int deliveryTag?;\n        BasicProperties properties?;\n    |};\n    ```\n\n- The `queueDeclare()` method of `rabbtimq:Channel` is split into `queueDeclare()` and `queueAutoGenerate()` of `rabbtimq:Client`. \n- The `basicPublish()` method of `rabbitmq:Channel` is changed to `publishMessage(Message message)` of the `rabbitmq:Client`. An example of sending a message with the new API is given below.\n\n    ```ballerina\n    import ballerinax/rabbitmq;\n\n    public function main() returns error? {\n        rabbitmq:Client newClient = check new;\n\n        check newClient->queueDeclare(\"MyQueue\");\n\n        string message = \"Hello from Ballerina\";\n        check newClient->publishMessage({\n            content: message.toBytes(),\n            routingKey: \"MyQueue\"\n        });\n    }\n    ```\n\n###### Service and listener changes\n\n- The return type of the `init` method of `rabbitmq:Listener` is changed to `Error?`. \n- Has a single type of service that supports the three types of remote functions below:\n     - `onMessage(rabbitmq:Message message) {}`\n     - `onMessage(rabbitmq:Message message, rabbitmq:Caller caller) {}`\n     - `onRequest(rabbitmq:Message message) returns anydata {}`\n- A new `onRequest` method is introduced to directly reply to a message by returning a value if the `replyTo` subject is present.\n- If the subject name is not given in the `@rabbitmq:ServiceConfig`, the name of the service is considered as the subject name. \n- The new syntax with the service changes is given below.\n\n    ```ballerina\n    import ballerinax/rabbitmq;\n\n    listener rabbitmq:Listener channelListener = new;\n\n    @rabbitmq:ServiceConfig {queueName: \"MyQueue\"}\n    service rabbitmq:Service on channelListener {\n        remote function onMessage(rabbitmq:Message message) {\n        }\n    }\n    ```\n\n##### Time module improvements\n\nThe improvements below have been introduced to the `ballerina/time` module.\n\n- Added support for commonly-used date-time formatters in the `time:format()` and `time:parse()` APIs.\n- The hours, minutes, seconds, milliseconds, and zone ID parameters of the `time:createTime()` method have been made defaultable.\n- Introduced a new `time:Duration` record type to represent a chunk of time.\n- Modified the `time:addDuration()` and `time:subtractDuration()` methods to accept the `time:Duration` records to be added/subtracted.\n- Introduced a new `time:getDifference()` method to calculate the difference between two `time:Time` records.\n- Introduced a new `time:getTimezones()` method to retrieve the timezone IDs supported by the underlying native code.\n- Introduced an enum to represent the days of the week and modified the `time:getWeekday()` method to return this enum.\n\n##### Runtime module improvements\n\nThe methods below have been removed from the `runtime` module since these methods have moved to the `lang:runtime` lang library.\n\n- `sleep`\n- `getCallStack`\n\n##### Email module improvements\n\n###### Common changes for client and server configurations\n\n- `email:Email` is changed to `email:Message`.\n\n- Attachment support is improved to support file attachments directly with its content type. The new `email:Attachment` record is as follows.\n\n```ballerina\npublic type Attachment record {|\n    string filePath;\nstring contentType;\n|};\n```\n\n-  The `email:Message` record is modified to accept either a `string` or a `string[]` for the `to`, `cc`, `bcc`, and `replyTo` fields to add flexibility. An optional `htmlBody` field is added to support the HTML body. The new record is as follows. \n\n    > Note how the `attachments` field is modified.\n\n    ```ballerina\n    public type Message record {|\n        string|string[] to;\n        string subject;\n        string 'from;\n        string body;\n        string htmlBody?;\n        string|string[] cc?;\n        string|string[] bcc?;\n        string|string[] replyTo?;\n        string contentType?;\n        map<string> headers?;\n        string sender?;\n        Attachment|(mime:Entity|Attachment)[] attachments?;\n    |}\n    ```\n\n- The `enableSsl` boolean field is replaced with the `security` field to enable different types of transport-layer security. This new parameter is an enumeration with the `START_TLS_AUTO|START_TLS_ALWAYS|START_TLS_NEVER|SSL` options. The default/undefined value is `SSL`.\n\n- Self-signed certificate support is added while default SSL/TLS support is restricted to self-signed certificates with relevant configurations and CA-certified certificates. Hostname verification is made mandatory for SSL/TLS support. Anyway, hostname verification can be disabled with the configuration by passing the value of the `mail.smtp.ssl.checkserveridentity` property as `”false”`.\n\n###### Client changes\n\n- A new `sendEmail` method is added to the `email:SmtpClient` API to send emails directly without creating the `email:Email` record supporting extra fields as named optional parameters. An example of sending an email with the new API is given below.\n\n    ```ballerina\n    Error? response = smtpClient->sendEmail(toAddresses, subject, fromAddress, body, cc = ccAddresses, bcc = bccAddresses, \n        htmlBody = htmlBody, contentType = contentType, headers = {header1_name: \"header1_value\"}, sender = sender, replyTo = \n        replyToAddresses, attachments = bodyParts);\n    ```\n\n- The `read` method of `email:ImapClient`, `email:PopClient`, and `email:Listener` (i.e., `new email:PopListener` and `email:ImapListener`) are changed to `receiveEmailMessage`.\n\n- All client initializations return an `email:Error` when an error occurs during the initialization.\n\n###### Service and listener related changes\n\n- All listener initializations return an `email:Error` when an error occurs during the initialization.\n\n- The `email:Listener` is split into the `email:PopListener` and `email:ImapListener`. Therefore, the `protocol` field is removed from the new protocol-specific listeners. The `email:PopConfig` or `email:ImapConfig` that were used as fields for the `email:Listener` are not required for the new API implementation. Protocol configuration related fields are made parts of the new listeners.\n\n- The `resource` methods are changed to `remote` methods in the new listener APIs.\n\n- The `service` name is given as a string with the new Ballerina language changes.\n\n- The `onMessage` method of the `email:Listener` (i.e., `new email:PopListener` and `email:ImapListener`) is changed to `onEmailMessage`.\n\n- The `pollingInterval` field of the `email:Listener` is changed to `pollingIntervalInMillis` in the new listener APIs. That makes it consistent across other Ballerina modules, in which time durations are configured in milliseconds.\n\n- A sample POP3 listener is given below.\n\n    **New syntax:**\n\n    ```ballerina\n    listener email:PopListener emailListener = new ({\n        host: \"pop.email.com\",\n        username: \"reader@email.com\",\n        password: \"pass456\",\n        pollingIntervalInMillis: 2000,\n        port: 995\n    });\n\n    service \"emailObserver\" on emailListener {\n\n        remote function onEmailMessage(email:Message emailMessage) {\n\n        }\n\n        remote function onError(email:Error emailError) {\n            \n        }\n    }\n    ```\n\n##### WebSub module improvements\n\n###### Hub-related changes\n\n- Default implementation for the `websub:Hub` has been removed from the module.\n- API specification for the WebSub Hub is moved to the [`websubhub` module](#websubhub).\n\n##### Publisher-related changes\n\n- The implementation related to the `websub:PublisherClient` is moved to the `websubhub` module.\n\n##### Subscriber-related changes\n\n- The two new configurations below are introduced to the `@websub:SubscriberServiceConfiguration` for hub/topic discovery.\n  - `accept` - The expected media type\n  - `acceptLanguage` - The expected language type\n- API specification for the `@websub:SubscriberService` is updated with the changes below.\n  - The `onIntentVerification` and `onNotification` methods are removed.\n  - The `onSubscriptionVerification`, `onEventNotification`, and `onSubscriptionValidationDenied` methods are introduced.\n- The updated `websub:SubscriberService` sample implementation is as follows.\n\n    ```ballerina\n    listener websub:Listener testListener = new (9090);\n\n    @websub:SubscriberServiceConfig {\n        target: [\"http://localhost:9191/websub/hub\", \"http://websubpubtopic.com\"],\n        leaseSeconds: 36000,\n        secret: \"Kslk30SNF2AChs2\"\n    }\n    service /subscriber on testListener {\n    remote function onSubscriptionValidationDenied(SubscriptionDeniedError msg) returns Acknowledgement {\n        // execute subscription validation denied action\n        }\n\n    remote function onSubscriptionVerification(SubscriptionVerification msg) returns SubscriptionVerificationSuccess|\n        SubscriptionVerificationError {\n        // execute subscription verification action\n        }\n\n    remote function onEventNotification(ContentDistributionMessage event) {\n        // execute event notification received action\n        }\n    }\n    ```\n\n\n##### Introduced new modules \n\n###### Random\n\nThe `ballerina/random` module provides functions related to random number generation.\n\n###### RegEx\n\nThe `ballerina/regex` module provides RegEx utilities such as checking whether a string matches a given RegEx, replacing substrings, and splitting strings based on a RegEx.\n\n###### WebSubHub \n\n- This module contains the API specifications and implementations related to the WebSub Hub, WebSub Hub Client, and WebSub Publisher.\n- This is an inter-dependent module for the `websub` module.\n\n**Hub Implementation**\n\n- The default `websub:Hub` implementation has been removed and language-specific API abstraction is defined in the `websubhub:Service`.\n- Updated WebSub Hub sample implementation to comply with the new API specification is as follows.\n\n    ```ballerina\n    listener websubhub:Listener hubListener = new (9001);\n\n    service /websubhub on hubListener {\n        remote function onRegisterTopic(websubhub:TopicRegistration message) \n                returns websubhub:TopicRegistrationSuccess|websubhub:TopicRegistrationError {\n            // implement action to execute on topic-registration\n        }\n        \n        remote function onDeregisterTopic(websubhub:TopicDeregistration message) \n                returns websubhub:TopicDeregistrationSuccess|websubhub:TopicDeregistrationError {\n            // implement action to execute on topic-deregistration\n        }\n        remote function onUpdateMessage(websubhub:UpdateMessage msg) \n                returns websubhub:Acknowledgement|websubhub:UpdateMessageError {\n            // implement action to execute on content-update for topic\n        }\n        remote function onSubscription(websubhub:Subscription msg) \n                returns websubhub:SubscriptionAccepted|websubhub:SubscriptionPermanentRedirect|\n                    websubhub:SubscriptionTemporaryRedirect|websubhub:BadSubscriptionError|\n                    websubhub:InternalSubscriptionError {\n            // implement action to execute on new subscription\n        }\n        remote function onSubscriptionValidation(websubhub:Subscription msg) \n                returns websubhub:SubscriptionDeniedError? {\n            // implement action to execute on subscription validation\n        }\n    \n        remote function onSubscriptionIntentVerified(websubhub:VerifiedSubscription msg) {\n            // implement action to execute on subscription intent verification\n        }\n        remote function onUnsubscription(websubhub:Unsubscription msg) \n                returns websubhub:UnsubscriptionAccepted|websubhub:BadUnsubscriptionError|\n                    websubhub:InternalUnsubscriptionError {\n            // implement action to execute on unsubscription\n        }\n    \n        remote function onUnsubscriptionValidation(websubhub:Unsubscription msg) \n                returns websubhub:UnsubscriptionDeniedError? {\n            // implement action to execute on unsubscription validation\n        }\n        \n        remote function onUnsubscriptionIntentVerified(websubhub:VerifiedUnsubscription msg) {\n            // implement action to execute on unsubscription intent verification\n        }\n    }   \n    ```\n\n**Hub Client implementation**\n\n- `websubhub:Client` is introduced to distribute the updated content to subscribers.\n- The example below is a sample use-case of the WebSub Hub Client.\n\n    ```ballerina\n        service /websubhub on hubListener {\n        remote function onSubscriptionIntentVerified(websubhub:VerifiedSubscription msg) {\n\n                // Client configuration (e.g., retry config) can be passed if required.\n                websubhub:HubClient hubclient = check new (msg);\n                var responseFuture =  start notifySubscriber(hubclient);\n            }\n\n            function notifySubscriber(websubhub:HubClient hubclient) returns error? {\n                while (true) {\n                    // Fetch the messages to be delivered. \n                ContentDistributionSuccess | SubscriptionDeletedError | error publishResponse = check hubclient->notifyContentDistribution({content: \"This is sample content delivery\"});\n                }\n            }\n        }\n    ```\n\n**Publisher implementation**\n\n`websub:PublisherClient` is moved to `ballerina/websubhub` and can now be used as `websubhub:PublisherClient`.\n\n##### Removed modules \n\n###### Config\n\nThe configuration use cases are now covered under the `configurable` language feature. \n\n###### Math\n\nThe APIs related to random number generation were moved to the new `random` module. The rest of the APIs have replacements in the `lang.float` and `lang.int` packages.\n\n###### Stringutils\n\nThe regex-related APIs that were supported by this module have been moved to the new `regex` module. The rest of the APIs have replacements in the langlib packages.\n\n##### Rename system module to OS\n\nThe previous `ballerina/system` module is now renamed to `ballerina/os`. All the Operating System independent functionalities are included in this module.\n\n#### Observability\n\n- A new extension model, which separates each extension into a separate module is introduced.\n    - Observability can be included in the final JAR by adding the following configuration in the `Ballerina.toml` file.\n\n      ```toml\n      [build-options]\n      observabilityIncluded=true\n      ```\n\n    - The observability extension can be packaged by adding an import to the module in the code as shown in the example below.\n\n      ```ballerina\n      import ballerinax/prometheus as _;\n      ```\n\n- `Prometheus` and `Jaeger` extensions are introduced back.\n    - The `Prometheus` extension can be enabled by adding the following configuration in the `Config.toml` file.\n\n      ```toml\n      [ballerina.observe]\n      metricsEnabled=true\n      metricsReporter=\"prometheus\"\n      \n      [ballerinax.prometheus]\n      host=\"127.0.0.1\"  # Optional Configuration. Default value is localhost\n      port=9797         # Optional Configuration. Default value is 9797\n      ```\n\n    - The `Jaeger` extension can be enabled by adding the following config.\n\n      ```toml\n      [ballerina.observe]\n      tracingEnabled=true\n      tracingProvider=\"jaeger\"\n      \n      [ballerinax.jaeger]\n      agentHostname=\"127.0.0.1\"  # Optional Configuration. Default value is localhost\n      agentPort=6831             # Optional Configuration. Default value is 6831\n      ```\n\n    - By default, the `Jaeger` extension now publishes traces to the Jaeger Agent using the `jaeger.thrift` over the compact Thrift protocol.  \n\n#### Code to Cloud\n\n- The Kubernetes artifacts can be generated using the `--cloud=k8s` build option. The `import ballerina/cloud as _` import is no longer required.\n- VS code plugin support for the `Kubernetes.toml`\n    - Code Completion based on the c2c specification.\n    - Code Actions add/modify the probes and environments based on the source code.\n\n#### Breaking changes\n\n- Resource method declarations are no longer allowed in object-type descriptors.\n- Resource methods are not considered to be part of the type.\n- Non-`isolated` service variables defined outside an `isolated` function can be accessed within the function only if the variable is a `final` variable and the type is a subtype of `readonly`.\n- The `@icon` annotation has been replaced with the `@display` annotation.\n- The value type of XML iteration, which was previously `xml|string` is now `xml`. Moreover, the value type of `xml<T>` iteration is now `T`. \n\n#### Taint analyzer update\n\nWith this release, the taint analyzer does not produce taint errors unless explicitly enabled. However, the taint analyzer still performs the taint flow analysis without producing errors if error logging is not enabled.\n\nThis is enabled via the build option below in the `Ballerina.toml` file\n\n```toml\n[build-options]\ntaintCheck = true\n```\n\nor else, by using the `--taint-check` option in the Ballerina CLI tools as follows.\n\n```bash\nbal run --taint-check [file.bal | project]\nbal build --taint-check [file.bal | project]\n```\n","id":"swan-lake-alpha1"},"__N_SSG":true}