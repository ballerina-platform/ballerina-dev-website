{"pageProps":{"frontmatter":{"title":"Observe tracing","description":"See how Ballerina supports observing tracing of Ballerina programs.","keywords":"ballerina, observability, tracing, jaeger","permalink":"/learn/observe-tracing/","active":"observe-tracing","intro":"Tracing provides information regarding the roundtrip of a service invocation based on the concept of spans, which are structured in a hierarchy based on the cause and effect concept."},"content":"\nA trace can spread across several services that can be\ndeployed in several nodes, depicting a high-level view of interconnections among services as well, hence coining the\nterm distributed tracing.\n\nA span is a logical unit of work, which encapsulates a start and end time as well as metadata to give more meaning to\nthe unit of work being completed. For example, a span representing a client call to an HTTP endpoint would give the\nuser the latency of the client call and metadata like the HTTP URL being called, and the HTTP method used. If the span\nrepresents an SQL client call, the metadata would include the query being executed.\n\nTracing gives the user a high-level view of how a single service invocation is processed across several distributed\nmicroservices.\n\n* Identify service bottlenecks - The user can monitor the latencies and identify when a service invocation slows down,\npinpoint where the slowing down happens (by looking at the span latencies), and take action to improve the latency.\n* Error identification - If an error occurs during the service invocation, it will show up in the list of traces.\nThe user can easily identify where the error occurred and information of the error will be attached to the relevant\nspan as metadata.\n\nBallerina supports <a href=\"https://opentelemetry.io/\" target=\"_blank\">OpenTelemetry</a> standards by default. This means that Ballerina services can be traced using OpenTelemetry implementations like Jaeger.\n\n### Configure advanced tracing \nTracing can be enabled in Ballerina with the few configurations mentioned above in the\n[Observe a Ballerina service](#observe-a-ballerina-service) section.\nThis section mainly focuses on the configuration options with the description and possible values.\n\nA sample configuration that enables tracing and uses Jaeger as the tracer is provided below.\n\n```toml\n[ballerina.observe]\ntracingEnabled=true\ntracingProvider=\"jaeger\"\n```\n\nThe table below provides the descriptions of each configuration option and possible values that can be assigned.\n\nConfiguration key | Description | Default value | Possible values\n--- | --- | --- | --- \nballerina.observe.tracingEnabled | Whether tracing is enabled (true) or disabled (false) | false | true or false\nballerina.observe.tracingProvider | The tracer name, which implements the tracer interface. | choreo | jaeger or the name of the tracer of any custom implementation.\n\n#### Use the Jaeger extension\nBelow are the sample configuration options that are available to support Jaeger as the tracer provider in Ballerina.\n\n```toml\n[ballerina.observe]\ntracingEnabled=true\ntracingProvider=\"jaeger\"\n\n[ballerinax.jaeger]\nagentHostname=\"localhost\"\nagentPort=4317\nsamplerType=\"const\"\nsamplerParam=1.0\nreporterFlushInterval=2000\nreporterBufferSize=1000\n```\n\nThe table below provides the descriptions of each configuration option and possible values that can be assigned.\n\nConfiguration key | Description | Default value | Possible values \n--- | --- | --- | --- \nballerina.observe. agentHostname | Hostname of the Jaeger agent | localhost | IP or hostname of the Jaeger agent. If it is running on the same node as Ballerina, it can be localhost. \nballerina.observe. agentPort | Port of the Jaeger agent | 4317 | The port on which the Jaeger agent is listening.\nballerina.observe. samplerType | Type of the sampling methods used in the Jaeger tracer. | const | `const`, `probabilistic`, or `ratelimiting`.\nballerina.observe. samplerParam | It is a floating value. Based on the sampler type, the effect of the sampler param varies | 1.0 | For `const` `0` (no sampling) or `1` (sample all spans), for `probabilistic` `0.0` to `1.0`, for `ratelimiting` any positive integer (rate per second).\nballerina.observe. reporterFlushInterval | The Jaeger client will be sending the spans to the agent at this interval. | 2000 | Any positive integer value.\nballerina.observe. reporterBufferSize | Queue size of the Jaeger client. | 2000 | Any positive integer value.\n\n### Set up the external systems for tracing\nYou can configure Ballerina to support distributed tracing with Jaeger. This section focuses on configuring\nJaeger with Docker as a quick installation.\n\n#### Set up the Jaeger server\n\n>**Tip:** There are many possible ways to deploy Jaeger. For more information, see <a href=\"https://www.jaegertracing.io/docs/deployment/\" target=\"_blank\">Jaeger Deployment</a>.\n> The easiest option is to use executable binaries listed in <a href=\"https://www.jaegertracing.io/download/\" target=\"_blank\">Downloads</a>.\n\n1. Install Jaeger via Docker and start the Docker container by executing the command below.\n\n    ```\n    $ docker run -d -p 13133:13133 -p 16686:16686 -p 4317:4317 jaegertracing/all-in-one\n    ```\n\n2. Go to <http://localhost:16686> and load the web UI of Jaeger to make sure it is functioning properly. You can select the service which you need tracing information find traces.\n\n    The image below is the sample tracing information you can see in Jaeger.\n    \n    ![Jaeger Tracing Dashboard](/learn/images/jaeger-tracing-dashboard.png \"Jaeger Tracing Dashboard\")\n","id":"observe-tracing","sub":"observability","third":"","slug":"observability/observe-tracing","codes":"[[-731719950,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color:#fff;color:#24292e\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">[</span><span style=\\\"color:#6F42C1\\\">ballerina</span><span style=\\\"color:#24292E\\\">.</span><span style=\\\"color:#6F42C1\\\">observe</span><span style=\\\"color:#24292E\\\">]</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">tracingEnabled=</span><span style=\\\"color:#005CC5\\\">true</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">tracingProvider=</span><span style=\\\"color:#032F62\\\">\\\"jaeger\\\"</span></span></code></pre>\"],[-2109807954,\"<pre class=\\\"shiki github-light\\\" style=\\\"background-color:#fff;color:#24292e\\\" tabindex=\\\"0\\\"><code><span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">[</span><span style=\\\"color:#6F42C1\\\">ballerina</span><span style=\\\"color:#24292E\\\">.</span><span style=\\\"color:#6F42C1\\\">observe</span><span style=\\\"color:#24292E\\\">]</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">tracingEnabled=</span><span style=\\\"color:#005CC5\\\">true</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">tracingProvider=</span><span style=\\\"color:#032F62\\\">\\\"jaeger\\\"</span></span>\\n<span class=\\\"line\\\"></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">[</span><span style=\\\"color:#6F42C1\\\">ballerinax</span><span style=\\\"color:#24292E\\\">.</span><span style=\\\"color:#6F42C1\\\">jaeger</span><span style=\\\"color:#24292E\\\">]</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">agentHostname=</span><span style=\\\"color:#032F62\\\">\\\"localhost\\\"</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">agentPort=</span><span style=\\\"color:#005CC5\\\">4317</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">samplerType=</span><span style=\\\"color:#032F62\\\">\\\"const\\\"</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">samplerParam=</span><span style=\\\"color:#005CC5\\\">1.0</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">reporterFlushInterval=</span><span style=\\\"color:#005CC5\\\">2000</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#24292E\\\">reporterBufferSize=</span><span style=\\\"color:#005CC5\\\">1000</span></span></code></pre>\"]]"},"__N_SSG":true}