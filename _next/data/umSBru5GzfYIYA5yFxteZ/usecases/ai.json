{"pageProps":{"samples":{"bring-text-alive-with-openai-chats":{"frontmatter":{"title":"Bring text alive with OpenAI chat, completions, edit, and moderation APIs","description":"OpenAI’s text manipulation APIs allow you to bring the text alive and easily program with it. Ballerina connectors for these APIs give you type safe, structured ways to build applications quickly.","url":"","image":""},"code":""},"concurrency-simplified-for-ai-development":{"frontmatter":{"title":"Concurrency simplified for AI development","description":"Ballerina's concurrency model is ideal for writing API-powered AI applications. Its sequence diagrams and concurrency control capabilities make it easy to manage and visualize complex operations, leading to more efficient and reliable AI solutions.","url":"https://github.com/ballerina-guides/ai-samples/blob/main/create_and_send_customized_greeting_cards_using_openai/service.bal","image":""},"code":"<pre class=\"shiki github-light\" style=\"background-color: #fff\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #D73A49\">fork</span><span style=\"color: #24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    </span><span style=\"color: #6A737D\">// Generate greeting text and design in parallel</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    </span><span style=\"color: #D73A49\">worker</span><span style=\"color: #24292E\"> greetingWorker </span><span style=\"color: #D73A49\">returns</span><span style=\"color: #24292E\"> </span><span style=\"color: #005CC5\">string</span><span style=\"color: #D73A49\">|error</span><span style=\"color: #24292E\">? {</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        </span><span style=\"color: #005CC5\">string</span><span style=\"color: #24292E\"> prompt </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span></span>\n<span class=\"line\"><span style=\"color: #24292E\">            </span><span style=\"color: #005CC5\">string</span><span style=\"color: #24292E\"> </span><span style=\"color: #032F62\">`Generate a greeting for a/an ${</span><span style=\"color: #24292E\">occasion</span><span style=\"color: #032F62\">}</span></span>\n<span class=\"line\"><span style=\"color: #032F62\">                .${&quot;</span><span style=\"color: #005CC5\">\\n</span><span style=\"color: #032F62\">&quot;}Special notes: ${</span><span style=\"color: #24292E\">specialNotes</span><span style=\"color: #032F62\">}`</span><span style=\"color: #24292E\">;</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        text</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">CreateCompletionRequest textPrompt </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">            prompt,</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">            model</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> </span><span style=\"color: #032F62\">&quot;text-davinci-003&quot;</span><span style=\"color: #24292E\">,</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">            max_tokens</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> </span><span style=\"color: #005CC5\">100</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        };</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        text</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">CreateCompletionResponse completionRes </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span></span>\n<span class=\"line\"><span style=\"color: #24292E\">            </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> openaiText</span><span style=\"color: #D73A49\">-&gt;/</span><span style=\"color: #24292E\">completions.</span><span style=\"color: #6F42C1\">post</span><span style=\"color: #24292E\">(</span><span style=\"color: #E36209\">textPrompt</span><span style=\"color: #24292E\">);</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        </span><span style=\"color: #D73A49\">return</span><span style=\"color: #24292E\"> completionRes.choices[</span><span style=\"color: #005CC5\">0</span><span style=\"color: #24292E\">].text;</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    }</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    </span><span style=\"color: #D73A49\">worker</span><span style=\"color: #24292E\"> imageWorker </span><span style=\"color: #D73A49\">returns</span><span style=\"color: #24292E\"> </span><span style=\"color: #005CC5\">string</span><span style=\"color: #D73A49\">|error</span><span style=\"color: #24292E\">? {</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        </span><span style=\"color: #005CC5\">string</span><span style=\"color: #24292E\"> prompt </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span><span style=\"color: #005CC5\">string</span><span style=\"color: #24292E\"> </span><span style=\"color: #032F62\">`Greeting card design for ${</span><span style=\"color: #24292E\">occasion</span><span style=\"color: #032F62\">}, ${</span><span style=\"color: #24292E\">specialNotes</span><span style=\"color: #032F62\">}`</span><span style=\"color: #24292E\">;</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        images</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">CreateImageRequest imagePrompt </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">            prompt</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        };</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        images</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">ImagesResponse imageRes </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span></span>\n<span class=\"line\"><span style=\"color: #24292E\">            </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> openaiImages</span><span style=\"color: #D73A49\">-&gt;/</span><span style=\"color: #24292E\">images</span><span style=\"color: #D73A49\">/</span><span style=\"color: #24292E\">generations.</span><span style=\"color: #6F42C1\">post</span><span style=\"color: #24292E\">(</span><span style=\"color: #E36209\">imagePrompt</span><span style=\"color: #24292E\">);</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        </span><span style=\"color: #D73A49\">return</span><span style=\"color: #24292E\"> imageRes.data[</span><span style=\"color: #005CC5\">0</span><span style=\"color: #24292E\">].url;</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    }</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">}</span></span></code></pre>"},"connectors-for-vector-databases":{"frontmatter":{"title":"Connectors for Vector databases","description":"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book.","url":"","image":"images/screenshots-collage-final-image-transparent-v5.png"},"code":""},"create-ai-powered-apis":{"frontmatter":{"title":"Create AI-powered APIs, automations, and event handlers","description":"Effortlessly tackle any AI-powered API integration by leveraging the network abstractions of Ballerina to create APIs, automations, and event handlers for your applications.","url":"https://github.com/ballerina-guides/ai-samples/blob/main/question_answering_based_on_context_using_openai/main.bal","image":""},"code":"<pre class=\"shiki github-light\" style=\"background-color: #fff\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #D73A49\">service</span><span style=\"color: #24292E\"> / </span><span style=\"color: #D73A49\">on</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">new</span><span style=\"color: #24292E\"> http:Listener(</span><span style=\"color: #005CC5\">8080</span><span style=\"color: #24292E\">) {</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #24292E\">    </span><span style=\"color: #D73A49\">map&lt;</span><span style=\"color: #005CC5\">string</span><span style=\"color: #D73A49\">&gt;</span><span style=\"color: #24292E\"> documents </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> {};</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    </span><span style=\"color: #D73A49\">map&lt;</span><span style=\"color: #005CC5\">float</span><span style=\"color: #24292E\">[]</span><span style=\"color: #D73A49\">&gt;</span><span style=\"color: #24292E\"> docEmbeddings </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> {};</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #24292E\">    </span><span style=\"color: #D73A49\">function</span><span style=\"color: #24292E\"> </span><span style=\"color: #6F42C1\">init</span><span style=\"color: #24292E\">() </span><span style=\"color: #D73A49\">returns</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">error?</span><span style=\"color: #24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        sheets</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">Range range </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> gSheets</span><span style=\"color: #D73A49\">-&gt;</span><span style=\"color: #6F42C1\">getRange</span><span style=\"color: #24292E\">(</span><span style=\"color: #E36209\">sheetId</span><span style=\"color: #24292E\">, </span><span style=\"color: #E36209\">sheetName</span><span style=\"color: #24292E\">, </span><span style=\"color: #032F62\">&quot;A2:B&quot;</span><span style=\"color: #24292E\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #24292E\">        </span><span style=\"color: #6A737D\">//Populate the dictionaries with the content and embeddings for each doc.</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        </span><span style=\"color: #D73A49\">foreach </span><span style=\"color: #24292E\">any[] row </span><span style=\"color: #D73A49\">in</span><span style=\"color: #24292E\"> range.values {</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">            </span><span style=\"color: #005CC5\">string</span><span style=\"color: #24292E\"> title </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">&lt;</span><span style=\"color: #005CC5\">string</span><span style=\"color: #D73A49\">&gt;</span><span style=\"color: #24292E\">row[</span><span style=\"color: #005CC5\">0</span><span style=\"color: #24292E\">];</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">            </span><span style=\"color: #005CC5\">string</span><span style=\"color: #24292E\"> content </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">&lt;</span><span style=\"color: #005CC5\">string</span><span style=\"color: #D73A49\">&gt;</span><span style=\"color: #24292E\">row[</span><span style=\"color: #005CC5\">1</span><span style=\"color: #24292E\">];</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">            </span><span style=\"color: #005CC5\">self</span><span style=\"color: #24292E\">.documents[title] </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> content;</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">            </span><span style=\"color: #005CC5\">self</span><span style=\"color: #24292E\">.docEmbeddings[title] </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> </span><span style=\"color: #6F42C1\">getEmbedding</span><span style=\"color: #24292E\">(</span><span style=\"color: #005CC5\">string</span><span style=\"color: #24292E\"> </span><span style=\"color: #032F62\">`${</span><span style=\"color: #24292E\">title</span><span style=\"color: #032F62\">} ${&quot;</span><span style=\"color: #005CC5\">\\n</span><span style=\"color: #032F62\">&quot;} ${</span></span>\n<span class=\"line\"><span style=\"color: #032F62\">                                                                   </span><span style=\"color: #24292E\">content</span><span style=\"color: #032F62\">}`</span><span style=\"color: #24292E\">);</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        }</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #24292E\">    </span><span style=\"color: #D73A49\">resource</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">function</span><span style=\"color: #24292E\"> </span><span style=\"color: #6F42C1\">get</span><span style=\"color: #24292E\"> </span><span style=\"color: #6F42C1\">answer</span><span style=\"color: #24292E\">(</span><span style=\"color: #005CC5\">string</span><span style=\"color: #24292E\"> </span><span style=\"color: #E36209\">question</span><span style=\"color: #24292E\">) </span><span style=\"color: #D73A49\">returns</span><span style=\"color: #24292E\"> </span><span style=\"color: #005CC5\">string</span><span style=\"color: #D73A49\">?|error</span><span style=\"color: #24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        </span><span style=\"color: #005CC5\">string</span><span style=\"color: #24292E\"> prompt </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> </span><span style=\"color: #6F42C1\">constructPrompt</span><span style=\"color: #24292E\">(</span><span style=\"color: #E36209\">question</span><span style=\"color: #24292E\">, </span><span style=\"color: #005CC5\">self</span><span style=\"color: #24292E\">.documents, </span></span>\n<span class=\"line\"><span style=\"color: #24292E\">                        </span><span style=\"color: #005CC5\">self</span><span style=\"color: #24292E\">.docEmbeddings);</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        text</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">CreateCompletionRequest prmt </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">            prompt</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> prompt,</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">            model</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> </span><span style=\"color: #032F62\">&quot;text-davinci-003&quot;</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        };</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        text</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">CreateCompletionResponse completionRes </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span></span>\n<span class=\"line\"><span style=\"color: #24292E\">            </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> openaiText</span><span style=\"color: #D73A49\">-&gt;/</span><span style=\"color: #24292E\">completions.</span><span style=\"color: #6F42C1\">post</span><span style=\"color: #24292E\">(</span><span style=\"color: #E36209\">prmt</span><span style=\"color: #24292E\">);</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        </span><span style=\"color: #D73A49\">return</span><span style=\"color: #24292E\"> completionRes.choices[</span><span style=\"color: #005CC5\">0</span><span style=\"color: #24292E\">].text;</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    }</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">}</span></span></code></pre>"},"create-images-with-dall-e":{"frontmatter":{"title":"Create images with DALL-E","description":"OpenAI’s DALL-E image APIs generate or edit images with text-based instructions. Ballerina’s powerful standard library makes uploading, downloading, and processing images a breeze.","url":"","image":""},"code":""},"dalle1":{"frontmatter":{"title":"","description":"","url":"","image":""},"code":"<pre class=\"shiki github-light\" style=\"background-color: #fff\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #D73A49\">public</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">function</span><span style=\"color: #24292E\"> </span><span style=\"color: #6F42C1\">main</span><span style=\"color: #24292E\">() </span><span style=\"color: #D73A49\">returns</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">error?</span><span style=\"color: #24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    sheets</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">Client gSheets </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">new</span><span style=\"color: #24292E\"> ({auth</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> {token: googleAccessToken}});</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    images</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">Client openAIImages </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">new</span><span style=\"color: #24292E\"> ({auth</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> {token: openAIToken}});</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    drive</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">Client gDrive </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">new</span><span style=\"color: #24292E\"> ({auth</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> {token: googleAccessToken}});</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #24292E\">    sheets</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">Column range </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> gSheets</span><span style=\"color: #D73A49\">-&gt;</span><span style=\"color: #6F42C1\">getColumn</span><span style=\"color: #24292E\">(</span><span style=\"color: #E36209\">sheetId</span><span style=\"color: #24292E\">, </span><span style=\"color: #E36209\">sheetName</span><span style=\"color: #24292E\">, </span><span style=\"color: #032F62\">&quot;A&quot;</span><span style=\"color: #24292E\">);</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    </span><span style=\"color: #D73A49\">foreach </span><span style=\"color: #005CC5\">var</span><span style=\"color: #24292E\"> cell </span><span style=\"color: #D73A49\">in</span><span style=\"color: #24292E\"> range.values {</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        </span><span style=\"color: #005CC5\">string</span><span style=\"color: #24292E\"> prompt </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> cell.</span><span style=\"color: #6F42C1\">ensureType</span><span style=\"color: #24292E\">();</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        images</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">CreateImageRequest imagePrompt </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">            prompt,</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">            response_format</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> </span><span style=\"color: #032F62\">&quot;b64_json&quot;</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        };</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        images</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">ImagesResponse imageRes </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span></span>\n<span class=\"line\"><span style=\"color: #24292E\">            </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> openAIImages</span><span style=\"color: #D73A49\">-&gt;/</span><span style=\"color: #24292E\">images</span><span style=\"color: #D73A49\">/</span><span style=\"color: #24292E\">generations.</span><span style=\"color: #6F42C1\">post</span><span style=\"color: #24292E\">(</span><span style=\"color: #E36209\">imagePrompt</span><span style=\"color: #24292E\">);</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        </span><span style=\"color: #005CC5\">string</span><span style=\"color: #24292E\"> encodedImage </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> imageRes.data[</span><span style=\"color: #005CC5\">0</span><span style=\"color: #24292E\">].b64_json.</span><span style=\"color: #6F42C1\">ensureType</span><span style=\"color: #24292E\">();</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #24292E\">        </span><span style=\"color: #6A737D\">// Decode the Base64 string and store image in Google Drive</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        </span><span style=\"color: #005CC5\">byte</span><span style=\"color: #24292E\">[] imageBytes </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> array</span><span style=\"color: #D73A49\">:</span><span style=\"color: #6F42C1\">fromBase64</span><span style=\"color: #24292E\">(</span><span style=\"color: #E36209\">encodedImage</span><span style=\"color: #24292E\">);</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        _ </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> gDrive</span><span style=\"color: #D73A49\">-&gt;</span><span style=\"color: #6F42C1\">uploadFileUsingByteArray</span><span style=\"color: #24292E\">(</span><span style=\"color: #E36209\">imageBytes</span><span style=\"color: #24292E\">, </span></span>\n<span class=\"line\"><span style=\"color: #24292E\">                          </span><span style=\"color: #005CC5\">string</span><span style=\"color: #24292E\"> </span><span style=\"color: #032F62\">`${</span><span style=\"color: #24292E\">prompt</span><span style=\"color: #032F62\">}.png`</span><span style=\"color: #24292E\">, </span><span style=\"color: #E36209\">gDriveFolderId</span><span style=\"color: #24292E\">);</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    }</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">}</span></span></code></pre>"},"dalle2":{"frontmatter":{"title":"","description":"","url":"","image":""},"code":"<pre class=\"shiki github-light\" style=\"background-color: #fff\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #D73A49\">service</span><span style=\"color: #24292E\"> / </span><span style=\"color: #D73A49\">on</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">new</span><span style=\"color: #24292E\"> http:Listener(</span><span style=\"color: #005CC5\">9090</span><span style=\"color: #24292E\">) {</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    </span><span style=\"color: #D73A49\">resource</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">function</span><span style=\"color: #24292E\"> </span><span style=\"color: #6F42C1\">post</span><span style=\"color: #24292E\"> </span><span style=\"color: #6F42C1\">products</span><span style=\"color: #24292E\">() </span><span style=\"color: #D73A49\">returns</span><span style=\"color: #24292E\"> </span><span style=\"color: #005CC5\">int</span><span style=\"color: #D73A49\">|error</span><span style=\"color: #24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        </span><span style=\"color: #6A737D\">// Get the product details from the last inserted row of the Google Sheet.</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        sheets</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">Range range </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> gsheets</span><span style=\"color: #D73A49\">-&gt;</span><span style=\"color: #6F42C1\">getRange</span><span style=\"color: #24292E\">(</span><span style=\"color: #E36209\">googleSheetId</span><span style=\"color: #24292E\">, </span><span style=\"color: #032F62\">&quot;Sheet1&quot;</span><span style=\"color: #24292E\">, </span><span style=\"color: #032F62\">&quot;A2:F&quot;</span><span style=\"color: #24292E\">);</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        </span><span style=\"color: #005CC5\">var</span><span style=\"color: #24292E\"> [name, benefits, features, productType] </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span><span style=\"color: #6F42C1\">getProduct</span><span style=\"color: #24292E\">(</span><span style=\"color: #E36209\">range</span><span style=\"color: #24292E\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #24292E\">        </span><span style=\"color: #6A737D\">// Generate a product description from OpenAI for a given product name.</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        text</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">CreateCompletionRequest textPrompt </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">            prompt</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> string </span><span style=\"color: #032F62\">`generate a product descirption in 250 words about ${</span><span style=\"color: #24292E\">name</span><span style=\"color: #032F62\">}`</span><span style=\"color: #24292E\">,</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">            model</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> </span><span style=\"color: #032F62\">&quot;text-davinci-003&quot;</span><span style=\"color: #24292E\">,</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">            max_tokens</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> </span><span style=\"color: #005CC5\">100</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        };</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #24292E\">        text</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">CreateCompletionResponse completionRes </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span></span>\n<span class=\"line\"><span style=\"color: #24292E\">            </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> openAIText</span><span style=\"color: #D73A49\">-&gt;/</span><span style=\"color: #24292E\">completions.</span><span style=\"color: #6F42C1\">post</span><span style=\"color: #24292E\">(</span><span style=\"color: #E36209\">textPrompt</span><span style=\"color: #24292E\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #24292E\">        </span><span style=\"color: #6A737D\">// Generate a product image from OpenAI for the given product.</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        images</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">CreateImageRequest imagePrmt </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">            prompt</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> string </span><span style=\"color: #032F62\">`${</span><span style=\"color: #24292E\">name</span><span style=\"color: #032F62\">}, </span></span>\n<span class=\"line\"><span style=\"color: #032F62\">            ${</span><span style=\"color: #24292E\">benefits</span><span style=\"color: #032F62\">}, </span></span>\n<span class=\"line\"><span style=\"color: #032F62\">            ${</span><span style=\"color: #24292E\">features</span><span style=\"color: #032F62\">}`</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        };</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        images</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">ImagesResponse imageRes </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span></span>\n<span class=\"line\"><span style=\"color: #24292E\">            </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> openAIImages</span><span style=\"color: #D73A49\">-&gt;/</span><span style=\"color: #24292E\">images</span><span style=\"color: #D73A49\">/</span><span style=\"color: #24292E\">generations.</span><span style=\"color: #6F42C1\">post</span><span style=\"color: #24292E\">(</span><span style=\"color: #E36209\">imagePrmt</span><span style=\"color: #24292E\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #24292E\">        </span><span style=\"color: #6A737D\">// Create a product in Shopify.</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        shopify</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">CreateProduct product </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">            product</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">                title</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> name,</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">                body_html</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> completionRes.choices[</span><span style=\"color: #005CC5\">0</span><span style=\"color: #24292E\">].text,</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">                tags</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> features,</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">                product_type</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> productType,</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">                images</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> [{</span><span style=\"color: #6F42C1\">src</span><span style=\"color: #24292E\">: imageRes.data[</span><span style=\"color: #005CC5\">0</span><span style=\"color: #24292E\">].url}]</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">            }</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        };</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        shopify</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">ProductObject prodObj </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> shopify</span><span style=\"color: #D73A49\">-&gt;</span><span style=\"color: #6F42C1\">createProduct</span><span style=\"color: #24292E\">(</span><span style=\"color: #E36209\">product</span><span style=\"color: #24292E\">);</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        </span><span style=\"color: #005CC5\">int</span><span style=\"color: #24292E\">? pid </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> prodObj?.product?.id;</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        </span><span style=\"color: #D73A49\">if</span><span style=\"color: #24292E\"> pid </span><span style=\"color: #D73A49\">is</span><span style=\"color: #24292E\"> () {</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">            </span><span style=\"color: #D73A49\">return</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">error</span><span style=\"color: #24292E\">(</span><span style=\"color: #032F62\">&quot;Error in creating product in Shopify&quot;</span><span style=\"color: #24292E\">);</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        }</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        </span><span style=\"color: #D73A49\">return</span><span style=\"color: #24292E\"> pid;</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    }</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">}</span></span></code></pre>"},"dalle3":{"frontmatter":{"title":"","description":"","url":"","image":""},"code":"<pre class=\"shiki github-light\" style=\"background-color: #fff\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #D73A49\">type</span><span style=\"color: #24292E\"> </span><span style=\"color: #6F42C1\">GreetingDetails</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">record</span><span style=\"color: #24292E\"> {</span><span style=\"color: #D73A49\">|</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    </span><span style=\"color: #005CC5\">string</span><span style=\"color: #24292E\"> occasion;</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    </span><span style=\"color: #005CC5\">string</span><span style=\"color: #24292E\"> recipientEmail;</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    </span><span style=\"color: #005CC5\">string</span><span style=\"color: #24292E\"> emailSubject;</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    </span><span style=\"color: #005CC5\">string</span><span style=\"color: #24292E\"> specialNotes?;</span></span>\n<span class=\"line\"><span style=\"color: #D73A49\">|</span><span style=\"color: #24292E\">};</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #D73A49\">service</span><span style=\"color: #24292E\"> / </span><span style=\"color: #D73A49\">on</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">new</span><span style=\"color: #24292E\"> http:Listener(</span><span style=\"color: #005CC5\">8080</span><span style=\"color: #24292E\">) {</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    </span><span style=\"color: #D73A49\">resource</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">function</span><span style=\"color: #24292E\"> </span><span style=\"color: #6F42C1\">post</span><span style=\"color: #24292E\"> </span><span style=\"color: #6F42C1\">greetingCard</span><span style=\"color: #24292E\">(@</span><span style=\"color: #005CC5\">http</span><span style=\"color: #24292E\">:</span><span style=\"color: #005CC5\">Payload</span><span style=\"color: #24292E\"> </span><span style=\"color: #E36209\">GreetingDetails</span><span style=\"color: #24292E\"> </span><span style=\"color: #E36209\">req</span><span style=\"color: #24292E\">) </span><span style=\"color: #D73A49\">returns</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">error?</span><span style=\"color: #24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        </span><span style=\"color: #005CC5\">string</span><span style=\"color: #24292E\"> occasion </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> req.occasion;</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        </span><span style=\"color: #005CC5\">string</span><span style=\"color: #24292E\"> specialNotes </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> req.specialNotes </span><span style=\"color: #D73A49\">?:</span><span style=\"color: #24292E\"> </span><span style=\"color: #032F62\">&quot;&quot;</span><span style=\"color: #24292E\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #24292E\">        </span><span style=\"color: #D73A49\">fork</span><span style=\"color: #24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">            </span><span style=\"color: #6A737D\">// Generate greeting text and design in parallel</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">            </span><span style=\"color: #D73A49\">worker</span><span style=\"color: #24292E\"> greetingWorker </span><span style=\"color: #D73A49\">returns</span><span style=\"color: #24292E\"> </span><span style=\"color: #005CC5\">string</span><span style=\"color: #D73A49\">|error</span><span style=\"color: #24292E\">? {</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">                text</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">CreateCompletionRequest textPrompt </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">                    prompt</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> string </span><span style=\"color: #032F62\">`Generate a greeting for a/an ${</span></span>\n<span class=\"line\"><span style=\"color: #032F62\">                                    </span><span style=\"color: #24292E\">occasion</span><span style=\"color: #032F62\">}.${&quot;</span><span style=\"color: #005CC5\">\\n</span><span style=\"color: #032F62\">&quot;}Special notes: ${</span><span style=\"color: #24292E\">specialNotes</span><span style=\"color: #032F62\">}`</span><span style=\"color: #24292E\">,</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">                    model</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> </span><span style=\"color: #032F62\">&quot;text-davinci-003&quot;</span><span style=\"color: #24292E\">,</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">                    max_tokens</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> </span><span style=\"color: #005CC5\">100</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">                };</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">                text</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">CreateCompletionResponse completionRes </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span></span>\n<span class=\"line\"><span style=\"color: #24292E\">                    </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> openaiText</span><span style=\"color: #D73A49\">-&gt;/</span><span style=\"color: #24292E\">completions.</span><span style=\"color: #6F42C1\">post</span><span style=\"color: #24292E\">(</span><span style=\"color: #E36209\">textPrompt</span><span style=\"color: #24292E\">);</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">                </span><span style=\"color: #D73A49\">return</span><span style=\"color: #24292E\"> completionRes.choices[</span><span style=\"color: #005CC5\">0</span><span style=\"color: #24292E\">].text;</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">            }</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">            </span><span style=\"color: #D73A49\">worker</span><span style=\"color: #24292E\"> imageWorker </span><span style=\"color: #D73A49\">returns</span><span style=\"color: #24292E\"> </span><span style=\"color: #005CC5\">string</span><span style=\"color: #D73A49\">|error</span><span style=\"color: #24292E\">? {</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">                images</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">CreateImageRequest imagePrompt </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">                    prompt</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> string </span><span style=\"color: #032F62\">`Greeting card design for ${</span><span style=\"color: #24292E\">occasion</span><span style=\"color: #032F62\">}, ${</span></span>\n<span class=\"line\"><span style=\"color: #032F62\">                                    </span><span style=\"color: #24292E\">specialNotes</span><span style=\"color: #032F62\">}`</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">                };</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">                images</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">ImagesResponse imageRes </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span></span>\n<span class=\"line\"><span style=\"color: #24292E\">                    </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> openaiImages</span><span style=\"color: #D73A49\">-&gt;/</span><span style=\"color: #24292E\">images</span><span style=\"color: #D73A49\">/</span><span style=\"color: #24292E\">generations.</span><span style=\"color: #6F42C1\">post</span><span style=\"color: #24292E\">(</span><span style=\"color: #E36209\">imagePrompt</span><span style=\"color: #24292E\">);</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">                </span><span style=\"color: #D73A49\">return</span><span style=\"color: #24292E\"> imageRes.data[</span><span style=\"color: #005CC5\">0</span><span style=\"color: #24292E\">].url;</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">            }</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #24292E\">        </span><span style=\"color: #D73A49\">record</span><span style=\"color: #24292E\"> {</span><span style=\"color: #D73A49\">|</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">            </span><span style=\"color: #005CC5\">string</span><span style=\"color: #D73A49\">|error</span><span style=\"color: #24292E\">? greetingWorker;</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">            </span><span style=\"color: #005CC5\">string</span><span style=\"color: #D73A49\">|error</span><span style=\"color: #24292E\">? imageWorker;</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        </span><span style=\"color: #D73A49\">|</span><span style=\"color: #24292E\">} resutls </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">wait</span><span style=\"color: #24292E\"> {greetingWorker, imageWorker};</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #24292E\">        </span><span style=\"color: #005CC5\">string</span><span style=\"color: #24292E\">? greeting </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> resutls.greetingWorker;</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        </span><span style=\"color: #005CC5\">string</span><span style=\"color: #24292E\">? imageURL </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> resutls.imageWorker;</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        </span><span style=\"color: #D73A49\">if</span><span style=\"color: #24292E\"> greeting </span><span style=\"color: #D73A49\">!is</span><span style=\"color: #24292E\"> </span><span style=\"color: #005CC5\">string</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">||</span><span style=\"color: #24292E\"> imageURL </span><span style=\"color: #D73A49\">!is</span><span style=\"color: #24292E\"> </span><span style=\"color: #005CC5\">string</span><span style=\"color: #24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">            </span><span style=\"color: #D73A49\">return</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">error</span><span style=\"color: #24292E\">(</span><span style=\"color: #032F62\">&quot;Error while generating greeting card&quot;</span><span style=\"color: #24292E\">);</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        }</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #24292E\">        </span><span style=\"color: #6A737D\">// Send an email with the greeting and the image using the email connector</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        gmail</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">MessageRequest messageRequest </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">            recipient</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> req.recipientEmail,</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">            subject</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> req.emailSubject,</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">            messageBody</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> string </span><span style=\"color: #032F62\">`&lt;p&gt;${</span><span style=\"color: #24292E\">greeting</span><span style=\"color: #032F62\">}&lt;/p&gt; &lt;br/&gt; &lt;img src=&quot;${</span><span style=\"color: #24292E\">imageURL</span><span style=\"color: #032F62\">}&quot;&gt;`</span><span style=\"color: #24292E\">,</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">            contentType</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> gmail:TEXT_HTML</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        };</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        _ </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> gmail</span><span style=\"color: #D73A49\">-&gt;</span><span style=\"color: #6F42C1\">sendMessage</span><span style=\"color: #24292E\">(</span><span style=\"color: #E36209\">messageRequest</span><span style=\"color: #24292E\">, </span><span style=\"color: #E36209\">userId</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span><span style=\"color: #032F62\">&quot;me&quot;</span><span style=\"color: #24292E\">);</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    }</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">}</span></span></code></pre>"},"fine-tune-models-with-your-own-data":{"frontmatter":{"title":"Fine-tune models with your own data to create your own models","description":"OpenAI’s Fine Tuning API lets you create a model that understands your world. Use Ballerina’s ability to easily integrate to business APIs and systems to take your business data to fine-tune it and make that available for your business.","url":"https://github.com/ballerina-guides/ai-samples/blob/main/finetune_openai_models/main.bal","image":""},"code":"<pre class=\"shiki github-light\" style=\"background-color: #fff\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #D73A49\">public</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">function</span><span style=\"color: #24292E\"> </span><span style=\"color: #6F42C1\">main</span><span style=\"color: #24292E\">() </span><span style=\"color: #D73A49\">returns</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">error?</span><span style=\"color: #24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    finetunes</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">Client openaiFineTunes </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">new</span><span style=\"color: #24292E\"> ({auth</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> {token: openAIToken}});</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #24292E\">    finetunes</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">CreateFileRequest fileRequest </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        file</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">            fileContent</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> io:</span><span style=\"color: #6F42C1\">fileReadBytes</span><span style=\"color: #24292E\">(</span><span style=\"color: #E36209\">TRAIN_DATA_FILE_PATH</span><span style=\"color: #24292E\">),</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">            fileName</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> TRAIN_DATA_FILE_NAME</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        },</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        purpose</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> </span><span style=\"color: #032F62\">&quot;fine-tune&quot;</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    };</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    finetunes</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">OpenAIFile fileResponse </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> openaiFineTunes</span><span style=\"color: #D73A49\">-&gt;/</span><span style=\"color: #24292E\">files.</span><span style=\"color: #6F42C1\">post</span><span style=\"color: #24292E\">(</span><span style=\"color: #E36209\">fileRequest</span><span style=\"color: #24292E\">);</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    io</span><span style=\"color: #D73A49\">:</span><span style=\"color: #6F42C1\">println</span><span style=\"color: #24292E\">(</span><span style=\"color: #005CC5\">string</span><span style=\"color: #24292E\"> </span><span style=\"color: #032F62\">`Training file uploaded successfully with ID: ${</span><span style=\"color: #24292E\">fileResponse</span><span style=\"color: #032F62\">.</span><span style=\"color: #24292E\">id</span><span style=\"color: #032F62\">}`</span><span style=\"color: #24292E\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #24292E\">    finetunes</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">CreateFineTuneRequest fineTuneRequest </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        training_file</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> fileResponse.id,</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        model</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> </span><span style=\"color: #032F62\">&quot;ada&quot;</span><span style=\"color: #24292E\">,</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        n_epochs</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> </span><span style=\"color: #005CC5\">4</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    };</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    finetunes</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">FineTune fineTuneResponse </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> openaiFineTunes</span><span style=\"color: #D73A49\">-&gt;/</span><span style=\"color: #24292E\">fine\\</span><span style=\"color: #D73A49\">-</span><span style=\"color: #24292E\">tunes.</span><span style=\"color: #6F42C1\">post</span><span style=\"color: #24292E\">(</span><span style=\"color: #E36209\">fineTuneRequest</span><span style=\"color: #24292E\">);</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    io</span><span style=\"color: #D73A49\">:</span><span style=\"color: #6F42C1\">println</span><span style=\"color: #24292E\">(</span><span style=\"color: #005CC5\">string</span><span style=\"color: #24292E\"> </span><span style=\"color: #032F62\">`Fine-tune job started successfully with ID: ${</span></span>\n<span class=\"line\"><span style=\"color: #032F62\">                       </span><span style=\"color: #24292E\">fineTuneResponse</span><span style=\"color: #032F62\">.</span><span style=\"color: #24292E\">id</span><span style=\"color: #032F62\">}`</span><span style=\"color: #24292E\">);</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">}</span></span></code></pre>"},"libraries-for-ai-operations":{"frontmatter":{"title":"Libraries for AI operations","description":"Built-in mathematical operations such as distance measures, optimizations, etc., which are a common building block in AI use cases.","url":"https://github.com/ballerina-guides/ai-samples/blob/main/compare_similarity_between_two_texts_using_openai/main.bal","image":""},"code":"<pre class=\"shiki github-light\" style=\"background-color: #fff\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #D73A49\">public</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">function</span><span style=\"color: #24292E\"> </span><span style=\"color: #6F42C1\">main</span><span style=\"color: #24292E\">() </span><span style=\"color: #D73A49\">returns</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">error?</span><span style=\"color: #24292E\"> {</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #24292E\">    </span><span style=\"color: #D73A49\">final</span><span style=\"color: #24292E\"> embeddings</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">Client openaiEmbeddings </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">new</span><span style=\"color: #24292E\"> ({auth</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> {token: openAIToken}});</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #24292E\">    </span><span style=\"color: #005CC5\">string</span><span style=\"color: #24292E\"> text1 </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span><span style=\"color: #032F62\">&quot;What are you thinking?&quot;</span><span style=\"color: #24292E\">;</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    </span><span style=\"color: #005CC5\">string</span><span style=\"color: #24292E\"> text2 </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span><span style=\"color: #032F62\">&quot;What is on your mind?&quot;</span><span style=\"color: #24292E\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #24292E\">    embeddings</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">CreateEmbeddingRequest embeddingRequest </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        model</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> </span><span style=\"color: #032F62\">&quot;text-embedding-ada-002&quot;</span><span style=\"color: #24292E\">,</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        input</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> [text1, text2]</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    };</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    embeddings</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">CreateEmbeddingResponse embeddingResponse </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> openaiEmbeddings</span><span style=\"color: #D73A49\">-&gt;/</span><span style=\"color: #24292E\">embeddings.</span><span style=\"color: #6F42C1\">post</span><span style=\"color: #24292E\">(</span><span style=\"color: #E36209\">embeddingRequest</span><span style=\"color: #24292E\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #24292E\">    </span><span style=\"color: #005CC5\">float</span><span style=\"color: #24292E\">[] text1Embedding </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> embeddingResponse.data[</span><span style=\"color: #005CC5\">0</span><span style=\"color: #24292E\">].embedding;</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    </span><span style=\"color: #005CC5\">float</span><span style=\"color: #24292E\">[] text2Embedding </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> embeddingResponse.data[</span><span style=\"color: #005CC5\">1</span><span style=\"color: #24292E\">].embedding;</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    </span><span style=\"color: #005CC5\">float</span><span style=\"color: #24292E\"> similarity </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> vector</span><span style=\"color: #D73A49\">:</span><span style=\"color: #6F42C1\">cosineSimilarity</span><span style=\"color: #24292E\">(</span><span style=\"color: #E36209\">text1Embedding</span><span style=\"color: #24292E\">, </span><span style=\"color: #E36209\">text2Embedding</span><span style=\"color: #24292E\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #24292E\">    io</span><span style=\"color: #D73A49\">:</span><span style=\"color: #6F42C1\">println</span><span style=\"color: #24292E\">(</span><span style=\"color: #032F62\">&quot;The similarity between the given two texts : &quot;</span><span style=\"color: #24292E\">, </span><span style=\"color: #E36209\">similarity</span><span style=\"color: #24292E\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #24292E\">}</span></span></code></pre>"},"music1":{"frontmatter":{"title":"","description":"","url":"","image":""},"code":"<pre class=\"shiki github-light\" style=\"background-color: #fff\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #D73A49\">public</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">function</span><span style=\"color: #24292E\"> </span><span style=\"color: #6F42C1\">main</span><span style=\"color: #24292E\">(</span><span style=\"color: #005CC5\">string</span><span style=\"color: #24292E\"> </span><span style=\"color: #E36209\">audioURL</span><span style=\"color: #24292E\">, </span><span style=\"color: #005CC5\">string</span><span style=\"color: #24292E\"> </span><span style=\"color: #E36209\">translatingLanguage</span><span style=\"color: #24292E\">) </span><span style=\"color: #D73A49\">returns</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">error?</span><span style=\"color: #24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    </span><span style=\"color: #6A737D\">// Creates a HTTP client to download the audio file</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    http</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">Client audioEP </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">new</span><span style=\"color: #24292E\"> (</span><span style=\"color: #E36209\">audioURL</span><span style=\"color: #24292E\">);</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    http</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">Response httpResp </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> audioEP</span><span style=\"color: #D73A49\">-&gt;/</span><span style=\"color: #6F42C1\">get</span><span style=\"color: #24292E\">();</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    </span><span style=\"color: #005CC5\">byte</span><span style=\"color: #24292E\">[] audioBytes </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> httpResp.</span><span style=\"color: #6F42C1\">getBinaryPayload</span><span style=\"color: #24292E\">();</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> io</span><span style=\"color: #D73A49\">:</span><span style=\"color: #6F42C1\">fileWriteBytes</span><span style=\"color: #24292E\">(</span><span style=\"color: #E36209\">AUDIO_FILE_PATH</span><span style=\"color: #24292E\">, </span><span style=\"color: #E36209\">audioBytes</span><span style=\"color: #24292E\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #24292E\">    </span><span style=\"color: #6A737D\">// Creates a request to translate the audio file to text (English)</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    audio</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">CreateTranslationRequest translationsReq </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        file</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> {fileContent: </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> io:</span><span style=\"color: #6F42C1\">fileReadBytes</span><span style=\"color: #24292E\">(</span><span style=\"color: #E36209\">AUDIO_FILE_PATH</span><span style=\"color: #24292E\">), fileName</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> AUDIO_FILE},</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        model</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> </span><span style=\"color: #032F62\">&quot;whisper-1&quot;</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    };</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #24292E\">    </span><span style=\"color: #6A737D\">// Translates the audio file to text (English)</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    audio</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">Client openAIAudio </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">new</span><span style=\"color: #24292E\"> ({auth</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> {token: openAIKey}});</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    audio</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">CreateTranscriptionResponse transcriptionRes </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> openAIAudio</span><span style=\"color: #D73A49\">-&gt;/</span><span style=\"color: #24292E\">audio</span><span style=\"color: #D73A49\">/</span><span style=\"color: #24292E\">translations.</span><span style=\"color: #6F42C1\">post</span><span style=\"color: #24292E\">(</span><span style=\"color: #E36209\">translationsReq</span><span style=\"color: #24292E\">);</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    io</span><span style=\"color: #D73A49\">:</span><span style=\"color: #6F42C1\">println</span><span style=\"color: #24292E\">(</span><span style=\"color: #032F62\">&quot;Audio text in English: &quot;</span><span style=\"color: #24292E\">, transcriptionRes.text);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #24292E\">    </span><span style=\"color: #6A737D\">// Creates a request to translate the text from English to another language</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    text</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">CreateCompletionRequest completionReq </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        model</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> </span><span style=\"color: #032F62\">&quot;text-davinci-003&quot;</span><span style=\"color: #24292E\">,</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        prompt</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> string </span><span style=\"color: #032F62\">`Translate the following text from English to ${</span></span>\n<span class=\"line\"><span style=\"color: #032F62\">                        </span><span style=\"color: #24292E\">translatingLanguage</span><span style=\"color: #032F62\">} : ${</span><span style=\"color: #24292E\">transcriptionRes</span><span style=\"color: #032F62\">.</span><span style=\"color: #24292E\">text</span><span style=\"color: #032F62\">}`</span><span style=\"color: #24292E\">,</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        temperature</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> </span><span style=\"color: #005CC5\">0.7</span><span style=\"color: #24292E\">,</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        max_tokens</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> </span><span style=\"color: #005CC5\">256</span><span style=\"color: #24292E\">,</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        top_p</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> </span><span style=\"color: #005CC5\">1</span><span style=\"color: #24292E\">,</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        frequency_penalty</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> </span><span style=\"color: #005CC5\">0</span><span style=\"color: #24292E\">,</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        presence_penalty</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> </span><span style=\"color: #005CC5\">0</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    };</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #24292E\">    </span><span style=\"color: #6A737D\">// Translates the text from English to another language</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    text</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">Client openAIText </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">new</span><span style=\"color: #24292E\"> ({auth</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> {token: openAIKey}});</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    text</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">CreateCompletionResponse completionRes </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> openAIText</span><span style=\"color: #D73A49\">-&gt;/</span><span style=\"color: #24292E\">completions.</span><span style=\"color: #6F42C1\">post</span><span style=\"color: #24292E\">(</span><span style=\"color: #E36209\">completionReq</span><span style=\"color: #24292E\">);</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    </span><span style=\"color: #005CC5\">string</span><span style=\"color: #24292E\"> translatedText </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> completionRes.choices[</span><span style=\"color: #005CC5\">0</span><span style=\"color: #24292E\">].text.</span><span style=\"color: #6F42C1\">ensureType</span><span style=\"color: #24292E\">();</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    io</span><span style=\"color: #D73A49\">:</span><span style=\"color: #6F42C1\">println</span><span style=\"color: #24292E\">(</span><span style=\"color: #032F62\">&quot;Translated text: &quot;</span><span style=\"color: #24292E\">, </span><span style=\"color: #E36209\">translatedText</span><span style=\"color: #24292E\">);</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">}</span></span></code></pre>"},"music2":{"frontmatter":{"title":"","description":"","url":"","image":""},"code":"<pre class=\"shiki github-light\" style=\"background-color: #fff\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #D73A49\">public</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">function</span><span style=\"color: #24292E\"> </span><span style=\"color: #6F42C1\">main</span><span style=\"color: #24292E\">(</span><span style=\"color: #005CC5\">string</span><span style=\"color: #24292E\"> </span><span style=\"color: #E36209\">podcastURL</span><span style=\"color: #24292E\">) </span><span style=\"color: #D73A49\">returns</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">error?</span><span style=\"color: #24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    </span><span style=\"color: #6A737D\">// Creates a HTTP client to download the audio file</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    http</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">Client podcastEP </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">new</span><span style=\"color: #24292E\"> (</span><span style=\"color: #E36209\">podcastURL</span><span style=\"color: #24292E\">);</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    http</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">Response httpResp </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> podcastEP</span><span style=\"color: #D73A49\">-&gt;/</span><span style=\"color: #6F42C1\">get</span><span style=\"color: #24292E\">();</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    </span><span style=\"color: #005CC5\">byte</span><span style=\"color: #24292E\">[] audioBytes </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> httpResp.</span><span style=\"color: #6F42C1\">getBinaryPayload</span><span style=\"color: #24292E\">();</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> io</span><span style=\"color: #D73A49\">:</span><span style=\"color: #6F42C1\">fileWriteBytes</span><span style=\"color: #24292E\">(</span><span style=\"color: #E36209\">AUDIO_FILE_PATH</span><span style=\"color: #24292E\">, </span><span style=\"color: #E36209\">audioBytes</span><span style=\"color: #24292E\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #24292E\">    </span><span style=\"color: #6A737D\">// Creates a request to translate the audio file to text (English)</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    audio</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">CreateTranscriptionRequest transcriptionsReq </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        file</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">            fileContent</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> (</span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> </span><span style=\"color: #E36209\">io</span><span style=\"color: #D73A49\">:</span><span style=\"color: #6F42C1\">fileReadBytes</span><span style=\"color: #24292E\">(</span><span style=\"color: #E36209\">AUDIO_FILE_PATH</span><span style=\"color: #24292E\">)).</span><span style=\"color: #6F42C1\">slice</span><span style=\"color: #24292E\">(</span><span style=\"color: #005CC5\">0</span><span style=\"color: #24292E\">, </span><span style=\"color: #E36209\">BINARY_LENGTH</span><span style=\"color: #24292E\">), </span></span>\n<span class=\"line\"><span style=\"color: #24292E\">            fileName</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> AUDIO_FILE</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        },</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        model</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> </span><span style=\"color: #032F62\">&quot;whisper-1&quot;</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    };</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #24292E\">    </span><span style=\"color: #6A737D\">// Converts the audio file to text (English) using OpenAI speach to text API</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    audio</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">Client openAIAudio </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">new</span><span style=\"color: #24292E\"> ({auth</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> {token: openAIToken}});</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    audio</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">CreateTranscriptionResponse transcriptionsRes </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> openAIAudio</span><span style=\"color: #D73A49\">-&gt;/</span><span style=\"color: #24292E\">audio</span><span style=\"color: #D73A49\">/</span><span style=\"color: #24292E\">transcriptions.</span><span style=\"color: #6F42C1\">post</span><span style=\"color: #24292E\">(</span><span style=\"color: #E36209\">transcriptionsReq</span><span style=\"color: #24292E\">);</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    io</span><span style=\"color: #D73A49\">:</span><span style=\"color: #6F42C1\">println</span><span style=\"color: #24292E\">(</span><span style=\"color: #032F62\">&quot;Text from the audio :&quot;</span><span style=\"color: #24292E\">, transcriptionsRes.text);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #24292E\">    </span><span style=\"color: #6A737D\">// Creates a request to summarize the text</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    text</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">CreateCompletionRequest textCompletionReq </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        model</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> </span><span style=\"color: #032F62\">&quot;text-davinci-003&quot;</span><span style=\"color: #24292E\">,</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        prompt</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> string </span><span style=\"color: #032F62\">`Summarize the following text to 100 characters : ${</span></span>\n<span class=\"line\"><span style=\"color: #032F62\">                        </span><span style=\"color: #24292E\">transcriptionsRes</span><span style=\"color: #032F62\">.</span><span style=\"color: #24292E\">text</span><span style=\"color: #032F62\">}`</span><span style=\"color: #24292E\">,</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        temperature</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> </span><span style=\"color: #005CC5\">0.7</span><span style=\"color: #24292E\">,</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        max_tokens</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> </span><span style=\"color: #005CC5\">256</span><span style=\"color: #24292E\">,</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        top_p</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> </span><span style=\"color: #005CC5\">1</span><span style=\"color: #24292E\">,</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        frequency_penalty</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> </span><span style=\"color: #005CC5\">0</span><span style=\"color: #24292E\">,</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        presence_penalty</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> </span><span style=\"color: #005CC5\">0</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    };</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #24292E\">    </span><span style=\"color: #6A737D\">// Summarizes the text using OpenAI text completion API</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    text</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">Client openAIText </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">new</span><span style=\"color: #24292E\"> ({auth</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> {token: openAIToken}});</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    text</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">CreateCompletionResponse completionRes </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> openAIText</span><span style=\"color: #D73A49\">-&gt;/</span><span style=\"color: #24292E\">completions.</span><span style=\"color: #6F42C1\">post</span><span style=\"color: #24292E\">(</span><span style=\"color: #E36209\">textCompletionReq</span><span style=\"color: #24292E\">);</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    </span><span style=\"color: #005CC5\">string</span><span style=\"color: #24292E\"> summerizedText </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> completionRes.choices[</span><span style=\"color: #005CC5\">0</span><span style=\"color: #24292E\">].text.</span><span style=\"color: #6F42C1\">ensureType</span><span style=\"color: #24292E\">();</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    io</span><span style=\"color: #D73A49\">:</span><span style=\"color: #6F42C1\">println</span><span style=\"color: #24292E\">(</span><span style=\"color: #032F62\">&quot;Summarized text: &quot;</span><span style=\"color: #24292E\">, </span><span style=\"color: #E36209\">summerizedText</span><span style=\"color: #24292E\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #24292E\">    </span><span style=\"color: #6A737D\">// Tweet it out!</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    twitter</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">Client twitter </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">new</span><span style=\"color: #24292E\"> (</span><span style=\"color: #E36209\">twitterConfig</span><span style=\"color: #24292E\">);</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    </span><span style=\"color: #005CC5\">var</span><span style=\"color: #24292E\"> tweet </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> twitter</span><span style=\"color: #D73A49\">-&gt;</span><span style=\"color: #6F42C1\">tweet</span><span style=\"color: #24292E\">(</span><span style=\"color: #E36209\">summerizedText</span><span style=\"color: #24292E\">);</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    io</span><span style=\"color: #D73A49\">:</span><span style=\"color: #6F42C1\">println</span><span style=\"color: #24292E\">(</span><span style=\"color: #032F62\">&quot;Tweet: &quot;</span><span style=\"color: #24292E\">, </span><span style=\"color: #E36209\">tweet</span><span style=\"color: #24292E\">);</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">}</span></span></code></pre>"},"openai1":{"frontmatter":{"title":"","description":"","url":"","image":""},"code":"<pre class=\"shiki github-light\" style=\"background-color: #fff\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #D73A49\">public</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">function</span><span style=\"color: #24292E\"> </span><span style=\"color: #6F42C1\">main</span><span style=\"color: #24292E\">(</span><span style=\"color: #005CC5\">string</span><span style=\"color: #24292E\"> </span><span style=\"color: #E36209\">filePath</span><span style=\"color: #24292E\">) </span><span style=\"color: #D73A49\">returns</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">error?</span><span style=\"color: #24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    text</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">Client openaiText </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">new</span><span style=\"color: #24292E\"> ({auth</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> {token: openAIToken}});</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #24292E\">    </span><span style=\"color: #005CC5\">string</span><span style=\"color: #24292E\"> fileContent </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> io</span><span style=\"color: #D73A49\">:</span><span style=\"color: #6F42C1\">fileReadString</span><span style=\"color: #24292E\">(</span><span style=\"color: #E36209\">filePath</span><span style=\"color: #24292E\">);</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    io</span><span style=\"color: #D73A49\">:</span><span style=\"color: #6F42C1\">println</span><span style=\"color: #24292E\">(</span><span style=\"color: #005CC5\">string</span><span style=\"color: #24292E\"> </span><span style=\"color: #032F62\">`Content: ${</span><span style=\"color: #24292E\">fileContent</span><span style=\"color: #032F62\">}`</span><span style=\"color: #24292E\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #24292E\">    text</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">CreateCompletionRequest textPrompt </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        prompt</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> string </span><span style=\"color: #032F62\">`Summarize:</span><span style=\"color: #005CC5\">\\n</span><span style=\"color: #032F62\">&quot; ${</span><span style=\"color: #24292E\">fileContent</span><span style=\"color: #032F62\">}`</span><span style=\"color: #24292E\">,</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        model</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> </span><span style=\"color: #032F62\">&quot;text-davinci-003&quot;</span><span style=\"color: #24292E\">,</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        max_tokens</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> </span><span style=\"color: #005CC5\">2000</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    };</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    text</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">CreateCompletionResponse completionRes </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> openaiText</span><span style=\"color: #D73A49\">-&gt;/</span><span style=\"color: #24292E\">completions.</span><span style=\"color: #6F42C1\">post</span><span style=\"color: #24292E\">(</span><span style=\"color: #E36209\">textPrompt</span><span style=\"color: #24292E\">);</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    </span><span style=\"color: #005CC5\">string</span><span style=\"color: #24292E\"> summary </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">&lt;</span><span style=\"color: #005CC5\">string</span><span style=\"color: #D73A49\">&gt;</span><span style=\"color: #24292E\">completionRes.choices[</span><span style=\"color: #005CC5\">0</span><span style=\"color: #24292E\">].text;</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    io</span><span style=\"color: #D73A49\">:</span><span style=\"color: #6F42C1\">println</span><span style=\"color: #24292E\">(</span><span style=\"color: #005CC5\">string</span><span style=\"color: #24292E\"> </span><span style=\"color: #032F62\">`Summary: ${</span><span style=\"color: #24292E\">summary</span><span style=\"color: #032F62\">}`</span><span style=\"color: #24292E\">);</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">}</span></span></code></pre>"},"openai2":{"frontmatter":{"title":"","description":"","url":"","image":""},"code":"<pre class=\"shiki github-light\" style=\"background-color: #fff\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #D73A49\">public</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">function</span><span style=\"color: #24292E\"> </span><span style=\"color: #6F42C1\">main</span><span style=\"color: #24292E\">(</span><span style=\"color: #005CC5\">string</span><span style=\"color: #24292E\"> </span><span style=\"color: #E36209\">filePath</span><span style=\"color: #24292E\">) </span><span style=\"color: #D73A49\">returns</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">error?</span><span style=\"color: #24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    http</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">RetryConfig retryConfig </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        interval</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> </span><span style=\"color: #005CC5\">5</span><span style=\"color: #24292E\">, </span><span style=\"color: #6A737D\">// Initial retry interval in seconds.</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        count</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> </span><span style=\"color: #005CC5\">3</span><span style=\"color: #24292E\">, </span><span style=\"color: #6A737D\">// Number of retry attempts before stopping.</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        backOffFactor</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> </span><span style=\"color: #005CC5\">2.0</span><span style=\"color: #24292E\"> </span><span style=\"color: #6A737D\">// Multiplier of the retry interval.</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    };</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    </span><span style=\"color: #D73A49\">final</span><span style=\"color: #24292E\"> text</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">Client openAIText </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">new</span><span style=\"color: #24292E\"> ({auth</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> {token: openAIToken}, </span><span style=\"color: #E36209\">retryConfig</span><span style=\"color: #24292E\">});</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #24292E\">    text</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">CreateEditRequest editReq </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        input</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> io:</span><span style=\"color: #6F42C1\">fileReadString</span><span style=\"color: #24292E\">(</span><span style=\"color: #E36209\">filePath</span><span style=\"color: #24292E\">),</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        instruction</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> </span><span style=\"color: #032F62\">&quot;Fix grammar and spelling mistakes.&quot;</span><span style=\"color: #24292E\">,</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        model</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> </span><span style=\"color: #032F62\">&quot;text-davinci-edit-001&quot;</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    };</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    text</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">CreateEditResponse editRes </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> openAIText</span><span style=\"color: #D73A49\">-&gt;/</span><span style=\"color: #24292E\">edits.</span><span style=\"color: #6F42C1\">post</span><span style=\"color: #24292E\">(</span><span style=\"color: #E36209\">editReq</span><span style=\"color: #24292E\">);</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    </span><span style=\"color: #005CC5\">string</span><span style=\"color: #24292E\"> text </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> editRes.choices[</span><span style=\"color: #005CC5\">0</span><span style=\"color: #24292E\">].text.</span><span style=\"color: #6F42C1\">ensureType</span><span style=\"color: #24292E\">();</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    io</span><span style=\"color: #D73A49\">:</span><span style=\"color: #6F42C1\">println</span><span style=\"color: #24292E\">(</span><span style=\"color: #005CC5\">string</span><span style=\"color: #24292E\"> </span><span style=\"color: #032F62\">`Corrected: ${</span><span style=\"color: #24292E\">text</span><span style=\"color: #032F62\">}`</span><span style=\"color: #24292E\">);</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">}</span></span></code></pre>"},"transcribe-speech-or-music-with-whisper":{"frontmatter":{"title":"Transcribe speech or music with Whisper","description":"OpenAI’s Whisper API makes speech and music computable! Easily transcribe speech or music in any language into text then use text. Ballerina’s powerful standard library makes manipulating audio files and processing the results trivially simple.","url":"","image":""},"code":""},"trivial-hosting-in-wso2-choreo-ipaas":{"frontmatter":{"title":"(Extra!) Trivial hosting in WSO2 Choreo iPaaS","description":"Manual integrations? Scheduled integrations (cron jobs)? Triggered integrations? Integrations as APIs? No problem! Write the code, attach the repo to WSO2 Choreo, and let it do the rest.","url":"https://wso2.com/choreo/ipaas/","image":"images/choreo-ipaas-image-v2.png"},"code":""},"why-is-ballerina-the-way-you-should-write-ai-applications":{"frontmatter":{"title":"Why is Ballerina the way you should write AI applications?","description":"For many years Python, a wonderful language, has been the de facto choice for data analytics, data science, and machine learning.  But using LLMs to add AI to business applications is not about those problems anymore but more about prompt engineering, fine-tuning, calling APIs offered by hosted LLMs, and chaining LLMs & combining them with other APIs.<br/><br/>\nBallerina is your best choice for writing modern cloud-native applications that incorporate LLM-powered AI! ","url":"https://github.com/ballerina-guides/ai-samples/blob/main/convert_audio_to_text_and_translate_using_openai/main.bal","image":""},"code":"<pre class=\"shiki github-light\" style=\"background-color: #fff\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #D73A49\">public</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">function</span><span style=\"color: #24292E\"> </span><span style=\"color: #6F42C1\">main</span><span style=\"color: #24292E\">(</span><span style=\"color: #005CC5\">string</span><span style=\"color: #24292E\"> </span><span style=\"color: #E36209\">audioURL</span><span style=\"color: #24292E\">, </span><span style=\"color: #005CC5\">string</span><span style=\"color: #24292E\"> </span><span style=\"color: #E36209\">translatingLanguage</span><span style=\"color: #24292E\">) </span><span style=\"color: #D73A49\">returns</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">error?</span><span style=\"color: #24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    </span><span style=\"color: #6A737D\">// Creates a HTTP client to download the audio file</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    http</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">Client audioEP </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">new</span><span style=\"color: #24292E\"> (</span><span style=\"color: #E36209\">audioURL</span><span style=\"color: #24292E\">);</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    http</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">Response httpResp </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> audioEP</span><span style=\"color: #D73A49\">-&gt;/</span><span style=\"color: #6F42C1\">get</span><span style=\"color: #24292E\">();</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    </span><span style=\"color: #005CC5\">byte</span><span style=\"color: #24292E\">[] audioBytes </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> httpResp.</span><span style=\"color: #6F42C1\">getBinaryPayload</span><span style=\"color: #24292E\">();</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> io</span><span style=\"color: #D73A49\">:</span><span style=\"color: #6F42C1\">fileWriteBytes</span><span style=\"color: #24292E\">(</span><span style=\"color: #E36209\">AUDIO_FILE_PATH</span><span style=\"color: #24292E\">, </span><span style=\"color: #E36209\">audioBytes</span><span style=\"color: #24292E\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #24292E\">    </span><span style=\"color: #6A737D\">// Creates a request to translate the audio file to text (English)</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    audio</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">CreateTranslationRequest translationsReq </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        file</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> {fileContent: </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> io:</span><span style=\"color: #6F42C1\">fileReadBytes</span><span style=\"color: #24292E\">(</span><span style=\"color: #E36209\">AUDIO_FILE_PATH</span><span style=\"color: #24292E\">), fileName</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> AUDIO_FILE},</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        model</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> </span><span style=\"color: #032F62\">&quot;whisper-1&quot;</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    };</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #24292E\">    </span><span style=\"color: #6A737D\">// Translates the audio file to text (English)</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    audio</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">Client openAIAudio </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">new</span><span style=\"color: #24292E\"> ({auth</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> {token: openAIKey}});</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    audio</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">CreateTranscriptionResponse transcriptionRes </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> openAIAudio</span><span style=\"color: #D73A49\">-&gt;/</span><span style=\"color: #24292E\">audio</span><span style=\"color: #D73A49\">/</span><span style=\"color: #24292E\">translations.</span><span style=\"color: #6F42C1\">post</span><span style=\"color: #24292E\">(</span><span style=\"color: #E36209\">translationsReq</span><span style=\"color: #24292E\">);</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    io</span><span style=\"color: #D73A49\">:</span><span style=\"color: #6F42C1\">println</span><span style=\"color: #24292E\">(</span><span style=\"color: #032F62\">&quot;Audio text in English: &quot;</span><span style=\"color: #24292E\">, transcriptionRes.text);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #24292E\">    </span><span style=\"color: #6A737D\">// Creates a request to translate the text from English to another language</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    text</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">CreateCompletionRequest completionReq </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        model</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> </span><span style=\"color: #032F62\">&quot;text-davinci-003&quot;</span><span style=\"color: #24292E\">,</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        prompt</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> string </span><span style=\"color: #032F62\">`Translate the following text from English to ${</span></span>\n<span class=\"line\"><span style=\"color: #032F62\">                        </span><span style=\"color: #24292E\">translatingLanguage</span><span style=\"color: #032F62\">} : ${</span><span style=\"color: #24292E\">transcriptionRes</span><span style=\"color: #032F62\">.</span><span style=\"color: #24292E\">text</span><span style=\"color: #032F62\">}`</span><span style=\"color: #24292E\">,</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        temperature</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> </span><span style=\"color: #005CC5\">0.7</span><span style=\"color: #24292E\">,</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        max_tokens</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> </span><span style=\"color: #005CC5\">256</span><span style=\"color: #24292E\">,</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        top_p</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> </span><span style=\"color: #005CC5\">1</span><span style=\"color: #24292E\">,</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        frequency_penalty</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> </span><span style=\"color: #005CC5\">0</span><span style=\"color: #24292E\">,</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        presence_penalty</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> </span><span style=\"color: #005CC5\">0</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    };</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #24292E\">    </span><span style=\"color: #6A737D\">// Translates the text from English to another language</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    text</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">Client openAIText </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">new</span><span style=\"color: #24292E\"> ({auth</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> {token: openAIKey}});</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    text</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">CreateCompletionResponse completionRes </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> openAIText</span><span style=\"color: #D73A49\">-&gt;/</span><span style=\"color: #24292E\">completions.</span><span style=\"color: #6F42C1\">post</span><span style=\"color: #24292E\">(</span><span style=\"color: #E36209\">completionReq</span><span style=\"color: #24292E\">);</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    </span><span style=\"color: #005CC5\">string</span><span style=\"color: #24292E\"> translatedText </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> completionRes.choices[</span><span style=\"color: #005CC5\">0</span><span style=\"color: #24292E\">].text.</span><span style=\"color: #6F42C1\">ensureType</span><span style=\"color: #24292E\">();</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    io</span><span style=\"color: #D73A49\">:</span><span style=\"color: #6F42C1\">println</span><span style=\"color: #24292E\">(</span><span style=\"color: #032F62\">&quot;Translated text: &quot;</span><span style=\"color: #24292E\">, </span><span style=\"color: #E36209\">translatedText</span><span style=\"color: #24292E\">);</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">}</span></span></code></pre>"},"write-robust-api-powered-ai-applications":{"frontmatter":{"title":"Write robust API-powered AI applications","description":"Take on the unpredictable world of distributed systems with Ballerina's built-in language and standard library features. Writing robust API-powered AI applications is now a breeze for every developer, no matter the challenges!","url":"https://github.com/ballerina-guides/ai-samples/blob/main/correct_grammar_and_spelling_in_text_using_openai/main.bal","image":""},"code":"<pre class=\"shiki github-light\" style=\"background-color: #fff\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #D73A49\">public</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">function</span><span style=\"color: #24292E\"> </span><span style=\"color: #6F42C1\">main</span><span style=\"color: #24292E\">(</span><span style=\"color: #005CC5\">string</span><span style=\"color: #24292E\"> </span><span style=\"color: #E36209\">filePath</span><span style=\"color: #24292E\">) </span><span style=\"color: #D73A49\">returns</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">error?</span><span style=\"color: #24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    http</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">RetryConfig retryConfig </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        interval</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> </span><span style=\"color: #005CC5\">5</span><span style=\"color: #24292E\">, </span><span style=\"color: #6A737D\">// Initial retry interval in seconds.</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        count</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> </span><span style=\"color: #005CC5\">3</span><span style=\"color: #24292E\">, </span><span style=\"color: #6A737D\">// Number of retry attempts before stopping.</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        backOffFactor</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> </span><span style=\"color: #005CC5\">2.0</span><span style=\"color: #24292E\"> </span><span style=\"color: #6A737D\">// Multiplier of the retry interval.</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    };</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    </span><span style=\"color: #D73A49\">final</span><span style=\"color: #24292E\"> text</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">Client openAIText </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">new</span><span style=\"color: #24292E\"> ({auth</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> {token: openAIToken}, </span><span style=\"color: #E36209\">retryConfig</span><span style=\"color: #24292E\">});</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #24292E\">    text</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">CreateEditRequest editReq </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> {</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        input</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> io:</span><span style=\"color: #6F42C1\">fileReadString</span><span style=\"color: #24292E\">(</span><span style=\"color: #E36209\">filePath</span><span style=\"color: #24292E\">),</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        instruction</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> </span><span style=\"color: #032F62\">&quot;Fix grammar and spelling mistakes.&quot;</span><span style=\"color: #24292E\">,</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">        model</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> </span><span style=\"color: #032F62\">&quot;text-davinci-edit-001&quot;</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    };</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    text</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\">CreateEditResponse editRes </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> openAIText</span><span style=\"color: #D73A49\">-&gt;/</span><span style=\"color: #24292E\">edits.</span><span style=\"color: #6F42C1\">post</span><span style=\"color: #24292E\">(</span><span style=\"color: #E36209\">editReq</span><span style=\"color: #24292E\">);</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    </span><span style=\"color: #005CC5\">string</span><span style=\"color: #24292E\"> text </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">check</span><span style=\"color: #24292E\"> editRes.choices[</span><span style=\"color: #005CC5\">0</span><span style=\"color: #24292E\">].text.</span><span style=\"color: #6F42C1\">ensureType</span><span style=\"color: #24292E\">();</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">    io</span><span style=\"color: #D73A49\">:</span><span style=\"color: #6F42C1\">println</span><span style=\"color: #24292E\">(</span><span style=\"color: #005CC5\">string</span><span style=\"color: #24292E\"> </span><span style=\"color: #032F62\">`Corrected: ${</span><span style=\"color: #24292E\">text</span><span style=\"color: #032F62\">}`</span><span style=\"color: #24292E\">);</span></span>\n<span class=\"line\"><span style=\"color: #24292E\">}</span></span></code></pre>"}}},"__N_SSG":true}