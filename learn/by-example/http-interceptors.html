---
layout: ballerina-example-page-old
title: Interceptors
description: This BBE demonstrates the HTTP Interceptors in Ballerina.
keywords: ballerina, ballerina by example, bbe, http, service, interceptor, response, request, filter
permalink: /learn/by-example/http-interceptors
active: http-interceptors
redirect_from:
  - /swan-lake/learn/by-example/http-interceptors
  - /swan-lake/learn/by-example/http-interceptors.html
---
<div class="row cBallerina-io-Gray-row">
        <div class="container cBallerinaBySampleContainer">
            <div class="FullCode">
                <div class="highlight"><pre><span class="kn">import</span> <span class="nx">ballerina</span><span class="o">/</span><span class="nx">http</span><span class="p">;</span>

<span class="c1">// Header names to be set to the request in the request interceptor.</span>
<span class="nx">final</span> <span class="kt">string</span> <span class="nx">interceptor_header1</span> <span class="p">=</span> <span class="s">&quot;requestHeader1&quot;</span><span class="p">;</span>
<span class="nx">final</span> <span class="kt">string</span> <span class="nx">interceptor_header2</span> <span class="p">=</span> <span class="s">&quot;requestHeader2&quot;</span><span class="p">;</span>

<span class="c1">// Header name to be set to the response in the response interceptor.</span>
<span class="nx">final</span> <span class="kt">string</span> <span class="nx">interceptor_header3</span> <span class="p">=</span> <span class="s">&quot;responseHeader&quot;</span><span class="p">;</span>

<span class="c1">// Header values to be set to the request in the request interceptor.</span>
<span class="nx">final</span> <span class="kt">string</span> <span class="nx">interceptor_header_value1</span> <span class="p">=</span> <span class="s">&quot;RequestInterceptor1&quot;</span><span class="p">;</span>
<span class="nx">final</span> <span class="kt">string</span> <span class="nx">interceptor_header_value2</span> <span class="p">=</span> <span class="s">&quot;RequestInterceptor2&quot;</span><span class="p">;</span>

<span class="c1">// Header value to be set to the response in the response interceptor.</span>
<span class="nx">final</span> <span class="kt">string</span> <span class="nx">interceptor_header_value3</span> <span class="p">=</span> <span class="s">&quot;ResponseInterceptor&quot;</span><span class="p">;</span>

<span class="c1">// A `Requestinterceptorservice` class implementation. It intercepts the request</span>
<span class="c1">// and adds a header before it is dispatched to the target service. A `RequestInterceptorService`</span>
<span class="c1">// class can have only one resource function.</span>
<span class="kd">service</span> <span class="nx">class</span> <span class="nx">RequestInterceptor1</span> <span class="p">{</span>
    <span class="o">*</span><span class="nx">http</span><span class="p">:</span><span class="nx">RequestInterceptor</span><span class="p">;</span>

    <span class="c1">// A default resource function, which will be executed for all the requests. </span>
    <span class="c1">// A `RequestContext` is used to share data between interceptors.</span>
    <span class="kd">resource</span> <span class="kd">function</span> <span class="err">&#39;</span><span class="k">default</span> <span class="p">[</span><span class="kt">string</span><span class="o">...</span> <span class="nx">path</span><span class="p">](</span><span class="nx">http</span><span class="p">:</span><span class="nx">RequestContext</span> <span class="nx">ctx</span><span class="p">,</span> 
                            <span class="nx">http</span><span class="p">:</span><span class="nx">Request</span> <span class="nx">req</span><span class="p">)</span> <span class="nx">returns</span> <span class="nx">http</span><span class="p">:</span><span class="nx">NextService</span><span class="p">|</span><span class="nx">error</span><span class="err">?</span> <span class="p">{</span>
        <span class="c1">// Sets a header to the request inside the interceptor service.</span>
        <span class="nx">req</span><span class="p">.</span><span class="nx">setHeader</span><span class="p">(</span><span class="nx">interceptor_header1</span><span class="p">,</span> <span class="nx">interceptor_header_value1</span><span class="p">);</span>
        <span class="c1">// Returns the next interceptor or the target service in the pipeline. </span>
        <span class="c1">// An error is returned when the call fails.</span>
        <span class="k">return</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">next</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Creates a new `RequestInterceptor`.</span>
<span class="nx">RequestInterceptor1</span> <span class="nx">requestInterceptor1</span> <span class="p">=</span> <span class="nx">new</span><span class="p">;</span>

<span class="c1">// An `Interceptor` service class with a specific path. This interceptor can only be </span>
<span class="c1">// engaged at the service level.</span>
<span class="kd">service</span> <span class="nx">class</span> <span class="nx">RequestInterceptor2</span> <span class="p">{</span>
    <span class="o">*</span><span class="nx">http</span><span class="p">:</span><span class="nx">RequestInterceptor</span><span class="p">;</span>

    <span class="c1">// This interceptor is executed only for GET requests with the relative path </span>
    <span class="c1">// `greeting`. </span>
    <span class="kd">resource</span> <span class="kd">function</span> <span class="nx">get</span> <span class="nx">greeting</span><span class="p">(</span><span class="nx">http</span><span class="p">:</span><span class="nx">RequestContext</span> <span class="nx">ctx</span><span class="p">,</span> 
                            <span class="nx">http</span><span class="p">:</span><span class="nx">Request</span> <span class="nx">req</span><span class="p">)</span> <span class="nx">returns</span> <span class="nx">http</span><span class="p">:</span><span class="nx">NextService</span><span class="p">|</span><span class="nx">error</span><span class="err">?</span> <span class="p">{</span>
        <span class="nx">req</span><span class="p">.</span><span class="nx">setHeader</span><span class="p">(</span><span class="nx">interceptor_header2</span><span class="p">,</span> <span class="nx">interceptor_header_value2</span><span class="p">);</span>
        <span class="k">return</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">next</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Creates another new `RequestInterceptor`.</span>
<span class="nx">RequestInterceptor2</span> <span class="nx">requestInterceptor2</span> <span class="p">=</span> <span class="nx">new</span><span class="p">;</span>

<span class="c1">// A `ResponseInterceptor` service class implementation. It intercepts the response </span>
<span class="c1">// and adds a header before it is dispatched to the client. A `ResponseInterceptor`</span>
<span class="c1">// service class can have only one remote function : `interceptResponse`.</span>
<span class="kd">service</span> <span class="nx">class</span> <span class="nx">ResponseInterceptor</span> <span class="p">{</span>
    <span class="o">*</span><span class="nx">http</span><span class="p">:</span><span class="nx">ResponseInterceptor</span><span class="p">;</span>

    <span class="c1">// The `interceptResponse` remote function, which will be executed for all the</span>
    <span class="c1">// responses. A `RequestContext` is used to share data between interceptors.</span>
    <span class="nx">remote</span> <span class="kd">function</span> <span class="nx">interceptResponse</span><span class="p">(</span><span class="nx">http</span><span class="p">:</span><span class="nx">RequestContext</span> <span class="nx">ctx</span><span class="p">,</span> 
            <span class="nx">http</span><span class="p">:</span><span class="nx">Response</span> <span class="nx">res</span><span class="p">)</span> <span class="nx">returns</span> <span class="nx">http</span><span class="p">:</span><span class="nx">NextService</span><span class="p">|</span><span class="nx">error</span><span class="err">?</span> <span class="p">{</span>
        <span class="c1">// Sets a header to the response inside the interceptor service.</span>
        <span class="nx">res</span><span class="p">.</span><span class="nx">setHeader</span><span class="p">(</span><span class="nx">interceptor_header3</span><span class="p">,</span> <span class="nx">interceptor_header_value3</span><span class="p">);</span>
        <span class="c1">// Returns the next interceptor in the pipeline or `nil` if there is no </span>
        <span class="c1">// more interceptors to be returned. In case a `nil` value is returned, then,</span>
        <span class="c1">// the modified response will be returned to the client. In addtion to these</span>
        <span class="c1">// return values, an error is returned when the call fails.</span>
        <span class="k">return</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">next</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Creates a new `ResponseInterceptor`.</span>
<span class="nx">ResponseInterceptor</span> <span class="nx">responseInterceptor</span> <span class="p">=</span> <span class="nx">new</span><span class="p">;</span>

<span class="c1">// Interceptors can also b engaged at the listener level. In this case, the `RequestInterceptors`</span>
<span class="c1">// can have only the default path.</span>
<span class="nx">listener</span> <span class="nx">http</span><span class="p">:</span><span class="nx">Listener</span> <span class="nx">interceptorListener</span> <span class="p">=</span> <span class="nx">new</span> <span class="nx">http</span><span class="p">:</span><span class="nx">Listener</span><span class="p">(</span><span class="mi">9090</span><span class="p">);</span>

<span class="c1">// Engage interceptors at the service level. Interceptor services will be executed in</span>
<span class="c1">// the configured order i.e., request interceptors are executed head to tail and </span>
<span class="c1">// response interceptors are executed tail to head.</span>
<span class="nd">@http:ServiceConfig {</span>
    <span class="c1">// The interceptor pipeline. The base path of the interceptor services is the same as</span>
    <span class="c1">// the target service. Hence, they will be executed only for this particular service.</span>
    <span class="nx">interceptors</span><span class="p">:</span> <span class="p">[</span><span class="nx">requestInterceptor1</span><span class="p">,</span> <span class="nx">requestInterceptor2</span><span class="p">,</span> 
                   <span class="nx">responseInterceptor</span><span class="p">]</span>
<span class="p">}</span>
<span class="kd">service</span> <span class="o">/</span><span class="nx">user</span> <span class="nx">on</span> <span class="nx">interceptorListener</span> <span class="p">{</span>

    <span class="kd">resource</span> <span class="kd">function</span> <span class="nx">get</span> <span class="nx">greeting</span><span class="p">(</span><span class="nx">http</span><span class="p">:</span><span class="nx">Request</span> <span class="nx">req</span><span class="p">)</span> <span class="nx">returns</span> <span class="nx">http</span><span class="p">:</span><span class="nx">Ok</span><span class="p">|</span><span class="nx">error</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="nx">headers</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&quot;requestHeader1&quot;</span><span class="p">:</span> <span class="nx">check</span> <span class="nx">req</span><span class="p">.</span><span class="nx">getHeader</span><span class="p">(</span><span class="nx">interceptor_header1</span><span class="p">),</span>
                <span class="s">&quot;requestHeader2&quot;</span><span class="p">:</span> <span class="nx">check</span> <span class="nx">req</span><span class="p">.</span><span class="nx">getHeader</span><span class="p">(</span><span class="nx">interceptor_header2</span><span class="p">)</span>
            <span class="p">},</span>
            <span class="nx">mediaType</span><span class="p">:</span> <span class="s">&quot;application/org+json&quot;</span><span class="p">,</span>
            <span class="nx">body</span><span class="p">:</span> <span class="p">{</span>
                <span class="kt">message</span><span class="p">:</span> <span class="s">&quot;Greetings!&quot;</span>
            <span class="p">}</span>
        <span class="p">};</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

            </div>

            <div class="col-xs-12 col-sm-12 col-md-12">
                <table class="cTopInfoContainer cTopControlsContainer">
                    <tr>
                        <td class="cLeftTD">
                            <h2>Interceptors</h2>
                            <p><p>Interceptors are used to execute some common logic such as logging, header manipulation,
 state publishing, etc. for all the inbound requests and outbound responses. A
 <code>RequestInterceptor</code> can be used to intercept the request and execute some custom
 logic. <code>RequestInterceptors</code> have a resource method, which will be executed
 before dispatching the request to the actual resource in the target service. In addition,
 a <code>ResponseInterceptor</code> can be used to intercept the response. <code>ResponseInterceptors</code>
 have a remote method, which will be executed before dispatching the response to the client.
 A collection of these interceptors can be configured as a pipeline at the listener level or service level.
 For more information, see the <a href="https://docs.central.ballerina.io/ballerina/http/latest/">HTTP module</a>.</p>
</p>

                        </td>
                        <td class="cRightTD">
                            <div class="cTopButtonContainer">
                                
                                <div class="cButtonInfoContainer">
                                    <a class="prev" href="http-passthrough.html">
                                        <span>< PREVIOUS</span>
                                        <p>Passthrough</p>
                                    </a>
                                </div>
                                 
                                <div class="cButtonInfoContainer">
                                    <a class="next" href="http-error-handling.html">
                                        <span>NEXT ></span>
                                        <p>Error handling</p>
                                    </a>
                                </div>
                                
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
            <div class="example" id="http-interceptors">
                <div class="col-xs-12 col-sm-12 col-md-12 cBBETable-container cCodeLeft">
                    <div class="cTopControlsContainer">
                        <div class="cTopControlsRow">
                            <div class="cLeftTD">
                                <div class="cBBE-links">
                                    <ul>
                                        <li>
                                            <a class="copy"><img src="/img/copy-icon.svg" /></a>
                                        </li>
                                        <li>
                                            <a target="_blank" href="https://github.com/ballerina-platform/ballerina-distribution/tree/v2201.1.0/examples/http-interceptors/"><img src="/img/github-logo-green.svg" /></a>
                                        </li>
                                        
                                    </ul>
                                </div>
                            </div> 
                        </div>
                    </div>
              
                    
                    <div class="codeSnippeset">

                        <div class="cBBE-body">
                            
                            <div class="cTR">

                                <div class="code leading">
                                    <div class="highlight"><pre><code class=language-ballerina>import ballerina/http;
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                </div>
                            </div>
                            
                            <div class="cTR hover-enable">

                                <div class="code leading">
                                    <div class="highlight"><pre><code class=language-ballerina>final string interceptor_header1 = &quot;requestHeader1&quot;;
final string interceptor_header2 = &quot;requestHeader2&quot;;
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                    <div class="cCodeDesription">
                                        <div>
                                            <p>Header names to be set to the request in the request interceptor.</p>

                                        </div>
                                    </div>
                                    
                                </div>
                            </div>
                            
                            <div class="cTR hover-enable">

                                <div class="code leading">
                                    <div class="highlight"><pre><code class=language-ballerina>final string interceptor_header3 = &quot;responseHeader&quot;;
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                    <div class="cCodeDesription">
                                        <div>
                                            <p>Header name to be set to the response in the response interceptor.</p>

                                        </div>
                                    </div>
                                    
                                </div>
                            </div>
                            
                            <div class="cTR hover-enable">

                                <div class="code leading">
                                    <div class="highlight"><pre><code class=language-ballerina>final string interceptor_header_value1 = &quot;RequestInterceptor1&quot;;
final string interceptor_header_value2 = &quot;RequestInterceptor2&quot;;
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                    <div class="cCodeDesription">
                                        <div>
                                            <p>Header values to be set to the request in the request interceptor.</p>

                                        </div>
                                    </div>
                                    
                                </div>
                            </div>
                            
                            <div class="cTR hover-enable">

                                <div class="code leading">
                                    <div class="highlight"><pre><code class=language-ballerina>final string interceptor_header_value3 = &quot;ResponseInterceptor&quot;;
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                    <div class="cCodeDesription">
                                        <div>
                                            <p>Header value to be set to the response in the response interceptor.</p>

                                        </div>
                                    </div>
                                    
                                </div>
                            </div>
                            
                            <div class="cTR hover-enable">

                                <div class="code leading">
                                    <div class="highlight"><pre><code class=language-ballerina>service class RequestInterceptor1 {
    *http:RequestInterceptor;
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                    <div class="cCodeDesription">
                                        <div>
                                            <p>A <code>Requestinterceptorservice</code> class implementation. It intercepts the request
 and adds a header before it is dispatched to the target service. A <code>RequestInterceptorService</code>
 class can have only one resource function.</p>

                                        </div>
                                    </div>
                                    
                                </div>
                            </div>
                            
                            <div class="cTR hover-enable">

                                <div class="code leading">
                                    <div class="highlight"><pre><code class=language-ballerina>    resource function &#39;default [string... path](http:RequestContext ctx, 
                            http:Request req) returns http:NextService|error? {
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                    <div class="cCodeDesription">
                                        <div>
                                            <p>A default resource function, which will be executed for all the requests.
 A <code>RequestContext</code> is used to share data between interceptors.</p>

                                        </div>
                                    </div>
                                    
                                </div>
                            </div>
                            
                            <div class="cTR hover-enable">

                                <div class="code leading">
                                    <div class="highlight"><pre><code class=language-ballerina>        req.setHeader(interceptor_header1, interceptor_header_value1);
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                    <div class="cCodeDesription">
                                        <div>
                                            <p>Sets a header to the request inside the interceptor service.</p>

                                        </div>
                                    </div>
                                    
                                </div>
                            </div>
                            
                            <div class="cTR hover-enable">

                                <div class="code leading">
                                    <div class="highlight"><pre><code class=language-ballerina>        return ctx.next();
    }
}
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                    <div class="cCodeDesription">
                                        <div>
                                            <p>Returns the next interceptor or the target service in the pipeline.
 An error is returned when the call fails.</p>

                                        </div>
                                    </div>
                                    
                                </div>
                            </div>
                            
                            <div class="cTR hover-enable">

                                <div class="code leading">
                                    <div class="highlight"><pre><code class=language-ballerina>RequestInterceptor1 requestInterceptor1 = new;
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                    <div class="cCodeDesription">
                                        <div>
                                            <p>Creates a new <code>RequestInterceptor</code>.</p>

                                        </div>
                                    </div>
                                    
                                </div>
                            </div>
                            
                            <div class="cTR hover-enable">

                                <div class="code leading">
                                    <div class="highlight"><pre><code class=language-ballerina>service class RequestInterceptor2 {
    *http:RequestInterceptor;
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                    <div class="cCodeDesription">
                                        <div>
                                            <p>An <code>Interceptor</code> service class with a specific path. This interceptor can only be
 engaged at the service level.</p>

                                        </div>
                                    </div>
                                    
                                </div>
                            </div>
                            
                            <div class="cTR hover-enable">

                                <div class="code leading">
                                    <div class="highlight"><pre><code class=language-ballerina>    resource function get greeting(http:RequestContext ctx, 
                            http:Request req) returns http:NextService|error? {
        req.setHeader(interceptor_header2, interceptor_header_value2);
        return ctx.next();
    }
}
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                    <div class="cCodeDesription">
                                        <div>
                                            <p>This interceptor is executed only for GET requests with the relative path
 <code>greeting</code>.</p>

                                        </div>
                                    </div>
                                    
                                </div>
                            </div>
                            
                            <div class="cTR hover-enable">

                                <div class="code leading">
                                    <div class="highlight"><pre><code class=language-ballerina>RequestInterceptor2 requestInterceptor2 = new;
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                    <div class="cCodeDesription">
                                        <div>
                                            <p>Creates another new <code>RequestInterceptor</code>.</p>

                                        </div>
                                    </div>
                                    
                                </div>
                            </div>
                            
                            <div class="cTR hover-enable">

                                <div class="code leading">
                                    <div class="highlight"><pre><code class=language-ballerina>service class ResponseInterceptor {
    *http:ResponseInterceptor;
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                    <div class="cCodeDesription">
                                        <div>
                                            <p>A <code>ResponseInterceptor</code> service class implementation. It intercepts the response
 and adds a header before it is dispatched to the client. A <code>ResponseInterceptor</code>
 service class can have only one remote function : <code>interceptResponse</code>.</p>

                                        </div>
                                    </div>
                                    
                                </div>
                            </div>
                            
                            <div class="cTR hover-enable">

                                <div class="code leading">
                                    <div class="highlight"><pre><code class=language-ballerina>    remote function interceptResponse(http:RequestContext ctx, 
            http:Response res) returns http:NextService|error? {
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                    <div class="cCodeDesription">
                                        <div>
                                            <p>The <code>interceptResponse</code> remote function, which will be executed for all the
 responses. A <code>RequestContext</code> is used to share data between interceptors.</p>

                                        </div>
                                    </div>
                                    
                                </div>
                            </div>
                            
                            <div class="cTR hover-enable">

                                <div class="code leading">
                                    <div class="highlight"><pre><code class=language-ballerina>        res.setHeader(interceptor_header3, interceptor_header_value3);
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                    <div class="cCodeDesription">
                                        <div>
                                            <p>Sets a header to the response inside the interceptor service.</p>

                                        </div>
                                    </div>
                                    
                                </div>
                            </div>
                            
                            <div class="cTR hover-enable">

                                <div class="code leading">
                                    <div class="highlight"><pre><code class=language-ballerina>        return ctx.next();
    }
}
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                    <div class="cCodeDesription">
                                        <div>
                                            <p>Returns the next interceptor in the pipeline or <code>nil</code> if there is no
 more interceptors to be returned. In case a <code>nil</code> value is returned, then,
 the modified response will be returned to the client. In addtion to these
 return values, an error is returned when the call fails.</p>

                                        </div>
                                    </div>
                                    
                                </div>
                            </div>
                            
                            <div class="cTR hover-enable">

                                <div class="code leading">
                                    <div class="highlight"><pre><code class=language-ballerina>ResponseInterceptor responseInterceptor = new;
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                    <div class="cCodeDesription">
                                        <div>
                                            <p>Creates a new <code>ResponseInterceptor</code>.</p>

                                        </div>
                                    </div>
                                    
                                </div>
                            </div>
                            
                            <div class="cTR hover-enable">

                                <div class="code leading">
                                    <div class="highlight"><pre><code class=language-ballerina>listener http:Listener interceptorListener = new http:Listener(9090);
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                    <div class="cCodeDesription">
                                        <div>
                                            <p>Interceptors can also b engaged at the listener level. In this case, the <code>RequestInterceptors</code>
 can have only the default path.</p>

                                        </div>
                                    </div>
                                    
                                </div>
                            </div>
                            
                            <div class="cTR hover-enable">

                                <div class="code leading">
                                    <div class="highlight"><pre><code class=language-ballerina>@http:ServiceConfig {
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                    <div class="cCodeDesription">
                                        <div>
                                            <p>Engage interceptors at the service level. Interceptor services will be executed in
 the configured order i.e., request interceptors are executed head to tail and
 response interceptors are executed tail to head.</p>

                                        </div>
                                    </div>
                                    
                                </div>
                            </div>
                            
                            <div class="cTR hover-enable">

                                <div class="code leading">
                                    <div class="highlight"><pre><code class=language-ballerina>    interceptors: [requestInterceptor1, requestInterceptor2, 
                   responseInterceptor]
}
service /user on interceptorListener {
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                    <div class="cCodeDesription">
                                        <div>
                                            <p>The interceptor pipeline. The base path of the interceptor services is the same as
 the target service. Hence, they will be executed only for this particular service.</p>

                                        </div>
                                    </div>
                                    
                                </div>
                            </div>
                            
                            <div class="cTR">

                                <div class="code">
                                    <div class="highlight"><pre><code class=language-ballerina>    resource function get greeting(http:Request req) returns http:Ok|error {
        return {
            headers: {
                &quot;requestHeader1&quot;: check req.getHeader(interceptor_header1),
                &quot;requestHeader2&quot;: check req.getHeader(interceptor_header2)
            },
            mediaType: &quot;application/org+json&quot;,
            body: {
                message: &quot;Greetings!&quot;
            }
        };
    }
}
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                </div>
                            </div>
                            
                        </div>
                    </div>
                    
                    <div class="codeSnippeset">

                        <div class="cBBE-body">
                            
                            <div class="cTR cOutputTr">

                                <div class="code cOutput">
                                    <div class="highlight"><pre><code class=shell-session># Run the service.
bal run http_interceptors.bal
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                </div>
                            </div>
                            
                        </div>
                    </div>
                    
                    <div class="codeSnippeset">

                        <div class="cBBE-body">
                            
                            <div class="cTR cOutputTr">

                                <div class="code cOutput">
                                    <div class="highlight"><pre><code class=shell-session># Invoke the service.
curl -v http://localhost:9090/user/greeting
*   Trying ::1:9090...
* Connected to localhost (::1) port 9090 (#0)
&gt; GET /user/greeting HTTP/1.1
&gt; Host: localhost:9090
&gt; User-Agent: curl/7.77.0
&gt; Accept: */*
&gt; 
* Mark bundle as not supporting multiuse.
&lt; HTTP/1.1 200 OK
&lt; requestHeader1: RequestInterceptor1
&lt; requestHeader2: RequestInterceptor2
&lt; content-type: application/org+json
&lt; responseHeader: ResponseInterceptor
&lt; content-length: 24
&lt; server: ballerina
&lt; date: Tue, 19 Apr 2022 12:42:44 +0530
&lt; 
* Connection #0 to host localhost left intact
{&quot;message&quot;:&quot;Greetings!&quot;}
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                </div>
                            </div>
                            
                        </div>
                    </div>
                    


                     
                </div>
            </div>
        </div>
    </div>

     <script>
            $(document).ready(function() {

                // hljs.initHighlightingOnLoad();

                $(".switch").click(function() {
                    $(".cCodeRight").toggleClass('cShow');
                    $(".cCodeLeft").toggleClass('cHide');
                });

                // get code text
                var codeSnippet = document.getElementsByClassName('FullCode')[0];
                var codeText = codeSnippet.getElementsByTagName('pre')[0].textContent;

                // register "copy to clipboard" event to elements with "copy" class
                var clipboard = new ClipboardJS('.copy', {
                    text: function(trigger) {
                        return codeText;
                    }
                });

                // Register events show hide tooltip on click event
                clipboard.on('success', function(e) {
                    setTooltip(e.trigger, 'Copied!');
                    hideTooltip(e.trigger);
                });

                clipboard.on('error', function(e) {
                    setTooltip(e.trigger, 'Failed!');
                    hideTooltip(e.trigger);
                });

                $('.copy').tooltip({
                    trigger: 'click',
                    placement: 'bottom'
                });
                $("a.copy").unbind("click");
            });

            function setTooltip(btn, message) {
                $(btn).attr('data-original-title', message)
                    .tooltip('show');
            }

            function hideTooltip(btn) {
                setTimeout(function() {
                    $(btn).tooltip('hide').removeAttr('data-original-title');
                }, 1000);
            }
        </script>
