---
layout: ballerina-example-page-old
title: Trace logs
description: BBE on how trace logs can be used to monitor the HTTP traffic in Ballerina.
keywords: ballerina, ballerina by example, bbe, http, trace logs
permalink: /learn/by-example/http-trace-logs
active: http-trace-logs
redirect_from:
  - /swan-lake/learn/by-example/http-trace-logs
  - /swan-lake/learn/by-example/http-trace-logs.html
---
<div class="row cBallerina-io-Gray-row">
        <div class="container cBallerinaBySampleContainer">
            <div class="FullCode">
                <div class="highlight"><pre><span class="kn">import</span> <span class="nx">ballerina</span><span class="o">/</span><span class="nx">http</span><span class="p">;</span>

<span class="kd">service</span> <span class="o">/</span><span class="nx">hello</span> <span class="nx">on</span> <span class="nx">new</span> <span class="nx">http</span><span class="p">:</span><span class="nx">Listener</span><span class="p">(</span><span class="mi">9090</span><span class="p">)</span> <span class="p">{</span>

    <span class="kd">resource</span> <span class="kd">function</span> <span class="nx">get</span> <span class="p">.(</span><span class="nx">http</span><span class="p">:</span><span class="nx">Request</span> <span class="nx">req</span><span class="p">)</span> <span class="nx">returns</span> <span class="nx">http</span><span class="p">:</span><span class="nx">Response</span><span class="p">|</span><span class="nx">error</span> <span class="p">{</span>
        <span class="nx">http</span><span class="p">:</span><span class="nx">Client</span> <span class="nx">clientEP</span> <span class="p">=</span> <span class="nx">check</span> <span class="nx">new</span> <span class="p">(</span><span class="s">&quot;https://httpstat.us&quot;</span><span class="p">);</span>
        <span class="nx">http</span><span class="p">:</span><span class="nx">Response</span> <span class="nx">resp</span> <span class="p">=</span> <span class="nx">check</span> <span class="nx">clientEP</span><span class="o">-&gt;</span><span class="nx">forward</span><span class="p">(</span><span class="s">&quot;/200&quot;</span><span class="p">,</span> <span class="nx">req</span><span class="p">);</span>
        <span class="k">return</span> <span class="nx">resp</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

            </div>

            <div class="col-xs-12 col-sm-12 col-md-12">
                <table class="cTopInfoContainer cTopControlsContainer">
                    <tr>
                        <td class="cLeftTD">
                            <h2>Trace logs</h2>
                            <p><p>The HTTP trace logs can be used to monitor the HTTP traffic that goes in and out of Ballerina.
 To enable trace logs, the log level has to be set to <code>TRACE</code> using the runtime argument:
 <br> <code>-Cballerina.http.traceLogConsole=true</code>. <br>
 The configurations can be set in the <code>Config.toml</code> file for advanced use cases such as specifying the file path
 to save the trace logs and specifying the hostname and port of a socket service to publish the trace logs.<br/><br/>
 For more information on the underlying module,
 see the <a href="https://docs.central.ballerina.io/ballerina/http/latest/">HTTP module</a>.</p>
</p>

                        </td>
                        <td class="cRightTD">
                            <div class="cTopButtonContainer">
                                
                                <div class="cButtonInfoContainer">
                                    <a class="prev" href="http-compression.html">
                                        <span>< PREVIOUS</span>
                                        <p>Compression</p>
                                    </a>
                                </div>
                                 
                                <div class="cButtonInfoContainer">
                                    <a class="next" href="http-access-logs.html">
                                        <span>NEXT ></span>
                                        <p>Access logs</p>
                                    </a>
                                </div>
                                
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
            <div class="example" id="http-trace-logs">
                <div class="col-xs-12 col-sm-12 col-md-12 cBBETable-container cCodeLeft">
                    <div class="cTopControlsContainer">
                        <div class="cTopControlsRow">
                            <div class="cLeftTD">
                                <div class="cBBE-links">
                                    <ul>
                                        <li>
                                            <a class="copy"><img src="/img/copy-icon.svg" /></a>
                                        </li>
                                        <li>
                                            <a target="_blank" href="https://github.com/ballerina-platform/ballerina-distribution/tree/v2201.1.0/examples/http-trace-logs/"><img src="/img/github-logo-green.svg" /></a>
                                        </li>
                                        
                                    </ul>
                                </div>
                            </div> 
                        </div>
                    </div>
              
                    
                    <div class="codeSnippeset">

                        <div class="cBBE-body">
                            
                            <div class="cTR">

                                <div class="code leading">
                                    <div class="highlight"><pre><code class=language-ballerina>import ballerina/http;
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                </div>
                            </div>
                            
                            <div class="cTR">

                                <div class="code leading">
                                    <div class="highlight"><pre><code class=language-ballerina>service /hello on new http:Listener(9090) {
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                </div>
                            </div>
                            
                            <div class="cTR">

                                <div class="code">
                                    <div class="highlight"><pre><code class=language-ballerina>    resource function get .(http:Request req) returns http:Response|error {
        http:Client clientEP = check new (&quot;https://httpstat.us&quot;);
        http:Response resp = check clientEP-&gt;forward(&quot;/200&quot;, req);
        return resp;
    }
}
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                </div>
                            </div>
                            
                        </div>
                    </div>
                    
                    <div class="codeSnippeset">

                        <div class="cBBE-body">
                            
                            <div class="cTR cOutputTr">

                                <div class="code leading cOutput">
                                    <div class="highlight"><pre><code class=shell-session>bal run http_trace_logs.bal -- -Cballerina.http.traceLogConsole=true
ballerina: HTTP trace log enabled
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                </div>
                            </div>
                            
                            <div class="cTR cOutputTr">

                                <div class="code leading cOutput">
                                    <div class="highlight"><pre><code class=shell-session># In the logs, `http.downstream` refers to the HTTP traffic that flows between the client and Ballerina
# while `http.upstream` refers to the HTTP traffic that flows between Ballerina and the backend.
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                </div>
                            </div>
                            
                            <div class="cTR cOutputTr">

                                <div class="code cOutput">
                                    <div class="highlight"><pre><code class=shell-session>[2021-10-06 18:18:11,118] TRACE {http.tracelog.downstream} - [id: 0x91dfb8c7] REGISTERED
[2021-10-06 18:18:11,151] TRACE {http.tracelog.downstream} - [id: 0x91dfb8c7, correlatedSource: n/a, host:/0:0:0:0:0:0:0:1:9090 - remote:/0:0:0:0:0:0:0:1:50367] ACTIVE
[2021-10-06 18:18:11,187] TRACE {http.tracelog.downstream} - [id: 0x91dfb8c7, correlatedSource: n/a, host:/0:0:0:0:0:0:0:1:9090 - remote:/0:0:0:0:0:0:0:1:50367] INBOUND: DefaultHttpRequest(decodeResult: success, version: HTTP/1.1)
GET /hello HTTP/1.1
Host: localhost:9090
User-Agent: curl/7.64.1
Accept: */*
[2021-10-06 18:18:11,223] TRACE {http.tracelog.downstream} - [id: 0x91dfb8c7, correlatedSource: n/a, host:localhost/0:0:0:0:0:0:0:1:9090 - remote:/0:0:0:0:0:0:0:1:50367] INBOUND: EmptyLastHttpContent, 0B
[2021-10-06 18:18:11,225] TRACE {http.tracelog.downstream} - [id: 0x91dfb8c7, correlatedSource: n/a, host:localhost/0:0:0:0:0:0:0:1:9090 - remote:/0:0:0:0:0:0:0:1:50367] READ COMPLETE
[2021-10-06 18:18:11,418] TRACE {http.tracelog.upstream} - [id: 0xf7c32f4c] REGISTERED
[2021-10-06 18:18:11,418] TRACE {http.tracelog.upstream} - [id: 0xf7c32f4c] CONNECT: httpstat.us/172.67.134.121:80, null
[2021-10-06 18:18:11,661] TRACE {http.tracelog.upstream} - [id: 0xf7c32f4c, correlatedSource: n/a, host:/192.168.1.21:50368 - remote:httpstat.us/172.67.134.121:80] DEREGISTER
[2021-10-06 18:18:11,664] TRACE {http.tracelog.upstream} - [id: 0xf7c32f4c, correlatedSource: n/a, host:/192.168.1.21:50368 - remote:httpstat.us/172.67.134.121:80] ACTIVE
[2021-10-06 18:18:11,665] TRACE {http.tracelog.upstream} - [id: 0xf7c32f4c, correlatedSource: n/a, host:/192.168.1.21:50368 - remote:httpstat.us/172.67.134.121:80] UNREGISTERED
[2021-10-06 18:18:11,665] TRACE {http.tracelog.upstream} - [id: 0xf7c32f4c] REGISTERED
[2021-10-06 18:18:11,671] TRACE {http.tracelog.upstream} - [id: 0xf7c32f4c, correlatedSource: 0x91dfb8c7, host:/192.168.1.21:50368 - remote:httpstat.us/172.67.134.121:80] OUTBOUND: DefaultHttpRequest(decodeResult: success, version: HTTP/1.1)
GET /200 HTTP/1.1
Accept: */*
host: httpstat.us
user-agent: ballerina
connection: keep-alive
[2021-10-06 18:18:11,674] TRACE {http.tracelog.upstream} - [id: 0xf7c32f4c, correlatedSource: 0x91dfb8c7, host:/192.168.1.21:50368 - remote:httpstat.us/172.67.134.121:80] OUTBOUND: EmptyLastHttpContent, 0B
[2021-10-06 18:18:11,675] TRACE {http.tracelog.upstream} - [id: 0xf7c32f4c, correlatedSource: 0x91dfb8c7, host:/192.168.1.21:50368 - remote:httpstat.us/172.67.134.121:80] FLUSH
[2021-10-06 18:18:12,027] TRACE {http.tracelog.upstream} - [id: 0xf7c32f4c, correlatedSource: 0x91dfb8c7, host:/192.168.1.21:50368 - remote:httpstat.us/172.67.134.121:80] INBOUND: DefaultHttpResponse(decodeResult: success, version: HTTP/1.1)
HTTP/1.1 200 OK
Date: Wed, 06 Oct 2021 12:48:11 GMT
Content-Type: text/plain; charset=utf-8
Transfer-Encoding: chunked
Connection: keep-alive
cache-control: private
vary: Accept-Encoding
x-aspnetmvc-version: 5.1
access-control-allow-origin: *
access-control-expose-headers: Link, Content-Range, Location, WWW-Authenticate, Proxy-Authenticate, Retry-After
access-control-expose-headers: Request-Context
x-aspnet-version: 4.0.30319
request-context: appId=cid-v1:7585021b-2db7-4da6-abff-2cf23005f0a9
x-powered-by: ASP.NET
set-cookie: ARRAffinity=dd9ed9b645068a439255e4a6e0a4e0f2b5c11799187f1613a5766939d04a2bc0;Path=/;HttpOnly;Domain=httpstat.us
CF-Cache-Status: DYNAMIC
Report-To: {&quot;endpoints&quot;:[{&quot;url&quot;:&quot;https:\/\/a.nel.cloudflare.com\/report\/v3?s=Df0k19O1x6RNB6Uc0hwC%2BFcQZS27%2BOuWb1JATwpu15Zhvdxc3Yd465533%2BuB2PIJKEBfRrCyHSgNLMiDje2EMkli18C83LScpe4czBPDKbUV77XLGuzwGdu9oGoCpQ%3D%3D&quot;}],&quot;group&quot;:&quot;cf-nel&quot;,&quot;max_age&quot;:604800}
NEL: {&quot;success_fraction&quot;:0,&quot;report_to&quot;:&quot;cf-nel&quot;,&quot;max_age&quot;:604800}
Server: cloudflare
CF-RAY: 699f00a99def15af-EWR
alt-svc: h3=&quot;:443&quot;; ma=86400, h3-29=&quot;:443&quot;; ma=86400, h3-28=&quot;:443&quot;; ma=86400, h3-27=&quot;:443&quot;; ma=86400
[2021-10-06 18:18:12,040] TRACE {http.tracelog.upstream} - [id: 0xf7c32f4c, correlatedSource: 0x91dfb8c7, host:/192.168.1.21:50368 - remote:httpstat.us/172.67.134.121:80] INBOUND: DefaultHttpContent(data: PooledSlicedByteBuf(ridx: 0, widx: 6, cap: 6/6, unwrapped: PooledUnsafeDirectByteBuf(ridx: 1172, widx: 1177, cap: 2048)), decoderResult: success), 6B
200 OK
[2021-10-06 18:18:12,041] TRACE {http.tracelog.upstream} - [id: 0xf7c32f4c, correlatedSource: 0x91dfb8c7, host:/192.168.1.21:50368 - remote:httpstat.us/172.67.134.121:80] INBOUND: EmptyLastHttpContent, 0B
[2021-10-06 18:18:12,043] TRACE {http.tracelog.upstream} - [id: 0xf7c32f4c, correlatedSource: 0x91dfb8c7, host:/192.168.1.21:50368 - remote:httpstat.us/172.67.134.121:80] READ COMPLETE
[2021-10-06 18:18:12,046] TRACE {http.tracelog.downstream} - [id: 0x91dfb8c7, correlatedSource: n/a, host:localhost/0:0:0:0:0:0:0:1:9090 - remote:/0:0:0:0:0:0:0:1:50367] OUTBOUND: DefaultHttpResponse(decodeResult: success, version: HTTP/1.1)
HTTP/1.1 200 OK
Date: Wed, 06 Oct 2021 12:48:11 GMT
Content-Type: text/plain; charset=utf-8
Transfer-Encoding: chunked
cache-control: private
vary: Accept-Encoding
x-aspnetmvc-version: 5.1
access-control-allow-origin: *
access-control-expose-headers: Link, Content-Range, Location, WWW-Authenticate, Proxy-Authenticate, Retry-After
access-control-expose-headers: Request-Context
x-aspnet-version: 4.0.30319
request-context: appId=cid-v1:7585021b-2db7-4da6-abff-2cf23005f0a9
x-powered-by: ASP.NET
set-cookie: ARRAffinity=dd9ed9b645068a439255e4a6e0a4e0f2b5c11799187f1613a5766939d04a2bc0;Path=/;HttpOnly;Domain=httpstat.us
CF-Cache-Status: DYNAMIC
Report-To: {&quot;endpoints&quot;:[{&quot;url&quot;:&quot;https:\/\/a.nel.cloudflare.com\/report\/v3?s=Df0k19O1x6RNB6Uc0hwC%2BFcQZS27%2BOuWb1JATwpu15Zhvdxc3Yd465533%2BuB2PIJKEBfRrCyHSgNLMiDje2EMkli18C83LScpe4czBPDKbUV77XLGuzwGdu9oGoCpQ%3D%3D&quot;}],&quot;group&quot;:&quot;cf-nel&quot;,&quot;max_age&quot;:604800}
NEL: {&quot;success_fraction&quot;:0,&quot;report_to&quot;:&quot;cf-nel&quot;,&quot;max_age&quot;:604800}
CF-RAY: 699f00a99def15af-EWR
alt-svc: h3=&quot;:443&quot;; ma=86400, h3-29=&quot;:443&quot;; ma=86400, h3-28=&quot;:443&quot;; ma=86400, h3-27=&quot;:443&quot;; ma=86400
server: cloudflare
[2021-10-06 18:18:12,048] TRACE {http.tracelog.downstream} - [id: 0x91dfb8c7, correlatedSource: n/a, host:localhost/0:0:0:0:0:0:0:1:9090 - remote:/0:0:0:0:0:0:0:1:50367] OUTBOUND: DefaultHttpContent(data: PooledSlicedByteBuf(ridx: 0, widx: 6, cap: 6/6, unwrapped: PooledUnsafeDirectByteBuf(ridx: 1177, widx: 1177, cap: 2048)), decoderResult: success), 6B
200 OK
[2021-10-06 18:18:12,049] TRACE {http.tracelog.downstream} - [id: 0x91dfb8c7, correlatedSource: n/a, host:localhost/0:0:0:0:0:0:0:1:9090 - remote:/0:0:0:0:0:0:0:1:50367] FLUSH
[2021-10-06 18:18:12,054] TRACE {http.tracelog.downstream} - [id: 0x91dfb8c7, correlatedSource: n/a, host:localhost/0:0:0:0:0:0:0:1:9090 - remote:/0:0:0:0:0:0:0:1:50367] OUTBOUND: DefaultLastHttpContent(data: UnpooledByteBufAllocator$InstrumentedUnpooledUnsafeHeapByteBuf(ridx: 0, widx: 0, cap: 0), decoderResult: success), 0B
[2021-10-06 18:18:12,055] TRACE {http.tracelog.downstream} - [id: 0x91dfb8c7, correlatedSource: n/a, host:localhost/0:0:0:0:0:0:0:1:9090 - remote:/0:0:0:0:0:0:0:1:50367] FLUSH
[2021-10-06 18:18:12,057] TRACE {http.tracelog.downstream} - [id: 0x91dfb8c7, correlatedSource: n/a, host:localhost/0:0:0:0:0:0:0:1:9090 - remote:/0:0:0:0:0:0:0:1:50367] READ COMPLETE
[2021-10-06 18:18:12,058] TRACE {http.tracelog.downstream} - [id: 0x91dfb8c7, correlatedSource: n/a, host:localhost/0:0:0:0:0:0:0:1:9090 - remote:/0:0:0:0:0:0:0:1:50367] INACTIVE
[2021-10-06 18:18:12,061] TRACE {http.tracelog.downstream} - [id: 0x91dfb8c7, correlatedSource: n/a, host:localhost/0:0:0:0:0:0:0:1:9090 - remote:/0:0:0:0:0:0:0:1:50367] UNREGISTERED
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                </div>
                            </div>
                            
                        </div>
                    </div>
                    
                    <div class="codeSnippeset">

                        <div class="cBBE-body">
                            
                            <div class="cTR cOutputTr">

                                <div class="code cOutput">
                                    <div class="highlight"><pre><code class=shell-session># Invoke the service.
curl http://localhost:9090/hello
200 OK
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                </div>
                            </div>
                            
                        </div>
                    </div>
                    


                     
                </div>
            </div>
        </div>
    </div>

     <script>
            $(document).ready(function() {

                // hljs.initHighlightingOnLoad();

                $(".switch").click(function() {
                    $(".cCodeRight").toggleClass('cShow');
                    $(".cCodeLeft").toggleClass('cHide');
                });

                // get code text
                var codeSnippet = document.getElementsByClassName('FullCode')[0];
                var codeText = codeSnippet.getElementsByTagName('pre')[0].textContent;

                // register "copy to clipboard" event to elements with "copy" class
                var clipboard = new ClipboardJS('.copy', {
                    text: function(trigger) {
                        return codeText;
                    }
                });

                // Register events show hide tooltip on click event
                clipboard.on('success', function(e) {
                    setTooltip(e.trigger, 'Copied!');
                    hideTooltip(e.trigger);
                });

                clipboard.on('error', function(e) {
                    setTooltip(e.trigger, 'Failed!');
                    hideTooltip(e.trigger);
                });

                $('.copy').tooltip({
                    trigger: 'click',
                    placement: 'bottom'
                });
                $("a.copy").unbind("click");
            });

            function setTooltip(btn, message) {
                $(btn).attr('data-original-title', message)
                    .tooltip('show');
            }

            function hideTooltip(btn) {
                setTimeout(function() {
                    $(btn).tooltip('hide').removeAttr('data-original-title');
                }, 1000);
            }
        </script>
