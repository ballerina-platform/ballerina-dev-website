---
layout: ballerina-example-page-old
title: Send emails
description: This BBE is about sending emails.
keywords: ballerina, ballerina by example, bbe, email, SMTP
permalink: /learn/by-example/send-email
active: send-email
redirect_from:
  - /swan-lake/learn/by-example/send-email
  - /swan-lake/learn/by-example/send-email.html
---
<div class="row cBallerina-io-Gray-row">
        <div class="container cBallerinaBySampleContainer">
            <div class="FullCode">
                <div class="highlight"><pre><span class="kn">import</span> <span class="nx">ballerina</span><span class="o">/</span><span class="nx">email</span><span class="p">;</span>

<span class="nx">public</span> <span class="kd">function</span> <span class="nx">main</span><span class="p">()</span> <span class="nx">returns</span> <span class="nx">error</span><span class="err">?</span> <span class="p">{</span>
    <span class="c1">// Creates an SMTP client with the connection parameters, host, username,</span>
    <span class="c1">// and password. The default port number `465` is used over SSL with these</span>
    <span class="c1">// configurations. `SmtpConfig` can be configured and passed to this</span>
    <span class="c1">// client if the port or security is to be customized.</span>
    <span class="nx">email</span><span class="p">:</span><span class="nx">SmtpClient</span> <span class="nx">smtpClient</span> <span class="p">=</span> <span class="nx">check</span> <span class="nx">new</span> <span class="p">(</span><span class="s">&quot;smtp.email.com&quot;</span><span class="p">,</span>
        <span class="s">&quot;sender@email.com&quot;</span> <span class="p">,</span> <span class="s">&quot;pass123&quot;</span><span class="p">);</span>

    <span class="c1">// Defines the email that is required to be sent.</span>
    <span class="nx">email</span><span class="p">:</span><span class="nx">Message</span> <span class="nx">email</span> <span class="p">=</span> <span class="p">{</span>
        <span class="c1">// &quot;TO&quot;, &quot;CC&quot;, and &quot;BCC&quot; address lists are added as follows.</span>
        <span class="c1">// Only the &quot;TO&quot; address list is mandatory out of these three.</span>
        <span class="nx">to</span><span class="p">:</span> <span class="p">[</span><span class="s">&quot;receiver1@email.com&quot;</span><span class="p">,</span> <span class="s">&quot;receiver2@email.com&quot;</span><span class="p">],</span>
        <span class="nx">cc</span><span class="p">:</span> <span class="p">[</span><span class="s">&quot;receiver3@email.com&quot;</span><span class="p">,</span> <span class="s">&quot;receiver4@email.com&quot;</span><span class="p">],</span>
        <span class="nx">bcc</span><span class="p">:</span> <span class="p">[</span><span class="s">&quot;receiver5@email.com&quot;</span><span class="p">],</span>
        <span class="c1">// Subject of the email is added as follows. This field is mandatory.</span>
        <span class="nx">subject</span><span class="p">:</span> <span class="s">&quot;Sample Email&quot;</span><span class="p">,</span>
        <span class="c1">// Body content (text) of the email is added as follows.</span>
        <span class="c1">// This field is optional.</span>
        <span class="nx">body</span><span class="p">:</span> <span class="s">&quot;This is a sample email.&quot;</span><span class="p">,</span>
        <span class="c1">// Email author&#39;s address is added as follows. This field is mandatory.</span>
        <span class="err">&#39;</span><span class="nx">from</span><span class="p">:</span> <span class="s">&quot;author@email.com&quot;</span><span class="p">,</span>
        <span class="c1">// Email sender service address is added as follows.</span>
        <span class="c1">// This field is optional. `Sender` is same as the `&#39;from` when the</span>
        <span class="c1">// email author himself sends the email.</span>
        <span class="nx">sender</span><span class="p">:</span> <span class="s">&quot;sender@email.com&quot;</span><span class="p">,</span>
        <span class="c1">// List of recipients when replying to the email is added as follows.</span>
        <span class="c1">// This field is optional. These addresses are required when the emails</span>
        <span class="c1">// are to be replied to some other address(es) other than the sender or</span>
        <span class="c1">// the author.</span>
        <span class="nx">replyTo</span><span class="p">:</span> <span class="p">[</span><span class="s">&quot;replyTo1@email.com&quot;</span><span class="p">,</span> <span class="s">&quot;replyTo2@email.com&quot;</span><span class="p">]</span>
    <span class="p">};</span>

    <span class="c1">// Sends the email message with the client. The `send` method can be used</span>
    <span class="c1">// instead, if the email is required to be sent with mandatory and optional</span>
    <span class="c1">// parameters instead of configuring an `email:Message` record.</span>
    <span class="nx">check</span> <span class="nx">smtpClient</span><span class="o">-&gt;</span><span class="nx">sendMessage</span><span class="p">(</span><span class="nx">email</span><span class="p">);</span>

<span class="p">}</span>
</pre></div>

            </div>

            <div class="col-xs-12 col-sm-12 col-md-12">
                <table class="cTopInfoContainer cTopControlsContainer">
                    <tr>
                        <td class="cLeftTD">
                            <h2>Send emails</h2>
                            <p><p>The Email Connector is used to send (with SMTP) emails
 using the SSL or STARTTLS protocols. This sample
 includes sending emails with default configurations
 over SSL using the default ports.<br/><br/>
 For more information on the underlying module,
 see the <a href="https://docs.central.ballerina.io/ballerina/email/latest/">Email module</a>.</p>
</p>

                        </td>
                        <td class="cRightTD">
                            <div class="cTopButtonContainer">
                                
                                <div class="cButtonInfoContainer">
                                    <a class="prev" href="udp-listener.html">
                                        <span>< PREVIOUS</span>
                                        <p>Listener</p>
                                    </a>
                                </div>
                                 
                                <div class="cButtonInfoContainer">
                                    <a class="next" href="receive-email-using-client.html">
                                        <span>NEXT ></span>
                                        <p>Receive emails using a client</p>
                                    </a>
                                </div>
                                
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
            <div class="example" id="send-email">
                <div class="col-xs-12 col-sm-12 col-md-12 cBBETable-container cCodeLeft">
                    <div class="cTopControlsContainer">
                        <div class="cTopControlsRow">
                            <div class="cLeftTD">
                                <div class="cBBE-links">
                                    <ul>
                                        <li>
                                            <a class="copy"><img src="/img/copy-icon.svg" /></a>
                                        </li>
                                        <li>
                                            <a target="_blank" href="https://github.com/ballerina-platform/ballerina-distribution/tree/v2201.1.0/examples/send-email/"><img src="/img/github-logo-green.svg" /></a>
                                        </li>
                                        
                                    </ul>
                                </div>
                            </div> 
                        </div>
                    </div>
              
                    
                    <div class="codeSnippeset">

                        <div class="cBBE-body">
                            
                            <div class="cTR">

                                <div class="code leading">
                                    <div class="highlight"><pre><code class=language-ballerina>import ballerina/email;
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                </div>
                            </div>
                            
                            <div class="cTR">

                                <div class="code leading">
                                    <div class="highlight"><pre><code class=language-ballerina>public function main() returns error? {
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                </div>
                            </div>
                            
                            <div class="cTR hover-enable">

                                <div class="code leading">
                                    <div class="highlight"><pre><code class=language-ballerina>    email:SmtpClient smtpClient = check new (&quot;smtp.email.com&quot;,
        &quot;sender@email.com&quot; , &quot;pass123&quot;);
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                    <div class="cCodeDesription">
                                        <div>
                                            <p>Creates an SMTP client with the connection parameters, host, username,
 and password. The default port number <code>465</code> is used over SSL with these
 configurations. <code>SmtpConfig</code> can be configured and passed to this
 client if the port or security is to be customized.</p>

                                        </div>
                                    </div>
                                    
                                </div>
                            </div>
                            
                            <div class="cTR hover-enable">

                                <div class="code leading">
                                    <div class="highlight"><pre><code class=language-ballerina>    email:Message email = {
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                    <div class="cCodeDesription">
                                        <div>
                                            <p>Defines the email that is required to be sent.</p>

                                        </div>
                                    </div>
                                    
                                </div>
                            </div>
                            
                            <div class="cTR hover-enable">

                                <div class="code leading">
                                    <div class="highlight"><pre><code class=language-ballerina>        to: [&quot;receiver1@email.com&quot;, &quot;receiver2@email.com&quot;],
        cc: [&quot;receiver3@email.com&quot;, &quot;receiver4@email.com&quot;],
        bcc: [&quot;receiver5@email.com&quot;],
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                    <div class="cCodeDesription">
                                        <div>
                                            <p>&ldquo;TO&rdquo;, &ldquo;CC&rdquo;, and &ldquo;BCC&rdquo; address lists are added as follows.
 Only the &ldquo;TO&rdquo; address list is mandatory out of these three.</p>

                                        </div>
                                    </div>
                                    
                                </div>
                            </div>
                            
                            <div class="cTR hover-enable">

                                <div class="code leading">
                                    <div class="highlight"><pre><code class=language-ballerina>        subject: &quot;Sample Email&quot;,
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                    <div class="cCodeDesription">
                                        <div>
                                            <p>Subject of the email is added as follows. This field is mandatory.</p>

                                        </div>
                                    </div>
                                    
                                </div>
                            </div>
                            
                            <div class="cTR hover-enable">

                                <div class="code leading">
                                    <div class="highlight"><pre><code class=language-ballerina>        body: &quot;This is a sample email.&quot;,
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                    <div class="cCodeDesription">
                                        <div>
                                            <p>Body content (text) of the email is added as follows.
 This field is optional.</p>

                                        </div>
                                    </div>
                                    
                                </div>
                            </div>
                            
                            <div class="cTR hover-enable">

                                <div class="code leading">
                                    <div class="highlight"><pre><code class=language-ballerina>        &#39;from: &quot;author@email.com&quot;,
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                    <div class="cCodeDesription">
                                        <div>
                                            <p>Email author&rsquo;s address is added as follows. This field is mandatory.</p>

                                        </div>
                                    </div>
                                    
                                </div>
                            </div>
                            
                            <div class="cTR hover-enable">

                                <div class="code leading">
                                    <div class="highlight"><pre><code class=language-ballerina>        sender: &quot;sender@email.com&quot;,
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                    <div class="cCodeDesription">
                                        <div>
                                            <p>Email sender service address is added as follows.
 This field is optional. <code>Sender</code> is same as the <code>'from</code> when the
 email author himself sends the email.</p>

                                        </div>
                                    </div>
                                    
                                </div>
                            </div>
                            
                            <div class="cTR hover-enable">

                                <div class="code leading">
                                    <div class="highlight"><pre><code class=language-ballerina>        replyTo: [&quot;replyTo1@email.com&quot;, &quot;replyTo2@email.com&quot;]
    };
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                    <div class="cCodeDesription">
                                        <div>
                                            <p>List of recipients when replying to the email is added as follows.
 This field is optional. These addresses are required when the emails
 are to be replied to some other address(es) other than the sender or
 the author.</p>

                                        </div>
                                    </div>
                                    
                                </div>
                            </div>
                            
                            <div class="cTR hover-enable">

                                <div class="code leading">
                                    <div class="highlight"><pre><code class=language-ballerina>    check smtpClient-&gt;sendMessage(email);
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                    <div class="cCodeDesription">
                                        <div>
                                            <p>Sends the email message with the client. The <code>send</code> method can be used
 instead, if the email is required to be sent with mandatory and optional
 parameters instead of configuring an <code>email:Message</code> record.</p>

                                        </div>
                                    </div>
                                    
                                </div>
                            </div>
                            
                            <div class="cTR">

                                <div class="code">
                                    <div class="highlight"><pre><code class=language-ballerina>}
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                </div>
                            </div>
                            
                        </div>
                    </div>
                    
                    <div class="codeSnippeset">

                        <div class="cBBE-body">
                            
                            <div class="cTR cOutputTr">

                                <div class="code leading cOutput">
                                    <div class="highlight"><pre><code class=shell-session>bal run send_email.bal
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                </div>
                            </div>
                            
                            <div class="cTR cOutputTr">

                                <div class="code cOutput">
                                    <div class="highlight"><pre><code class=shell-session># Check the inbox to view the sent emails.
</code></pre></div>

                                </div>
                                <div class="docs">
                                    
                                </div>
                            </div>
                            
                        </div>
                    </div>
                    


                     
                </div>
            </div>
        </div>
    </div>

     <script>
            $(document).ready(function() {

                // hljs.initHighlightingOnLoad();

                $(".switch").click(function() {
                    $(".cCodeRight").toggleClass('cShow');
                    $(".cCodeLeft").toggleClass('cHide');
                });

                // get code text
                var codeSnippet = document.getElementsByClassName('FullCode')[0];
                var codeText = codeSnippet.getElementsByTagName('pre')[0].textContent;

                // register "copy to clipboard" event to elements with "copy" class
                var clipboard = new ClipboardJS('.copy', {
                    text: function(trigger) {
                        return codeText;
                    }
                });

                // Register events show hide tooltip on click event
                clipboard.on('success', function(e) {
                    setTooltip(e.trigger, 'Copied!');
                    hideTooltip(e.trigger);
                });

                clipboard.on('error', function(e) {
                    setTooltip(e.trigger, 'Failed!');
                    hideTooltip(e.trigger);
                });

                $('.copy').tooltip({
                    trigger: 'click',
                    placement: 'bottom'
                });
                $("a.copy").unbind("click");
            });

            function setTooltip(btn, message) {
                $(btn).attr('data-original-title', message)
                    .tooltip('show');
            }

            function hideTooltip(btn) {
                setTimeout(function() {
                    $(btn).tooltip('hide').removeAttr('data-original-title');
                }, 1000);
            }
        </script>
