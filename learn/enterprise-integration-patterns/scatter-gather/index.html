<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="description" content="Scatter-gather broadcasts a message to multiple recipients and re-aggregates the responses back into a single message."/><meta name="author" content="WSO2 LLC"/><meta name="keywords" content="ballerina, learn, documentation, docs, programming language"/><link rel="shortcut icon" href="/img/favicon.ico"/><title>EIP: Scatter-Gather - The Ballerina programming language</title><meta property="og:type" content="article"/><meta property="og:title" content="EIP: Scatter-Gather - The Ballerina programming language"/><meta property="og:description" content="Scatter-gather broadcasts a message to multiple recipients and re-aggregates the responses back into a single message."/><meta property="og:title" content="EIP: Scatter-Gather - The Ballerina programming language"/><meta property="og:image" content="https://ballerina.io/images/ballerina-swan-lake-eip-sm-banner.png"/><meta property="og:description" itemProp="image" content="Scatter-gather broadcasts a message to multiple recipients and re-aggregates the responses back into a single message."/><meta name="twitter:site" content="@ballerinalang"/><meta name="twitter:creator" content="@ballerinalang"/><meta name="twitter:title" content="EIP: Scatter-Gather - The Ballerina programming language"/><meta name="twitter:card" content="summary_large_image"/><meta property="twitter:description" content="Scatter-gather broadcasts a message to multiple recipients and re-aggregates the responses back into a single message."/><meta name="twitter:image" content="https://ballerina.io/images/ballerina-swan-lake-eip-sm-banner.png"/><meta property="twitter:text:description" content="Scatter-gather broadcasts a message to multiple recipients and re-aggregates the responses back into a single message."/><meta property="twitter:image" content="https://ballerina.io/images/ballerina-swan-lake-eip-sm-banner.png"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.setAttributeNode(d.createAttribute('data-ot-ignore'));j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-PSL2TX4');</script><script type="text/javascript" crossorigin="true" src="https://cdn.jsdelivr.net/npm/@docsearch/js@alpha"></script><script src="https://cookie-cdn.cookiepro.com/scripttemplates/otSDKStub.js" type="text/javascript" charSet="UTF-8" data-domain-script="630ad396-5fd5-4745-92ae-2765dc8841ee" defer=""></script><meta name="next-head-count" content="25"/><meta charSet="utf-8"/><meta name="author" content="WSO2 LLC"/><meta http-equiv="X-Frame-Options" content="SAMEORIGIN"/><meta http-equiv="Content-Security-Policy" content="frame-ancestors &#x27;none&#x27;;"/><link rel="shortcut icon" href="/images/favicon.ico"/><link rel="stylesheet" href="/css/roboto.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css"/><link rel="stylesheet" href="/css/ballerina-search-button.css"/><link rel="stylesheet" href="/css/ballerina-search-modal.css"/><link rel="stylesheet" href="/css/ballerina-search-variables.css"/><link rel="stylesheet" href="/css/ballerina-search-style.css"/><link rel="preload" href="/_next/static/css/9bb35c8110b0fa38.css" as="style"/><link rel="stylesheet" href="/_next/static/css/9bb35c8110b0fa38.css" data-n-g=""/><link rel="preload" href="/_next/static/css/b7d35c896f9865c2.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b7d35c896f9865c2.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-df9026dc17632c13.js" defer=""></script><script src="/_next/static/chunks/framework-79bce4a3a540b080.js" defer=""></script><script src="/_next/static/chunks/main-0ea70f422df5d19e.js" defer=""></script><script src="/_next/static/chunks/pages/_app-ba2391f08766dae9.js" defer=""></script><script src="/_next/static/chunks/1bfc9850-07afe3a69e1ba759.js" defer=""></script><script src="/_next/static/chunks/7621-d6bcd83f463fef72.js" defer=""></script><script src="/_next/static/chunks/6084-4e54ad5efcb8d3b5.js" defer=""></script><script src="/_next/static/chunks/51-100af16a0950a491.js" defer=""></script><script src="/_next/static/chunks/pages/learn/enterprise-integration-patterns/%5Bpattern%5D-2b9678b6262b59dd.js" defer=""></script><script src="/_next/static/S3d4KL29XV27KfeoW9XMt/_buildManifest.js" defer=""></script><script src="/_next/static/S3d4KL29XV27KfeoW9XMt/_ssgManifest.js" defer=""></script><script src="/_next/static/S3d4KL29XV27KfeoW9XMt/_middlewareManifest.js" defer=""></script></head><body><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PSL2TX4" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div id="__next" data-reactroot=""><div class="main-wrapper other vstack gap-0"><div class="wrap-page-content" style="padding-bottom:0"><div class="community-wrap-row row"><div class="col-sm-12"><div class="pageContentRow llanding pb-0 row"><div class="col-12"><div class="container"><div class="row"><div class="patternContent col-12"><div class="backToLanding" href="/learn/enterprise-integration-patterns/"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="#3ad1ca" class="bi bi-box-arrow-left ms-0" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M6 12.5a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v2a.5.5 0 0 1-1 0v-2A1.5 1.5 0 0 1 6.5 2h8A1.5 1.5 0 0 1 16 3.5v9a1.5 1.5 0 0 1-1.5 1.5h-8A1.5 1.5 0 0 1 5 12.5v-2a.5.5 0 0 1 1 0v2z"></path><path fill-rule="evenodd" d="M.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L1.707 7.5H10.5a.5.5 0 0 1 0 1H1.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"></path></svg><p class="m-0 p-0">Back to EIP</p></div></div></div></div></div></div><div class="pageHeader pageContentRow llanding row"><div class="col-12"><div class="container"><h1>Scatter-Gather</h1></div></div></div><div class="pageContentRow llanding row"><div class="col-12"><div class="container"><div class="row"><div class="patternContent col-12"><table class="Patterns_table__b7PHn"><tr><td>Pattern</td><td>Scatter-gather broadcasts a message to multiple recipients and re-aggregates the responses back into a single message.<!-- --> <a href="https://www.enterpriseintegrationpatterns.com/patterns/messaging/BroadcastAggregate.html" style="color:#20b6b0"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M432,320H400a16,16,0,0,0-16,16V448H64V128H208a16,16,0,0,0,16-16V80a16,16,0,0,0-16-16H48A48,48,0,0,0,0,112V464a48,48,0,0,0,48,48H400a48,48,0,0,0,48-48V336A16,16,0,0,0,432,320ZM488,0h-128c-21.37,0-32.05,25.91-17,41l35.73,35.73L135,320.37a24,24,0,0,0,0,34L157.67,377a24,24,0,0,0,34,0L435.28,133.32,471,169c15,15,41,4.5,41-17V24A24,24,0,0,0,488,0Z"></path></svg></a></td></tr><tr><td>How Ballerina helps</td><td><p>Ballerina has a lightweight <a href="/learn/by-example/named-workers/">concurrency</a> model with built-in syntax support. This helps to send messages parallelly and to wait on aggregation. Query expressions are convenient for transforming, ordering, and filtering the aggregated data.</p></td></tr></table><div class="Patterns_tags__V1YUk"><span class="Patterns_tag__oMtq4 badge bg-primary">Scatter-Gather</span><span class="Patterns_tag__oMtq4 badge bg-primary">Aggregator</span><span class="Patterns_tag__oMtq4 badge bg-primary">Message Channel</span><span class="Patterns_tag__oMtq4 badge bg-primary">Message Endpoint</span><span class="Patterns_tag__oMtq4 badge bg-primary">Message Router</span><span class="Patterns_tag__oMtq4 badge bg-primary">Message</span></div></div></div></div></div></div><div class="pageContentRow llanding row"><div class="col-12"><div class="container"><div><div class="CodeView_code__h13cx"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" class="CodeView_copyToClipboard__sqFoK" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><title>Copy</title><path d="M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z"></path></svg><div style="display:none"><pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">import</span><span style="color:#24292E"> ballerina/http;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">type</span><span style="color:#6F42C1"> CarRental</span><span style="color:#D73A49"> record</span><span style="color:#24292E"> {</span><span style="color:#D73A49">|</span></span>
<span class="line"><span style="color:#005CC5">    string</span><span style="color:#24292E"> carType;</span></span>
<span class="line"><span style="color:#005CC5">    string</span><span style="color:#24292E"> price;</span></span>
<span class="line"><span style="color:#005CC5">    string</span><span style="color:#24292E"> resultLink;</span></span>
<span class="line"><span style="color:#005CC5">    string</span><span style="color:#24292E"> vendor;</span></span>
<span class="line"><span style="color:#D73A49">|</span><span style="color:#24292E">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">type</span><span style="color:#6F42C1"> AvisResponse</span><span style="color:#D73A49"> record</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#D73A49">    record</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#D73A49">        *</span><span style="color:#24292E">CarRental;</span></span>
<span class="line"><span style="color:#24292E">    }[] result;</span></span>
<span class="line"><span style="color:#24292E">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">final</span><span style="color:#24292E"> http</span><span style="color:#D73A49">:</span><span style="color:#24292E">Client hotwireEP </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> check</span><span style="color:#D73A49"> new</span><span style="color:#24292E"> (</span><span style="color:#032F62">"http://api.hotwire.com.balmock.io"</span><span style="color:#24292E">);</span></span>
<span class="line"><span style="color:#D73A49">final</span><span style="color:#24292E"> http</span><span style="color:#D73A49">:</span><span style="color:#24292E">Client avisEP </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> check</span><span style="color:#D73A49"> new</span><span style="color:#24292E"> (</span><span style="color:#032F62">"http://api.avis.com.balmock.io"</span><span style="color:#24292E">);</span></span>
<span class="line"></span></code></pre></div><div class="CodeView_collapse__l9WX_">⋯</div><div><pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="color:#D73A49">service</span><span style="color:#6F42C1"> /api/v1</span><span style="color:#D73A49"> on</span><span style="color:#D73A49"> new</span><span style="color:#24292E"> http:Listener(</span><span style="color:#005CC5">8080</span><span style="color:#24292E">) {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">    resource</span><span style="color:#D73A49"> function</span><span style="color:#6F42C1"> get</span><span style="color:#6F42C1"> vehicles</span><span style="color:#24292E">(</span><span style="color:#005CC5">string</span><span style="color:#E36209"> dropOffDateTime</span><span style="color:#24292E">, </span><span style="color:#005CC5">string</span><span style="color:#E36209"> dropOffLocation</span><span style="color:#24292E">, </span><span style="color:#005CC5">string</span><span style="color:#E36209"> pickupDateTime</span><span style="color:#24292E">,</span></span>
<span class="line"><span style="color:#005CC5">            string</span><span style="color:#E36209"> pickupLocation</span><span style="color:#24292E">) </span><span style="color:#D73A49">returns</span><span style="color:#D73A49"> map&#x3C;</span><span style="color:#24292E">CarRental[]</span><span style="color:#D73A49">>|error</span><span style="color:#24292E"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">        worker</span><span style="color:#24292E"> hotwire </span><span style="color:#D73A49">returns</span><span style="color:#24292E"> CarRental[]</span><span style="color:#D73A49">|error</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#24292E">            http</span><span style="color:#D73A49">:</span><span style="color:#24292E">Response hotwireResponse </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> check</span><span style="color:#24292E"> hotwireEP</span><span style="color:#D73A49">->/</span><span style="color:#24292E">v1</span><span style="color:#D73A49">/</span><span style="color:#24292E">search</span><span style="color:#D73A49">/</span><span style="color:#24292E">car.</span><span style="color:#6F42C1">get</span><span style="color:#24292E">(</span><span style="color:#E36209">pickup</span><span style="color:#D73A49"> =</span><span style="color:#24292E"> pickupLocation,</span></span>
<span class="line"><span style="color:#E36209">                dest</span><span style="color:#D73A49"> =</span><span style="color:#24292E"> dropOffLocation, </span><span style="color:#E36209">startDate</span><span style="color:#D73A49"> =</span><span style="color:#24292E"> pickupDateTime, </span><span style="color:#E36209">endDate</span><span style="color:#D73A49"> =</span><span style="color:#24292E"> dropOffDateTime</span></span>
<span class="line"><span style="color:#24292E">            );</span></span>
<span class="line"><span style="color:#D73A49">            return</span><span style="color:#6F42C1"> transformHotwireResponse</span><span style="color:#24292E">(</span><span style="color:#D73A49">check</span><span style="color:#24292E"> hotwireResponse.</span><span style="color:#6F42C1">getXmlPayload</span><span style="color:#24292E">());</span></span>
<span class="line"><span style="color:#24292E">        }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">        worker</span><span style="color:#24292E"> avis </span><span style="color:#D73A49">returns</span><span style="color:#24292E"> CarRental[]</span><span style="color:#D73A49">|error</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#24292E">            AvisResponse avisResponse </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> check</span><span style="color:#24292E"> avisEP</span><span style="color:#D73A49">->/</span><span style="color:#24292E">cars</span><span style="color:#D73A49">/</span><span style="color:#24292E">catalog</span><span style="color:#D73A49">/</span><span style="color:#24292E">v1</span><span style="color:#D73A49">/</span><span style="color:#24292E">vehicles</span><span style="color:#D73A49">/</span><span style="color:#24292E">rates.</span><span style="color:#6F42C1">get</span><span style="color:#24292E">(</span><span style="color:#E36209">brand</span><span style="color:#D73A49"> =</span><span style="color:#032F62"> "Avis"</span><span style="color:#24292E">,</span></span>
<span class="line"><span style="color:#E36209">                country_code</span><span style="color:#D73A49"> =</span><span style="color:#032F62"> "US"</span><span style="color:#24292E">, </span><span style="color:#E36209">dropOff_date</span><span style="color:#D73A49"> =</span><span style="color:#24292E"> dropOffDateTime, </span><span style="color:#E36209">dropoff_location</span><span style="color:#D73A49"> =</span><span style="color:#24292E"> dropOffLocation,</span></span>
<span class="line"><span style="color:#E36209">                pickup_date</span><span style="color:#D73A49"> =</span><span style="color:#24292E"> pickupDateTime, </span><span style="color:#E36209">pickup_location</span><span style="color:#D73A49"> =</span><span style="color:#24292E"> pickupLocation</span></span>
<span class="line"><span style="color:#24292E">            );</span></span>
<span class="line"><span style="color:#D73A49">            return</span><span style="color:#6F42C1"> transformAvisResponse</span><span style="color:#24292E">(</span><span style="color:#E36209">avisResponse</span><span style="color:#24292E">);</span></span>
<span class="line"><span style="color:#24292E">        }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#005CC5">        var</span><span style="color:#24292E"> responses </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> wait</span><span style="color:#24292E"> {hotwire, avis};</span></span>
<span class="line"><span style="color:#D73A49">        return</span><span style="color:#D73A49"> map</span><span style="color:#D73A49"> from</span><span style="color:#005CC5"> var</span><span style="color:#24292E"> [vendor, carRental] </span><span style="color:#D73A49">in</span><span style="color:#24292E"> responses.entries()</span></span>
<span class="line"><span style="color:#D73A49">            where</span><span style="color:#24292E"> carRental </span><span style="color:#D73A49">!is</span><span style="color:#D73A49"> error</span></span>
<span class="line"><span style="color:#D73A49">            select</span><span style="color:#24292E"> [vendor, carRental];</span></span>
<span class="line"><span style="color:#24292E">    }</span></span>
<span class="line"><span style="color:#24292E">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">function</span><span style="color:#6F42C1"> transformHotwireResponse</span><span style="color:#24292E">(</span><span style="color:#005CC5">xml</span><span style="color:#E36209"> response</span><span style="color:#24292E">) </span><span style="color:#D73A49">returns</span><span style="color:#24292E"> CarRental[] {</span></span>
<span class="line"><span style="color:#D73A49">    return</span><span style="color:#D73A49"> from</span><span style="color:#005CC5"> xml</span><span style="color:#24292E"> item </span><span style="color:#D73A49">in</span><span style="color:#24292E"> response/</span><span style="color:#D73A49">&#x3C;</span><span style="color:#24292E">Response</span><span style="color:#D73A49">></span><span style="color:#24292E">/</span><span style="color:#D73A49">&#x3C;</span><span style="color:#24292E">Car</span><span style="color:#D73A49">></span></span>
<span class="line"><span style="color:#D73A49">        select</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#24292E">            carType</span><span style="color:#D73A49">:</span><span style="color:#24292E"> (</span><span style="color:#E36209">item</span><span style="color:#D73A49">/&#x3C;</span><span style="color:#E36209">CarType</span><span style="color:#D73A49">></span><span style="color:#24292E">).</span><span style="color:#6F42C1">data</span><span style="color:#24292E">(),</span></span>
<span class="line"><span style="color:#24292E">            price</span><span style="color:#D73A49">:</span><span style="color:#24292E"> (</span><span style="color:#E36209">item</span><span style="color:#D73A49">/&#x3C;</span><span style="color:#E36209">Price</span><span style="color:#D73A49">></span><span style="color:#24292E">).</span><span style="color:#6F42C1">data</span><span style="color:#24292E">(),</span></span>
<span class="line"><span style="color:#24292E">            resultLink</span><span style="color:#D73A49">:</span><span style="color:#24292E"> (</span><span style="color:#E36209">item</span><span style="color:#D73A49">/&#x3C;</span><span style="color:#E36209">ResultLink</span><span style="color:#D73A49">></span><span style="color:#24292E">).</span><span style="color:#6F42C1">data</span><span style="color:#24292E">(),</span></span>
<span class="line"><span style="color:#24292E">            vendor</span><span style="color:#D73A49">:</span><span style="color:#032F62"> "Hotwire"</span></span>
<span class="line"><span style="color:#24292E">        };</span></span>
<span class="line"><span style="color:#24292E">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">function</span><span style="color:#6F42C1"> transformAvisResponse</span><span style="color:#24292E">(</span><span style="color:#E36209">AvisResponse</span><span style="color:#E36209"> response</span><span style="color:#24292E">) </span><span style="color:#D73A49">returns</span><span style="color:#24292E"> CarRental[] {</span></span>
<span class="line"><span style="color:#D73A49">    return</span><span style="color:#D73A49"> from</span><span style="color:#005CC5"> var</span><span style="color:#24292E"> {carType, price, resultLink, vendor} </span><span style="color:#D73A49">in</span><span style="color:#24292E"> response.result</span></span>
<span class="line"><span style="color:#D73A49">        select</span><span style="color:#24292E"> {carType, price, resultLink, vendor};</span></span>
<span class="line"><span style="color:#24292E">}</span></span>
<span class="line"></span></code></pre></div></div></div></div></div></div></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"name":"Scatter-Gather","tagline":"Send messages to multiple recipients and re-aggregate the responses","desc":"Scatter-gather broadcasts a message to multiple recipients and re-aggregates the responses back into a single message.","category":"Message Routing","index":32,"helps":"Ballerina has a lightweight [concurrency](/learn/by-example/named-workers/) model with built-in syntax support. This helps to send messages parallelly and to wait on aggregation. Query expressions are convenient for transforming, ordering, and filtering the aggregated data.","tags":["Scatter-Gather","Aggregator","Message Channel","Message Endpoint","Message Router","Message"],"link":"https://www.enterpriseintegrationpatterns.com/patterns/messaging/BroadcastAggregate.html","content":[{"headerCode":"\u003cpre class=\"shiki github-light\" style=\"background-color:#fff;color:#24292e\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003eimport\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e ballerina/http;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003etype\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003e CarRental\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e record\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e|\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#005CC5\"\u003e    string\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e carType;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#005CC5\"\u003e    string\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e price;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#005CC5\"\u003e    string\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e resultLink;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#005CC5\"\u003e    string\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e vendor;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e|\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e};\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003etype\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003e AvisResponse\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e record\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e    record\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e        *\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eCarRental;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    }[] result;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e};\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003efinal\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e http\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eClient hotwireEP \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e\"http://api.hotwire.com.balmock.io\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003efinal\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e http\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eClient avisEP \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e\"http://api.avis.com.balmock.io\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","mainCode":"\u003cpre class=\"shiki github-light\" style=\"background-color:#fff;color:#24292e\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003eservice\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003e /api/v1\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e on\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e http:Listener(\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e8080\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e    resource\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e function\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003e get\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003e vehicles\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003estring\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003e dropOffDateTime\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003estring\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003e dropOffLocation\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003estring\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003e pickupDateTime\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#005CC5\"\u003e            string\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003e pickupLocation\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e) \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003ereturns\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e map\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eCarRental[]\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e\u003e|error\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e        worker\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e hotwire \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003ereturns\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e CarRental[]\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e|error\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e            http\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eResponse hotwireResponse \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e hotwireEP\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e-\u003e/\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003ev1\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e/\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003esearch\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e/\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003ecar.\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003eget\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003epickup\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e pickupLocation,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#E36209\"\u003e                dest\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e dropOffLocation, \u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003estartDate\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e pickupDateTime, \u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003eendDate\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e dropOffDateTime\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e            );\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e            return\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003e transformHotwireResponse\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003echeck\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e hotwireResponse.\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003egetXmlPayload\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e());\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e        worker\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e avis \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003ereturns\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e CarRental[]\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e|error\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e            AvisResponse avisResponse \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e avisEP\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e-\u003e/\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003ecars\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e/\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003ecatalog\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e/\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003ev1\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e/\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003evehicles\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e/\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003erates.\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003eget\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003ebrand\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e \"Avis\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#E36209\"\u003e                country_code\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e \"US\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003edropOff_date\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e dropOffDateTime, \u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003edropoff_location\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e dropOffLocation,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#E36209\"\u003e                pickup_date\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e pickupDateTime, \u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003epickup_location\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e pickupLocation\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e            );\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e            return\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003e transformAvisResponse\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003eavisResponse\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#005CC5\"\u003e        var\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e responses \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e wait\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {hotwire, avis};\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e        return\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e map\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e from\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e var\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e [vendor, carRental] \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003ein\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e responses.entries()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e            where\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e carRental \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e!is\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e error\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e            select\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e [vendor, carRental];\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003efunction\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003e transformHotwireResponse\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003exml\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003e response\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e) \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003ereturns\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e CarRental[] {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e    return\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e from\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e xml\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e item \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003ein\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e response/\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eResponse\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e/\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eCar\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e        select\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e            carType\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003eitem\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e/\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003eCarType\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003edata\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(),\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e            price\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003eitem\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e/\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003ePrice\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003edata\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(),\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e            resultLink\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003eitem\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e/\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003eResultLink\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003edata\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(),\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e            vendor\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e \"Hotwire\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        };\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003efunction\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003e transformAvisResponse\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003eAvisResponse\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003e response\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e) \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003ereturns\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e CarRental[] {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e    return\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e from\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e var\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {carType, price, resultLink, vendor} \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003ein\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e response.result\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e        select\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {carType, price, resultLink, vendor};\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e","raw":"import ballerina/http;\n\ntype CarRental record {|\n    string carType;\n    string price;\n    string resultLink;\n    string vendor;\n|};\n\ntype AvisResponse record {\n    record {\n        *CarRental;\n    }[] result;\n};\n\nfinal http:Client hotwireEP = check new (\"http://api.hotwire.com.balmock.io\");\nfinal http:Client avisEP = check new (\"http://api.avis.com.balmock.io\");\n\nservice /api/v1 on new http:Listener(8080) {\n\n    resource function get vehicles(string dropOffDateTime, string dropOffLocation, string pickupDateTime,\n            string pickupLocation) returns map\u003cCarRental[]\u003e|error {\n\n        worker hotwire returns CarRental[]|error {\n            http:Response hotwireResponse = check hotwireEP-\u003e/v1/search/car.get(pickup = pickupLocation,\n                dest = dropOffLocation, startDate = pickupDateTime, endDate = dropOffDateTime\n            );\n            return transformHotwireResponse(check hotwireResponse.getXmlPayload());\n        }\n\n        worker avis returns CarRental[]|error {\n            AvisResponse avisResponse = check avisEP-\u003e/cars/catalog/v1/vehicles/rates.get(brand = \"Avis\",\n                country_code = \"US\", dropOff_date = dropOffDateTime, dropoff_location = dropOffLocation,\n                pickup_date = pickupDateTime, pickup_location = pickupLocation\n            );\n            return transformAvisResponse(avisResponse);\n        }\n\n        var responses = wait {hotwire, avis};\n        return map from var [vendor, carRental] in responses.entries()\n            where carRental !is error\n            select [vendor, carRental];\n    }\n}\n\nfunction transformHotwireResponse(xml response) returns CarRental[] {\n    return from xml item in response/\u003cResponse\u003e/\u003cCar\u003e\n        select {\n            carType: (item/\u003cCarType\u003e).data(),\n            price: (item/\u003cPrice\u003e).data(),\n            resultLink: (item/\u003cResultLink\u003e).data(),\n            vendor: \"Hotwire\"\n        };\n}\n\nfunction transformAvisResponse(AvisResponse response) returns CarRental[] {\n    return from var {carType, price, resultLink, vendor} in response.result\n        select {carType, price, resultLink, vendor};\n}\n","name":"scatter-gather.bal"}]},"__N_SSG":true},"page":"/learn/enterprise-integration-patterns/[pattern]","query":{"pattern":"scatter-gather"},"buildId":"S3d4KL29XV27KfeoW9XMt","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>