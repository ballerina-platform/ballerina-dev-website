<!DOCTYPE html>
<html class="no-js">
   <head>
      <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<meta name="description" content="Learn how to extend Ballerina using annotations, which can be used to provide structured metadata about a particular construct." />

<meta name="author" content="WSO2, Inc.">

<meta name="keywords" content="ballerina, programming language, annotations, metadata, extend ballerina" />

<link rel="shortcut icon" href="/img/favicon.ico">
<title>Extending with Compiler Extensions</title>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-92163714-2"></script>
<!--FB-->
<meta property="og:type" content="article" />
<meta property="og:title" content="Ballerina - Extending with Compiler Extensions" />

<meta property="og:description" content="Learn how to extend Ballerina using annotations, which can be used to provide structured metadata about a particular construct." />

 
<meta property="og:image" itemprop="image" content="https://ballerina.io/img/ballerina-swan-lake-sm-banner-general.png" />


<!-- <meta name="twitter:image:width" content="610"> -->
<!--LINKED IN  -->
<meta property='og:title' content="Ballerina"/>
<meta property='og:image' content="https://ballerina.io/img/ballerina-swan-lake-sm-banner-general.png
"/>
<meta property='og:description' itemprop="image" content="Learn how to extend Ballerina using annotations, which can be used to provide structured metadata about a particular construct."/>

<!--TWITTER-->
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@ballerinalang">
<meta name="twitter:creator" content="@ballerinalang">
<meta name="twitter:title" content="Ballerina"> 
<meta name="twitter:card" content="summary_large_image"> 

<meta property="twitter:description" content="Learn how to extend Ballerina using annotations, which can be used to provide structured metadata about a particular construct." />

<meta name="twitter:image" content="https://ballerina.io/img/ballerina-swan-lake-sm-banner-general.png
 ">

<meta property="twitter:text:description" content="Learn how to extend Ballerina using annotations, which can be used to provide structured metadata about a particular construct." />

<meta property='twitter:image' content="https://ballerina.io/img/ballerina-swan-lake-sm-banner-general.png"/>


<script>
   window.dataLayer = window.dataLayer || [];
   function gtag() {
       dataLayer.push(arguments);
   }
   gtag('js', new Date());
   gtag('config', 'UA-92163714-2');
</script>
<!-- Google Tag Manager -->
<script>
   (function(w, d, s, l, i) {
       w[l] = w[l] || [];
       w[l].push({
           'gtm.start': new Date().getTime(),
           event: 'gtm.js'
       });
       var f = d.getElementsByTagName(s)[0],
           j = d.createElement(s),
           dl = l != 'dataLayer' ? '&l=' + l : '';
       j.async = true;
       j.src =
           'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
       f.parentNode.insertBefore(j, f);
   })(window, document, 'script', 'dataLayer', 'GTM-PSL2TX4');
</script>
<!-- End Google Tag Manager -->
<script src="/js/moment-2.22.0/moment.min.js"></script>
<script src="/js/latest-jquery.js"></script>
<script>
   var base_url = "";
</script>
<link rel="stylesheet" href="/css/latest-bootstrap.css">
<!-- Optional theme -->
<link rel="stylesheet" href="/css/latest-bootstrap-theme.css">
<!-- Latest compiled and minified JavaScript -->
<script src="/js/latest-bootstrap.js"></script>
<!-- Fonts -->
<link href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i&display=swap" rel="stylesheet">

<!-- 
<link type="text/css" rel="stylesheet" href="https://use.typekit.net/son4ymv.css"> -->




<!-- <link rel="stylesheet" href="./js/vs/editor/editor.main.css">-->
<!-- <link rel="stylesheet" href="https://use.typekit.net/son4ymv.css" /> -->
<!-- <link rel="stylesheet" href="/css/theme.css" type="text/css" />
<link rel="stylesheet" href="/css/theme_extra.css" type="text/css" /> -->
<!-- <script type="text/javascript" src="/js/highlight.pack.js"></script> -->

<link rel="stylesheet" href="/css/prism.css">

<script src="/js/ballerina-common.js?100"></script>
<script src="/js/handlebars/4.7.6/handlebars.js"></script>
<link rel="stylesheet" href="/css/ballerina-io.css">
<script>
   // Current page data
   var mkdocs_page_name = '"Home"'.replace(/^"|"$/g, '');
   var mkdocs_page_input_path = '"index.md"'.replace(/^"|"$/g, '');
   var mkdocs_page_url = '"/"'.replace(/^"|"$/g, '');
   
   var releaseNoteFilename = 'RELEASE_NOTE.html';

   var nightly_download_url = 'https://product-dist.ballerina.io/nightly';
   var dev_download_url = 'https://product-dist.ballerina.io/dev';
   var base_download_url = 'https://dist.ballerina.io/downloads';
   
   var base_releasenote_url = ''.concat('/downloads/1.2.x-release-notes');
   var base_swanlake_releasenote_url = ''.concat('/downloads/swan-lake-release-notes');
</script>

<link href="/css/prism.css" rel="stylesheet" />

      <link rel="stylesheet" href="/css/ballerina-io-docs.css?200618">
      <link rel="stylesheet" href="/css/ballerina-io-learn-v2.css">
   
      
   
      

      <link href="/css/abixTreeList.css" rel="stylesheet">

   </head>
   <body class="cBallerina-io" id="top">
      <style>
    .cVersionChangeBanner{
    color: #000000;
    background-color: #fcdf4a !important;
    width: 100%;
    display: inline-block;
    padding: 10px 0px;
    text-align: center;
    font-weight: 500;
    font-size: 20px;
    transition : all 0.3s;
    position: fixed;
    top: 0;
    width: 100%;
    height: 50px;
    z-index: 9;
    }
    .cInfoBannerLink{
        color: #000000;
        text-decoration: underline;
    }
    .cInfoBannerLink:hover{
        color: #545454 !important;
        text-decoration: underline !important;
    }
    .cBallerina-io-Gray-row {
       padding-top: 70px !important;
    }
    @media only screen and (max-width: 992px) {
        .cBallerina-io-Gray-row {
       padding-top: 140px !important;
    }

    #noscript-warning{
        position: relative;
    text-align: center;
    padding: 7px 15px;
    background-color: #57595d;
    color: #fff;
    font-weight: 500;
    letter-spacing: 0.5px;
    }
</style>
<noscript>
    <div id="noscript-warning">Ballerina works best with JavaScript enabled.</div>
</noscript>
     <div class="cVersionChangeBanner">
        This documentation is for Ballerina 1.2.0. <a href="https://ballerina.io/learn/" class="cInfoBannerLink">View documentation for the latest release</a>.
    </div>
<div class="row cBallerina-io-Nav" id="iMainNavigation" style="top:50px">

    <div class="container">
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
            <nav class="navbar">
                <div>
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                            data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                            <span class="sr-only">&#9776</span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </button>
                        <a class="cMobileLogo" href="/"><img src="/img/ballerina-logo.svg" alt="Ballerina" /></a>
                    </div>
                    <div id="navbar" class="collapse navbar-collapse">
                        <ul class="nav navbar-nav cTopNav">
                            <li class="toctree-l1" id="playli"><a class="cBioTopLink" href="/downloads/">Download</a>
                            </li>
                            <li class="toctree-l1" id="playli"><a class="cBioTopLink" href="https://play.ballerina.io/"
                                    target="_blank">Playground</a>
                            </li>
                            <li class="active toctree-l1" id="learnli"><a class="cBioTopLink" href="/learn">Learn</a>
                            </li>
                            <!--<li class="active toctree-l1" id="eventsli"><a class="cBioTopLink" href="/learn/events">Events</a>
                            </li>-->
                            <li class="toctree-l1"><a class="cBioTopLink" href="https://central.ballerina.io/"
                                    target="_blank">Central</a></li>
                            <li class="toctree-l1" id="openli"><a class="cBioTopLink" href="/community">Community</a>
                            </li>
                            <li class="toctree-l1" id="helpli"><a class="cBioTopLink"
                                    href="https://blog.ballerina.io">Blog</a>
                            </li>
                            <li class="cVersionItem">
                                <div class="cVersionContainer">
                                    <!-- <lable class="cVlable">Version</lable> -->
                                    <select name="versions" id="versions" class="select-css">
                                        <option value="swan-lake" data-value="latest">Swan Lake</option>
                                        <option value="1.2">v1.2</option>
                                    </select>
                                </div>
                            </li>
                            <li class="cSearchMenu">
                               
                                <!-- at the end of the HEAD -->
<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css"
/>
<style>
  .algolia-search-cont {
    margin-top: -10px;
  }
  .algolia-search-wrap {
    display: flex;
    align-items: center;
  }
  .algolia-search-cont .search-icon {
    margin-right: 10px;
  }
  .algolia-search-cont .algolia-search-box {
    border: none;
    background-image: none;
    background-color: transparent;
    -webkit-box-shadow: none;
    -moz-box-shadow: none;
    box-shadow: none;
    outline: none;
  }
</style>
<div class="algolia-search-cont">
  <div class="algolia-search-wrap form-control">
    <span
      class="glyphicon glyphicon-search search-icon"
      aria-hidden="true"
    ></span>
    <input
      autocapitalize="off"
      autocomplete="off"
      autocorrect="off"
      placeholder="Search..."
      role="textbox"
      spellcheck="false"
      type="text"
      value=""
      class="algolia-search-box"
      id="algolia-search-box"
    />
  </div>
</div>

<!-- at the end of the BODY -->
<script
  type="text/javascript"
  src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"
></script>
<script type="text/javascript">
  docsearch({
    apiKey: "024f45d96c2949b32403db36d4016c23",
    indexName: "ballerina",
    inputSelector: "#algolia-search-box",
    debug: false, // Set debug to true if you want to inspect the dropdown
  });
</script>

                                <!-- <form class="cSearch-form-inline"><input id="searchTxt" class="form-control-field"
                                        type="search" placeholder="Search" aria-label="Search"><a id="searchBtn"
                                        href="#" class="cSearchButton"><img src="/img/search.svg" /></a></form> -->
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
        </div>
    </div>
</div>

      <div class="row cBallerina-io-Gray-row">
         <div class="container">
            <div class="row">
               <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3 cBallerina-io-Home-Middle-col">
                  



























<!-- Then we build the nav bar. -->
<nav class="cLeftNavContainer">
   <ul class="cMainLeftNav">
      
      
      <!-- We have to declare it 'null' to ensure it doesn't propagate. -->
      <!--  -->
      
      
      
      <li class="sub-menu cTopicURL">
         <div class="cLeftMenuLink cTopiAtag">Setting up Ballerina</div>
         <ul class="sub-ul">
            
            <!--  -->
            
            
            
            <!-- <li  ><a href="/1.2/learn/installing-ballerina/">- Installing Ballerina</a></li> -->
            <li><a href="/1.2/learn/installing-ballerina/">Installing Ballerina</a></li>
            
            <!-- <li  ><a href="/1.2/learn/setting-up-visual-studio-code/">- Setting up Visual Studio Code</a></li> -->
            <li><a href="/1.2/learn/setting-up-visual-studio-code/">Setting up Visual Studio Code</a></li>
            
            <!-- <li  ><a href="/1.2/learn/setting-up-intellij-idea/">- Setting up IntelliJ IDEA</a></li> -->
            <li><a href="/1.2/learn/setting-up-intellij-idea/">Setting up IntelliJ IDEA</a></li>
            
         </ul>
      </li>
      
      
      
      <!-- We have to declare it 'null' to ensure it doesn't propagate. -->
      <!--  -->
      
      
      
      <li class="sub-menu cTopicURL">
         <div class="cLeftMenuLink cTopiAtag">Ballerina CLI Tools</div>
         <ul class="sub-ul">
            
            <!--  -->
            
            
            
            <!-- <li  ><a href="/1.2/learn/using-the-cli-tools/">- Using the CLI Tools</a></li> -->
            <li><a href="/1.2/learn/using-the-cli-tools/">Using the CLI Tools</a></li>
            
            <!-- <li  ><a href="/1.2/learn/keeping-ballerina-up-to-date">- Keeping Ballerina Up To Date</a></li> -->
            <li><a href="/1.2/learn/keeping-ballerina-up-to-date">Keeping Ballerina Up To Date</a></li>
            
            <!-- <li  ><a href="/1.2/learn/using-the-openapi-tools/">- Using the OpenAPI Tools</a></li> -->
            <li><a href="/1.2/learn/using-the-openapi-tools/">Using the OpenAPI Tools</a></li>
            
            <!-- <li  ><a href="/1.2/learn/generating-ballerina-code-for-protocol-buffer-definitions">- Generating Ballerina Code for Protocol Buffer Definitions</a></li> -->
            <li><a href="/1.2/learn/generating-ballerina-code-for-protocol-buffer-definitions">Generating Ballerina Code for Protocol Buffer Definitions</a></li>
            
         </ul>
      </li>
      
      
      
      <!-- We have to declare it 'null' to ensure it doesn't propagate. -->
      <!--  -->
      
      
      
      <li class="sub-menu cTopicURL">
         <div class="cLeftMenuLink cTopiAtag">Code Organization</div>
         <ul class="sub-ul">
            
            <!--  -->
            
            
            
            <!-- <li  ><a href="/1.2/learn/structuring-ballerina-code/">- Structuring Ballerina Code</a></li> -->
            <li><a href="/1.2/learn/structuring-ballerina-code/">Structuring Ballerina Code</a></li>
            
            <!-- <li  ><a href="/1.2/learn/documenting-ballerina-code/">- Documenting Ballerina Code</a></li> -->
            <li><a href="/1.2/learn/documenting-ballerina-code/">Documenting Ballerina Code</a></li>
            
            <!-- <li  ><a href="/1.2/learn/coding-conventions/">- Coding Conventions</a></li> -->
            <li><a href="/1.2/learn/coding-conventions/">Coding Conventions</a></li>
            
            <!-- <li  ><a href="/1.2/learn/running-ballerina-code/">- Running Ballerina Code</a></li> -->
            <li><a href="/1.2/learn/running-ballerina-code/">Running Ballerina Code</a></li>
            
            <!-- <li  ><a href="/1.2/learn/publishing-modules-to-ballerina-central">- Publishing Modules to Ballerina Central</a></li> -->
            <li><a href="/1.2/learn/publishing-modules-to-ballerina-central">Publishing Modules to Ballerina Central</a></li>
            
         </ul>
      </li>
      
      
      
      <!-- We have to declare it 'null' to ensure it doesn't propagate. -->
      <!--  -->
      
      
      
      <li class="sub-menu cTopicURL">
         <div class="cLeftMenuLink cTopiAtag">Deployment</div>
         <ul class="sub-ul">
            
            <!--  -->
            
            
            
            <!-- <li  ><a href="/1.2/learn/deployment/docker/">- Docker</a></li> -->
            <li><a href="/1.2/learn/deployment/docker/">Docker</a></li>
            
            <!-- <li  ><a href="/1.2/learn/deployment/kubernetes/">- Kubernetes</a></li> -->
            <li><a href="/1.2/learn/deployment/kubernetes/">Kubernetes</a></li>
            
            <!-- <li  ><a href="/1.2/learn/deployment/aws-lambda/">- AWS Lambda</a></li> -->
            <li><a href="/1.2/learn/deployment/aws-lambda/">AWS Lambda</a></li>
            
            <!-- <li  ><a href="/1.2/learn/deployment/azure-functions/">- Azure Functions</a></li> -->
            <li><a href="/1.2/learn/deployment/azure-functions/">Azure Functions</a></li>
            
         </ul>
      </li>
      
      
      
      <!-- We have to declare it 'null' to ensure it doesn't propagate. -->
      <!--  -->
      
      
      
      <li class="sub-menu cTopicURL">
         <div class="cLeftMenuLink cTopiAtag">Observability</div>
         <ul class="sub-ul">
            
            <!--  -->
            
            
            
            <!-- <li  ><a href="/1.2/learn/observing-ballerina-code">- Observing Ballerina Code</a></li> -->
            <li><a href="/1.2/learn/observing-ballerina-code">Observing Ballerina Code</a></li>
            
         </ul>
      </li>
      
      
      
      <!-- We have to declare it 'null' to ensure it doesn't propagate. -->
      <!--  -->
      
      
      
      <li class="sub-menu cTopicURL">
         <div class="cLeftMenuLink cTopiAtag">Interoperability</div>
         <ul class="sub-ul">
            
            <!--  -->
            
            
            
            <!-- <li  ><a href="/1.2/learn/calling-java-code-from-ballerina/">- Calling Java Code from Ballerina</a></li> -->
            <li><a href="/1.2/learn/calling-java-code-from-ballerina/">Calling Java Code from Ballerina</a></li>
            
         </ul>
      </li>
      
      
      
      <!-- We have to declare it 'null' to ensure it doesn't propagate. -->
      <!--  -->
      
      
      
      <li class="sub-menu cTopicURL">
         <div class="cLeftMenuLink cTopiAtag">Security</div>
         <ul class="sub-ul">
            
            <!--  -->
            
            
            
            <!-- <li  ><a href="/1.2/learn/writing-secure-ballerina-code">- Writing Secure Ballerina Code</a></li> -->
            <li><a href="/1.2/learn/writing-secure-ballerina-code">Writing Secure Ballerina Code</a></li>
            
         </ul>
      </li>
      
      
      
      <!-- We have to declare it 'null' to ensure it doesn't propagate. -->
      <!--  -->
      
      
      
      <li class="sub-menu cTopicURL">
         <div class="cLeftMenuLink cTopiAtag">Testing Ballerina Code</div>
         <ul class="sub-ul">
            
            <!--  -->
            
            
            
            <!-- <li  ><a href="/1.2/learn/testing-ballerina-code/testing-quick-start">- Quick Start</a></li> -->
            <li><a href="/1.2/learn/testing-ballerina-code/testing-quick-start">Quick Start</a></li>
            
            <!-- <li  ><a href="/1.2/learn/testing-ballerina-code/writing-tests">- Writing Tests</a></li> -->
            <li><a href="/1.2/learn/testing-ballerina-code/writing-tests">Writing Tests</a></li>
            
            <!-- <li  ><a href="/1.2/learn/testing-ballerina-code/mocking">- Mocking</a></li> -->
            <li><a href="/1.2/learn/testing-ballerina-code/mocking">Mocking</a></li>
            
            <!-- <li  ><a href="/1.2/learn/testing-ballerina-code/executing-tests">- Executing Tests</a></li> -->
            <li><a href="/1.2/learn/testing-ballerina-code/executing-tests">Executing Tests</a></li>
            
         </ul>
      </li>
      
      
      
      <!-- We have to declare it 'null' to ensure it doesn't propagate. -->
      <!--  -->
      
      
      
      <li class="sub-menu cTopicURL">
         <div class="cLeftMenuLink cTopiAtag">Extending Ballerina</div>
         <ul class="sub-ul">
            
            <!--  -->
            
            
            
            <!-- <li  ><a href="/1.2/learn/extending-with-compiler-extensions">- Extending with Compiler Extensions</a></li> -->
            <li class="current-sub"><a href="/1.2/learn/extending-with-compiler-extensions">Extending with Compiler Extensions</a></li>
            
         </ul>
      </li>
      
      
   </ul>
</nav>

               </div>
               <div class="col-xs-12 col-sm-12 col-md-9 col-lg-9 cBallerina-io-Home-Middle-col">
                  <div class="col-xs-12 col-sm-12" style="padding: 0;">
                     <div class="col-md-12 col-lg-12 cBallerina-io-breadcrumbs">
                        <nav class="breadcrumbs bootstrap hidden-sm-down"
  >
  <ul id="breadcrumb-list" class=" cBalleinaBreadcrumbs list-unstyled  wy-breadcrumbs" vocab="http://schema.org/"
    typeof="BreadcrumbList">


    
    <li><a href="/">Home</a></li>
    
    
    <li>/</li>
    <li><a
        href="/1.2/">1.2</a>
    </li>
    
    
    
    <li>/</li>
    <li><a
        href="/1.2/learn/">Learn</a>
    </li>
    
    
    
    <li>/</li> Extending with Compiler Extensions
    
    

  </ul>
</nav>
<style type="text/css">
  .cBalleinaBreadcrumbs li {
    margin-right: 10px;
  }
</style>
                        <div class="cVersionContainer"></div>
                     </div>
                     <!-- <div class="col-md-12 col-lg-2 cBallerina-io-breadcrumbs cGitLink">
                        
                     </div> -->
                  </div>
                  <div class="cBlallerina-io-docs-content-container cPositionRelative">
                     <div class="wy-nav-content">
                        <div class="rst-content">
                           <div role="main">
                              <div class="section">


                                 <div class="col-xs-11 col-md-11 col-lg-11 cNoPadding">
                                    <h1>Extending with Compiler Extensions</h1>
                                 </div>
                                 <!-- <div class="col-xs-1 col-md-1 col-lg-1 cNoPadding cGithubContainer">
                                    <a class="icon icon-github" target="_blank" href="https://www.github.com/ballerina-platform/ballerina-dev-website/blob/master/1.2/learn/extending-with-compiler-extensions.md"></a>
                                 </div> -->
                                 <div class="col-xs-12 col-md-12 col-lg-12 cNoPadding">
                                    <p>The sections below include information about extending with compiler extensions.</p>
                                    <div class="cBallerinaTocContainer" id="table-of-content">
                                       <ul id="tree">
  <li><a href="#annotations">Annotations</a></li>
  <li><a href="#hello-world-the-annotation-way">Hello World: The Annotation Way</a></li>
  <li><a href="#defining-a-custom-annotation">Defining a Custom Annotation</a>
    <ul>
      <li><a href="#creating-the-annotation">Creating the Annotation</a></li>
      <li><a href="#verifying-the-annotation">Verifying the Annotation</a></li>
    </ul>
  </li>
  <li><a href="#writing-the-compiler-extension">Writing the Compiler Extension</a>
    <ul>
      <li><a href="#setting-up-the-project">Setting Up the Project</a></li>
      <li><a href="#adding-the-code-for-the-extension">Adding the Code for the Extension</a></li>
    </ul>
  </li>
  <li><a href="#putting-it-all-together">Putting it All Together</a></li>
  <li><a href="#learning-more-about-writing-compiler-extensions">Learning More About Writing Compiler Extensions</a></li>
</ul>

                                    </div>
                                    <h2 id="annotations">Annotations</h2>

<p>Annotations can be used to provide structured metadata about a particular construct. Annotations are not executable. However, they can be used to alter the behavior of constructs they are attached to.</p>

<p>Annotations can be attached to:</p>
<ul>
  <li>services and resources</li>
  <li>type definitions</li>
  <li>function definitions</li>
  <li>function parameters</li>
  <li>function return</li>
  <li>module-level variables and constants</li>
  <li>annotations</li>
  <li>listeners</li>
  <li>workers</li>
  <li>type cast expressions</li>
</ul>

<p>The Ballerina compiler can be extended using compiler extensions (if required) for additional verification or processing (e.g. modifications, artifact generation etc.). Such custom extensions provided will be executed at the end of the compilation phase before generating the Ballerina Intermediate Representation (BIR). A compiler extension can make use of the metadata provided via annotations to introduce additional behavior to the compilation process.</p>

<p>The <code class="language-plaintext highlighter-rouge">ballerina/docker</code> and <code class="language-plaintext highlighter-rouge">ballerina/kubernetes</code> modules make use of custom annotations. They introduce new annotations such as <code class="language-plaintext highlighter-rouge">@docker:Config</code> and <code class="language-plaintext highlighter-rouge">@kubernetes:Deployment</code> that can be attached to certain constructs in a Ballerina source file. The respective compiler extensions then run a post-compilation process that reads these annotations and generates the Docker and Kubernetes deployment artifacts.</p>

<blockquote>
  <p><strong>Note:</strong> Currently, there are two caveats when writing compiler extensions:</p>
  <ol>
    <li>The Ballerina Compiler is written in Java 8. Therefore, you will need JDK 1.8.</li>
    <li>End users will have to install the extension manually.</li>
  </ol>
</blockquote>

<h2 id="hello-world-the-annotation-way">Hello World: The Annotation Way</h2>

<p>In this guide, we will take a look at how to create a custom annotation and how to write a compiler extension to read and act upon our custom annotation. The custom annotation (i.e. <code class="language-plaintext highlighter-rouge">@hello:Greeting</code>) is attachable to functions. It has an attribute called <code class="language-plaintext highlighter-rouge">salutation</code>, which will be read by the compiler extension and written to a file when building the program. The annotation can be shared with others by publishing it to <a href="https://central.ballerina.io/">Ballerina Central</a>. Currently, there isn’t a mechanism for sharing compiler extensions. The compiler extension has to be copied to the <code class="language-plaintext highlighter-rouge">&lt;BALLERINA_HOME&gt;/bre/lib</code> directory.</p>

<p>The end user would be able to write a program such as the following:</p>

<pre><code class="language-ballerina">import foo/hello;

@hello:Greeting {
    salutation: "Guten Tag!"
}
function add(int x, int y) returns int {
    return x + y;
}

public function main() {
    var sum = add(10, 20);
}
</code></pre>

<p>At the end of the build, the user should be able to see a <code class="language-plaintext highlighter-rouge">&lt;module_name&gt;.txt</code> file in the <code class="language-plaintext highlighter-rouge">target/greetings/</code> directory.</p>

<h2 id="defining-a-custom-annotation">Defining a Custom Annotation</h2>

<h3 id="creating-the-annotation">Creating the Annotation</h3>
<p>Create a new Ballerina project and add a module named <code class="language-plaintext highlighter-rouge">hello</code>. For this instance, add a single source file named <code class="language-plaintext highlighter-rouge">annotation.bal</code> and remove other boilerplate code and files. Your project structure should look similar to the following:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>.
├── Ballerina.toml
└── src
    └── hello
        └── annotation.bal
</code></pre></div></div>

<p>Add the following code to define the <code class="language-plaintext highlighter-rouge">@hello:Greeting</code> annotation in the <code class="language-plaintext highlighter-rouge">annotation.bal</code> file.</p>

<pre><code class="language-ballerina"># This record defines the fields of the @hello:Greeting annotation. 
#
# + salutation - The greeting message
public type HelloConfiguration record {|
    string salutation = "Hello!";
|};

# Define an annotation named `Greeting`. Its type is `HelloConfiguration` and it can be
# attached to functions. 
public annotation HelloConfiguration Greeting on function;
</code></pre>

<p>Now, build this annotation. The <code class="language-plaintext highlighter-rouge">-c</code> flag is used since this module will only be used as a library.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ballerina build -c hello
</code></pre></div></div>

<p>If all went well, a <code class="language-plaintext highlighter-rouge">/target</code> directory should be created with the built artifacts.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>target/
├── balo
│   └── hello-2019r3-any-0.1.0.balo
├── caches
│   ├── bir_cache
│   │   └── foo
│   │       └── hello
│   │           └── 0.1.0
│   │               └── hello.bir
│   └── jar_cache
│       └── foo
│           └── hello
│               └── 0.1.0
│                   └── foo-hello-0.1.0.jar
└── tmp
    └── foo-hello-0.1.0.jar
</code></pre></div></div>

<h3 id="verifying-the-annotation">Verifying the Annotation</h3>

<p>At this stage, you can use the annotation in a program to verify the correctness of what was done so far. To do so, create a demo project, add our <code class="language-plaintext highlighter-rouge">hello</code> module as a dependency, and attach it to a function. Your program should compile without any errors.</p>

<p>The demo project structure looks like the following:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>.
├── Ballerina.toml
└── src
    └── greet
        └── greeting.bal
</code></pre></div></div>

<p>Add the <code class="language-plaintext highlighter-rouge">foo/hello</code> module as a path dependency in the <code class="language-plaintext highlighter-rouge">Ballerina.toml</code> file.</p>

<div class="language-toml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">[project]</span>
<span class="py">org-name</span> <span class="p">=</span> <span class="s">"bar"</span>
<span class="py">version</span> <span class="p">=</span> <span class="s">"0.1.0"</span>

<span class="nn">[dependencies]</span>
<span class="nn">"foo/hello"</span> <span class="o">=</span> <span class="p">{</span> <span class="py">path</span> <span class="p">=</span> <span class="s">"&lt;path_to_annotation_project_dir&gt;/hello-annot/target/balo/hello-2019r3-any-0.1.0.balo"</span> <span class="p">}</span>
</code></pre></div></div>

<p>Add a function to the <code class="language-plaintext highlighter-rouge">greeting.bal</code> file. Note that the function is annotated using the <code class="language-plaintext highlighter-rouge">@hello:Greeting</code> annotation.</p>

<pre><code class="language-ballerina">import foo/hello;

@hello:Greeting {
    salutation: "Guten Tag!"
}
function add(int x, int y) returns int {
    return x + y;
}

public function main() {
    var sum = add(10, 20);
}
</code></pre>

<p>Building the <code class="language-plaintext highlighter-rouge">greet</code> module should produce an executable named <code class="language-plaintext highlighter-rouge">greet.jar</code> in the <code class="language-plaintext highlighter-rouge">target/bin</code> directory.</p>

<h2 id="writing-the-compiler-extension">Writing the Compiler Extension</h2>

<p>The Ballerina compiler can be extended through compiler extensions if there are additional verifications or tasks you would like to perform. Such custom extensions will be executed towards the end of the compilation phase. A compiler extension can be created by implementing the <code class="language-plaintext highlighter-rouge">CompilerPlugin</code> interface provided by the <code class="language-plaintext highlighter-rouge">org.ballerinalang.compiler.plugins</code> package. It defines the following methods, which the user can implement to add additional verifications.</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">void process(PackageNode packageNode)</code></li>
  <li><code class="language-plaintext highlighter-rouge">void process(BLangTestablePackage testablePackageNode)</code></li>
  <li><code class="language-plaintext highlighter-rouge">void process(ServiceNode serviceNode, List&lt;AnnotationAttachmentNode&gt; annotations)</code></li>
  <li><code class="language-plaintext highlighter-rouge">void process(TypeDefinition typeDefinition, List&lt;AnnotationAttachmentNode&gt; annotations)</code></li>
  <li><code class="language-plaintext highlighter-rouge">void process(FunctionNode functionNode, List&lt;AnnotationAttachmentNode&gt; annotations)</code></li>
  <li><code class="language-plaintext highlighter-rouge">void process(SimpleVariableNode variableNode, List&lt;AnnotationAttachmentNode&gt; annotations)</code></li>
  <li><code class="language-plaintext highlighter-rouge">void process(AnnotationNode annotationNode, List&lt;AnnotationAttachmentNode&gt; annotations)</code></li>
  <li><code class="language-plaintext highlighter-rouge">void codeGenerated(PackageID packageID, Path binaryPath)</code></li>
</ul>

<p>Each of the <code class="language-plaintext highlighter-rouge">process()</code> methods correspond to annotable constructs of the language. The <code class="language-plaintext highlighter-rouge">codegenerated()</code> method gets invoked once the code generation phase is completed. The <code class="language-plaintext highlighter-rouge">org.ballerinalang.compiler.plugins</code> package also provides a convenience class named <code class="language-plaintext highlighter-rouge">AbstractCompilerPlugin</code> with empty implementations for the above methods.</p>

<p>The extension will read the salutation field of the <code class="language-plaintext highlighter-rouge">@hello:Greeting</code> annotation and write its value to a file in the <code class="language-plaintext highlighter-rouge">/target</code> directory.</p>

<h3 id="setting-up-the-project">Setting Up the Project</h3>

<p>Start by creating a Java project for the extension. It needs two classes: <code class="language-plaintext highlighter-rouge">HelloPlugin</code> and <code class="language-plaintext highlighter-rouge">HelloModel</code>. Also, create a resource file named <code class="language-plaintext highlighter-rouge">org.ballerinalang.compiler.plugins.CompilerPlugin</code> in the <code class="language-plaintext highlighter-rouge">resources/META-INF/services</code> directory. This file should contain the fully-qualified class name of the extension class (which in this case, is <code class="language-plaintext highlighter-rouge">xyz.foo.hello.HelloPlugin</code>).</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>src/
└── main
    ├── java
    │   └── xyz
    │       └── foo
    │           └── hello
    │               ├── HelloModel.java
    │               └── HelloPlugin.java
    └── resources
        └── META-INF
            └── services
                └── org.ballerinalang.compiler.plugins.CompilerPlugin
</code></pre></div></div>

<p>The only dependency you will need for this extension is the <code class="language-plaintext highlighter-rouge">ballerina-lang</code> project. Add the following Maven repository 
to your project to get the <code class="language-plaintext highlighter-rouge">ballerina-lang</code> dependency.</p>
<blockquote>
  <p>http://maven.wso2.org/nexus/content/repositories/releases/</p>
</blockquote>

<p>Given below is a sample <code class="language-plaintext highlighter-rouge">build.gradle</code> file for the project.</p>

<div class="language-gradle highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">plugins</span> <span class="o">{</span>
    <span class="n">id</span> <span class="s1">'java'</span>
<span class="o">}</span>

<span class="n">group</span> <span class="s1">'xyz.foo'</span>
<span class="n">version</span> <span class="s1">'1.0-SNAPSHOT'</span>

<span class="n">sourceCompatibility</span> <span class="o">=</span> <span class="mf">1.8</span>

<span class="k">repositories</span> <span class="o">{</span>
    <span class="n">maven</span> <span class="o">{</span>
        <span class="n">url</span> <span class="s2">"http://maven.wso2.org/nexus/content/repositories/releases/"</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="k">dependencies</span> <span class="o">{</span>
    <span class="n">implementation</span> <span class="nl">group:</span> <span class="s1">'org.ballerinalang'</span><span class="o">,</span> <span class="nl">name:</span> <span class="s1">'ballerina-lang'</span><span class="o">,</span> <span class="nl">version:</span> <span class="s1">'1.0.0'</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="adding-the-code-for-the-extension">Adding the Code for the Extension</h3>

<p>Add the following code to the <code class="language-plaintext highlighter-rouge">HelloPlugin.java</code> file.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">org.ballerinalang.compiler.plugins.AbstractCompilerPlugin</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.ballerinalang.compiler.plugins.SupportedAnnotationPackages</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.ballerinalang.model.elements.PackageID</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.ballerinalang.model.tree.AnnotationAttachmentNode</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.ballerinalang.model.tree.FunctionNode</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.ballerinalang.util.diagnostic.Diagnostic</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.ballerinalang.util.diagnostic.DiagnosticLog</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.wso2.ballerinalang.compiler.tree.BLangAnnotationAttachment</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.wso2.ballerinalang.compiler.tree.expressions.BLangLiteral</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.wso2.ballerinalang.compiler.tree.expressions.BLangRecordLiteral</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.wso2.ballerinalang.compiler.tree.expressions.BLangRecordLiteral.BLangRecordKeyValue</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.io.File</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.nio.charset.StandardCharsets</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.nio.file.Files</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.nio.file.Path</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.nio.file.Paths</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.nio.file.StandardOpenOption</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>

<span class="cm">/**
 * Compiler extension to generate greetings.
 */</span>
<span class="c1">// This annotation specifies that this compiler extension should only be enabled when the mentioned module is used.</span>
<span class="nd">@SupportedAnnotationPackages</span><span class="o">(</span>
        <span class="n">value</span> <span class="o">=</span> <span class="s">"foo/hello:0.1.0"</span>
<span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">HelloPlugin</span> <span class="kd">extends</span> <span class="nc">AbstractCompilerPlugin</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="nc">DiagnosticLog</span> <span class="n">dlog</span><span class="o">;</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">(</span><span class="nc">DiagnosticLog</span> <span class="n">diagnosticLog</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">dlog</span> <span class="o">=</span> <span class="n">diagnosticLog</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="c1">// The annotation is attached to functions. Therefore, the process() method is overridden for functions.</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">process</span><span class="o">(</span><span class="nc">FunctionNode</span> <span class="n">functionNode</span><span class="o">,</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">AnnotationAttachmentNode</span><span class="o">&gt;</span> <span class="n">annotations</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// Iterate through the annotations attached to the service.</span>
        <span class="k">for</span> <span class="o">(</span><span class="nc">AnnotationAttachmentNode</span> <span class="n">annotation</span> <span class="o">:</span> <span class="n">annotations</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">// The `annotations` list contains all the annotations attached to the service.</span>
            <span class="c1">// Since only the `@hello:Greeting` annotation is considered, skip the other annotations.</span>
            <span class="k">if</span> <span class="o">(!</span><span class="s">"Greeting"</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">annotation</span><span class="o">.</span><span class="na">getAnnotationName</span><span class="o">().</span><span class="na">getValue</span><span class="o">()))</span> <span class="o">{</span>
                <span class="k">continue</span><span class="o">;</span>
            <span class="o">}</span>

            <span class="c1">// Retrieve the fields of the annotation value.</span>
            <span class="nc">List</span><span class="o">&lt;</span><span class="nc">BLangRecordKeyValue</span><span class="o">&gt;</span> <span class="n">annotFields</span> <span class="o">=</span>
                    <span class="o">((</span><span class="nc">BLangRecordLiteral</span><span class="o">)</span> <span class="o">((</span><span class="nc">BLangAnnotationAttachment</span><span class="o">)</span> <span class="n">annotation</span><span class="o">).</span><span class="na">expr</span><span class="o">).</span><span class="na">getKeyValuePairs</span><span class="o">();</span>

            <span class="c1">// In this particular case, there is no need to iterate through the list since the `@hello:Greeting` annotation only has</span>
            <span class="c1">// one field. Therefore, take the first element of the fields list.</span>
            <span class="nc">BLangRecordKeyValue</span> <span class="n">salutationField</span> <span class="o">=</span> <span class="n">annotFields</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
            <span class="nc">String</span> <span class="n">annotFieldValue</span> <span class="o">=</span> <span class="o">((</span><span class="nc">BLangLiteral</span><span class="o">)</span> <span class="n">salutationField</span><span class="o">.</span><span class="na">getValue</span><span class="o">()).</span><span class="na">getValue</span><span class="o">().</span><span class="na">toString</span><span class="o">();</span>
            <span class="nc">String</span> <span class="n">greeting</span> <span class="o">=</span> <span class="nc">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">"%s from %s()\n"</span><span class="o">,</span> <span class="n">annotFieldValue</span><span class="o">,</span> <span class="n">functionNode</span><span class="o">.</span><span class="na">getName</span><span class="o">().</span><span class="na">getValue</span><span class="o">());</span>
            <span class="nc">HelloModel</span><span class="o">.</span><span class="na">getInstance</span><span class="o">().</span><span class="na">setGreeting</span><span class="o">(</span><span class="n">greeting</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="c1">// The `codeGenerated()` method gets invoked once the executable is built. The greeting is written to a text file</span>
    <span class="c1">// with the same name as the executable and in the same directory as the executable.</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">codeGenerated</span><span class="o">(</span><span class="nc">PackageID</span> <span class="n">packageID</span><span class="o">,</span> <span class="nc">Path</span> <span class="n">binaryPath</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">String</span> <span class="n">fileName</span> <span class="o">=</span> <span class="n">binaryPath</span><span class="o">.</span><span class="na">getFileName</span><span class="o">().</span><span class="na">toString</span><span class="o">().</span><span class="na">replace</span><span class="o">(</span><span class="s">".jar"</span><span class="o">,</span> <span class="s">".txt"</span><span class="o">);</span>
        <span class="nc">Path</span> <span class="n">greetingsPath</span> <span class="o">=</span> <span class="nc">Paths</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"target"</span><span class="o">,</span> <span class="s">"greetings"</span><span class="o">,</span> <span class="n">fileName</span><span class="o">);</span>
        <span class="nc">String</span> <span class="n">greeting</span> <span class="o">=</span> <span class="nc">HelloModel</span><span class="o">.</span><span class="na">getInstance</span><span class="o">().</span><span class="na">getGreetings</span><span class="o">();</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"\nGenerating greetings"</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"\t"</span> <span class="o">+</span> <span class="n">greetingsPath</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
            <span class="n">writeToFile</span><span class="o">(</span><span class="n">greeting</span><span class="o">,</span> <span class="n">greetingsPath</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">dlog</span><span class="o">.</span><span class="na">logDiagnostic</span><span class="o">(</span><span class="nc">Diagnostic</span><span class="o">.</span><span class="na">Kind</span><span class="o">.</span><span class="na">ERROR</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">writeToFile</span><span class="o">(</span><span class="nc">String</span> <span class="n">greetings</span><span class="o">,</span> <span class="nc">Path</span> <span class="n">targetFilePath</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IOException</span> <span class="o">{</span>
        <span class="nc">File</span> <span class="n">newFile</span> <span class="o">=</span> <span class="n">targetFilePath</span><span class="o">.</span><span class="na">toFile</span><span class="o">();</span>

        <span class="k">if</span> <span class="o">(</span><span class="n">newFile</span><span class="o">.</span><span class="na">exists</span><span class="o">())</span> <span class="o">{</span>
            <span class="nc">Files</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">targetFilePath</span><span class="o">,</span> <span class="n">greetings</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">),</span> <span class="nc">StandardOpenOption</span><span class="o">.</span><span class="na">APPEND</span><span class="o">);</span>
            <span class="k">return</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="k">if</span> <span class="o">(</span><span class="n">newFile</span><span class="o">.</span><span class="na">getParentFile</span><span class="o">().</span><span class="na">mkdirs</span><span class="o">())</span> <span class="o">{</span>
            <span class="nc">Files</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">targetFilePath</span><span class="o">,</span> <span class="n">greetings</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">));</span>
            <span class="k">return</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="nc">Files</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">targetFilePath</span><span class="o">,</span> <span class="n">greetings</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="nc">StandardCharsets</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Add the following code to the <code class="language-plaintext highlighter-rouge">HelloModel.java</code> file.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">HelloModel</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="nc">HelloModel</span> <span class="n">instance</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HelloModel</span><span class="o">();</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">greeting</span><span class="o">;</span>

    <span class="kd">private</span> <span class="nf">HelloModel</span><span class="o">()</span> <span class="o">{</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="nc">HelloModel</span> <span class="nf">getInstance</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">instance</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nc">String</span> <span class="nf">getGreetings</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">greeting</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kt">void</span> <span class="nf">setGreeting</span><span class="o">(</span><span class="nc">String</span> <span class="n">greeting</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">greeting</span> <span class="o">=</span> <span class="n">greeting</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Finally, build the extension and place the resulting JAR file inside the <code class="language-plaintext highlighter-rouge">&lt;BALLERINA_HOME&gt;/distributions/jballerina-&lt;BALLERINA_VERSION&gt;/bre/lib/</code> directory.</p>

<h2 id="putting-it-all-together">Putting it All Together</h2>

<p>Now, build your hello world project again. You should see an additional step logged in the console for generating the greeting.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ballerina build greet
Compiling source
	bar/greet:0.1.0

Creating balos
	target/balo/greet-2019r3-any-0.1.0.balo

Running tests
	bar/greet:0.1.0
	No tests found

Generating executables
	target/bin/greet.jar

Generating greetings
	target/greetings/greet.txt
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">target/greetings/greet.txt</code> file should contain the following text: <code class="language-plaintext highlighter-rouge">Guten Tag! from add()</code></p>

<h2 id="learning-more-about-writing-compiler-extensions">Learning More About Writing Compiler Extensions</h2>

<p>The example considered in this how-to guide is a basic compiler extension. If you are looking for something which goes beyond this, take a look at the compiler extensions written for generating Docker and Kubernetes artifacts.</p>

   
                                 </div>

                                


                         



                              </div>
                           </div>
                        </div>
                     </div>
                     <a class="cTopLink" href="#top">Back to Top &#x2934;</a>
                  </div>
               </div>
            </div>
         </div>
      </div>
      <div id="iBallerinaFooter" class="row cBallerina-io-White-row">
    <div class="container">
    <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3 cBallerina-io-left-col cBallerinaFooterLinks">
        <ul>
            <li><a class="cBioFooterLink" href="/downloads">DOWNLOAD</a></li>
            <!--<li><a class="cBioFooterLink" href="/community/#report-issues">REPORT ISSUES</a></li>-->
            <li data-toggle="modal" data-target="#reportissues" data-whatever="@mdo"><a href="/community/#report-issues">REPORT ISSUES</a></li>
            <li><a class="cBioFooterLink" href="https://github.com/ballerina-lang/ballerina/blob/master/LICENSE">CODE LICENSE</a></li>
            <li><a class="cBioFooterLink" href="/license-of-site">SITE LICENSE</a></li>
            <li><a class="cBioFooterLink" href="/terms-of-service">TERMS OF SERVICE</a></li>
            <li><a class="cBioFooterLink" href="/privacy-policy">PRIVACY POLICY</a></li>
            <li><a class="cBioFooterLink" href="/trademark-usage-policy/">TRADEMARK USAGE POLICY</a></li>
            </ul>
        </div>
    <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3 cBallerina-io-middle-col cBallerinaFooterSignUp">
        <div class="cSocialmedia">
            <ul>
                <li>
                    <a class="cBioFooterLink" href="https://github.com/ballerina-platform" target="_blank"><img src="/img/github.svg"/></a>
                    </li>
                <li><a class="cBioFooterLink" href="https://stackoverflow.com/questions/tagged/ballerina" target="_blank"><img src="/img/stackoverflow.svg"/></a></li>
                <li><a class="cBioFooterLink" href="https://twitter.com/ballerinalang" target="_blank"><img src="/img/twitter.svg"/></a></li>
                <li><a class="cBioFooterLink" href="/community/slack/"><img src="/img/slack-2022.svg" style="width:17px; height:17px;"/></a></li>
                <li><a class="cBioFooterLink" href="https://www.youtube.com/c/Ballerinalang"><img style="width: 15px;" src="/img/youtube-icon.svg"/></a></li>
                </ul>
            <div class="pdframe"></div>
            </div>


           <a class="cNLButton" href="/community/#subscribe-to-the-newsletter">Subscribe to the newsletter</a> 

           <div class="modal fade" id="reportissues" tabindex="-1" role="dialog" aria-labelledby="reportissueslabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
              <div class="modal-content" style="padding:15px;border-radius:0px;">
                <div class="modal-header">
                  <h3 class="modal-title" style="color: #20b6b0;">Report Issues</h3>
                  <p style="padding: 10px 0px ;">Report issues in the GitHub repositories of the areas and components listed below.
                  </p>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body" style="background-color: #fff; font-size: 20; color: #465867;font-size: 20px;">
                  <ul class="b">
                    <li><a class="linkText" href="https://github.com/ballerina-platform/ballerina-lang/issues/new/choose" target="_blank"> Compiler, runtime, or tooling</a></li>
                    <li><a class="linkText" href="https://github.com/ballerina-platform/ballerina-standard-library/issues" target="_blank"> Standard Library</a></li>
                    <li><a class="linkText" href="https://github.com/ballerina-platform/ballerina-standard-library/issues/new/choose" target="_blank">  Language specification</a></li>
                    <li><a class="linkText" href="https://github.com/ballerina-platform/ballerina-dev-website/issues/new/choose" target="_blank">  Website</a></li>
                    <li><a class="linkText" href="mailto:security@ballerina.io" target="_blank">Security</a> <span style="font-size: 16px;">(For details, see the</span> <a class="linkText" href="/security" target="_blank">security policy</a>.)</li>
                  </ul>  
                
                </div>
                <div class="modal-footer">
                 
                </div>
              </div>
            </div>
          </div>
        </div>
    <div class="col-xs-12 col-sm-10 col-md-6 col-lg-6 cBallerina-io-right-col">
        <p>In the creation of Ballerina, we were inspired by so many technologies. Thank you to all that have come before us (and forgive us if we missed one): Java, Go, C, C++, D, Rust, Haskell, Kotlin, Dart, TypeScript, JavaScript, Python, Perl, Flow, Swift, Elm, RelaxNG, NPM, Crates, Maven, Gradle, Kubernetes, Docker, Envoy, Markdown, GitHub and WSO2.</p></div>
    </div>
</div>

<div class="cCookie-Policy">
    <div class="container">
        <div class="col-xs-12 col-sm-12 col-lg-12">
            <!-- <div class="closebuttoon"><img src="/img/close-w.svg"/></div> -->
<h4>Cookie policy</h4>
<p>This website uses cookies so that we can provide you with the best user experience. Read our <a href="https://ballerina.io/cookie-policy/">Cookie policy</a></a> to find out more.</p>
<p>If you wish to disable cookies you can do so from your browser. </p>
  
<!-- <a href="https://ballerina.io/cookie-policy/"></a> -->
<a class="cIUnderstand ">I understand </a>
        </div>
    </div>
</div>





<script src="/js/prism.js"></script>
<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.14.0/components/prism-core.min.js"></script> -->
<script src="/js/prism-ballerina.js"></script>



<script>

$(".cIUnderstand ").click(function() {
    $(".cCookie-Policy").addClass('cHide-Policy');
   
    
});



</script>


<!-- 
<script>
    (function () {

if (typeof self === 'undefined' || !self.Prism || !self.document) {
    return;
}

/**
 * Plugin name which is used as a class name for <pre> which is activating the plugin
 * @type {String}
 */
var PLUGIN_NAME = 'line-numbers';

/**
 * Regular expression used for determining line breaks
 * @type {RegExp}
 */
var NEW_LINE_EXP = /\n(?!$)/g;

/**
 * Resizes line numbers spans according to height of line of code
 * @param {Element} element <pre> element
 */
var _resizeElement = function (element) {
    var codeStyles = getStyles(element);
    var whiteSpace = codeStyles['white-space'];

    if (whiteSpace === 'pre-wrap' || whiteSpace === 'pre-line') {
        var codeElement = element.querySelector('code');
        var lineNumbersWrapper = element.querySelector('.line-numbers-rows');
        if (!codeElement || !lineNumbersWrapper) {
            return;
        }
        var lineNumberSizer = element.querySelector('.line-numbers-sizer');
        var codeLines = codeElement.textContent.split(NEW_LINE_EXP);

        if (!lineNumberSizer) {
            lineNumberSizer = document.createElement('span');
            lineNumberSizer.className = 'line-numbers-sizer';

            codeElement.appendChild(lineNumberSizer);
        }

        lineNumberSizer.style.display = 'block';

        codeLines.forEach(function (line, lineNumber) {
            lineNumberSizer.textContent = line || '\n';
            var lineSize = lineNumberSizer.getBoundingClientRect().height;
            lineNumbersWrapper.children[lineNumber].style.height = lineSize + 'px';
        });

        lineNumberSizer.textContent = '';
        lineNumberSizer.style.display = 'none';
    }
};

/**
 * Returns style declarations for the element
 * @param {Element} element
 */
var getStyles = function (element) {
    if (!element) {
        return null;
    }

    return window.getComputedStyle ? getComputedStyle(element) : (element.currentStyle || null);
};

window.addEventListener('resize', function () {
    Array.prototype.forEach.call(document.querySelectorAll('pre.' + PLUGIN_NAME), _resizeElement);
});

Prism.hooks.add('complete', function (env) {
    if (!env.code) {
        return;
    }

    var code = env.element;
    var pre = code.parentNode;

    // works only for <code> wrapped inside <pre> (not inline)
    if (!pre || !/pre/i.test(pre.nodeName)) {
        return;
    }

    // Abort if line numbers already exists
    if (code.querySelector('.line-numbers-rows')) {
        return;
    }

    var addLineNumbers = false;
    var lineNumbersRegex = /(?:^|\s)line-numbers(?:\s|$)/;

    for (var element = code; element; element = element.parentNode) {
        if (lineNumbersRegex.test(element.className)) {
            addLineNumbers = true;
            break;
        }
    }

    // only add line numbers if <code> or one of its ancestors has the `line-numbers` class
    if (!addLineNumbers) {
        return;
    }

    // Remove the class 'line-numbers' from the <code>
    code.className = code.className.replace(lineNumbersRegex, ' ');
    // Add the class 'line-numbers' to the <pre>
    if (!lineNumbersRegex.test(pre.className)) {
        pre.className += ' line-numbers';
    }

    var match = env.code.match(NEW_LINE_EXP);
    var linesNum = match ? match.length + 1 : 1;
    var lineNumbersWrapper;

    var lines = new Array(linesNum + 1).join('<span></span>');

    lineNumbersWrapper = document.createElement('span');
    lineNumbersWrapper.setAttribute('aria-hidden', 'true');
    lineNumbersWrapper.className = 'line-numbers-rows';
    lineNumbersWrapper.innerHTML = lines;

    if (pre.hasAttribute('data-start')) {
        pre.style.counterReset = 'linenumber ' + (parseInt(pre.getAttribute('data-start'), 10) - 1);
    }

    env.element.appendChild(lineNumbersWrapper);

    _resizeElement(pre);

    Prism.hooks.run('line-numbers', env);
});

Prism.hooks.add('line-numbers', function (env) {
    env.plugins = env.plugins || {};
    env.plugins.lineNumbers = true;
});

/**
 * Global exports
 */
Prism.plugins.lineNumbers = {
    /**
     * Returns the node of the given line number in the given element.
     * @param {Element} element A `<pre>` element with line numbers.
     * @param {Number} number
     * @returns {Element | undefined}
     */
    getLine: function (element, number) {
        if (element.tagName !== 'PRE' || !element.classList.contains(PLUGIN_NAME)) {
            return;
        }

        var lineNumberRows = element.querySelector('.line-numbers-rows');
        var lineNumberStart = parseInt(element.getAttribute('data-start'), 10) || 1;
        var lineNumberEnd = lineNumberStart + (lineNumberRows.children.length - 1);

        if (number < lineNumberStart) {
            number = lineNumberStart;
        }
        if (number > lineNumberEnd) {
            number = lineNumberEnd;
        }

        var lineIndex = number - lineNumberStart;

        return lineNumberRows.children[lineIndex];
    },
    /**
     * Resizes the line numbers of the given element.
     *
     * This function will not add line numbers. It will only resize existing ones.
     * @param {Element} element A `<pre>` element with line numbers.
     * @returns {void}
     */
    resize: function (element) {
        _resizeElement(element);
    }
};

}());
</script> -->

<!-- 
<style>
    pre[class*="language-"].line-numbers {
	position: relative;
	padding-left: 3.8em;
	counter-reset: linenumber;
}

pre[class*="language-"].line-numbers > code {
	position: relative;
	white-space: inherit;
}

.line-numbers .line-numbers-rows {
	position: absolute;
	pointer-events: none;
	top: 0;
	font-size: 100%;
	left: -3.8em;
	width: 3em; /* works for line-numbers below 1000 lines */
	letter-spacing: -1px;
	border-right: 1px solid #999;

	-webkit-user-select: none;
	-moz-user-select: none;
	-ms-user-select: none;
	user-select: none;

}

	.line-numbers-rows > span {
		display: block;
		counter-increment: linenumber;
	}

		.line-numbers-rows > span:before {
			content: counter(linenumber);
			color: #999;
			display: block;
			padding-right: 0.8em;
			text-align: right;
		}
</style> -->

      <script src="/js/theme.js"></script>
      <script>
         $(document).ready(function () {
            var gitstar = '<iframe id="iGitStarIframe" src="https://ghbtns.com/github-btn.html?user=ballerina-platform&repo=ballerina-lang&type=star&count=true&size=small" frameborder="0" scrolling="0"></iframe>';
            $('[data-button="iGitStarText"]').replaceWith(gitstar);
         
            var gitwatch = '<iframe id="iGitWatchIframe" src="https://ghbtns.com/github-btn.html?user=ballerina-platform&repo=ballerina-lang&type=watch&count=true&size=lsmalle&v=2" frameborder="0" scrolling="0"></iframe>';
            $('[data-button="iGitWatchText"]').replaceWith(gitwatch);
         
         });
         
     </script>
     <script src="/js/ballerina-leftnav.js"></script>

     <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
     <script src="/js/abixTreeList.min.js"></script>
     <script>
         $(document).ready(function() {
             $('#tree').abixTreeList();
         });





         $(window).scroll(function () {
        var bodyclass = document.body;

        if ($(this).scrollTop() > 200) {
            $('.cTopLink').removeClass('dispalaynone');
          
        } else {
            $('.cTopLink').addClass('dispalaynone');
          
        }

   


    });

     </script>




   </body>
</html>

