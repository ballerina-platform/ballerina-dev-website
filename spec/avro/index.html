<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="description" content="Specification: Ballerina Avro Library"/><meta name="keywords"/><title>Specification: Ballerina Avro Library - The Ballerina programming language</title><meta property="og:type" content="article"/><meta property="og:title" content="Specification: Ballerina Avro Library - The Ballerina programming language"/><meta property="og:description" content="Specification: Ballerina Avro Library"/><meta property="og:description" content="Specification: Ballerina Avro Library"/><meta name="twitter:title" content="Specification: Ballerina Avro Library - The Ballerina programming language"/><meta property="twitter:description" content="Specification: Ballerina Avro Library"/><meta property="twitter:text:description" content="Specification: Ballerina Avro Library"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:image" content="https://ballerina.io/images/ballerina-generic-social-media-image-2023.png"/><meta property="og:image" content="https://ballerina.io/images/ballerina-generic-social-media-image-2023.png"/><meta name="twitter:site" content="@ballerinalang"/><meta name="twitter:creator" content="@ballerinalang"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:image" content="https://ballerina.io/images/ballerina-generic-social-media-image-2023.png"/><meta property="twitter:image" content="https://ballerina.io/images/ballerina-generic-social-media-image-2023.png"/><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.setAttributeNode(d.createAttribute('data-ot-ignore'));j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-PSL2TX4');</script><script type="text/javascript" crossorigin="true" src="https://cdn.jsdelivr.net/npm/@docsearch/js@alpha"></script><script src="https://cookie-cdn.cookiepro.com/scripttemplates/otSDKStub.js" type="text/javascript" charSet="UTF-8" data-domain-script="630ad396-5fd5-4745-92ae-2765dc8841ee" defer=""></script><meta name="next-head-count" content="22"/><meta charSet="utf-8"/><meta name="author" content="WSO2 LLC"/><meta http-equiv="X-Frame-Options" content="SAMEORIGIN"/><meta http-equiv="Content-Security-Policy" content="frame-ancestors &#x27;none&#x27;;"/><link rel="shortcut icon" href="/images/favicon.ico"/><link rel="stylesheet" href="/css/roboto.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css"/><link rel="stylesheet" href="/css/ballerina-search-button.css"/><link rel="stylesheet" href="/css/ballerina-search-modal.css"/><link rel="stylesheet" href="/css/ballerina-search-variables.css"/><link rel="stylesheet" href="/css/ballerina-search-style.css"/><link rel="preload" href="/_next/static/css/1c44555f334d7673.css" as="style"/><link rel="stylesheet" href="/_next/static/css/1c44555f334d7673.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-7442a5e82bbc7a6d.js" defer=""></script><script src="/_next/static/chunks/framework-79bce4a3a540b080.js" defer=""></script><script src="/_next/static/chunks/main-0ea70f422df5d19e.js" defer=""></script><script src="/_next/static/chunks/pages/_app-bbd31250c7dfa44e.js" defer=""></script><script src="/_next/static/chunks/9733-fbb4953a2fa6f36d.js" defer=""></script><script src="/_next/static/chunks/8999-d460056eee862859.js" defer=""></script><script src="/_next/static/chunks/5530-3a0ee3d9119ba327.js" defer=""></script><script src="/_next/static/chunks/pages/spec/%5Bslug%5D-a4342949c9493369.js" defer=""></script><script src="/_next/static/atSnZAymVYOTt_KE89EwC/_buildManifest.js" defer=""></script><script src="/_next/static/atSnZAymVYOTt_KE89EwC/_ssgManifest.js" defer=""></script><script src="/_next/static/atSnZAymVYOTt_KE89EwC/_middlewareManifest.js" defer=""></script></head><body><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PSL2TX4" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div id="__next" data-reactroot=""><div class="main-wrapper spec vstack gap-0"><div class="wrap-page-content container"><div class="row"><div class="mdContent col-12"><div class="container"><div class="topRowSpec row"><div class="col-12"></div></div><div class="specContent row"><div class="stdLib"><h1>Specification: Ballerina Avro Library</h1>
<p><em>Authors</em>: @Nuvindu <br/>
<em>Reviewers</em>: @ThisaruGuruge <br/>
<em>Created</em>: 2024/04/04 <br/>
<em>Updated</em>: 2024/04/04 <br/>
<em>Edition</em>: Swan Lake</p>
<h2 id="introduction" level="2">Introduction</h2>
<p>The Ballerina Avro module is designed to provide an easy way to convert data to bytes according to an Avro schema and to convert serialized bytes to a specific Ballerina type.</p>
<p>The Avro library specification has evolved and may continue to evolve in the future. The released versions of the specification can be found under the relevant GitHub tag.</p>
<p>If you have any feedback or suggestions about the library, start a discussion via a <a href="https://github.com/ballerina-platform/ballerina-library/issues">GitHub issue</a> or in the <a href="https://discord.gg/ballerinalang">Discord server</a>. Based on the outcome of the discussion, the specification and implementation can be updated. Community feedback is always welcome. Any accepted proposal, which affects the specification is stored under <code>/docs/proposals</code>. Proposals under discussion can be found with the label <code>type/proposal</code> in GitHub.</p>
<p>The conforming implementation of the specification is released and included in the distribution. Any deviation from the specification is considered a bug.</p>
<h2 id="contents" level="2">Contents</h2>
<ol>
<li><a href="#1-overview">Overview</a></li>
<li><a href="#2-initialize-the-avro-instance">Initialize the Avro instance</a>
<ul>
<li>2.1 <a href="#21-the-init-method">The <code>init</code> method</a></li>
</ul>
</li>
<li><a href="#3-serialize-data-into-bytes">Serialize data into bytes</a>
<ul>
<li>3.1 <a href="#31-the-toavro-api">The <code>toAvro</code> API</a>
<ul>
<li>3.1.1 <a href="#311-api-parameters">API Parameters</a>
<ul>
<li>3.1.1.1 <a href="#3111-the-data-parameter">The <code>data</code> Parameter</a>
<ul>
<li>3.1.1.1.1 <a href="#31111-accepted-ballerina-types">Accepted Ballerina types</a></li>
</ul>
</li>
</ul>
</li>
<li>3.1.2 <a href="#312-return-type">Return type</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#4-deserialize-bytes-to-a-specific-ballerina-type">Deserialize bytes to a specific Ballerina type</a>
<ul>
<li>4.1 <a href="#41-the-fromavro-api">The <code>fromAvro</code> API</a>
<ul>
<li>4.1.1 <a href="#411-api-parameters">API parameters</a>
<ul>
<li>4.1.1.1 <a href="#4111-the-data-parameter">The <code>data</code> parameter</a></li>
<li>4.1.1.2 <a href="#4112-the-targettype-parameter">The <code>targetType</code> parameter</a></li>
</ul>
</li>
<li>4.1.2 <a href="#412-return-type">Return type</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#5-the-avroerror-type">The <code>avro:Error</code> type</a></li>
</ol>
<h2 id="1-overview" level="2">1. Overview</h2>
<p>This specification elaborates on serializing data to <code>byte[]</code>, as well as deserializing a <code>byte[]</code> to a specific Ballerina type.</p>
<p>The Avro module provides the following functionalities.</p>
<ol>
<li>Serialize data into bytes</li>
<li>Deserialize bytes to a specific Ballerina type</li>
</ol>
<h2 id="2-initialize-the-avro-instance" level="2">2. Initialize the Avro instance</h2>
<p>The <code>avro:Schema</code> instance needs to be initialized before performing the functionalities.</p>
<h3 id="21-the-init-method" level="3">2.1 The <code>init</code> method</h3>
<p>The <code>init</code> method can be used to initialize the <code>avro:Schema</code> instance. This method has a parameter named <code>schema</code> which accepts Avro schemas in the <code>string</code> format. The method will return an <code>avro:Error</code> in case of failure.</p>
<pre><div><pre class="shiki github-light" style="background-color: #fff" tabindex="0"><code><span class="line"><span style="color: #24292E">vro</span><span style="color: #D73A49">:</span><span style="color: #24292E">Schema schema </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #D73A49">check</span><span style="color: #24292E"> </span><span style="color: #D73A49">new</span><span style="color: #24292E"> (</span><span style="color: #032F62">&quot;avro-schema-string&quot;</span><span style="color: #24292E">);</span></span></code></pre></div></pre>
<h2 id="3-serialize-data-into-bytes" level="2">3. Serialize data into bytes</h2>
<p>This section describes the details of serializing Ballerina data into <code>byte</code> arrays.</p>
<h3 id="31-the-toavro-api" level="3">3.1 The <code>toAvro</code> API</h3>
<p>The <code>toAvro</code> API can be used to serialize data into <code>byte[]</code>.</p>
<pre><div><pre class="shiki github-light" style="background-color: #fff" tabindex="0"><code><span class="line"><span style="color: #24292E">yte[] serializedData </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #D73A49">check</span><span style="color: #24292E"> schema.</span><span style="color: #6F42C1">toAvro</span><span style="color: #24292E">(</span><span style="color: #032F62">&quot;avro-data&quot;</span><span style="color: #24292E">);</span></span></code></pre></div></pre>
<h4 id="311-api-parameters" level="4">3.1.1 API parameters</h4>
<h5 id="3111-the-data-parameter" level="5">3.1.1.1 The <code>data</code> parameter</h5>
<p>The <code>data</code> parameter accepts the following Ballerina data types that is needed to be serialized into <code>byte</code> array.</p>
<h6 id="31111-accepted-ballerina-types" level="6">3.1.1.1.1 Accepted Ballerina types</h6>
<ul>
<li><code>json</code></li>
<li><code>enum</code></li>
<li><code>record</code></li>
</ul>
<h4 id="312-return-type" level="4">3.1.2 Return type</h4>
<p>The function returns a <code>byte[]</code> or a <code>avro:Error</code> based on the conversion.</p>
<h2 id="4-deserialize-bytes-to-a-specific-ballerina-type" level="2">4. Deserialize bytes to a specific Ballerina type</h2>
<p>The Avro module provides an API to deserialize a given <code>byte[]</code> to a given Ballerina type.</p>
<h3 id="41-the-fromavro-api" level="3">4.1 The <code>fromAvro</code> API</h3>
<p>The <code>fromAvro</code> API facilitates the deserialization of Avro <code>byte[]</code> into a given Ballerina type.</p>
<pre><div><pre class="shiki github-light" style="background-color: #fff" tabindex="0"><code><span class="line"><span style="color: #24292E">tring deserializedData </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #D73A49">check</span><span style="color: #24292E"> schema.</span><span style="color: #6F42C1">fromAvro</span><span style="color: #24292E">(</span><span style="color: #E36209">data</span><span style="color: #24292E">);</span></span></code></pre></div></pre>
<h4 id="411-api-parameters" level="4">4.1.1 API parameters</h4>
<h5 id="4111-the-data-parameter" level="5">4.1.1.1 The <code>data</code> parameter</h5>
<p>The <code>data</code> parameter is an Avro <code>byte[]</code> that needs to be converted to a Ballerina type.</p>
<h5 id="4112-the-targettype-parameter" level="5">4.1.1.2 The <code>targetType</code> parameter</h5>
<p>The <code>targetType</code> parameter accepts the type descriptor of the target Ballerina type.</p>
<h4 id="412-return-type" level="4">4.1.2 Return type</h4>
<p>The return type will be inferred from the user specified type on success, or a <code>avro:Error</code> in case of conversion errors.</p>
<h2 id="5-the-avroerror-type" level="2">5. The <code>avro:Error</code> type</h2>
<p>The <code>avro:Error</code> type represents all the errors related to the Avro module. This is a subtype of the Ballerina <code>error</code> type.</p></div></div></div></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"frontmatter":{},"content":"# Specification: Ballerina Avro Library\r\n\r\n_Authors_: @Nuvindu \\\r\n_Reviewers_: @ThisaruGuruge \\\r\n_Created_: 2024/04/04 \\\r\n_Updated_: 2024/04/04 \\\r\n_Edition_: Swan Lake\r\n\r\n## Introduction\r\n\r\nThe Ballerina Avro module is designed to provide an easy way to convert data to bytes according to an Avro schema and to convert serialized bytes to a specific Ballerina type.\r\n\r\nThe Avro library specification has evolved and may continue to evolve in the future. The released versions of the specification can be found under the relevant GitHub tag.\r\n\r\nIf you have any feedback or suggestions about the library, start a discussion via a [GitHub issue](https://github.com/ballerina-platform/ballerina-library/issues) or in the [Discord server](https://discord.gg/ballerinalang). Based on the outcome of the discussion, the specification and implementation can be updated. Community feedback is always welcome. Any accepted proposal, which affects the specification is stored under `/docs/proposals`. Proposals under discussion can be found with the label `type/proposal` in GitHub.\r\n\r\nThe conforming implementation of the specification is released and included in the distribution. Any deviation from the specification is considered a bug.\r\n\r\n## Contents\r\n\r\n1. [Overview](#1-overview)\r\n2. [Initialize the Avro instance](#2-initialize-the-avro-instance)\r\n    * 2.1 [The `init` method](#21-the-init-method)\r\n3. [Serialize data into bytes](#3-serialize-data-into-bytes)\r\n    * 3.1 [The `toAvro` API](#31-the-toavro-api)\r\n        * 3.1.1 [API Parameters](#311-api-parameters)\r\n            * 3.1.1.1 [The `data` Parameter](#3111-the-data-parameter)\r\n                * 3.1.1.1.1 [Accepted Ballerina types](#31111-accepted-ballerina-types)\r\n        * 3.1.2 [Return type](#312-return-type)\r\n4. [Deserialize bytes to a specific Ballerina type](#4-deserialize-bytes-to-a-specific-ballerina-type)\r\n    * 4.1 [The `fromAvro` API](#41-the-fromavro-api)\r\n        * 4.1.1 [API parameters](#411-api-parameters)\r\n            * 4.1.1.1 [The `data` parameter](#4111-the-data-parameter)\r\n            * 4.1.1.2 [The `targetType` parameter](#4112-the-targettype-parameter)\r\n        * 4.1.2 [Return type](#412-return-type)\r\n5. [The `avro:Error` type](#5-the-avroerror-type)\r\n\r\n## 1. Overview\r\n\r\nThis specification elaborates on serializing data to `byte[]`, as well as deserializing a `byte[]` to a specific Ballerina type.\r\n\r\nThe Avro module provides the following functionalities.\r\n\r\n1. Serialize data into bytes\r\n2. Deserialize bytes to a specific Ballerina type\r\n\r\n## 2. Initialize the Avro instance\r\n\r\nThe `avro:Schema` instance needs to be initialized before performing the functionalities.\r\n\r\n### 2.1 The `init` method\r\n\r\nThe `init` method can be used to initialize the `avro:Schema` instance. This method has a parameter named `schema` which accepts Avro schemas in the `string` format. The method will return an `avro:Error` in case of failure.\r\n\r\n```ballerina\r\navro:Schema schema = check new (\"avro-schema-string\");\r\n```\r\n\r\n## 3. Serialize data into bytes\r\n\r\nThis section describes the details of serializing Ballerina data into `byte` arrays.\r\n\r\n### 3.1 The `toAvro` API\r\n\r\nThe `toAvro` API can be used to serialize data into `byte[]`.\r\n\r\n```ballerina\r\nbyte[] serializedData = check schema.toAvro(\"avro-data\");\r\n```\r\n\r\n#### 3.1.1 API parameters\r\n\r\n##### 3.1.1.1 The `data` parameter\r\n\r\nThe `data` parameter accepts the following Ballerina data types that is needed to be serialized into `byte` array.\r\n\r\n###### 3.1.1.1.1 Accepted Ballerina types\r\n\r\n* `json`\r\n* `enum`\r\n* `record`\r\n\r\n#### 3.1.2 Return type\r\n\r\nThe function returns a `byte[]` or a `avro:Error` based on the conversion.\r\n\r\n## 4. Deserialize bytes to a specific Ballerina type\r\n\r\nThe Avro module provides an API to deserialize a given `byte[]` to a given Ballerina type.\r\n\r\n### 4.1 The `fromAvro` API\r\n\r\nThe `fromAvro` API facilitates the deserialization of Avro `byte[]` into a given Ballerina type.\r\n\r\n```ballerina\r\nstring deserializedData = check schema.fromAvro(data);\r\n```\r\n\r\n#### 4.1.1 API parameters\r\n\r\n##### 4.1.1.1 The `data` parameter\r\n\r\nThe `data` parameter is an Avro `byte[]` that needs to be converted to a Ballerina type.\r\n\r\n##### 4.1.1.2 The `targetType` parameter\r\n\r\nThe `targetType` parameter accepts the type descriptor of the target Ballerina type.\r\n\r\n#### 4.1.2 Return type\r\n\r\nThe return type will be inferred from the user specified type on success, or a `avro:Error` in case of conversion errors.\r\n\r\n## 5. The `avro:Error` type\r\n\r\nThe `avro:Error` type represents all the errors related to the Avro module. This is a subtype of the Ballerina `error` type.\r\n","codeSnippets":"[[-1905591243,\"\u003cpre class=\\\"shiki github-light\\\" style=\\\"background-color: #fff\\\" tabindex=\\\"0\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292E\\\"\u003evro\u003c/span\u003e\u003cspan style=\\\"color: #D73A49\\\"\u003e:\u003c/span\u003e\u003cspan style=\\\"color: #24292E\\\"\u003eSchema schema \u003c/span\u003e\u003cspan style=\\\"color: #D73A49\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color: #24292E\\\"\u003e \u003c/span\u003e\u003cspan style=\\\"color: #D73A49\\\"\u003echeck\u003c/span\u003e\u003cspan style=\\\"color: #24292E\\\"\u003e \u003c/span\u003e\u003cspan style=\\\"color: #D73A49\\\"\u003enew\u003c/span\u003e\u003cspan style=\\\"color: #24292E\\\"\u003e (\u003c/span\u003e\u003cspan style=\\\"color: #032F62\\\"\u003e\u0026quot;avro-schema-string\u0026quot;\u003c/span\u003e\u003cspan style=\\\"color: #24292E\\\"\u003e);\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\"],[-967307668,\"\u003cpre class=\\\"shiki github-light\\\" style=\\\"background-color: #fff\\\" tabindex=\\\"0\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292E\\\"\u003eyte[] serializedData \u003c/span\u003e\u003cspan style=\\\"color: #D73A49\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color: #24292E\\\"\u003e \u003c/span\u003e\u003cspan style=\\\"color: #D73A49\\\"\u003echeck\u003c/span\u003e\u003cspan style=\\\"color: #24292E\\\"\u003e schema.\u003c/span\u003e\u003cspan style=\\\"color: #6F42C1\\\"\u003etoAvro\u003c/span\u003e\u003cspan style=\\\"color: #24292E\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color: #032F62\\\"\u003e\u0026quot;avro-data\u0026quot;\u003c/span\u003e\u003cspan style=\\\"color: #24292E\\\"\u003e);\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\"],[179423224,\"\u003cpre class=\\\"shiki github-light\\\" style=\\\"background-color: #fff\\\" tabindex=\\\"0\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292E\\\"\u003etring deserializedData \u003c/span\u003e\u003cspan style=\\\"color: #D73A49\\\"\u003e=\u003c/span\u003e\u003cspan style=\\\"color: #24292E\\\"\u003e \u003c/span\u003e\u003cspan style=\\\"color: #D73A49\\\"\u003echeck\u003c/span\u003e\u003cspan style=\\\"color: #24292E\\\"\u003e schema.\u003c/span\u003e\u003cspan style=\\\"color: #6F42C1\\\"\u003efromAvro\u003c/span\u003e\u003cspan style=\\\"color: #24292E\\\"\u003e(\u003c/span\u003e\u003cspan style=\\\"color: #E36209\\\"\u003edata\u003c/span\u003e\u003cspan style=\\\"color: #24292E\\\"\u003e);\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\"]]"},"__N_SSG":true},"page":"/spec/[slug]","query":{"slug":"avro"},"buildId":"atSnZAymVYOTt_KE89EwC","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>