<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="description"/><meta name="keywords"/><title></title><meta property="og:type" content="article"/><meta property="og:title" content="Ballerina - undefined"/><meta property="og:description"/><meta property="og:description"/><meta property="twitter:description"/><meta property="twitter:text:description"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.setAttributeNode(d.createAttribute('data-ot-ignore'));j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-PSL2TX4');</script><script type="text/javascript" crossorigin="true" src="https://cdn.jsdelivr.net/npm/@docsearch/js@alpha"></script><script src="https://cookie-cdn.cookiepro.com/scripttemplates/otSDKStub.js" type="text/javascript" charSet="UTF-8" data-domain-script="630ad396-5fd5-4745-92ae-2765dc8841ee" defer=""></script><meta name="next-head-count" content="14"/><meta charSet="utf-8"/><meta name="author" content="WSO2, Inc."/><meta property="og:image" content="/images/ballerina-swan-lake-sm-banner-general.png"/><meta property="og:title" content="Ballerina"/><meta property="og:image" content="/images/ballerina-swan-lake-sm-banner-general.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:site" content="@ballerinalang"/><meta name="twitter:creator" content="@ballerinalang"/><meta name="twitter:title" content="Ballerina"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:image" content="/images/ballerina-swan-lake-sm-banner-general.png"/><meta property="twitter:image" content="/images/ballerina-swan-lake-sm-banner-general.png"/><link rel="shortcut icon" href="/images/favicon.ico"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css"/><link rel="stylesheet" href="/css/ballerina-search-button.css"/><link rel="stylesheet" href="/css/ballerina-search-modal.css"/><link rel="stylesheet" href="/css/ballerina-search-variables.css"/><link rel="stylesheet" href="/css/ballerina-search-style.css"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin /><link rel="preload" href="/_next/static/css/1980105ccd8af439.css" as="style"/><link rel="stylesheet" href="/_next/static/css/1980105ccd8af439.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-68028924c860833d.js" defer=""></script><script src="/_next/static/chunks/framework-a070cbfff3c750c5.js" defer=""></script><script src="/_next/static/chunks/main-a66eb456a358e5ca.js" defer=""></script><script src="/_next/static/chunks/pages/_app-a1e0d68ce78e316c.js" defer=""></script><script src="/_next/static/chunks/9733-505c0cd1c0071f18.js" defer=""></script><script src="/_next/static/chunks/6599-14929bd9ea85f693.js" defer=""></script><script src="/_next/static/chunks/pages/spec/%5Bslug%5D-5f7d8ce1008332db.js" defer=""></script><script src="/_next/static/lsiaZgBQ5YncSyQ_5KW07/_buildManifest.js" defer=""></script><script src="/_next/static/lsiaZgBQ5YncSyQ_5KW07/_ssgManifest.js" defer=""></script><script src="/_next/static/lsiaZgBQ5YncSyQ_5KW07/_middlewareManifest.js" defer=""></script><style data-href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap">@font-face{font-family:'Roboto';font-style:italic;font-weight:100;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOiCnqEu92Fr1Mu51QrIzQ.woff) format('woff')}@font-face{font-family:'Roboto';font-style:italic;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOjCnqEu92Fr1Mu51TjARc-.woff) format('woff')}@font-face{font-family:'Roboto';font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOkCnqEu92Fr1Mu52xM.woff) format('woff')}@font-face{font-family:'Roboto';font-style:italic;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOjCnqEu92Fr1Mu51S7ABc-.woff) format('woff')}@font-face{font-family:'Roboto';font-style:italic;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOjCnqEu92Fr1Mu51TzBhc-.woff) format('woff')}@font-face{font-family:'Roboto';font-style:italic;font-weight:900;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOjCnqEu92Fr1Mu51TLBBc-.woff) format('woff')}@font-face{font-family:'Roboto';font-style:normal;font-weight:100;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOkCnqEu92Fr1MmgWxM.woff) format('woff')}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmSU5vAA.woff) format('woff')}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Me5g.woff) format('woff')}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmEU9vAA.woff) format('woff')}@font-face{font-family:'Roboto';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmWUlvAA.woff) format('woff')}@font-face{font-family:'Roboto';font-style:normal;font-weight:900;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmYUtvAA.woff) format('woff')}@font-face{font-family:'Roboto';font-style:italic;font-weight:100;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOiCnqEu92Fr1Mu51QrEz0dL-vwnYh2eg.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:italic;font-weight:100;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOiCnqEu92Fr1Mu51QrEzQdL-vwnYh2eg.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:italic;font-weight:100;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOiCnqEu92Fr1Mu51QrEzwdL-vwnYh2eg.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:italic;font-weight:100;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOiCnqEu92Fr1Mu51QrEzMdL-vwnYh2eg.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto';font-style:italic;font-weight:100;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOiCnqEu92Fr1Mu51QrEz8dL-vwnYh2eg.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:italic;font-weight:100;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOiCnqEu92Fr1Mu51QrEz4dL-vwnYh2eg.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:italic;font-weight:100;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOiCnqEu92Fr1Mu51QrEzAdL-vwnYg.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto';font-style:italic;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOjCnqEu92Fr1Mu51TjASc3CsTYl4BOQ3o.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:italic;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOjCnqEu92Fr1Mu51TjASc-CsTYl4BOQ3o.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:italic;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOjCnqEu92Fr1Mu51TjASc2CsTYl4BOQ3o.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:italic;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOjCnqEu92Fr1Mu51TjASc5CsTYl4BOQ3o.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto';font-style:italic;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOjCnqEu92Fr1Mu51TjASc1CsTYl4BOQ3o.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:italic;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOjCnqEu92Fr1Mu51TjASc0CsTYl4BOQ3o.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:italic;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOjCnqEu92Fr1Mu51TjASc6CsTYl4BO.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto';font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOkCnqEu92Fr1Mu51xFIzIXKMnyrYk.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOkCnqEu92Fr1Mu51xMIzIXKMnyrYk.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOkCnqEu92Fr1Mu51xEIzIXKMnyrYk.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOkCnqEu92Fr1Mu51xLIzIXKMnyrYk.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto';font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOkCnqEu92Fr1Mu51xHIzIXKMnyrYk.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOkCnqEu92Fr1Mu51xGIzIXKMnyrYk.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOkCnqEu92Fr1Mu51xIIzIXKMny.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto';font-style:italic;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOjCnqEu92Fr1Mu51S7ACc3CsTYl4BOQ3o.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:italic;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOjCnqEu92Fr1Mu51S7ACc-CsTYl4BOQ3o.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:italic;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOjCnqEu92Fr1Mu51S7ACc2CsTYl4BOQ3o.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:italic;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOjCnqEu92Fr1Mu51S7ACc5CsTYl4BOQ3o.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto';font-style:italic;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOjCnqEu92Fr1Mu51S7ACc1CsTYl4BOQ3o.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:italic;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOjCnqEu92Fr1Mu51S7ACc0CsTYl4BOQ3o.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:italic;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOjCnqEu92Fr1Mu51S7ACc6CsTYl4BO.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto';font-style:italic;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOjCnqEu92Fr1Mu51TzBic3CsTYl4BOQ3o.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:italic;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOjCnqEu92Fr1Mu51TzBic-CsTYl4BOQ3o.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:italic;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOjCnqEu92Fr1Mu51TzBic2CsTYl4BOQ3o.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:italic;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOjCnqEu92Fr1Mu51TzBic5CsTYl4BOQ3o.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto';font-style:italic;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOjCnqEu92Fr1Mu51TzBic1CsTYl4BOQ3o.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:italic;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOjCnqEu92Fr1Mu51TzBic0CsTYl4BOQ3o.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:italic;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOjCnqEu92Fr1Mu51TzBic6CsTYl4BO.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto';font-style:italic;font-weight:900;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOjCnqEu92Fr1Mu51TLBCc3CsTYl4BOQ3o.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:italic;font-weight:900;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOjCnqEu92Fr1Mu51TLBCc-CsTYl4BOQ3o.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:italic;font-weight:900;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOjCnqEu92Fr1Mu51TLBCc2CsTYl4BOQ3o.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:italic;font-weight:900;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOjCnqEu92Fr1Mu51TLBCc5CsTYl4BOQ3o.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto';font-style:italic;font-weight:900;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOjCnqEu92Fr1Mu51TLBCc1CsTYl4BOQ3o.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:italic;font-weight:900;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOjCnqEu92Fr1Mu51TLBCc0CsTYl4BOQ3o.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:italic;font-weight:900;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOjCnqEu92Fr1Mu51TLBCc6CsTYl4BO.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto';font-style:normal;font-weight:100;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOkCnqEu92Fr1MmgVxFIzIXKMnyrYk.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:normal;font-weight:100;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOkCnqEu92Fr1MmgVxMIzIXKMnyrYk.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:normal;font-weight:100;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOkCnqEu92Fr1MmgVxEIzIXKMnyrYk.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:normal;font-weight:100;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOkCnqEu92Fr1MmgVxLIzIXKMnyrYk.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:100;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOkCnqEu92Fr1MmgVxHIzIXKMnyrYk.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:normal;font-weight:100;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOkCnqEu92Fr1MmgVxGIzIXKMnyrYk.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:100;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOkCnqEu92Fr1MmgVxIIzIXKMny.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmSU5fCRc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmSU5fABc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmSU5fCBc4AMP6lbBP.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmSU5fBxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmSU5fCxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmSU5fChc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmSU5fBBc4AMP6lQ.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu72xKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu5mxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu7mxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu4WxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu7WxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu7GxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu4mxKKTU1Kg.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmEU9fCRc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmEU9fABc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmEU9fCBc4AMP6lbBP.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmEU9fBxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmEU9fCxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmEU9fChc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmEU9fBBc4AMP6lQ.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmWUlfCRc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmWUlfABc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmWUlfCBc4AMP6lbBP.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmWUlfBxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmWUlfCxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmWUlfChc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmWUlfBBc4AMP6lQ.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto';font-style:normal;font-weight:900;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmYUtfCRc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:normal;font-weight:900;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmYUtfABc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:normal;font-weight:900;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmYUtfCBc4AMP6lbBP.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:normal;font-weight:900;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmYUtfBxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:900;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmYUtfCxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:normal;font-weight:900;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmYUtfChc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:900;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmYUtfBBc4AMP6lQ.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><body><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PSL2TX4" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div id="__next" data-reactroot=""><div class="main-wrapper spec vstack gap-0"><div class="wrap-page-content container"><div class="row"><div class="mdContent col-12"><div class="container"><div class="topRowSpec row"><div class="col-12"></div></div><div class="specContent row"><div class="stdLib"><h1>Specification: Ballerina WebSocket Library</h1>
<p><em>Owners</em>: @shafreenAnfar @bhashinee<br/>
<em>Reviewers</em>: @shafreenAnfar<br/>
<em>Created</em>: 2021/12/09<br/>
<em>Updated</em>: 2022/12/08<br/>
<em>Edition</em>: Swan Lake</p>
<h2 id="introduction" level="2">Introduction</h2>
<p>This is the specification for the WebSocket standard library of <a href="https://ballerina.io/">Ballerina language</a>, which provides WebSocket client-server functionalities.</p>
<p>The WebSocket library specification has evolved and may continue to evolve in the future. The released versions of the specification can be found under the relevant GitHub tag.</p>
<p>If you have any feedback or suggestions about the library, start a discussion via a <a href="https://github.com/ballerina-platform/ballerina-standard-library/issues">GitHub issue</a> or in the <a href="https://discord.gg/ballerinalang">Discord server</a>. Based on the outcome of the discussion, the specification and implementation can be updated. Community feedback is always welcome. Any accepted proposal, which affects the specification is stored under <code>/docs/proposals</code>. Proposals under discussion can be found with the label <code>type/proposal</code> in GitHub.</p>
<p>The conforming implementation of the specification is released and included in the distribution. Any deviation from the specification is considered a bug.</p>
<h2 id="contents" level="2">Contents</h2>
<ol>
<li><a href="#1-overview">Overview</a></li>
<li><a href="#2-listener">Listener</a>
<ul>
<li>2.1. <a href="#21-listener-configurations">Listener Configurations</a></li>
<li>2.2. <a href="#22-initialization">Initialization</a></li>
</ul>
</li>
<li><a href="#3-service-types">Service Types</a>
<ul>
<li>3.1. <a href="#31-upgradeservice">UpgradeService</a>
<ul>
<li>3.1.1. <a href="#311-upgradeservice-configurations">UpgradeService Configurations</a></li>
</ul>
</li>
<li>3.2. <a href="#32-websocket-service">WebSocket Service</a>
<ul>
<li>3.2.1. <a href="#321-remote-methods-associated-with-websocket-service">Remote methods associated with WebSocket Service</a>
<ul>
<li><a href="#onopen">onOpen</a></li>
<li><a href="#ontextmessage">onTextMessage</a></li>
<li><a href="#onbinarymessage">onBinaryMessage</a></li>
<li><a href="#onmessage">onMessage</a></li>
<li><a href="#onping-and-onpong">onPing and onPong</a></li>
<li><a href="#onidletimeout">onIdleTimeout</a></li>
<li><a href="#onclose">onClose</a></li>
<li><a href="#onerror">onError</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#4-client">Client</a>
<ul>
<li>4.1. <a href="#41-client-configurations">Client Configurations</a></li>
<li>4.2. <a href="#42-initialization">Initialization</a></li>
<li>4.3. <a href="#43-send-and-receive-messages-using-the-client">Send and receive messages using the Client</a>
<ul>
<li><a href="#writetextmessage">writeTextMessage</a></li>
<li><a href="#writebinarymessage">writeBinaryMessage</a></li>
<li><a href="#readtextmessage">readTextMessage</a></li>
<li><a href="#readbinarymessage">readBinaryMessage</a></li>
<li><a href="#readmessage">readMessage</a></li>
<li><a href="#close">close</a></li>
<li><a href="#ping">ping</a></li>
<li><a href="#pong">pong</a></li>
<li><a href="#onping-and-onpong-remote-methods">onPing and onPong remote methods</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#5-securing-the-websocket-connections">Securing the WebSocket Connections</a>
<ul>
<li>5.1. <a href="#51-ssl-tls">SSL/TLS</a></li>
<li>5.2. <a href="#52-authentication-and-authorization">Authentication and Authorization</a></li>
</ul>
</li>
<li><a href="#6-samples">Samples</a></li>
</ol>
<h2 id="1-overview" level="2">1. <a href="#1-overview">Overview</a></h2>
<p>WebSocket is a protocol that allows a long held full-duplex connection between a server and client. This specification elaborates on how Ballerina language provides a tested WebSocket client and server implementation that is compliant with the <a href="https://www.rfc-editor.org/rfc/rfc6455.html">RFC 6455</a>.</p>
<h2 id="2-listener" level="2">2. <a href="#2-listener">Listener</a></h2>
<p>The WebSocket listener can be constructed with a port or an http:Listener. When initiating the listener it opens up the port and attaches the upgrade service at the given service path. It is also worth noting that upgrade service is quite similar to an HTTP service.</p>
<h3 id="21-listener-configurations" level="3">2.1. <a href="#21-listener-configurations">Listener Configurations</a></h3>
<p>When initializing the listener, following configurations can be provided,</p>
<pre><div><pre class="shiki" style="background-color: #ffffff"><code><span class="line"><span style="color: #24292F"># Provides a set of configurations for HTTP service endpoints.</span></span>
<span class="line"><span style="color: #24292F">#</span></span>
<span class="line"><span style="color: #24292F"># + host - The host name/IP of the endpoint</span></span>
<span class="line"><span style="color: #24292F"># + http1Settings - Configurations related to HTTP/1.x protocol</span></span>
<span class="line"><span style="color: #24292F"># + secureSocket - The SSL configurations for the service endpoint. This needs to be configured in order to</span></span>
<span class="line"><span style="color: #24292F">#                  communicate through WSS.</span></span>
<span class="line"><span style="color: #24292F"># + timeout - Period of time in seconds that a connection waits for a read/write operation in the</span></span>
<span class="line"><span style="color: #24292F">#                     initial upgrade request. Use value 0 to disable timeout</span></span>
<span class="line"><span style="color: #24292F"># + server - The server name which should appear as a response header</span></span>
<span class="line"><span style="color: #24292F"># + webSocketCompressionEnabled - Enable support for compression in WebSocket</span></span>
<span class="line"><span style="color: #24292F"># + requestLimits - Configurations associated with inbound request size limits</span></span>
<span class="line"><span style="color: #24292F">public type ListenerConfiguration record {|</span></span>
<span class="line"><span style="color: #24292F">    string host = &quot;0.0.0.0&quot;;</span></span>
<span class="line"><span style="color: #24292F">    ListenerHttp1Settings http1Settings = {};</span></span>
<span class="line"><span style="color: #24292F">    ListenerSecureSocket secureSocket?;</span></span>
<span class="line"><span style="color: #24292F">    decimal timeout = 120;</span></span>
<span class="line"><span style="color: #24292F">    string? server = ();</span></span>
<span class="line"><span style="color: #24292F">    boolean webSocketCompressionEnabled = true;</span></span>
<span class="line"><span style="color: #24292F">    RequestLimitConfigs requestLimits = {};</span></span>
<span class="line"><span style="color: #24292F">|};</span></span></code></pre></div></pre>
<p><code>ListenerHttp1Settings</code> record contains the settings related to HTTP/1.x protocol. This is an included record from the HTTP package, and this will only be applicable to the initial WebSocket upgrade request.</p>
<pre><div><pre class="shiki" style="background-color: #ffffff"><code><span class="line"><span style="color: #24292F"># Provides settings related to HTTP/1.x protocol.</span></span>
<span class="line"><span style="color: #24292F">public type ListenerHttp1Settings record {|</span></span>
<span class="line"><span style="color: #24292F">    *http:ListenerHttp1Settings;</span></span>
<span class="line"><span style="color: #24292F">|};</span></span></code></pre></div></pre>
<p>The actual <code>ListenerHttp1Settings</code> record in the HTTP package contains the following fields.</p>
<pre><div><pre class="shiki" style="background-color: #ffffff"><code><span class="line"><span style="color: #24292F"># Provides settings related to HTTP/1.x protocol.</span></span>
<span class="line"><span style="color: #24292F">#</span></span>
<span class="line"><span style="color: #24292F"># + keepAlive - Can be set to either `KEEPALIVE_AUTO`, which respects the `connection` header, or `KEEPALIVE_ALWAYS`,</span></span>
<span class="line"><span style="color: #24292F">#               which always keeps the connection alive, or `KEEPALIVE_NEVER`, which always closes the connection</span></span>
<span class="line"><span style="color: #24292F"># + maxPipelinedRequests - Defines the maximum number of requests that can be processed at a given time on a single</span></span>
<span class="line"><span style="color: #24292F">#                          connection. By default 10 requests can be pipelined on a single connection and user can</span></span>
<span class="line"><span style="color: #24292F">#                          change this limit appropriately.</span></span>
<span class="line"><span style="color: #24292F">public type ListenerHttp1Settings record {|</span></span>
<span class="line"><span style="color: #24292F">    KeepAlive keepAlive = KEEPALIVE_AUTO;</span></span>
<span class="line"><span style="color: #24292F">    int maxPipelinedRequests = MAX_PIPELINED_REQUESTS;</span></span>
<span class="line"><span style="color: #24292F">|};</span></span></code></pre></div></pre>
<p><code>ListenerSecureSocket</code> record contains configurations related to enabling SSL/TLS on the listener side, and it is an included record from the HTTP package. More details and examples of how to configure them can be found in a following section on <code>Securing the WebSocket Connections</code>.</p>
<pre><div><pre class="shiki" style="background-color: #ffffff"><code><span class="line"><span style="color: #24292F"># Configures the SSL/TLS options to be used for WebSocket service.</span></span>
<span class="line"><span style="color: #24292F">public type ListenerSecureSocket record {|</span></span>
<span class="line"><span style="color: #24292F">    *http:ListenerSecureSocket;</span></span>
<span class="line"><span style="color: #24292F">|};</span></span></code></pre></div></pre>
<p>The actual <code>ListenerSecureSocket</code> record in the HTTP package contains the following fields.</p>
<pre><div><pre class="shiki" style="background-color: #ffffff"><code><span class="line"><span style="color: #24292F"># Configures the SSL/TLS options to be used for HTTP service.</span></span>
<span class="line"><span style="color: #24292F">#</span></span>
<span class="line"><span style="color: #24292F"># + key - Configurations associated with `crypto:KeyStore` or combination of certificate and (PKCS8) private key of the server</span></span>
<span class="line"><span style="color: #24292F"># + mutualSsl - Configures associated with mutual SSL operations</span></span>
<span class="line"><span style="color: #24292F"># + protocol - SSL/TLS protocol related options</span></span>
<span class="line"><span style="color: #24292F"># + certValidation - Certificate validation against OCSP_CRL, OCSP_STAPLING related options</span></span>
<span class="line"><span style="color: #24292F"># + ciphers - List of ciphers to be used</span></span>
<span class="line"><span style="color: #24292F">#             eg: TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256, TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA</span></span>
<span class="line"><span style="color: #24292F"># + shareSession - Enable/Disable new SSL session creation</span></span>
<span class="line"><span style="color: #24292F"># + handshakeTimeout - SSL handshake time out</span></span>
<span class="line"><span style="color: #24292F"># + sessionTimeout - SSL session time out</span></span>
<span class="line"><span style="color: #24292F">public type ListenerSecureSocket record {|</span></span>
<span class="line"><span style="color: #24292F">    crypto:KeyStore|CertKey key;</span></span>
<span class="line"><span style="color: #24292F">    record {|</span></span>
<span class="line"><span style="color: #24292F">        VerifyClient verifyClient = REQUIRE;</span></span>
<span class="line"><span style="color: #24292F">        crypto:TrustStore|string cert;</span></span>
<span class="line"><span style="color: #24292F">    |} mutualSsl?;</span></span>
<span class="line"><span style="color: #24292F">    record {|</span></span>
<span class="line"><span style="color: #24292F">        Protocol name;</span></span>
<span class="line"><span style="color: #24292F">        string[] versions = [];</span></span>
<span class="line"><span style="color: #24292F">    |} protocol?;</span></span>
<span class="line"><span style="color: #24292F">    record {|</span></span>
<span class="line"><span style="color: #24292F">        CertValidationType &#39;type = OCSP_STAPLING;</span></span>
<span class="line"><span style="color: #24292F">        int cacheSize;</span></span>
<span class="line"><span style="color: #24292F">        int cacheValidityPeriod;</span></span>
<span class="line"><span style="color: #24292F">    |} certValidation?;</span></span>
<span class="line"><span style="color: #24292F">    string[] ciphers = [&quot;TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256&quot;, &quot;TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256&quot;,</span></span>
<span class="line"><span style="color: #24292F">                        &quot;TLS_DHE_RSA_WITH_AES_128_CBC_SHA256&quot;, &quot;TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA&quot;,</span></span>
<span class="line"><span style="color: #24292F">                        &quot;TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA&quot;, &quot;TLS_DHE_RSA_WITH_AES_128_CBC_SHA&quot;,</span></span>
<span class="line"><span style="color: #24292F">                        &quot;TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256&quot;, &quot;TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256&quot;,</span></span>
<span class="line"><span style="color: #24292F">                        &quot;TLS_DHE_RSA_WITH_AES_128_GCM_SHA256&quot;];</span></span>
<span class="line"><span style="color: #24292F">    boolean shareSession = true;</span></span>
<span class="line"><span style="color: #24292F">    decimal handshakeTimeout?;</span></span>
<span class="line"><span style="color: #24292F">    decimal sessionTimeout?;</span></span>
<span class="line"><span style="color: #24292F">|};</span></span></code></pre></div></pre>
<p><code>RequestLimitConfigs</code> record represents configurations related to maximum sizes of URI, headers and entity body which is also an included record from the hTTP package as this will only be applicable to the initial WebSocket upgrade request.</p>
<pre><div><pre class="shiki" style="background-color: #ffffff"><code><span class="line"><span style="color: #24292F"># Provides inbound request URI, total header and entity body size threshold configurations.</span></span>
<span class="line"><span style="color: #24292F">public type RequestLimitConfigs record {|</span></span>
<span class="line"><span style="color: #24292F">    *http:RequestLimitConfigs;</span></span>
<span class="line"><span style="color: #24292F">|};</span></span></code></pre></div></pre>
<p>The actual <code>RequestLimitConfigs</code> record in the HTTP package contains the following fields.</p>
<pre><div><pre class="shiki" style="background-color: #ffffff"><code><span class="line"><span style="color: #24292F"># Provides inbound request URI, total header and entity body size threshold configurations.</span></span>
<span class="line"><span style="color: #24292F">#</span></span>
<span class="line"><span style="color: #24292F"># + maxUriLength - Maximum allowed length for a URI. Exceeding this limit will result in a `414 - URI Too Long`</span></span>
<span class="line"><span style="color: #24292F">#                  response</span></span>
<span class="line"><span style="color: #24292F"># + maxHeaderSize - Maximum allowed size for headers. Exceeding this limit will result in a</span></span>
<span class="line"><span style="color: #24292F">#                   `431 - Request Header Fields Too Large` response</span></span>
<span class="line"><span style="color: #24292F"># + maxEntityBodySize - Maximum allowed size for the entity body. By default it is set to -1 which means there</span></span>
<span class="line"><span style="color: #24292F">#                       is no restriction `maxEntityBodySize`, On the Exceeding this limit will result in a</span></span>
<span class="line"><span style="color: #24292F">#                       `413 - Payload Too Large` response</span></span>
<span class="line"><span style="color: #24292F">public type RequestLimitConfigs record {|</span></span>
<span class="line"><span style="color: #24292F">    int maxUriLength = 4096;</span></span>
<span class="line"><span style="color: #24292F">    int maxHeaderSize = 8192;</span></span>
<span class="line"><span style="color: #24292F">    int maxEntityBodySize = -1;</span></span>
<span class="line"><span style="color: #24292F">|};</span></span></code></pre></div></pre>
<h3 id="22-initialization" level="3">2.2. <a href="#22-initialization">Initialization</a></h3>
<p>The WebSocket listener can be initialized by providing the <code>port</code> or a <code>http:Listener</code> and optionally a <code>ListenerConfiguration</code>.</p>
<pre><div># Gets invoked during the module initialization to initialize the listener.
# ```ballerina
# listener websocket:Listener securedEP = new(9090,
#   secureSocket = {
#       key: {
#           certFile: "../resource/path/to/public.crt",
#           keyFile: "../resource/path/to/private.key"
#       }
#   }
# );
# ```
#
# + port - Listening port of the WebSocket service listener
# + config - Configurations for the WebSocket service listener
public isolated function init(int|http:Listener 'listener, *ListenerConfiguration config) returns Error? {</div></pre>
<h2 id="3-service-types" level="2">3. <a href="#3-service-types">Service Types</a></h2>
<h3 id="31-upgradeservice" level="3">3.1. <a href="#31-upgrade-service">UpgradeService</a></h3>
<p>Upgrade service is pretty much similar to an HTTP service. It has a single <code>get</code> resource, which takes in an <code>http:Request</code> optionally. The <code>get</code> resource returns a <code>websocket:Service</code> to which incoming messages get dispatched after a successful WebSocket connection upgrade. This resource can be used to intercept the initial HTTP upgrade with custom headers or to cancel the WebSocket upgrade by returning an error.</p>
<h4 id="311-upgradeservice-configurations" level="4">3.1.1. <a href="#311-upgradeservice-configurations">UpgradeService Configurations</a></h4>
<p>When writing the service, following configurations can be provided,</p>
<pre><div><pre class="shiki" style="background-color: #ffffff"><code><span class="line"><span style="color: #24292F"># Configurations for a WebSocket service.</span></span>
<span class="line"><span style="color: #24292F">#</span></span>
<span class="line"><span style="color: #24292F"># + subProtocols - Negotiable sub protocol by the service</span></span>
<span class="line"><span style="color: #24292F"># + idleTimeout - Idle timeout for the client connection. Upon timeout, `onIdleTimeout` resource (if defined)</span></span>
<span class="line"><span style="color: #24292F">#                          in the server service will be triggered. Note that this overrides the `timeout` config</span></span>
<span class="line"><span style="color: #24292F">#                          in the `websocket:Listener` which is applicable only for the initial HTTP upgrade request.</span></span>
<span class="line"><span style="color: #24292F"># + maxFrameSize - The maximum payload size of a WebSocket frame in bytes.</span></span>
<span class="line"><span style="color: #24292F">#                  If this is not set or is negative or zero, the default frame size which is 65536 will be used.</span></span>
<span class="line"><span style="color: #24292F"># + auth - Listener authenticaton configurations</span></span>
<span class="line"><span style="color: #24292F">public type WSServiceConfig record {|</span></span>
<span class="line"><span style="color: #24292F">    string[] subProtocols = [];</span></span>
<span class="line"><span style="color: #24292F">    decimal idleTimeout = 0;</span></span>
<span class="line"><span style="color: #24292F">    int maxFrameSize = 65536;</span></span>
<span class="line"><span style="color: #24292F">    ListenerAuthConfig[] auth?;</span></span>
<span class="line"><span style="color: #24292F">|};</span></span></code></pre></div></pre>
<h3 id="32-websocket-service" level="3">3.2. <a href="#32-websocket-service">WebSocket Service</a></h3>
<p>Once the WebSocket upgrade is accepted by the UpgradeService, it returns a <code>websocket:Service</code>. This service has a fixed set of remote methods that do not have any configs. Receiving messages will get dispatched to the relevant remote method. Each remote method is explained below.</p>
<pre><div><pre class="shiki" style="background-color: #ffffff"><code><span class="line"><span style="color: #24292F">service /ws on new websocket:Listener(21003) {</span></span>
<span class="line"><span style="color: #24292F">    resource function get .(http:Request req) returns websocket:Service|websocket:UpgradeError {</span></span>
<span class="line"><span style="color: #24292F">        return new WsService();</span></span>
<span class="line"><span style="color: #24292F">    }    </span></span>
<span class="line"><span style="color: #24292F">}</span></span>
<span class="line"><span style="color: #24292F">        </span></span>
<span class="line"><span style="color: #24292F">service class WsService {</span></span>
<span class="line"><span style="color: #24292F">    *websocket:Service;</span></span>
<span class="line"><span style="color: #24292F">    remote isolated function onTextMessage(websocket:Caller caller, string data) returns websocket:Error? {</span></span>
<span class="line"><span style="color: #24292F">        check caller-&gt;writeTextMessage(data);</span></span>
<span class="line"><span style="color: #24292F">    }</span></span>
<span class="line"><span style="color: #24292F">}</span></span></code></pre></div></pre>
<h4 id="321-remote-methods-associated-with-websocket-service" level="4">3.2.1. <a href="#remote-methods-associated-with-websocket-service">Remote methods associated with WebSocket Service</a></h4>
<h5 id="onopen" level="5"><a href="#onopen">onOpen</a></h5>
<p>As soon as the WebSocket handshake is completed and the connection is established, the <code>onOpen</code> remote method is dispatched.</p>
<pre><div><pre class="shiki" style="background-color: #ffffff"><code><span class="line"><span style="color: #24292F">remote function onOpen(websocket:Caller caller) returns error? {</span></span>
<span class="line"><span style="color: #24292F">    io:println(&quot;Opened a WebSocket connection&quot;);</span></span>
<span class="line"><span style="color: #24292F">}</span></span></code></pre></div></pre>
<h5 id="ontextmessage" level="5"><a href="#ontextmessage">onTextMessage</a></h5>
<p>The received text messages are dispatched to this remote method.</p>
<pre><div><pre class="shiki" style="background-color: #ffffff"><code><span class="line"><span style="color: #24292F">remote isolated function onTextMessage(websocket:Caller caller, string text) returns websocket:Error? {</span></span>
<span class="line"><span style="color: #24292F">     io:println(&quot;Text message: &quot; + text);</span></span>
<span class="line"><span style="color: #24292F">}</span></span></code></pre></div></pre>
<h5 id="onbinarymessage" level="5"><a href="#onbinarymessage">onBinaryMessage</a></h5>
<p>The received binary messages are dispatched to this remote method.</p>
<pre><div><pre class="shiki" style="background-color: #ffffff"><code><span class="line"><span style="color: #24292F">remote isolated function onBinaryMessage(websocket:Caller caller, byte[] data) returns websocket:Error? {</span></span>
<span class="line"><span style="color: #24292F">    io:println(data);</span></span>
<span class="line"><span style="color: #24292F">}</span></span></code></pre></div></pre>
<h5 id="onmessage" level="5"><a href="#onmessage">onMessage</a></h5>
<p>The received messages are dispatched to this remote method. Data binding support is provided to accept the messages as <code>anydata</code>.</p>
<pre><div><pre class="shiki" style="background-color: #ffffff"><code><span class="line"><span style="color: #24292F">remote isolated function onMessage(websocket:Caller caller, json data) returns websocket:Error? {</span></span>
<span class="line"><span style="color: #24292F">    io:println(data);</span></span>
<span class="line"><span style="color: #24292F">}</span></span></code></pre></div></pre>
<p>Data deserialization for text messages happens similar to the following,</p>
<ul>
<li>If the contextually-expected data type is string, received data will be directly presented to the API without doing any deserialization.</li>
<li>If the contextually-expected data type is xml, received text data will be deserialized to xml.</li>
<li>All the other data types are treated as json and received text data will be deserialized to json.</li>
</ul>
<p>Data deserialization for binary messages happens similar to the following,</p>
<ul>
<li>If the contextually-expected data type is byte[], received data will be directly presented to the API without doing any deserialization.</li>
<li>If the contextually-expected data type is xml, received binary data will be first converted to the string representation of the byte[] and then deserialized to xml.</li>
<li>All the other data types are treated as json and received binary data will be first converted to the string representation of the byte[] and then will be deserialized to json.</li>
</ul>
<p>If the data binding fails, the connection will get terminated by sending a close frame with the 1003 error code(1003 indicates that an endpoint is terminating the connection because it has received a type of data it cannot accept ) and will print an error log at the listener side.</p>
<h5 id="onping-and-onpong" level="5"><a href="#onping-and-onpong">onPing and onPong</a></h5>
<p>The received ping and pong messages are dispatched to these remote methods respectively. You do not need to explicitly control these messages as they are handled automatically by the services and clients.</p>
<pre><div><pre class="shiki" style="background-color: #ffffff"><code><span class="line"><span style="color: #24292F">remote function onPing(websocket:Caller caller, byte[] data) returns error? {</span></span>
<span class="line"><span style="color: #24292F">    io:println(string `Ping received with data: ${data.toBase64()}`);</span></span>
<span class="line"><span style="color: #24292F">    check caller-&gt;pong(data);</span></span>
<span class="line"><span style="color: #24292F">}</span></span>
<span class="line"><span style="color: #24292F"> </span></span>
<span class="line"><span style="color: #24292F">remote function onPong(websocket:Caller caller, byte[] data) {</span></span>
<span class="line"><span style="color: #24292F">    io:println(string `Pong received with data: ${data.toBase64()}`);</span></span>
<span class="line"><span style="color: #24292F">}</span></span></code></pre></div></pre>
<h5 id="onidletimeout" level="5"><a href="#onidletimeout">onIdleTimeout</a></h5>
<p>This remote method is dispatched when the idle timeout is reached. The idleTimeout has to be configured either in the WebSocket service or the client configuration.</p>
<pre><div><pre class="shiki" style="background-color: #ffffff"><code><span class="line"><span style="color: #24292F">remote function onIdleTimeout(websocket:Caller caller) {</span></span>
<span class="line"><span style="color: #24292F">    io:println(&quot;Connection timed out&quot;);</span></span>
<span class="line"><span style="color: #24292F">}</span></span></code></pre></div></pre>
<h5 id="onclose" level="5"><a href="#onclose">onClose</a></h5>
<p>This remote method is dispatched when a close frame with a statusCode and a reason is received.</p>
<pre><div><pre class="shiki" style="background-color: #ffffff"><code><span class="line"><span style="color: #24292F">remote function onClose(websocket:Caller caller, int statusCode, string reason) {</span></span>
<span class="line"><span style="color: #24292F">    io:println(string `Client closed connection with ${statusCode} because of ${reason}`);</span></span>
<span class="line"><span style="color: #24292F">}</span></span></code></pre></div></pre>
<h5 id="onerror" level="5"><a href="#onerror">onError</a></h5>
<p>This remote method is dispatched when an error occurs in the WebSocket connection. This will always be preceded by a connection closure with an appropriate close frame.</p>
<pre><div><pre class="shiki" style="background-color: #ffffff"><code><span class="line"><span style="color: #24292F">remote function onError(websocket:Caller caller, error err) {</span></span>
<span class="line"><span style="color: #24292F">    io:println(err.message());</span></span>
<span class="line"><span style="color: #24292F">}</span></span></code></pre></div></pre>
<h2 id="4-client" level="2">4. <a href="#4-client">Client</a></h2>
<p><code>websocket:Client</code> can be used to send and receive data synchronously over WebSocket connection. The underlying implementation is non-blocking.</p>
<h3 id="41-client-configurations" level="3">4.1. <a href="#41-client-configurations">Client Configurations</a></h3>
<p>When initializing the client, following configurations can be provided,</p>
<pre><div><pre class="shiki" style="background-color: #ffffff"><code><span class="line"><span style="color: #24292F"># Client configurations for WebSocket clients.</span></span>
<span class="line"><span style="color: #24292F">#</span></span>
<span class="line"><span style="color: #24292F"># + subProtocols - Negotiable sub protocols of the client</span></span>
<span class="line"><span style="color: #24292F"># + customHeaders - Custom headers, which should be sent to the server</span></span>
<span class="line"><span style="color: #24292F"># + readTimeout - Read timeout (in seconds) of the client</span></span>
<span class="line"><span style="color: #24292F"># + secureSocket - SSL/TLS-related options</span></span>
<span class="line"><span style="color: #24292F"># + maxFrameSize - The maximum payload size of a WebSocket frame in bytes.</span></span>
<span class="line"><span style="color: #24292F">#                  If this is not set, is negative, or is zero, the default frame size of 65536 will be used</span></span>
<span class="line"><span style="color: #24292F"># + webSocketCompressionEnabled - Enable support for compression in the WebSocket</span></span>
<span class="line"><span style="color: #24292F"># + handShakeTimeout - Time (in seconds) that a connection waits to get the response of</span></span>
<span class="line"><span style="color: #24292F">#                               the WebSocket handshake. If the timeout exceeds, then the connection is terminated with</span></span>
<span class="line"><span style="color: #24292F">#                               an error. If the value &lt; 0, then the value sets to the default value(300)</span></span>
<span class="line"><span style="color: #24292F"># + cookies - An Array of `http:Cookie`</span></span>
<span class="line"><span style="color: #24292F"># + auth - Configurations related to client authentication</span></span>
<span class="line"><span style="color: #24292F"># + pingPongHandler - A service to handle the ping/pong frames.</span></span>
<span class="line"><span style="color: #24292F">#                     Resources in this service gets called on the receipt of ping/pong frames from the server</span></span>
<span class="line"><span style="color: #24292F">public type ClientConfiguration record {|</span></span>
<span class="line"><span style="color: #24292F">    string[] subProtocols = [];</span></span>
<span class="line"><span style="color: #24292F">    map&lt;string&gt; customHeaders = {};</span></span>
<span class="line"><span style="color: #24292F">    decimal readTimeout = -1;</span></span>
<span class="line"><span style="color: #24292F">    ClientSecureSocket? secureSocket = ();</span></span>
<span class="line"><span style="color: #24292F">    int maxFrameSize = 65536;</span></span>
<span class="line"><span style="color: #24292F">    boolean webSocketCompressionEnabled = true;</span></span>
<span class="line"><span style="color: #24292F">    decimal handShakeTimeout = 300;</span></span>
<span class="line"><span style="color: #24292F">    http:Cookie[] cookies?;</span></span>
<span class="line"><span style="color: #24292F">    ClientAuthConfig auth?;</span></span>
<span class="line"><span style="color: #24292F">    PingPongService pingPongHandler?;</span></span>
<span class="line"><span style="color: #24292F">|};</span></span></code></pre></div></pre>
<h3 id="42-initialization" level="3">4.2. <a href="#42-initialization">Initialization</a></h3>
<p>A client can be initialized by providing the WebSocket server url and optionally the <code>ClientConfiguration</code>.</p>
<pre><div># Initializes the synchronous client when called.
# ```ballerina
# websocket:Client wsClient = check new("ws://localhost:9090/foo", { retryConfig: { maxCount: 20 } });
# ```
#
# + url - URL of the target service
# + config - The configurations to be used when initializing the client
public isolated function init(string url, *ClientConfiguration config) returns Error? {</div></pre>
<h3 id="43-send-and-receive-messages-using-the-client" level="3">4.3. <a href="#43-send-and-receive-messages-using-the-client">Send and receive messages using the Client</a></h3>
<h4 id="writetextmessage" level="4"><a href="#writetextmessage">writeTextMessage</a></h4>
<p><code>writeTextMessage</code> API can be used to send a text message. It takes in the message to be sent as a <code>string</code> and returns an error if an error occurs while sending the text message to the connection.</p>
<pre><div># Writes text messages to the connection. If an error occurs while sending the text message to the connection, that message
# will be lost.
# ```ballerina
# check wsClient->writeTextMessage("Text message");
# ```
#
# + data - Data to be sent.
# + return  - A `websocket:Error` if an error occurs when sending
remote isolated function writeTextMessage(string data) returns Error? {}</div></pre>
<h4 id="writebinarymessage" level="4"><a href="#writebinarymessage">writeBinaryMessage</a></h4>
<p><code>writeBinaryMessage</code> API can be used to send a binary message. It takes in the message to be sent as a <code>byte[]</code> and returns an error if an error occurs while sending the binary message to the connection.</p>
<pre><div># Writes binary data to the connection. If an error occurs while sending the binary message to the connection,
# that message will be lost.
# ```ballerina
# check wsClient->writeBinaryMessage("Text message".toBytes());
# ```
#
# + data - Binary data to be sent
# + return  - A `websocket:Error` if an error occurs when sending
remote isolated function writeBinaryMessage(byte[] data) returns Error? {}</div></pre>
<h4 id="writemessage" level="4"><a href="#writemessage">writeMessage</a></h4>
<p><code>writeMessage</code> API can be used to send messages. It takes in the message to be sent as subtypes of <code>anydata</code> and returns an error if an error occurs while sending the message to the connection.
The input data is internally converted to relevant frame type as follows,</p>
<ul>
<li>subtypes of string, xml, json - write out using text frames</li>
<li>byte[] - write out using binary frames</li>
</ul>
<pre><div># Writes messages to the connection. If an error occurs while sending the message to the connection, that message
# will be lost.
# ```ballerina
# check wsClient->writeMessage({x: 1, y: 2});
# ```
#
# + data - Data to be sent
# + return  - A `websocket:Error` if an error occurs when sending
remote isolated function writeMessage(anydata data) returns Error? {</div></pre>
<h4 id="readtextmessage" level="4"><a href="#readtextmessage">readTextMessage</a></h4>
<p><code>readTextMessage</code> API can be used to receive a text message. It returns the complete text message as a <code>string</code> or else an error if an error occurs while reading the messages.</p>
<pre><div># Reads text messages in a synchronous manner
# ```ballerina
# string textResp = check wsClient->readTextMessage();
# ```
#
# + return  - The text data sent by the server or a `websocket:Error` if an error occurs when receiving
remote isolated function readTextMessage() returns string|Error {}</div></pre>
<h4 id="readbinarymessage" level="4"><a href="#readbinarymessage">readBinaryMessage</a></h4>
<p><code>readBinaryMessage</code> API can be used to receive a binary message. It returns the complete binary message as a <code>byte[]</code> or else an error if an error occurs while reading the messages.</p>
<pre><div># Reads binary data in a synchronous manner
# ```ballerina
# byte[] textResp = check wsClient->readBinaryMessage();
# ```
#
# + return  - The binary data sent by the server or an `websocket:Error` if an error occurs when receiving
remote isolated function readBinaryMessage() returns byte[]|Error {}</div></pre>
<h4 id="readmessage" level="4"><a href="#readmessage">readMessage</a></h4>
<p><code>readMessage</code> API can be used to receive a message without prior knowledge of message type. <code>anydata</code> type is supported by this API.
The contextually-expected data type is inferred from the LHS variable type. If there is an error when converting the expected data type or else any other error occurs while reading the messages, the respective error will be returned from the API</p>
<pre><div># Reads data from the WebSocket connection
# ```ballerina
# byte[]|string|websocket:Error data = wsClient->readMessage();
# if (data is string) {
#     io:println(data);
# } else if (data is byte[]) {
#     io:println(data);
# } else {
#     io:println("Error occurred", data.message());
# }
#```
#
# + targetType - The payload type (sybtype of `anydata`), which is expected to be returned after data binding
# + return - The data sent by the server or a `websocket:Error` if an error occurs when receiving
remote isolated function readMessage(typedesc<anydata> targetType = <>) returns targetType|Error</div></pre>
<p>When the receiving data are of the text frame type, data will be deserialized to the expected data type. If the incoming data is of binary frames, and if the LHS type is some other data type apart from byte[], incoming data will first be converted to the string representation of the binary data and then be converted to the expected data type.</p>
<p>Data deserialization for text messages happens similar to the following,</p>
<ul>
<li>If the contextually-expected data type is string, received data will be directly presented to the API without doing any deserialization.</li>
<li>If the contextually-expected data type is xml, received text data will be deserialized to xml.</li>
<li>All the other data types are treated as json and received text data will be deserialized to json.</li>
</ul>
<p>Data deserialization for binary messages happens similar to the following,</p>
<ul>
<li>If the contextually-expected data type is byte[], received data will be directly presented to the API without doing any deserialization.</li>
<li>If the contextually-expected data type is xml, received binary data will be first converted to the string representation of the byte[] and then deserialized to xml.</li>
<li>All the other data types are treated as json and received binary data will be first converted to the string representation of the byte[] and then will be deserialized to json.</li>
</ul>
<h4 id="close" level="4"><a href="#close">close</a></h4>
<p><code>close</code> API can be used to close the connection. It takes in the optional parameters <code>statusCode</code> for closing the connection, <code>reason</code> for closing the connection if there is any and the <code>timeout</code> to wait until a close frame is received from the remote endpoint.</p>
<pre><div># Closes the connection.
# ```ballerina
# check wsClient->close();
# ```
#
# + statusCode - Status code for closing the connection
# + reason - Reason for closing the connection
# + timeout - Time to wait (in seconds) for the close frame to be received from the remote endpoint before closing the
#                   connection. If the timeout exceeds, then the connection is terminated even though a close frame
#                   is not received from the remote endpoint. If the value is < 0 (e.g., -1), then the connection
#                   waits until a close frame is received. If the WebSocket frame is received from the remote
#                   endpoint within the waiting period, the connection is terminated immediately.
# + return - A `websocket:Error` if an error occurs while closing the WebSocket connection
remote isolated function close(int? statusCode = 1000, string? reason = (), decimal timeout = 60) returns Error? {}</div></pre>
<h4 id="ping" level="4"><a href="#ping">ping</a></h4>
<p><code>ping</code> API can be used to send ping messages. It takes in the message to be sent as a <code>byte[]</code> and returns an error if an error occurs while sending the ping message to the connection.</p>
<pre><div># Pings the connection. If an error occurs while sending the ping frame to the server, that frame will be lost.
# ```ballerina
# check wsClient->ping([5, 24, 56, 243]);
# ```
#
# + data - Binary data to be sent
# + return  - A `websocket:Error` if an error occurs when sending
remote isolated function ping(byte[] data) returns Error? {}</div></pre>
<h4 id="pong" level="4"><a href="#pong">pong</a></h4>
<p><code>pong</code> API can be used to send pong messages. It takes in the message to be sent as a <code>byte[]</code> and returns an error if an error occurs while sending the pong message to the connection.</p>
<pre><div># Sends a pong message to the connection. If an error occurs while sending the pong frame to the connection, that
# the frame will be lost.
# ```ballerina
# check wsClient->pong([5, 24, 56, 243]);
# ```
#
# + data - Binary data to be sent
# + return  - A `websocket:Error` if an error occurs when sending
remote isolated function pong(byte[] data) returns Error? {}</div></pre>
<h4 id="onping-and-onpong-remote-methods" level="4"><a href="#onping-and-onpong-remote-methods">onPing and onPong remote methods</a></h4>
<p>To receive ping/pong messages, users have to register a <code>websocket:PingPongService</code> when creating the client. If the service is registered, receiving ping/pong messages will get dispatched to the <code>onPing</code> and <code>onPong</code> remote methods respectively.</p>
<pre><div><pre class="shiki" style="background-color: #ffffff"><code><span class="line"><span style="color: #24292F">service class PingPongService {</span></span>
<span class="line"><span style="color: #24292F">   *websocket:PingPongService;</span></span>
<span class="line"><span style="color: #24292F">   remote function onPong(websocket:Caller wsEp, byte[] data) {</span></span>
<span class="line"><span style="color: #24292F">       io:println(&quot;Pong received&quot;, data);</span></span>
<span class="line"><span style="color: #24292F">   }</span></span>
<span class="line"><span style="color: #24292F">   </span></span>
<span class="line"><span style="color: #24292F">   remote isolated function onPing(websocket:Caller caller, byte[] localData) returns byte[] {</span></span>
<span class="line"><span style="color: #24292F">       return localData;</span></span>
<span class="line"><span style="color: #24292F">   }    </span></span>
<span class="line"><span style="color: #24292F">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #24292F">websocket:Client wsClient = check new (&quot;ws://localhost:21020&quot;, {pingPongHandler : new PingPongService()});</span></span></code></pre></div></pre>
<p>If the user has implemented <code>onPing</code> on their service, it&#x27;s user&#x27;s responsibility to send the <code>pong</code> frame. It can be done simply by returning the data from the remote method, or else can be done using the <code>pong</code> API of websocket:Caller. If the user hasn&#x27;t implemented the <code>onPing</code> remote method, <code>pong</code> will be sent automatically.</p>
<h2 id="5-securing-the-websocket-connections" level="2">5. <a href="#5-securing-the-websocket-connections">Securing the WebSocket Connections</a></h2>
<p>Ballerina provides inbuilt support for SSL/TLS and configurations to enforce authentication and authorization such as Basic Auth, JWT auth, and OAuth2.</p>
<h3 id="51-ssltls" level="3">5.1. <a href="#51-ssl-tls">SSL/TLS</a></h3>
<p>You can configure a secure socket for your WebSocket listener and client to upgrade to a TCP connection with TLS.</p>
<p>The TLS-enabled Listener</p>
<pre><div><pre class="shiki" style="background-color: #ffffff"><code><span class="line"><span style="color: #24292F">listener websocket:Listener wsListener = new(9090,</span></span>
<span class="line"><span style="color: #24292F">    secureSocket = {</span></span>
<span class="line"><span style="color: #24292F">        key: {</span></span>
<span class="line"><span style="color: #24292F">             certFile: &quot;/path/to/public.crt&quot;,</span></span>
<span class="line"><span style="color: #24292F">             keyFile: &quot;/path/to/private.key&quot;</span></span>
<span class="line"><span style="color: #24292F">        }</span></span>
<span class="line"><span style="color: #24292F">    }</span></span>
<span class="line"><span style="color: #24292F">);</span></span></code></pre></div></pre>
<p>The TLS-enabled Client</p>
<pre><div><pre class="shiki" style="background-color: #ffffff"><code><span class="line"><span style="color: #24292F">websocket:Client wsClient = check new (string `wss://localhost:9090/taxi/${username}`,</span></span>
<span class="line"><span style="color: #24292F">    secureSocket = {</span></span>
<span class="line"><span style="color: #24292F">        cert: &quot;/path/to/public.crt&quot;</span></span>
<span class="line"><span style="color: #24292F">    }</span></span>
<span class="line"><span style="color: #24292F">);</span></span></code></pre></div></pre>
<h3 id="52-authentication-and-authorization" level="3">5.2. <a href="#52-authentication-and-authorization">Authentication and Authorization</a></h3>
<h4 id="listener" level="4">Listener</h4>
<p>The Ballerina WebSocket library provides built-in support for the following listener authentication mechanisms that are validated in the initial upgrade request.</p>
<ol>
<li>Basic authentication</li>
<li>JWT authentication</li>
<li>OAuth2 authentication</li>
</ol>
<p>To enable one of the above, you should configure the <code>auth</code> field in <code>websocket:ServiceConfig</code> annotation which consists of the following records:</p>
<ol>
<li>FileUserStoreConfigWithScopes</li>
<li>LdapUserStoreConfigWithScopes</li>
<li>JwtValidatorConfigWithScopes</li>
<li>OAuth2IntrospectionConfigWithScopes</li>
</ol>
<p>Each of the above records consists of configurations specific to each type as <code>FileUserStoreConfig</code> , <code>LdapUserStoreConfig</code> ,<code>JwtValidatorConfig</code> and <code>OAuth2IntrospectionConfig</code> respectively. You just have to configure them and there will be no need for any extensions or handlers. Ballerina will perform the required validation for you.</p>
<pre><div><pre class="shiki" style="background-color: #ffffff"><code><span class="line"><span style="color: #24292F">istener websocket:Listener wsListener = new(9090,</span></span>
<span class="line"><span style="color: #24292F">   secureSocket = {</span></span>
<span class="line"><span style="color: #24292F">       key: {</span></span>
<span class="line"><span style="color: #24292F">           certFile: &quot;../resource/path/to/public.crt&quot;,</span></span>
<span class="line"><span style="color: #24292F">           keyFile: &quot;../resource/path/to/private.key&quot;</span></span>
<span class="line"><span style="color: #24292F">       }</span></span>
<span class="line"><span style="color: #24292F">   }</span></span>
<span class="line"><span style="color: #24292F">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #24292F">websocket:ServiceConfig {</span></span>
<span class="line"><span style="color: #24292F">    auth: [</span></span>
<span class="line"><span style="color: #24292F">       {</span></span>
<span class="line"><span style="color: #24292F">           oauth2IntrospectionConfig: {</span></span>
<span class="line"><span style="color: #24292F">               url: &quot;https://localhost:9445/oauth2/introspect&quot;,</span></span>
<span class="line"><span style="color: #24292F">               tokenTypeHint: &quot;access_token&quot;,</span></span>
<span class="line"><span style="color: #24292F">               scopeKey: &quot;scp&quot;,</span></span>
<span class="line"><span style="color: #24292F">               clientConfig: {</span></span>
<span class="line"><span style="color: #24292F">                   secureSocket: {</span></span>
<span class="line"><span style="color: #24292F">                       cert: &quot;../resource/path/to/introspect/service/public.crt&quot;</span></span>
<span class="line"><span style="color: #24292F">                   }</span></span>
<span class="line"><span style="color: #24292F">               }</span></span>
<span class="line"><span style="color: #24292F">           },</span></span>
<span class="line"><span style="color: #24292F">           scopes: [&quot;write&quot;, &quot;update&quot;]</span></span>
<span class="line"><span style="color: #24292F">       }</span></span>
<span class="line"><span style="color: #24292F">   ]</span></span>
<span class="line"></span>
<span class="line"><span style="color: #24292F">ervice /ws on wsListener {</span></span>
<span class="line"><span style="color: #24292F">   resource function get .() returns websocket:Service|websocket:UpgradeError {</span></span>
<span class="line"><span style="color: #24292F">       // ....</span></span>
<span class="line"><span style="color: #24292F">   }</span></span></code></pre></div></pre>
<h4 id="client" level="4">Client</h4>
<p>The Ballerina WebSocket client can be configured to send authentication information to the endpoint being invoked. The Ballerina WebSocket library also has built-in support for the following client authentication mechanisms.</p>
<ol>
<li>Basic authentication</li>
<li>JWT authentication</li>
<li>OAuth2 authentication</li>
</ol>
<p>The following code snippet shows how a WebSocket client can be configured to call a secured endpoint. The <code>auth</code> field of the client configurations (websocket:ClientConfiguration) should have either one of the <code>CredentialsConfig</code>, <code>BearerTokenConfig</code>, <code>JwtIssuerConfig</code>, <code>OAuth2ClientCredentialsGrantConfig</code>, <code>OAuth2PasswordGrantConfig</code>, and <code>OAuth2RefreshTokenGrantConfig</code> records. Once this is configured, Ballerina will take care of the rest of the validation process.</p>
<pre><div><pre class="shiki" style="background-color: #ffffff"><code><span class="line"><span style="color: #24292F">websocket:Client wsClient = check new (string `wss://localhost:9090/taxi/${username}`,</span></span>
<span class="line"><span style="color: #24292F">     auth = {</span></span>
<span class="line"><span style="color: #24292F">         tokenUrl: &quot;https://localhost:9445/oauth2/token&quot;,</span></span>
<span class="line"><span style="color: #24292F">         username: &quot;johndoe&quot;,</span></span>
<span class="line"><span style="color: #24292F">         password: &quot;A3ddj3w&quot;,</span></span>
<span class="line"><span style="color: #24292F">         clientId: &quot;3MVG9YDQS5WtC11paU2WcQjBB3L5w4gz52uriT8ksZ3nUVjKvrfQMrU4uvZohTftxStwNEW4cfStBEGRxRL68&quot;,</span></span>
<span class="line"><span style="color: #24292F">         clientSecret: &quot;9205371918321623741&quot;,</span></span>
<span class="line"><span style="color: #24292F">         scopes: [&quot;write&quot;, &quot;update&quot;],</span></span>
<span class="line"><span style="color: #24292F">         clientConfig: {</span></span>
<span class="line"><span style="color: #24292F">             secureSocket: {</span></span>
<span class="line"><span style="color: #24292F">                 cert: &quot;../resource/path/to/introspect/service/public.crt&quot;</span></span>
<span class="line"><span style="color: #24292F">             }</span></span>
<span class="line"><span style="color: #24292F">         }</span></span>
<span class="line"><span style="color: #24292F">     },</span></span>
<span class="line"><span style="color: #24292F">     secureSocket = {</span></span>
<span class="line"><span style="color: #24292F">         cert: &quot;../resource/path/to/public.crt&quot;</span></span>
<span class="line"><span style="color: #24292F">     }</span></span>
<span class="line"><span style="color: #24292F">);</span></span></code></pre></div></pre>
<h2 id="6-samples" level="2">6. <a href="#6-samples">Samples</a></h2>
<p>Listener</p>
<pre><div><pre class="shiki" style="background-color: #ffffff"><code><span class="line"><span style="color: #24292F">import ballerina/io;</span></span>
<span class="line"><span style="color: #24292F">import ballerina/websocket;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #24292F">service /basic/ws on new websocket:Listener(9090) {</span></span>
<span class="line"><span style="color: #24292F">   resource isolated function get .() returns websocket:Service|websocket:Error {</span></span>
<span class="line"><span style="color: #24292F">       return new WsService();</span></span>
<span class="line"><span style="color: #24292F">   }</span></span>
<span class="line"><span style="color: #24292F">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #24292F">service class WsService {</span></span>
<span class="line"><span style="color: #24292F">    *websocket:Service;</span></span>
<span class="line"><span style="color: #24292F">    remote isolated function onTextMessage(websocket:Caller caller, string text) returns websocket:Error? {</span></span>
<span class="line"><span style="color: #24292F">        io:println(&quot;Text message: &quot; + text);</span></span>
<span class="line"><span style="color: #24292F">        check caller-&gt;writeTextMessage(text);</span></span>
<span class="line"><span style="color: #24292F">    }</span></span>
<span class="line"><span style="color: #24292F">    </span></span>
<span class="line"><span style="color: #24292F">    remote isolated function onBinaryMessage(websocket:Caller caller, byte[] data) returns websocket:Error? {</span></span>
<span class="line"><span style="color: #24292F">        io:println(data);</span></span>
<span class="line"><span style="color: #24292F">        check caller-&gt;writeBinaryMessage(data);</span></span>
<span class="line"><span style="color: #24292F">    }</span></span>
<span class="line"><span style="color: #24292F">}</span></span></code></pre></div></pre>
<p>Client</p>
<pre><div><pre class="shiki" style="background-color: #ffffff"><code><span class="line"><span style="color: #24292F">import ballerina/io;</span></span>
<span class="line"><span style="color: #24292F">import ballerina/websocket;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #24292F">public function main() returns error? {</span></span>
<span class="line"><span style="color: #24292F">   websocket:Client wsClient = check new(&quot;ws://localhost:9090/basic/ws&quot;);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #24292F">   check wsClient-&gt;writeTextMessage(&quot;Text message&quot;);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #24292F">   string textResp = check wsClient-&gt;readTextMessage();</span></span>
<span class="line"><span style="color: #24292F">   io:println(textResp);</span></span>
<span class="line"><span style="color: #24292F">   </span></span>
<span class="line"><span style="color: #24292F">   check wsClient-&gt;writeBinaryMessage(&quot;Binary message&quot;.toBytes());</span></span>
<span class="line"></span>
<span class="line"><span style="color: #24292F">   byte[] byteResp = check wsClient-&gt;readBinaryMessage();</span></span>
<span class="line"><span style="color: #24292F">   string stringResp = check &#39;string:fromBytes(byteResp);</span></span>
<span class="line"><span style="color: #24292F">   io:println(stringResp);</span></span>
<span class="line"><span style="color: #24292F">}</span></span></code></pre></div></pre></div></div></div></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"frontmatter":{},"content":"# Specification: Ballerina WebSocket Library\n\n_Owners_: @shafreenAnfar @bhashinee  \n_Reviewers_: @shafreenAnfar  \n_Created_: 2021/12/09  \n_Updated_: 2022/12/08  \n_Edition_: Swan Lake  \n\n## Introduction\n\nThis is the specification for the WebSocket standard library of [Ballerina language](https://ballerina.io/), which provides WebSocket client-server functionalities.\n\nThe WebSocket library specification has evolved and may continue to evolve in the future. The released versions of the specification can be found under the relevant GitHub tag.\n\nIf you have any feedback or suggestions about the library, start a discussion via a [GitHub issue](https://github.com/ballerina-platform/ballerina-standard-library/issues) or in the [Discord server](https://discord.gg/ballerinalang). Based on the outcome of the discussion, the specification and implementation can be updated. Community feedback is always welcome. Any accepted proposal, which affects the specification is stored under `/docs/proposals`. Proposals under discussion can be found with the label `type/proposal` in GitHub.\n\nThe conforming implementation of the specification is released and included in the distribution. Any deviation from the specification is considered a bug.\n\n## Contents\n1. [Overview](#1-overview)\n2. [Listener](#2-listener)\n    * 2.1. [Listener Configurations](#21-listener-configurations)\n    * 2.2. [Initialization](#22-initialization)\n3. [Service Types](#3-service-types)\n    * 3.1. [UpgradeService](#31-upgradeservice)\n        * 3.1.1. [UpgradeService Configurations](#311-upgradeservice-configurations)\n    * 3.2. [WebSocket Service](#32-websocket-service)\n        * 3.2.1. [Remote methods associated with WebSocket Service](#321-remote-methods-associated-with-websocket-service)\n            * [onOpen](#onopen)\n            * [onTextMessage](#ontextmessage)\n            * [onBinaryMessage](#onbinarymessage)\n            * [onMessage](#onmessage)\n            * [onPing and onPong](#onping-and-onpong)\n            * [onIdleTimeout](#onidletimeout)\n            * [onClose](#onclose)\n            * [onError](#onerror)\n4. [Client](#4-client)\n    * 4.1. [Client Configurations](#41-client-configurations)\n    * 4.2. [Initialization](#42-initialization)\n    * 4.3. [Send and receive messages using the Client](#43-send-and-receive-messages-using-the-client)\n        * [writeTextMessage](#writetextmessage)\n        * [writeBinaryMessage](#writebinarymessage)\n        * [readTextMessage](#readtextmessage)\n        * [readBinaryMessage](#readbinarymessage)\n        * [readMessage](#readmessage)\n        * [close](#close)\n        * [ping](#ping)\n        * [pong](#pong)\n        * [onPing and onPong remote methods](#onping-and-onpong-remote-methods)\n5. [Securing the WebSocket Connections](#5-securing-the-websocket-connections)\n    * 5.1. [SSL/TLS](#51-ssl-tls)\n    * 5.2. [Authentication and Authorization](#52-authentication-and-authorization)\n6. [Samples](#6-samples)\n\n## 1. [Overview](#1-overview)\n\nWebSocket is a protocol that allows a long held full-duplex connection between a server and client. This specification elaborates on how Ballerina language provides a tested WebSocket client and server implementation that is compliant with the [RFC 6455](https://www.rfc-editor.org/rfc/rfc6455.html).\n\n## 2. [Listener](#2-listener)\n\nThe WebSocket listener can be constructed with a port or an http:Listener. When initiating the listener it opens up the port and attaches the upgrade service at the given service path. It is also worth noting that upgrade service is quite similar to an HTTP service.\n\n### 2.1. [Listener Configurations](#21-listener-configurations)\n\nWhen initializing the listener, following configurations can be provided,\n```ballerina\n# Provides a set of configurations for HTTP service endpoints.\n#\n# + host - The host name/IP of the endpoint\n# + http1Settings - Configurations related to HTTP/1.x protocol\n# + secureSocket - The SSL configurations for the service endpoint. This needs to be configured in order to\n#                  communicate through WSS.\n# + timeout - Period of time in seconds that a connection waits for a read/write operation in the\n#                     initial upgrade request. Use value 0 to disable timeout\n# + server - The server name which should appear as a response header\n# + webSocketCompressionEnabled - Enable support for compression in WebSocket\n# + requestLimits - Configurations associated with inbound request size limits\npublic type ListenerConfiguration record {|\n    string host = \"0.0.0.0\";\n    ListenerHttp1Settings http1Settings = {};\n    ListenerSecureSocket secureSocket?;\n    decimal timeout = 120;\n    string? server = ();\n    boolean webSocketCompressionEnabled = true;\n    RequestLimitConfigs requestLimits = {};\n|};\n```\n\n`ListenerHttp1Settings` record contains the settings related to HTTP/1.x protocol. This is an included record from the HTTP package, and this will only be applicable to the initial WebSocket upgrade request.\n```ballerina\n# Provides settings related to HTTP/1.x protocol.\npublic type ListenerHttp1Settings record {|\n    *http:ListenerHttp1Settings;\n|};\n```\n\nThe actual `ListenerHttp1Settings` record in the HTTP package contains the following fields.\n\n```ballerina\n# Provides settings related to HTTP/1.x protocol.\n#\n# + keepAlive - Can be set to either `KEEPALIVE_AUTO`, which respects the `connection` header, or `KEEPALIVE_ALWAYS`,\n#               which always keeps the connection alive, or `KEEPALIVE_NEVER`, which always closes the connection\n# + maxPipelinedRequests - Defines the maximum number of requests that can be processed at a given time on a single\n#                          connection. By default 10 requests can be pipelined on a single connection and user can\n#                          change this limit appropriately.\npublic type ListenerHttp1Settings record {|\n    KeepAlive keepAlive = KEEPALIVE_AUTO;\n    int maxPipelinedRequests = MAX_PIPELINED_REQUESTS;\n|};\n```\n\n`ListenerSecureSocket` record contains configurations related to enabling SSL/TLS on the listener side, and it is an included record from the HTTP package. More details and examples of how to configure them can be found in a following section on `Securing the WebSocket Connections`.\n```ballerina\n# Configures the SSL/TLS options to be used for WebSocket service.\npublic type ListenerSecureSocket record {|\n    *http:ListenerSecureSocket;\n|};\n```\n\nThe actual `ListenerSecureSocket` record in the HTTP package contains the following fields.\n```ballerina\n# Configures the SSL/TLS options to be used for HTTP service.\n#\n# + key - Configurations associated with `crypto:KeyStore` or combination of certificate and (PKCS8) private key of the server\n# + mutualSsl - Configures associated with mutual SSL operations\n# + protocol - SSL/TLS protocol related options\n# + certValidation - Certificate validation against OCSP_CRL, OCSP_STAPLING related options\n# + ciphers - List of ciphers to be used\n#             eg: TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256, TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA\n# + shareSession - Enable/Disable new SSL session creation\n# + handshakeTimeout - SSL handshake time out\n# + sessionTimeout - SSL session time out\npublic type ListenerSecureSocket record {|\n    crypto:KeyStore|CertKey key;\n    record {|\n        VerifyClient verifyClient = REQUIRE;\n        crypto:TrustStore|string cert;\n    |} mutualSsl?;\n    record {|\n        Protocol name;\n        string[] versions = [];\n    |} protocol?;\n    record {|\n        CertValidationType 'type = OCSP_STAPLING;\n        int cacheSize;\n        int cacheValidityPeriod;\n    |} certValidation?;\n    string[] ciphers = [\"TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256\", \"TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256\",\n                        \"TLS_DHE_RSA_WITH_AES_128_CBC_SHA256\", \"TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA\",\n                        \"TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA\", \"TLS_DHE_RSA_WITH_AES_128_CBC_SHA\",\n                        \"TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256\", \"TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256\",\n                        \"TLS_DHE_RSA_WITH_AES_128_GCM_SHA256\"];\n    boolean shareSession = true;\n    decimal handshakeTimeout?;\n    decimal sessionTimeout?;\n|};\n```\n\n`RequestLimitConfigs` record represents configurations related to maximum sizes of URI, headers and entity body which is also an included record from the hTTP package as this will only be applicable to the initial WebSocket upgrade request.\n```ballerina\n# Provides inbound request URI, total header and entity body size threshold configurations.\npublic type RequestLimitConfigs record {|\n    *http:RequestLimitConfigs;\n|};\n```\n\nThe actual `RequestLimitConfigs` record in the HTTP package contains the following fields.\n```ballerina\n# Provides inbound request URI, total header and entity body size threshold configurations.\n#\n# + maxUriLength - Maximum allowed length for a URI. Exceeding this limit will result in a `414 - URI Too Long`\n#                  response\n# + maxHeaderSize - Maximum allowed size for headers. Exceeding this limit will result in a\n#                   `431 - Request Header Fields Too Large` response\n# + maxEntityBodySize - Maximum allowed size for the entity body. By default it is set to -1 which means there\n#                       is no restriction `maxEntityBodySize`, On the Exceeding this limit will result in a\n#                       `413 - Payload Too Large` response\npublic type RequestLimitConfigs record {|\n    int maxUriLength = 4096;\n    int maxHeaderSize = 8192;\n    int maxEntityBodySize = -1;\n|};\n```\n### 2.2. [Initialization](#22-initialization)\n\nThe WebSocket listener can be initialized by providing the `port` or a `http:Listener` and optionally a `ListenerConfiguration`.\n```ballerina\n# Gets invoked during the module initialization to initialize the listener.\n# ```ballerina\n# listener websocket:Listener securedEP = new(9090,\n#   secureSocket = {\n#       key: {\n#           certFile: \"../resource/path/to/public.crt\",\n#           keyFile: \"../resource/path/to/private.key\"\n#       }\n#   }\n# );\n# ```\n#\n# + port - Listening port of the WebSocket service listener\n# + config - Configurations for the WebSocket service listener\npublic isolated function init(int|http:Listener 'listener, *ListenerConfiguration config) returns Error? {\n```\n\n## 3. [Service Types](#3-service-types)\n\n### 3.1. [UpgradeService](#31-upgrade-service)\n\nUpgrade service is pretty much similar to an HTTP service. It has a single `get` resource, which takes in an `http:Request` optionally. The `get` resource returns a `websocket:Service` to which incoming messages get dispatched after a successful WebSocket connection upgrade. This resource can be used to intercept the initial HTTP upgrade with custom headers or to cancel the WebSocket upgrade by returning an error.\n\n#### 3.1.1. [UpgradeService Configurations](#311-upgradeservice-configurations)\n\nWhen writing the service, following configurations can be provided,\n```ballerina\n# Configurations for a WebSocket service.\n#\n# + subProtocols - Negotiable sub protocol by the service\n# + idleTimeout - Idle timeout for the client connection. Upon timeout, `onIdleTimeout` resource (if defined)\n#                          in the server service will be triggered. Note that this overrides the `timeout` config\n#                          in the `websocket:Listener` which is applicable only for the initial HTTP upgrade request.\n# + maxFrameSize - The maximum payload size of a WebSocket frame in bytes.\n#                  If this is not set or is negative or zero, the default frame size which is 65536 will be used.\n# + auth - Listener authenticaton configurations\npublic type WSServiceConfig record {|\n    string[] subProtocols = [];\n    decimal idleTimeout = 0;\n    int maxFrameSize = 65536;\n    ListenerAuthConfig[] auth?;\n|};\n```\n\n### 3.2. [WebSocket Service](#32-websocket-service)\n\nOnce the WebSocket upgrade is accepted by the UpgradeService, it returns a `websocket:Service`. This service has a fixed set of remote methods that do not have any configs. Receiving messages will get dispatched to the relevant remote method. Each remote method is explained below.\n\n```ballerina\nservice /ws on new websocket:Listener(21003) {\n    resource function get .(http:Request req) returns websocket:Service|websocket:UpgradeError {\n        return new WsService();\n    }    \n}\n        \nservice class WsService {\n    *websocket:Service;\n    remote isolated function onTextMessage(websocket:Caller caller, string data) returns websocket:Error? {\n        check caller-\u003ewriteTextMessage(data);\n    }\n}              \n```\n\n#### 3.2.1. [Remote methods associated with WebSocket Service](#remote-methods-associated-with-websocket-service)\n\n##### [onOpen](#onopen)\n\nAs soon as the WebSocket handshake is completed and the connection is established, the `onOpen` remote method is dispatched.\n\n```ballerina\nremote function onOpen(websocket:Caller caller) returns error? {\n    io:println(\"Opened a WebSocket connection\");\n}\n```\n\n##### [onTextMessage](#ontextmessage)\n\nThe received text messages are dispatched to this remote method.\n\n```ballerina\nremote isolated function onTextMessage(websocket:Caller caller, string text) returns websocket:Error? {\n     io:println(\"Text message: \" + text);\n}\n```\n\n##### [onBinaryMessage](#onbinarymessage)\n\nThe received binary messages are dispatched to this remote method.\n\n```ballerina\nremote isolated function onBinaryMessage(websocket:Caller caller, byte[] data) returns websocket:Error? {\n    io:println(data);\n}\n```\n\n##### [onMessage](#onmessage)\n\nThe received messages are dispatched to this remote method. Data binding support is provided to accept the messages as `anydata`.\n\n```ballerina\nremote isolated function onMessage(websocket:Caller caller, json data) returns websocket:Error? {\n    io:println(data);\n}\n```\n\nData deserialization for text messages happens similar to the following,\n\n- If the contextually-expected data type is string, received data will be directly presented to the API without doing any deserialization.\n- If the contextually-expected data type is xml, received text data will be deserialized to xml.\n- All the other data types are treated as json and received text data will be deserialized to json.\n\nData deserialization for binary messages happens similar to the following,\n\n- If the contextually-expected data type is byte[], received data will be directly presented to the API without doing any deserialization.\n- If the contextually-expected data type is xml, received binary data will be first converted to the string representation of the byte[] and then deserialized to xml.\n- All the other data types are treated as json and received binary data will be first converted to the string representation of the byte[] and then will be deserialized to json.\n\nIf the data binding fails, the connection will get terminated by sending a close frame with the 1003 error code(1003 indicates that an endpoint is terminating the connection because it has received a type of data it cannot accept ) and will print an error log at the listener side.\n\n##### [onPing and onPong](#onping-and-onpong)\n\nThe received ping and pong messages are dispatched to these remote methods respectively. You do not need to explicitly control these messages as they are handled automatically by the services and clients.\n\n```ballerina\nremote function onPing(websocket:Caller caller, byte[] data) returns error? {\n    io:println(string `Ping received with data: ${data.toBase64()}`);\n    check caller-\u003epong(data);\n}\n \nremote function onPong(websocket:Caller caller, byte[] data) {\n    io:println(string `Pong received with data: ${data.toBase64()}`);\n}\n```\n\n##### [onIdleTimeout](#onidletimeout)\n\nThis remote method is dispatched when the idle timeout is reached. The idleTimeout has to be configured either in the WebSocket service or the client configuration.\n\n```ballerina\nremote function onIdleTimeout(websocket:Caller caller) {\n    io:println(\"Connection timed out\");\n}\n```\n\n##### [onClose](#onclose)\n\nThis remote method is dispatched when a close frame with a statusCode and a reason is received.\n\n```ballerina\nremote function onClose(websocket:Caller caller, int statusCode, string reason) {\n    io:println(string `Client closed connection with ${statusCode} because of ${reason}`);\n}\n```\n\n##### [onError](#onerror)\n\nThis remote method is dispatched when an error occurs in the WebSocket connection. This will always be preceded by a connection closure with an appropriate close frame.\n\n```ballerina\nremote function onError(websocket:Caller caller, error err) {\n    io:println(err.message());\n}\n```\n\n## 4. [Client](#4-client)\n\n`websocket:Client` can be used to send and receive data synchronously over WebSocket connection. The underlying implementation is non-blocking.\n\n### 4.1. [Client Configurations](#41-client-configurations)\n\nWhen initializing the client, following configurations can be provided,\n```ballerina\n# Client configurations for WebSocket clients.\n#\n# + subProtocols - Negotiable sub protocols of the client\n# + customHeaders - Custom headers, which should be sent to the server\n# + readTimeout - Read timeout (in seconds) of the client\n# + secureSocket - SSL/TLS-related options\n# + maxFrameSize - The maximum payload size of a WebSocket frame in bytes.\n#                  If this is not set, is negative, or is zero, the default frame size of 65536 will be used\n# + webSocketCompressionEnabled - Enable support for compression in the WebSocket\n# + handShakeTimeout - Time (in seconds) that a connection waits to get the response of\n#                               the WebSocket handshake. If the timeout exceeds, then the connection is terminated with\n#                               an error. If the value \u003c 0, then the value sets to the default value(300)\n# + cookies - An Array of `http:Cookie`\n# + auth - Configurations related to client authentication\n# + pingPongHandler - A service to handle the ping/pong frames.\n#                     Resources in this service gets called on the receipt of ping/pong frames from the server\npublic type ClientConfiguration record {|\n    string[] subProtocols = [];\n    map\u003cstring\u003e customHeaders = {};\n    decimal readTimeout = -1;\n    ClientSecureSocket? secureSocket = ();\n    int maxFrameSize = 65536;\n    boolean webSocketCompressionEnabled = true;\n    decimal handShakeTimeout = 300;\n    http:Cookie[] cookies?;\n    ClientAuthConfig auth?;\n    PingPongService pingPongHandler?;\n|};\n```\n### 4.2. [Initialization](#42-initialization)\n\nA client can be initialized by providing the WebSocket server url and optionally the `ClientConfiguration`.\n```ballerina\n# Initializes the synchronous client when called.\n# ```ballerina\n# websocket:Client wsClient = check new(\"ws://localhost:9090/foo\", { retryConfig: { maxCount: 20 } });\n# ```\n#\n# + url - URL of the target service\n# + config - The configurations to be used when initializing the client\npublic isolated function init(string url, *ClientConfiguration config) returns Error? {\n```\n\n### 4.3. [Send and receive messages using the Client](#43-send-and-receive-messages-using-the-client)\n\n#### [writeTextMessage](#writetextmessage)\n\n`writeTextMessage` API can be used to send a text message. It takes in the message to be sent as a `string` and returns an error if an error occurs while sending the text message to the connection.\n\n```ballerina\n# Writes text messages to the connection. If an error occurs while sending the text message to the connection, that message\n# will be lost.\n# ```ballerina\n# check wsClient-\u003ewriteTextMessage(\"Text message\");\n# ```\n#\n# + data - Data to be sent.\n# + return  - A `websocket:Error` if an error occurs when sending\nremote isolated function writeTextMessage(string data) returns Error? {}\n```\n\n#### [writeBinaryMessage](#writebinarymessage)\n\n`writeBinaryMessage` API can be used to send a binary message. It takes in the message to be sent as a `byte[]` and returns an error if an error occurs while sending the binary message to the connection.\n\n```ballerina\n# Writes binary data to the connection. If an error occurs while sending the binary message to the connection,\n# that message will be lost.\n# ```ballerina\n# check wsClient-\u003ewriteBinaryMessage(\"Text message\".toBytes());\n# ```\n#\n# + data - Binary data to be sent\n# + return  - A `websocket:Error` if an error occurs when sending\nremote isolated function writeBinaryMessage(byte[] data) returns Error? {}\n```\n\n#### [writeMessage](#writemessage)\n\n`writeMessage` API can be used to send messages. It takes in the message to be sent as subtypes of `anydata` and returns an error if an error occurs while sending the message to the connection.\nThe input data is internally converted to relevant frame type as follows,\n\n* subtypes of string, xml, json - write out using text frames\n* byte[] - write out using binary frames\n\n```ballerina\n# Writes messages to the connection. If an error occurs while sending the message to the connection, that message\n# will be lost.\n# ```ballerina\n# check wsClient-\u003ewriteMessage({x: 1, y: 2});\n# ```\n#\n# + data - Data to be sent\n# + return  - A `websocket:Error` if an error occurs when sending\nremote isolated function writeMessage(anydata data) returns Error? {\n```\n\n#### [readTextMessage](#readtextmessage)\n\n`readTextMessage` API can be used to receive a text message. It returns the complete text message as a `string` or else an error if an error occurs while reading the messages.\n\n```ballerina\n# Reads text messages in a synchronous manner\n# ```ballerina\n# string textResp = check wsClient-\u003ereadTextMessage();\n# ```\n#\n# + return  - The text data sent by the server or a `websocket:Error` if an error occurs when receiving\nremote isolated function readTextMessage() returns string|Error {}\n```\n\n#### [readBinaryMessage](#readbinarymessage)\n\n`readBinaryMessage` API can be used to receive a binary message. It returns the complete binary message as a `byte[]` or else an error if an error occurs while reading the messages.\n\n```ballerina\n# Reads binary data in a synchronous manner\n# ```ballerina\n# byte[] textResp = check wsClient-\u003ereadBinaryMessage();\n# ```\n#\n# + return  - The binary data sent by the server or an `websocket:Error` if an error occurs when receiving\nremote isolated function readBinaryMessage() returns byte[]|Error {}\n```\n\n#### [readMessage](#readmessage)\n\n`readMessage` API can be used to receive a message without prior knowledge of message type. `anydata` type is supported by this API.\nThe contextually-expected data type is inferred from the LHS variable type. If there is an error when converting the expected data type or else any other error occurs while reading the messages, the respective error will be returned from the API \n\n```ballerina\n# Reads data from the WebSocket connection\n# ```ballerina\n# byte[]|string|websocket:Error data = wsClient-\u003ereadMessage();\n# if (data is string) {\n#     io:println(data);\n# } else if (data is byte[]) {\n#     io:println(data);\n# } else {\n#     io:println(\"Error occurred\", data.message());\n# }\n#```\n#\n# + targetType - The payload type (sybtype of `anydata`), which is expected to be returned after data binding\n# + return - The data sent by the server or a `websocket:Error` if an error occurs when receiving\nremote isolated function readMessage(typedesc\u003canydata\u003e targetType = \u003c\u003e) returns targetType|Error\n```\nWhen the receiving data are of the text frame type, data will be deserialized to the expected data type. If the incoming data is of binary frames, and if the LHS type is some other data type apart from byte[], incoming data will first be converted to the string representation of the binary data and then be converted to the expected data type.\n\nData deserialization for text messages happens similar to the following,\n\n- If the contextually-expected data type is string, received data will be directly presented to the API without doing any deserialization.\n- If the contextually-expected data type is xml, received text data will be deserialized to xml.\n- All the other data types are treated as json and received text data will be deserialized to json.\n\nData deserialization for binary messages happens similar to the following,\n\n- If the contextually-expected data type is byte[], received data will be directly presented to the API without doing any deserialization.\n- If the contextually-expected data type is xml, received binary data will be first converted to the string representation of the byte[] and then deserialized to xml.\n- All the other data types are treated as json and received binary data will be first converted to the string representation of the byte[] and then will be deserialized to json.\n\n#### [close](#close)\n\n`close` API can be used to close the connection. It takes in the optional parameters `statusCode` for closing the connection, `reason` for closing the connection if there is any and the `timeout` to wait until a close frame is received from the remote endpoint.\n\n```ballerina\n# Closes the connection.\n# ```ballerina\n# check wsClient-\u003eclose();\n# ```\n#\n# + statusCode - Status code for closing the connection\n# + reason - Reason for closing the connection\n# + timeout - Time to wait (in seconds) for the close frame to be received from the remote endpoint before closing the\n#                   connection. If the timeout exceeds, then the connection is terminated even though a close frame\n#                   is not received from the remote endpoint. If the value is \u003c 0 (e.g., -1), then the connection\n#                   waits until a close frame is received. If the WebSocket frame is received from the remote\n#                   endpoint within the waiting period, the connection is terminated immediately.\n# + return - A `websocket:Error` if an error occurs while closing the WebSocket connection\nremote isolated function close(int? statusCode = 1000, string? reason = (), decimal timeout = 60) returns Error? {}\n```\n\n#### [ping](#ping)\n\n`ping` API can be used to send ping messages. It takes in the message to be sent as a `byte[]` and returns an error if an error occurs while sending the ping message to the connection.\n\n```ballerina\n# Pings the connection. If an error occurs while sending the ping frame to the server, that frame will be lost.\n# ```ballerina\n# check wsClient-\u003eping([5, 24, 56, 243]);\n# ```\n#\n# + data - Binary data to be sent\n# + return  - A `websocket:Error` if an error occurs when sending\nremote isolated function ping(byte[] data) returns Error? {}\n```\n\n#### [pong](#pong)\n\n`pong` API can be used to send pong messages. It takes in the message to be sent as a `byte[]` and returns an error if an error occurs while sending the pong message to the connection.\n\n```ballerina\n# Sends a pong message to the connection. If an error occurs while sending the pong frame to the connection, that\n# the frame will be lost.\n# ```ballerina\n# check wsClient-\u003epong([5, 24, 56, 243]);\n# ```\n#\n# + data - Binary data to be sent\n# + return  - A `websocket:Error` if an error occurs when sending\nremote isolated function pong(byte[] data) returns Error? {}\n```\n\n#### [onPing and onPong remote methods](#onping-and-onpong-remote-methods)\n\nTo receive ping/pong messages, users have to register a `websocket:PingPongService` when creating the client. If the service is registered, receiving ping/pong messages will get dispatched to the `onPing` and `onPong` remote methods respectively.\n```ballerina\nservice class PingPongService {\n   *websocket:PingPongService;\n   remote function onPong(websocket:Caller wsEp, byte[] data) {\n       io:println(\"Pong received\", data);\n   }\n   \n   remote isolated function onPing(websocket:Caller caller, byte[] localData) returns byte[] {\n       return localData;\n   }    \n}\n\nwebsocket:Client wsClient = check new (\"ws://localhost:21020\", {pingPongHandler : new PingPongService()});\n```\nIf the user has implemented `onPing` on their service, it's user's responsibility to send the `pong` frame. It can be done simply by returning the data from the remote method, or else can be done using the `pong` API of websocket:Caller. If the user hasn't implemented the `onPing` remote method, `pong` will be sent automatically.\n\n## 5. [Securing the WebSocket Connections](#5-securing-the-websocket-connections)\n\nBallerina provides inbuilt support for SSL/TLS and configurations to enforce authentication and authorization such as Basic Auth, JWT auth, and OAuth2.\n\n### 5.1. [SSL/TLS](#51-ssl-tls)\nYou can configure a secure socket for your WebSocket listener and client to upgrade to a TCP connection with TLS.\n\nThe TLS-enabled Listener\n\n```ballerina\nlistener websocket:Listener wsListener = new(9090,\n    secureSocket = {\n        key: {\n             certFile: \"/path/to/public.crt\",\n             keyFile: \"/path/to/private.key\"\n        }\n    }\n);\n```\n\nThe TLS-enabled Client\n\n```ballerina\nwebsocket:Client wsClient = check new (string `wss://localhost:9090/taxi/${username}`,\n    secureSocket = {\n        cert: \"/path/to/public.crt\"\n    }\n);\n```\n\n### 5.2. [Authentication and Authorization](#52-authentication-and-authorization)\n\n#### Listener\n\nThe Ballerina WebSocket library provides built-in support for the following listener authentication mechanisms that are validated in the initial upgrade request.\n1. Basic authentication\n2. JWT authentication\n3. OAuth2 authentication\n\nTo enable one of the above, you should configure the `auth` field in `websocket:ServiceConfig` annotation which consists of the following records:\n1. FileUserStoreConfigWithScopes\n2. LdapUserStoreConfigWithScopes\n3. JwtValidatorConfigWithScopes\n4. OAuth2IntrospectionConfigWithScopes\n\nEach of the above records consists of configurations specific to each type as `FileUserStoreConfig` , `LdapUserStoreConfig` ,`JwtValidatorConfig` and `OAuth2IntrospectionConfig` respectively. You just have to configure them and there will be no need for any extensions or handlers. Ballerina will perform the required validation for you.\n\n```ballerina\n\nlistener websocket:Listener wsListener = new(9090,\n    secureSocket = {\n        key: {\n            certFile: \"../resource/path/to/public.crt\",\n            keyFile: \"../resource/path/to/private.key\"\n        }\n    }\n);\n\n@websocket:ServiceConfig {\n     auth: [\n        {\n            oauth2IntrospectionConfig: {\n                url: \"https://localhost:9445/oauth2/introspect\",\n                tokenTypeHint: \"access_token\",\n                scopeKey: \"scp\",\n                clientConfig: {\n                    secureSocket: {\n                        cert: \"../resource/path/to/introspect/service/public.crt\"\n                    }\n                }\n            },\n            scopes: [\"write\", \"update\"]\n        }\n    ]\n}\nservice /ws on wsListener {\n    resource function get .() returns websocket:Service|websocket:UpgradeError {\n        // ....\n    }\n}\n```\n\n#### Client\n\nThe Ballerina WebSocket client can be configured to send authentication information to the endpoint being invoked. The Ballerina WebSocket library also has built-in support for the following client authentication mechanisms.\n1. Basic authentication\n2. JWT authentication\n3. OAuth2 authentication\n\nThe following code snippet shows how a WebSocket client can be configured to call a secured endpoint. The `auth` field of the client configurations (websocket:ClientConfiguration) should have either one of the `CredentialsConfig`, `BearerTokenConfig`, `JwtIssuerConfig`, `OAuth2ClientCredentialsGrantConfig`, `OAuth2PasswordGrantConfig`, and `OAuth2RefreshTokenGrantConfig` records. Once this is configured, Ballerina will take care of the rest of the validation process.\n\n```ballerina\nwebsocket:Client wsClient = check new (string `wss://localhost:9090/taxi/${username}`,\n     auth = {\n         tokenUrl: \"https://localhost:9445/oauth2/token\",\n         username: \"johndoe\",\n         password: \"A3ddj3w\",\n         clientId: \"3MVG9YDQS5WtC11paU2WcQjBB3L5w4gz52uriT8ksZ3nUVjKvrfQMrU4uvZohTftxStwNEW4cfStBEGRxRL68\",\n         clientSecret: \"9205371918321623741\",\n         scopes: [\"write\", \"update\"],\n         clientConfig: {\n             secureSocket: {\n                 cert: \"../resource/path/to/introspect/service/public.crt\"\n             }\n         }\n     },\n     secureSocket = {\n         cert: \"../resource/path/to/public.crt\"\n     }\n);\n```\n\n## 6. [Samples](#6-samples)\n\nListener\n\n```ballerina\nimport ballerina/io;\nimport ballerina/websocket;\n\nservice /basic/ws on new websocket:Listener(9090) {\n   resource isolated function get .() returns websocket:Service|websocket:Error {\n       return new WsService();\n   }\n}\n\nservice class WsService {\n    *websocket:Service;\n    remote isolated function onTextMessage(websocket:Caller caller, string text) returns websocket:Error? {\n        io:println(\"Text message: \" + text);\n        check caller-\u003ewriteTextMessage(text);\n    }\n    \n    remote isolated function onBinaryMessage(websocket:Caller caller, byte[] data) returns websocket:Error? {\n        io:println(data);\n        check caller-\u003ewriteBinaryMessage(data);\n    }\n}\n```\n\nClient\n\n```ballerina\nimport ballerina/io;\nimport ballerina/websocket;\n\npublic function main() returns error? {\n   websocket:Client wsClient = check new(\"ws://localhost:9090/basic/ws\");\n\n   check wsClient-\u003ewriteTextMessage(\"Text message\");\n\n   string textResp = check wsClient-\u003ereadTextMessage();\n   io:println(textResp);\n   \n   check wsClient-\u003ewriteBinaryMessage(\"Binary message\".toBytes());\n\n   byte[] byteResp = check wsClient-\u003ereadBinaryMessage();\n   string stringResp = check 'string:fromBytes(byteResp);\n   io:println(stringResp);\n}\n```","codeSnippets":"[[-734236871,\"\u003cpre class=\\\"shiki\\\" style=\\\"background-color: #ffffff\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e# Provides a set of configurations for HTTP service endpoints.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e#\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e# + host - The host name/IP of the endpoint\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e# + http1Settings - Configurations related to HTTP/1.x protocol\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e# + secureSocket - The SSL configurations for the service endpoint. This needs to be configured in order to\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e#                  communicate through WSS.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e# + timeout - Period of time in seconds that a connection waits for a read/write operation in the\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e#                     initial upgrade request. Use value 0 to disable timeout\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e# + server - The server name which should appear as a response header\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e# + webSocketCompressionEnabled - Enable support for compression in WebSocket\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e# + requestLimits - Configurations associated with inbound request size limits\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003epublic type ListenerConfiguration record {|\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e    string host = \u0026quot;0.0.0.0\u0026quot;;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e    ListenerHttp1Settings http1Settings = {};\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e    ListenerSecureSocket secureSocket?;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e    decimal timeout = 120;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e    string? server = ();\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e    boolean webSocketCompressionEnabled = true;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e    RequestLimitConfigs requestLimits = {};\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e|};\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\"],[-754871896,\"\u003cpre class=\\\"shiki\\\" style=\\\"background-color: #ffffff\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e# Provides settings related to HTTP/1.x protocol.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003epublic type ListenerHttp1Settings record {|\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e    *http:ListenerHttp1Settings;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e|};\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\"],[1093538446,\"\u003cpre class=\\\"shiki\\\" style=\\\"background-color: #ffffff\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e# Provides settings related to HTTP/1.x protocol.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e#\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e# + keepAlive - Can be set to either `KEEPALIVE_AUTO`, which respects the `connection` header, or `KEEPALIVE_ALWAYS`,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e#               which always keeps the connection alive, or `KEEPALIVE_NEVER`, which always closes the connection\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e# + maxPipelinedRequests - Defines the maximum number of requests that can be processed at a given time on a single\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e#                          connection. By default 10 requests can be pipelined on a single connection and user can\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e#                          change this limit appropriately.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003epublic type ListenerHttp1Settings record {|\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e    KeepAlive keepAlive = KEEPALIVE_AUTO;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e    int maxPipelinedRequests = MAX_PIPELINED_REQUESTS;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e|};\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\"],[1781974013,\"\u003cpre class=\\\"shiki\\\" style=\\\"background-color: #ffffff\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e# Configures the SSL/TLS options to be used for WebSocket service.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003epublic type ListenerSecureSocket record {|\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e    *http:ListenerSecureSocket;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e|};\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\"],[584834866,\"\u003cpre class=\\\"shiki\\\" style=\\\"background-color: #ffffff\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e# Configures the SSL/TLS options to be used for HTTP service.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e#\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e# + key - Configurations associated with `crypto:KeyStore` or combination of certificate and (PKCS8) private key of the server\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e# + mutualSsl - Configures associated with mutual SSL operations\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e# + protocol - SSL/TLS protocol related options\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e# + certValidation - Certificate validation against OCSP_CRL, OCSP_STAPLING related options\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e# + ciphers - List of ciphers to be used\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e#             eg: TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256, TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e# + shareSession - Enable/Disable new SSL session creation\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e# + handshakeTimeout - SSL handshake time out\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e# + sessionTimeout - SSL session time out\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003epublic type ListenerSecureSocket record {|\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e    crypto:KeyStore|CertKey key;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e    record {|\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e        VerifyClient verifyClient = REQUIRE;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e        crypto:TrustStore|string cert;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e    |} mutualSsl?;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e    record {|\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e        Protocol name;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e        string[] versions = [];\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e    |} protocol?;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e    record {|\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e        CertValidationType \u0026#39;type = OCSP_STAPLING;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e        int cacheSize;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e        int cacheValidityPeriod;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e    |} certValidation?;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e    string[] ciphers = [\u0026quot;TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256\u0026quot;, \u0026quot;TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256\u0026quot;,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e                        \u0026quot;TLS_DHE_RSA_WITH_AES_128_CBC_SHA256\u0026quot;, \u0026quot;TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA\u0026quot;,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e                        \u0026quot;TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA\u0026quot;, \u0026quot;TLS_DHE_RSA_WITH_AES_128_CBC_SHA\u0026quot;,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e                        \u0026quot;TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256\u0026quot;, \u0026quot;TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256\u0026quot;,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e                        \u0026quot;TLS_DHE_RSA_WITH_AES_128_GCM_SHA256\u0026quot;];\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e    boolean shareSession = true;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e    decimal handshakeTimeout?;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e    decimal sessionTimeout?;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e|};\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\"],[-67726219,\"\u003cpre class=\\\"shiki\\\" style=\\\"background-color: #ffffff\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e# Provides inbound request URI, total header and entity body size threshold configurations.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003epublic type RequestLimitConfigs record {|\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e    *http:RequestLimitConfigs;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e|};\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\"],[968704605,\"\u003cpre class=\\\"shiki\\\" style=\\\"background-color: #ffffff\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e# Provides inbound request URI, total header and entity body size threshold configurations.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e#\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e# + maxUriLength - Maximum allowed length for a URI. Exceeding this limit will result in a `414 - URI Too Long`\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e#                  response\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e# + maxHeaderSize - Maximum allowed size for headers. Exceeding this limit will result in a\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e#                   `431 - Request Header Fields Too Large` response\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e# + maxEntityBodySize - Maximum allowed size for the entity body. By default it is set to -1 which means there\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e#                       is no restriction `maxEntityBodySize`, On the Exceeding this limit will result in a\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e#                       `413 - Payload Too Large` response\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003epublic type RequestLimitConfigs record {|\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e    int maxUriLength = 4096;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e    int maxHeaderSize = 8192;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e    int maxEntityBodySize = -1;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e|};\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\"],[293655353,\"\u003cpre class=\\\"shiki\\\" style=\\\"background-color: #ffffff\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e# Gets invoked during the module initialization to initialize the listener.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e#\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\"],[-1180317236,\"\u003cpre class=\\\"shiki\\\" style=\\\"background-color: #ffffff\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e# Configurations for a WebSocket service.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e#\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e# + subProtocols - Negotiable sub protocol by the service\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e# + idleTimeout - Idle timeout for the client connection. Upon timeout, `onIdleTimeout` resource (if defined)\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e#                          in the server service will be triggered. Note that this overrides the `timeout` config\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e#                          in the `websocket:Listener` which is applicable only for the initial HTTP upgrade request.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e# + maxFrameSize - The maximum payload size of a WebSocket frame in bytes.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e#                  If this is not set or is negative or zero, the default frame size which is 65536 will be used.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e# + auth - Listener authenticaton configurations\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003epublic type WSServiceConfig record {|\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e    string[] subProtocols = [];\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e    decimal idleTimeout = 0;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e    int maxFrameSize = 65536;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e    ListenerAuthConfig[] auth?;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e|};\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\"],[1166286326,\"\u003cpre class=\\\"shiki\\\" style=\\\"background-color: #ffffff\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003eservice /ws on new websocket:Listener(21003) {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e    resource function get .(http:Request req) returns websocket:Service|websocket:UpgradeError {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e        return new WsService();\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e    }    \u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e}\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e        \u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003eservice class WsService {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e    *websocket:Service;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e    remote isolated function onTextMessage(websocket:Caller caller, string data) returns websocket:Error? {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e        check caller-\u0026gt;writeTextMessage(data);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e    }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\"],[-1302701193,\"\u003cpre class=\\\"shiki\\\" style=\\\"background-color: #ffffff\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003eremote function onOpen(websocket:Caller caller) returns error? {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e    io:println(\u0026quot;Opened a WebSocket connection\u0026quot;);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\"],[1596162690,\"\u003cpre class=\\\"shiki\\\" style=\\\"background-color: #ffffff\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003eremote isolated function onTextMessage(websocket:Caller caller, string text) returns websocket:Error? {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e     io:println(\u0026quot;Text message: \u0026quot; + text);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\"],[-1010609306,\"\u003cpre class=\\\"shiki\\\" style=\\\"background-color: #ffffff\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003eremote isolated function onBinaryMessage(websocket:Caller caller, byte[] data) returns websocket:Error? {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e    io:println(data);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\"],[1202348295,\"\u003cpre class=\\\"shiki\\\" style=\\\"background-color: #ffffff\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003eremote isolated function onMessage(websocket:Caller caller, json data) returns websocket:Error? {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e    io:println(data);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\"],[1847716186,\"\u003cpre class=\\\"shiki\\\" style=\\\"background-color: #ffffff\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003eremote function onPing(websocket:Caller caller, byte[] data) returns error? {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e    io:println(string `Ping received with data: ${data.toBase64()}`);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e    check caller-\u0026gt;pong(data);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e}\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e \u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003eremote function onPong(websocket:Caller caller, byte[] data) {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e    io:println(string `Pong received with data: ${data.toBase64()}`);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\"],[-1177600348,\"\u003cpre class=\\\"shiki\\\" style=\\\"background-color: #ffffff\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003eremote function onIdleTimeout(websocket:Caller caller) {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e    io:println(\u0026quot;Connection timed out\u0026quot;);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\"],[-1683095243,\"\u003cpre class=\\\"shiki\\\" style=\\\"background-color: #ffffff\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003eremote function onClose(websocket:Caller caller, int statusCode, string reason) {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e    io:println(string `Client closed connection with ${statusCode} because of ${reason}`);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\"],[-546541450,\"\u003cpre class=\\\"shiki\\\" style=\\\"background-color: #ffffff\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003eremote function onError(websocket:Caller caller, error err) {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e    io:println(err.message());\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\"],[-1053537033,\"\u003cpre class=\\\"shiki\\\" style=\\\"background-color: #ffffff\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e# Client configurations for WebSocket clients.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e#\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e# + subProtocols - Negotiable sub protocols of the client\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e# + customHeaders - Custom headers, which should be sent to the server\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e# + readTimeout - Read timeout (in seconds) of the client\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e# + secureSocket - SSL/TLS-related options\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e# + maxFrameSize - The maximum payload size of a WebSocket frame in bytes.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e#                  If this is not set, is negative, or is zero, the default frame size of 65536 will be used\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e# + webSocketCompressionEnabled - Enable support for compression in the WebSocket\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e# + handShakeTimeout - Time (in seconds) that a connection waits to get the response of\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e#                               the WebSocket handshake. If the timeout exceeds, then the connection is terminated with\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e#                               an error. If the value \u0026lt; 0, then the value sets to the default value(300)\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e# + cookies - An Array of `http:Cookie`\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e# + auth - Configurations related to client authentication\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e# + pingPongHandler - A service to handle the ping/pong frames.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e#                     Resources in this service gets called on the receipt of ping/pong frames from the server\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003epublic type ClientConfiguration record {|\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e    string[] subProtocols = [];\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e    map\u0026lt;string\u0026gt; customHeaders = {};\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e    decimal readTimeout = -1;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e    ClientSecureSocket? secureSocket = ();\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e    int maxFrameSize = 65536;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e    boolean webSocketCompressionEnabled = true;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e    decimal handShakeTimeout = 300;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e    http:Cookie[] cookies?;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e    ClientAuthConfig auth?;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e    PingPongService pingPongHandler?;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e|};\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\"],[-688216807,\"\u003cpre class=\\\"shiki\\\" style=\\\"background-color: #ffffff\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e# Initializes the synchronous client when called.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e#\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\"],[-2085498474,\"\u003cpre class=\\\"shiki\\\" style=\\\"background-color: #ffffff\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e# Writes text messages to the connection. If an error occurs while sending the text message to the connection, that message\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e# will be lost.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e#\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\"],[-1476398578,\"\u003cpre class=\\\"shiki\\\" style=\\\"background-color: #ffffff\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e# Writes binary data to the connection. If an error occurs while sending the binary message to the connection,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e# that message will be lost.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e#\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\"],[1024870482,\"\u003cpre class=\\\"shiki\\\" style=\\\"background-color: #ffffff\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e# Writes messages to the connection. If an error occurs while sending the message to the connection, that message\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e# will be lost.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e#\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\"],[-737562902,\"\u003cpre class=\\\"shiki\\\" style=\\\"background-color: #ffffff\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e# Reads text messages in a synchronous manner\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e#\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\"],[853396468,\"\u003cpre class=\\\"shiki\\\" style=\\\"background-color: #ffffff\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e# Reads binary data in a synchronous manner\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e#\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\"],[-315250785,\"\u003cpre class=\\\"shiki\\\" style=\\\"background-color: #ffffff\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e# Reads data from the WebSocket connection\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e#\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\"],[508834578,\"\u003cpre class=\\\"shiki\\\" style=\\\"background-color: #ffffff\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e# Closes the connection.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e#\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\"],[-336495444,\"\u003cpre class=\\\"shiki\\\" style=\\\"background-color: #ffffff\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e# Pings the connection. If an error occurs while sending the ping frame to the server, that frame will be lost.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e#\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\"],[-379944034,\"\u003cpre class=\\\"shiki\\\" style=\\\"background-color: #ffffff\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e# Sends a pong message to the connection. If an error occurs while sending the pong frame to the connection, that\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e# the frame will be lost.\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e#\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\"],[1082948394,\"\u003cpre class=\\\"shiki\\\" style=\\\"background-color: #ffffff\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003eservice class PingPongService {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e   *websocket:PingPongService;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e   remote function onPong(websocket:Caller wsEp, byte[] data) {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e       io:println(\u0026quot;Pong received\u0026quot;, data);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e   }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e   \u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e   remote isolated function onPing(websocket:Caller caller, byte[] localData) returns byte[] {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e       return localData;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e   }    \u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e}\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003ewebsocket:Client wsClient = check new (\u0026quot;ws://localhost:21020\u0026quot;, {pingPongHandler : new PingPongService()});\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\"],[-2065315187,\"\u003cpre class=\\\"shiki\\\" style=\\\"background-color: #ffffff\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003elistener websocket:Listener wsListener = new(9090,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e    secureSocket = {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e        key: {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e             certFile: \u0026quot;/path/to/public.crt\u0026quot;,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e             keyFile: \u0026quot;/path/to/private.key\u0026quot;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e        }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e    }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e);\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\"],[-11872543,\"\u003cpre class=\\\"shiki\\\" style=\\\"background-color: #ffffff\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003ewebsocket:Client wsClient = check new (string `wss://localhost:9090/taxi/${username}`,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e    secureSocket = {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e        cert: \u0026quot;/path/to/public.crt\u0026quot;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e    }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e);\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\"],[-353498249,\"\u003cpre class=\\\"shiki\\\" style=\\\"background-color: #ffffff\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003eistener websocket:Listener wsListener = new(9090,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e   secureSocket = {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e       key: {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e           certFile: \u0026quot;../resource/path/to/public.crt\u0026quot;,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e           keyFile: \u0026quot;../resource/path/to/private.key\u0026quot;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e       }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e   }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003ewebsocket:ServiceConfig {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e    auth: [\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e       {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e           oauth2IntrospectionConfig: {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e               url: \u0026quot;https://localhost:9445/oauth2/introspect\u0026quot;,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e               tokenTypeHint: \u0026quot;access_token\u0026quot;,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e               scopeKey: \u0026quot;scp\u0026quot;,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e               clientConfig: {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e                   secureSocket: {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e                       cert: \u0026quot;../resource/path/to/introspect/service/public.crt\u0026quot;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e                   }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e               }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e           },\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e           scopes: [\u0026quot;write\u0026quot;, \u0026quot;update\u0026quot;]\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e       }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e   ]\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003eervice /ws on wsListener {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e   resource function get .() returns websocket:Service|websocket:UpgradeError {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e       // ....\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e   }\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\"],[-1806675342,\"\u003cpre class=\\\"shiki\\\" style=\\\"background-color: #ffffff\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003ewebsocket:Client wsClient = check new (string `wss://localhost:9090/taxi/${username}`,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e     auth = {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e         tokenUrl: \u0026quot;https://localhost:9445/oauth2/token\u0026quot;,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e         username: \u0026quot;johndoe\u0026quot;,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e         password: \u0026quot;A3ddj3w\u0026quot;,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e         clientId: \u0026quot;3MVG9YDQS5WtC11paU2WcQjBB3L5w4gz52uriT8ksZ3nUVjKvrfQMrU4uvZohTftxStwNEW4cfStBEGRxRL68\u0026quot;,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e         clientSecret: \u0026quot;9205371918321623741\u0026quot;,\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e         scopes: [\u0026quot;write\u0026quot;, \u0026quot;update\u0026quot;],\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e         clientConfig: {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e             secureSocket: {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e                 cert: \u0026quot;../resource/path/to/introspect/service/public.crt\u0026quot;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e             }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e         }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e     },\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e     secureSocket = {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e         cert: \u0026quot;../resource/path/to/public.crt\u0026quot;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e     }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e);\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\"],[1238435662,\"\u003cpre class=\\\"shiki\\\" style=\\\"background-color: #ffffff\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003eimport ballerina/io;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003eimport ballerina/websocket;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003eservice /basic/ws on new websocket:Listener(9090) {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e   resource isolated function get .() returns websocket:Service|websocket:Error {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e       return new WsService();\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e   }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e}\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003eservice class WsService {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e    *websocket:Service;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e    remote isolated function onTextMessage(websocket:Caller caller, string text) returns websocket:Error? {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e        io:println(\u0026quot;Text message: \u0026quot; + text);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e        check caller-\u0026gt;writeTextMessage(text);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e    }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e    \u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e    remote isolated function onBinaryMessage(websocket:Caller caller, byte[] data) returns websocket:Error? {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e        io:println(data);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e        check caller-\u0026gt;writeBinaryMessage(data);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e    }\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\"],[-1423503914,\"\u003cpre class=\\\"shiki\\\" style=\\\"background-color: #ffffff\\\"\u003e\u003ccode\u003e\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003eimport ballerina/io;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003eimport ballerina/websocket;\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003epublic function main() returns error? {\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e   websocket:Client wsClient = check new(\u0026quot;ws://localhost:9090/basic/ws\u0026quot;);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e   check wsClient-\u0026gt;writeTextMessage(\u0026quot;Text message\u0026quot;);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e   string textResp = check wsClient-\u0026gt;readTextMessage();\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e   io:println(textResp);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e   \u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e   check wsClient-\u0026gt;writeBinaryMessage(\u0026quot;Binary message\u0026quot;.toBytes());\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e   byte[] byteResp = check wsClient-\u0026gt;readBinaryMessage();\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e   string stringResp = check \u0026#39;string:fromBytes(byteResp);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e   io:println(stringResp);\u003c/span\u003e\u003c/span\u003e\\n\u003cspan class=\\\"line\\\"\u003e\u003cspan style=\\\"color: #24292F\\\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\"]]"},"__N_SSG":true},"page":"/spec/[slug]","query":{"slug":"websocket"},"buildId":"lsiaZgBQ5YncSyQ_5KW07","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>