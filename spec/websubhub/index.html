<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="description"/><meta name="keywords"/><title></title><meta property="og:type" content="article"/><meta property="og:title" content="Ballerina - undefined"/><meta property="og:description"/><meta property="og:description"/><meta property="twitter:description"/><meta property="twitter:text:description"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.setAttributeNode(d.createAttribute('data-ot-ignore'));j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-PSL2TX4');</script><script type="text/javascript" crossorigin="true" src="https://cdn.jsdelivr.net/npm/@docsearch/js@alpha"></script><script src="https://cookie-cdn.cookiepro.com/scripttemplates/otSDKStub.js" type="text/javascript" charSet="UTF-8" data-domain-script="630ad396-5fd5-4745-92ae-2765dc8841ee" defer=""></script><meta name="next-head-count" content="14"/><meta charSet="utf-8"/><meta name="author" content="WSO2, Inc."/><meta property="og:image" content="/images/ballerina-swan-lake-sm-banner-general.png"/><meta property="og:title" content="Ballerina"/><meta property="og:image" content="/images/ballerina-swan-lake-sm-banner-general.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:site" content="@ballerinalang"/><meta name="twitter:creator" content="@ballerinalang"/><meta name="twitter:title" content="Ballerina"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:image" content="/images/ballerina-swan-lake-sm-banner-general.png"/><meta property="twitter:image" content="/images/ballerina-swan-lake-sm-banner-general.png"/><link rel="shortcut icon" href="/images/favicon.ico"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css"/><link rel="stylesheet" href="/css/ballerina-search-button.css"/><link rel="stylesheet" href="/css/ballerina-search-modal.css"/><link rel="stylesheet" href="/css/ballerina-search-variables.css"/><link rel="stylesheet" href="/css/ballerina-search-style.css"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin /><link rel="preload" href="/_next/static/css/ef5a96f2803aeed9.css" as="style"/><link rel="stylesheet" href="/_next/static/css/ef5a96f2803aeed9.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-2ac61cc6c61f044e.js" defer=""></script><script src="/_next/static/chunks/framework-a070cbfff3c750c5.js" defer=""></script><script src="/_next/static/chunks/main-a66eb456a358e5ca.js" defer=""></script><script src="/_next/static/chunks/pages/_app-a1e0d68ce78e316c.js" defer=""></script><script src="/_next/static/chunks/9733-505c0cd1c0071f18.js" defer=""></script><script src="/_next/static/chunks/1722-b076ef6b1cb2a310.js" defer=""></script><script src="/_next/static/chunks/6599-14929bd9ea85f693.js" defer=""></script><script src="/_next/static/chunks/pages/spec/%5Bslug%5D-69fd31216debbc5e.js" defer=""></script><script src="/_next/static/XJYhYLqdP9vc4TlCN4jxL/_buildManifest.js" defer=""></script><script src="/_next/static/XJYhYLqdP9vc4TlCN4jxL/_ssgManifest.js" defer=""></script><script src="/_next/static/XJYhYLqdP9vc4TlCN4jxL/_middlewareManifest.js" defer=""></script><style data-href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap">@font-face{font-family:'Roboto';font-style:italic;font-weight:100;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOiCnqEu92Fr1Mu51QrIzQ.woff) format('woff')}@font-face{font-family:'Roboto';font-style:italic;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOjCnqEu92Fr1Mu51TjARc-.woff) format('woff')}@font-face{font-family:'Roboto';font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOkCnqEu92Fr1Mu52xM.woff) format('woff')}@font-face{font-family:'Roboto';font-style:italic;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOjCnqEu92Fr1Mu51S7ABc-.woff) format('woff')}@font-face{font-family:'Roboto';font-style:italic;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOjCnqEu92Fr1Mu51TzBhc-.woff) format('woff')}@font-face{font-family:'Roboto';font-style:italic;font-weight:900;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOjCnqEu92Fr1Mu51TLBBc-.woff) format('woff')}@font-face{font-family:'Roboto';font-style:normal;font-weight:100;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOkCnqEu92Fr1MmgWxM.woff) format('woff')}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmSU5vAA.woff) format('woff')}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Me5g.woff) format('woff')}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmEU9vAA.woff) format('woff')}@font-face{font-family:'Roboto';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmWUlvAA.woff) format('woff')}@font-face{font-family:'Roboto';font-style:normal;font-weight:900;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmYUtvAA.woff) format('woff')}@font-face{font-family:'Roboto';font-style:italic;font-weight:100;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOiCnqEu92Fr1Mu51QrEz0dL-vwnYh2eg.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:italic;font-weight:100;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOiCnqEu92Fr1Mu51QrEzQdL-vwnYh2eg.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:italic;font-weight:100;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOiCnqEu92Fr1Mu51QrEzwdL-vwnYh2eg.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:italic;font-weight:100;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOiCnqEu92Fr1Mu51QrEzMdL-vwnYh2eg.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto';font-style:italic;font-weight:100;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOiCnqEu92Fr1Mu51QrEz8dL-vwnYh2eg.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:italic;font-weight:100;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOiCnqEu92Fr1Mu51QrEz4dL-vwnYh2eg.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:italic;font-weight:100;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOiCnqEu92Fr1Mu51QrEzAdL-vwnYg.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto';font-style:italic;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOjCnqEu92Fr1Mu51TjASc3CsTYl4BOQ3o.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:italic;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOjCnqEu92Fr1Mu51TjASc-CsTYl4BOQ3o.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:italic;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOjCnqEu92Fr1Mu51TjASc2CsTYl4BOQ3o.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:italic;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOjCnqEu92Fr1Mu51TjASc5CsTYl4BOQ3o.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto';font-style:italic;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOjCnqEu92Fr1Mu51TjASc1CsTYl4BOQ3o.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:italic;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOjCnqEu92Fr1Mu51TjASc0CsTYl4BOQ3o.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:italic;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOjCnqEu92Fr1Mu51TjASc6CsTYl4BO.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto';font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOkCnqEu92Fr1Mu51xFIzIXKMnyrYk.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOkCnqEu92Fr1Mu51xMIzIXKMnyrYk.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOkCnqEu92Fr1Mu51xEIzIXKMnyrYk.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOkCnqEu92Fr1Mu51xLIzIXKMnyrYk.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto';font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOkCnqEu92Fr1Mu51xHIzIXKMnyrYk.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOkCnqEu92Fr1Mu51xGIzIXKMnyrYk.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:italic;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOkCnqEu92Fr1Mu51xIIzIXKMny.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto';font-style:italic;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOjCnqEu92Fr1Mu51S7ACc3CsTYl4BOQ3o.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:italic;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOjCnqEu92Fr1Mu51S7ACc-CsTYl4BOQ3o.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:italic;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOjCnqEu92Fr1Mu51S7ACc2CsTYl4BOQ3o.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:italic;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOjCnqEu92Fr1Mu51S7ACc5CsTYl4BOQ3o.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto';font-style:italic;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOjCnqEu92Fr1Mu51S7ACc1CsTYl4BOQ3o.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:italic;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOjCnqEu92Fr1Mu51S7ACc0CsTYl4BOQ3o.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:italic;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOjCnqEu92Fr1Mu51S7ACc6CsTYl4BO.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto';font-style:italic;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOjCnqEu92Fr1Mu51TzBic3CsTYl4BOQ3o.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:italic;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOjCnqEu92Fr1Mu51TzBic-CsTYl4BOQ3o.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:italic;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOjCnqEu92Fr1Mu51TzBic2CsTYl4BOQ3o.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:italic;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOjCnqEu92Fr1Mu51TzBic5CsTYl4BOQ3o.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto';font-style:italic;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOjCnqEu92Fr1Mu51TzBic1CsTYl4BOQ3o.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:italic;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOjCnqEu92Fr1Mu51TzBic0CsTYl4BOQ3o.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:italic;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOjCnqEu92Fr1Mu51TzBic6CsTYl4BO.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto';font-style:italic;font-weight:900;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOjCnqEu92Fr1Mu51TLBCc3CsTYl4BOQ3o.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:italic;font-weight:900;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOjCnqEu92Fr1Mu51TLBCc-CsTYl4BOQ3o.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:italic;font-weight:900;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOjCnqEu92Fr1Mu51TLBCc2CsTYl4BOQ3o.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:italic;font-weight:900;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOjCnqEu92Fr1Mu51TLBCc5CsTYl4BOQ3o.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto';font-style:italic;font-weight:900;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOjCnqEu92Fr1Mu51TLBCc1CsTYl4BOQ3o.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:italic;font-weight:900;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOjCnqEu92Fr1Mu51TLBCc0CsTYl4BOQ3o.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:italic;font-weight:900;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOjCnqEu92Fr1Mu51TLBCc6CsTYl4BO.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto';font-style:normal;font-weight:100;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOkCnqEu92Fr1MmgVxFIzIXKMnyrYk.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:normal;font-weight:100;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOkCnqEu92Fr1MmgVxMIzIXKMnyrYk.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:normal;font-weight:100;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOkCnqEu92Fr1MmgVxEIzIXKMnyrYk.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:normal;font-weight:100;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOkCnqEu92Fr1MmgVxLIzIXKMnyrYk.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:100;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOkCnqEu92Fr1MmgVxHIzIXKMnyrYk.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:normal;font-weight:100;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOkCnqEu92Fr1MmgVxGIzIXKMnyrYk.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:100;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOkCnqEu92Fr1MmgVxIIzIXKMny.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmSU5fCRc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmSU5fABc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmSU5fCBc4AMP6lbBP.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmSU5fBxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmSU5fCxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmSU5fChc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:300;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmSU5fBBc4AMP6lQ.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu72xKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu5mxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu7mxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu4WxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu7WxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu7GxKKTU1Kvnz.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu4mxKKTU1Kg.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmEU9fCRc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmEU9fABc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmEU9fCBc4AMP6lbBP.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmEU9fBxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmEU9fCxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmEU9fChc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmEU9fBBc4AMP6lQ.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmWUlfCRc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmWUlfABc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmWUlfCBc4AMP6lbBP.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmWUlfBxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmWUlfCxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmWUlfChc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmWUlfBBc4AMP6lQ.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'Roboto';font-style:normal;font-weight:900;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmYUtfCRc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'Roboto';font-style:normal;font-weight:900;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmYUtfABc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'Roboto';font-style:normal;font-weight:900;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmYUtfCBc4AMP6lbBP.woff2) format('woff2');unicode-range:U+1F00-1FFF}@font-face{font-family:'Roboto';font-style:normal;font-weight:900;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmYUtfBxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0370-03FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:900;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmYUtfCxc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Roboto';font-style:normal;font-weight:900;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmYUtfChc4AMP6lbBP.woff2) format('woff2');unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Roboto';font-style:normal;font-weight:900;font-display:swap;src:url(https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmYUtfBBc4AMP6lQ.woff2) format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><body><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PSL2TX4" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div id="__next" data-reactroot=""><div class="main-wrapper spec vstack gap-0"><div class="wrap-page-content container"><div class="row"><div class="mdContent col-12"><div class="container"><div class="topRowSpec row"><div class="col-12"></div></div><div class="specContent row"><div class="stdLib"><h1>Specification: Ballerina WebSubHub Library</h1>
<p><em>Owners</em>: @shafreenAnfar @chamil321 @ayeshLK<br/>
<em>Reviewers</em>: @shafreenAnfar<br/>
<em>Created</em>: 2021/11/23<br/>
<em>Updated</em>: 2022/02/17<br/>
<em>Edition</em>: Swan Lake</p>
<h2 id="introduction" level="2">Introduction</h2>
<p>This is the specification for the WebSubHub standard library of <a href="https://ballerina.io/">Ballerina language</a>, which provides WebSub compliant <code>hub</code> and <code>publisher</code> related functionalities.</p>
<p>The WebSubHub library specification has evolved and may continue to evolve in the future. The released versions of the specification can be found under the relevant Github tag.</p>
<p>If you have any feedback or suggestions about the library, start a discussion via a <a href="https://github.com/ballerina-platform/ballerina-standard-library/issues">GitHub issue</a> or in the <a href="https://ballerina.io/community/">Slack channel</a>. Based on the outcome of the discussion, the specification and implementation can be updated. Community feedback is always welcome. Any accepted proposal which affects the specification is stored under <code>/docs/proposals</code>. Proposals under discussion can be found with the label <code>type/proposal</code> in Github.</p>
<p>The conforming implementation of the specification is released and included in the distribution. Any deviation from the specification is considered a bug.</p>
<h2 id="contents" level="2">Contents</h2>
<ol>
<li><a href="#1-overview">Overview</a></li>
<li><a href="#2-hub">Hub</a>
<ul>
<li>2.1. <a href="#21-listener">Listener</a>
<ul>
<li>2.1.1 <a href="#211-configuration">Configuration</a></li>
<li>2.1.2 <a href="#212-initialization">Initialization</a></li>
<li>2.1.3 <a href="#213-methods">Methods</a></li>
</ul>
</li>
<li>2.2. <a href="#22-service">Service</a>
<ul>
<li>2.2.1. <a href="#221-methods">Methods</a>
<ul>
<li>2.2.1.1. <a href="#2211-onregistertopic">onRegisterTopic</a></li>
<li>2.2.1.2. <a href="#2212-onderegistertopic">onDeregisterTopic</a></li>
<li>2.2.1.3. <a href="#2213-oneventmessage">onEventMessage</a></li>
<li>2.2.1.4. <a href="#2214-onsubscription">onSubscription</a></li>
<li>2.2.1.5. <a href="#2215-onsubscriptionvalidation">onSubscriptionValidation</a></li>
<li>2.2.1.6. <a href="#2216-onsubscriptionintentverified">onSubscriptionIntentVerified</a></li>
<li>2.2.1.7. <a href="#2217-onunsubscritpion">onUnsubscritpion</a></li>
<li>2.2.1.8. <a href="#2218-onunsubscriptionvalidation">onUnsubscriptionValidation</a></li>
<li>2.2.1.9. <a href="#2219-onunsubscriptionintenverified">onUnsubscriptionIntenVerified</a></li>
</ul>
</li>
<li>2.2.1. <a href="#222-annotation">Annotation</a></li>
</ul>
</li>
<li>2.3. <a href="#23-hub-client">Hub Client</a>
<ul>
<li>2.3.1. <a href="#231-initialization">Initialization</a></li>
<li>2.3.2. <a href="#232-distribute-content">Distribute Content</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#3-publisher-client">Publisher Client</a></li>
<li><a href="#4-common-client-configuration">Common Client Configuration</a></li>
</ol>
<h2 id="1-overview" level="2">1. Overview</h2>
<p><a href="https://www.w3.org/TR/websub/">WebSub</a> is a real-time content delivery protocol over HTTP(S) and it is a specification
which evolved from <a href="https://github.com/pubsubhubbub/PubSubHubbub">PubSubHubbub</a>.</p>
<p>WebSub specification describes three main roles:</p>
<ul>
<li>Publisher: Advertises a <code>topic</code> and <code>hub</code> URL on one or more resource URLs.</li>
<li>Subscriber: Discovers the <code>hub</code> and topic URL given a resource URL, subscribes to updates at the <code>hub</code>, and accepts
content distribution requests from the <code>hub</code>.</li>
<li>Hub: Handles subscription requests and distributes the content to subscribers when the corresponding topic URL has
been updated.</li>
</ul>
<p><code>WebSubHub</code> is a library which is derived from the WebSub specification which could be used by developers to implement
WebSub compliant <code>hub</code> services and <code>publisher</code> clients. Since WebSub specification has limited details on the
relationship between <code>publisher</code> and <code>hub</code>, the Ballerina standard library team has made minor improvements to the
original protocol to provide a seamless developer experience.</p>
<h2 id="2-hub" level="2">2. Hub</h2>
<p>WebSub <code>hub</code> is the exchange point for <code>publisher</code> and <code>subscriber</code>.</p>
<p>It has the following responsibilities:</p>
<ul>
<li>Handles/manages WebSub topics.</li>
<li>Handles/manages WebSub subscriptions.</li>
<li>Handles WebSub content distribution.</li>
</ul>
<p>The <code>hub</code> is designed in the form of <code>listener</code> and <code>service</code>.</p>
<ul>
<li><code>websubhub:Listener</code>: A listener end-point to which <code>websubhub:Service</code> could be attached.</li>
<li><code>websubhub:Service</code>: An API service, which receives WebSub events.</li>
</ul>
<p>In addition to <code>websubhub:Listener</code> and <code>websubhub:Service</code>, <code>websubhub:HubClient</code> is available which could be used to
notify content updates to the subscribers.</p>
<h3 id="21-listener" level="3">2.1. Listener</h3>
<p>The <code>websubhub:Listener</code> opens the given port and attaches the provided <code>websubhub:Service</code> object to the given
service-path. <code>websubhub:Listener</code> can be initialized either by providing a port with listener configurations or by
providing an <code>http:Listener</code>.</p>
<h4 id="211-configuration" level="4">2.1.1. Configuration</h4>
<p>When initializing a <code>websubhub:Listener</code>, following configurations could be provided.</p>
<pre><div></div></pre>
<p>For more details on the available configurations please refer <a href="https://lib.ballerina.io/ballerina/http/latest/records/ListenerConfiguration"><code>http:ListenerConfiguration</code></a>.</p>
<h4 id="212-initialization" level="4">2.1.2. Initialization</h4>
<p>The <code>websubhub:Listener</code> could be initialized by providing either a port with <code>websubhub:ListenerConfiguration</code> or by
providing an <code>http:Listener</code>.</p>
<pre><div></div></pre>
<h4 id="213-methods" level="4">2.1.3. Methods</h4>
<p>Following APIs should be available in the <code>websubhub:Listener</code> to dynamically attach <code>websubhub:Service</code> objects to it.</p>
<pre><div></div></pre>
<p>Following APIs should be available in the <code>websubhub:Listener</code> to dynamically detach <code>websubhub:Service</code> objects from it.</p>
<pre><div></div></pre>
<p>Following APIs should be available to dynamically start the <code>websubhub:Listener</code>.</p>
<pre><div></div></pre>
<p>Following APIs should be available to dynamically stop the <code>websubhub:Listener</code>.</p>
<pre><div></div></pre>
<h3 id="22-service" level="3">2.2. Service</h3>
<p><code>websubhub:Service</code> is responsible for handling the received events. Underlying <code>http:Service</code> will receive the original
request, and then it will trigger the WebSubHub dispatcher which will invoke the respective remote method with the event
details.</p>
<p>Following is the type-definition for <code>websubhub:Service</code>.</p>
<pre><div></div></pre>
<h4 id="221-methods" level="4">2.2.1. Methods</h4>
<h5 id="2211-onregistertopic" level="5">2.2.1.1. onRegisterTopic</h5>
<p>This remote method is invoked when the <code>publisher</code> sends a request to register a <code>topic</code> to the <code>hub</code>.</p>
<pre><div></div></pre>
<h5 id="2212-onderegistertopic" level="5">2.2.1.2. onDeregisterTopic</h5>
<p>This remote method is invoked when the <code>publisher</code> sends a request to remove a <code>topic</code> from the <code>hub</code>.</p>
<pre><div></div></pre>
<h5 id="2213-oneventmessage" level="5">2.2.1.3. onEventMessage</h5>
<p>This remote method is invoked when the <code>publisher</code> sends a request to notify the <code>hub</code> about content update for a
<code>topic</code>.</p>
<pre><div></div></pre>
<h5 id="2214-onsubscription" level="5">2.2.1.4. onSubscription</h5>
<p>This remote method is invoked when the <code>subscriber</code> sends a request to subscribe for a <code>topic</code> in the <code>hub</code>. (This is an
optional remote method.)</p>
<pre><div></div></pre>
<h5 id="2215-onsubscriptionvalidation" level="5">2.2.1.5. onSubscriptionValidation</h5>
<p>This remote method is invoked when subscription request from the <code>subscriber</code> is accepted from the <code>hub</code>. <code>hub</code> could
enforce additional validation for the subscription request when this method is invoked. If the validations are failed
the <code>hub</code> could deny the subscription request by responding with <code>websubhub:SubscriptionDeniedError</code>. (This is an
optional remote method.)</p>
<pre><div></div></pre>
<h5 id="2216-onsubscriptionintentverified" level="5">2.2.1.6. onSubscriptionIntentVerified</h5>
<p>This remote method is invoked after the <code>hub</code> verifies the subscription request.</p>
<pre><div></div></pre>
<h5 id="2217-onunsubscritpion" level="5">2.2.1.7. onUnsubscritpion</h5>
<p>This remote method is invoked when the <code>subscriber</code> sends a request to unsubscribe from a <code>topic</code> in the <code>hub</code>. (This is
an optional remote method.)</p>
<pre><div></div></pre>
<h5 id="2218-onunsubscriptionvalidation" level="5">2.2.1.8. onUnsubscriptionValidation</h5>
<p>This remote method is invoked when unsubscription request from the <code>subscriber</code> is accepted from the <code>hub</code>. <code>hub</code> could
enforce additional validation for the unsubscription request when this method is invoked. If the validations are failed
the <code>hub</code> could deny the unsubscription request by responding with <code>websubhub:UnsubscriptionDeniedError</code>. (This is an
optional remote method.)</p>
<pre><div></div></pre>
<h5 id="2219-onunsubscriptionintenverified" level="5">2.2.1.9. onUnsubscriptionIntenVerified</h5>
<p>This remote method is invoked after the <code>hub</code> verifies the unsubscription request.</p>
<pre><div></div></pre>
<p>While the below remote methods are strictly WebSub compliant,</p>
<ul>
<li>onSubscription</li>
<li>onSubscriptionValidation</li>
<li>onSubscriptionIntentVerified</li>
<li>onUnsubscritpion</li>
<li>onUnsubscriptionValidation</li>
<li>onUnsubscriptionIntenVerified</li>
</ul>
<p>The below remote functions are not,</p>
<ul>
<li>onEventMessage</li>
<li>onRegisterTopic</li>
<li>onUnregisterTopic</li>
</ul>
<p>This is due to the limited information in the WebSub specification on the relationship between the <code>publisher</code> and the
<code>hub</code>.</p>
<p>In the event of a bad request from the <code>publisher</code> or the <code>subscriber</code>, the WebSubHub dispatcher will automatically send
back the appropriate response to the client.</p>
<h4 id="222-annotation" level="4">2.2.2. Annotation</h4>
<p>Apart from the listener level configurations a <code>hub</code> will require few additional configurations. Hence, there should be
<code>websubhub:ServiceConfig</code> a service-level-annotation for <code>websubhub:Service</code> which contains
<code>websubhub:ServiceConfiguration</code> record.</p>
<pre><div></div></pre>
<h3 id="23-hub-client" level="3">2.3. Hub Client</h3>
<p>In accordance with the <a href="https://www.w3.org/TR/websub/#content-distribution">WebSub specification</a>, <code>WebSubHub</code> package
has provided support for <code>websubhub:HubClient</code> which could be used to distribute content-updates to <code>subscribers</code>.</p>
<h4 id="231-initialization" level="4">2.3.1. Initialization</h4>
<p>Since the relationship of the <code>subscriber</code> and the <code>topic</code> is unique in the <code>hub</code>, <code>websubhub:HubClient</code> is designed to
be initialized per <code>subscription</code> basis. Hence, <code>websubhub:HubClient</code> could be initialized by providing
<code>websubhub:Subscription</code> and optional <code>websubhub:ClientConfiguration</code>.</p>
<pre><div></div></pre>
<h4 id="232-distribute-content" level="4">2.3.2. Distribute Content</h4>
<p><code>websubhub:HubClient</code> should provide following API to be used to deliver content to the <code>subscriber</code>.</p>
<pre><div></div></pre>
<h2 id="3-publisher-client" level="2">3. Publisher Client</h2>
<p>WebSub <code>publisher</code>, has two main responsibilities:</p>
<ul>
<li>Advertise <code>topics</code> in a <code>hub</code></li>
<li>Publish/Update content for the <code>topics</code> registered in a <code>hub</code></li>
</ul>
<h3 id="31-initialization" level="3">3.1. Initialization</h3>
<p><code>websubhub:PublisherClient</code> can be initialized by providing the hub URL and optional <code>websubhub:ClientConfiguration</code>.</p>
<pre><div></div></pre>
<h3 id="32-registerderegister-topics" level="3">3.2. Register/Deregister Topics</h3>
<p><code>websubhub:PublisherClient</code> could be used to register/deregister topics in a <code>hub</code>.</p>
<p><strong>registerTopic</strong></p>
<p>This remote method is invoked when the <code>publisher</code> tries to register a <code>topic</code> in a particular <code>hub</code>.</p>
<pre><div></div></pre>
<p><strong>deregisterTopic</strong></p>
<p>This remote method is invoked when the <code>publisher</code> tries to deregister a <code>topic</code> from a particular <code>hub</code>.</p>
<pre><div></div></pre>
<h3 id="32-update-content" level="3">3.2. Update Content</h3>
<p><code>websubhub:PublisherClient</code> has the capability to notify the content-update for a <code>topic</code> to the <code>hub</code>.</p>
<p><strong>publishUpdate</strong></p>
<p>This remote method is used to directly send the content-update for a <code>topic</code> to the <code>hub</code>.</p>
<pre><div></div></pre>
<p><strong>notifyUpdate</strong></p>
<p>This remote method is used to notify the <code>hub</code>, that the <code>topic</code> has been updated.</p>
<pre><div></div></pre>
<h3 id="4-common-client-configuration" level="3">4. Common Client Configuration</h3>
<p>WebSubHub library provides following client configurations to be used when initializing <code>websubhub:HubClient</code>/<code>websubhub:PublisherClient</code>.</p>
<pre><div></div></pre></div></div></div></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"frontmatter":{},"content":"# Specification: Ballerina WebSubHub Library\n\n_Owners_: @shafreenAnfar @chamil321 @ayeshLK    \n_Reviewers_: @shafreenAnfar    \n_Created_: 2021/11/23  \n_Updated_: 2022/02/17  \n_Edition_: Swan Lake  \n\n## Introduction\n\nThis is the specification for the WebSubHub standard library of [Ballerina language](https://ballerina.io/), which provides WebSub compliant `hub` and `publisher` related functionalities.\n\nThe WebSubHub library specification has evolved and may continue to evolve in the future. The released versions of the specification can be found under the relevant Github tag. \n\nIf you have any feedback or suggestions about the library, start a discussion via a [GitHub issue](https://github.com/ballerina-platform/ballerina-standard-library/issues) or in the [Slack channel](https://ballerina.io/community/). Based on the outcome of the discussion, the specification and implementation can be updated. Community feedback is always welcome. Any accepted proposal which affects the specification is stored under `/docs/proposals`. Proposals under discussion can be found with the label `type/proposal` in Github.\n\nThe conforming implementation of the specification is released and included in the distribution. Any deviation from the specification is considered a bug.\n\n## Contents  \n1. [Overview](#1-overview)  \n2. [Hub](#2-hub)\n   * 2.1. [Listener](#21-listener)\n     * 2.1.1 [Configuration](#211-configuration)\n     * 2.1.2 [Initialization](#212-initialization)\n     * 2.1.3 [Methods](#213-methods)\n   * 2.2. [Service](#22-service)\n     * 2.2.1. [Methods](#221-methods)\n       * 2.2.1.1. [onRegisterTopic](#2211-onregistertopic)\n       * 2.2.1.2. [onDeregisterTopic](#2212-onderegistertopic)\n       * 2.2.1.3. [onEventMessage](#2213-oneventmessage)\n       * 2.2.1.4. [onSubscription](#2214-onsubscription)\n       * 2.2.1.5. [onSubscriptionValidation](#2215-onsubscriptionvalidation)\n       * 2.2.1.6. [onSubscriptionIntentVerified](#2216-onsubscriptionintentverified)\n       * 2.2.1.7. [onUnsubscritpion](#2217-onunsubscritpion)\n       * 2.2.1.8. [onUnsubscriptionValidation](#2218-onunsubscriptionvalidation)\n       * 2.2.1.9. [onUnsubscriptionIntenVerified](#2219-onunsubscriptionintenverified)\n     * 2.2.1. [Annotation](#222-annotation)\n   * 2.3. [Hub Client](#23-hub-client)\n     * 2.3.1. [Initialization](#231-initialization)\n     * 2.3.2. [Distribute Content](#232-distribute-content)\n3. [Publisher Client](#3-publisher-client)\n4. [Common Client Configuration](#4-common-client-configuration)\n\n## 1. Overview\n\n[WebSub](https://www.w3.org/TR/websub/) is a real-time content delivery protocol over HTTP(S) and it is a specification \nwhich evolved from [PubSubHubbub](https://github.com/pubsubhubbub/PubSubHubbub).\n\nWebSub specification describes three main roles: \n- Publisher: Advertises a `topic` and `hub` URL on one or more resource URLs.\n- Subscriber: Discovers the `hub` and topic URL given a resource URL, subscribes to updates at the `hub`, and accepts \ncontent distribution requests from the `hub`.\n- Hub: Handles subscription requests and distributes the content to subscribers when the corresponding topic URL has \nbeen updated.\n\n`WebSubHub` is a library which is derived from the WebSub specification which could be used by developers to implement \nWebSub compliant `hub` services and `publisher` clients. Since WebSub specification has limited details on the \nrelationship between `publisher` and `hub`, the Ballerina standard library team has made minor improvements to the \noriginal protocol to provide a seamless developer experience.\n\n## 2. Hub\n\nWebSub `hub` is the exchange point for `publisher` and `subscriber`. \n\nIt has the following responsibilities:\n* Handles/manages WebSub topics.\n* Handles/manages WebSub subscriptions.\n* Handles WebSub content distribution.\n\nThe `hub` is designed in the form of `listener` and `service`.\n- `websubhub:Listener`: A listener end-point to which `websubhub:Service` could be attached. \n- `websubhub:Service`: An API service, which receives WebSub events.\n\nIn addition to `websubhub:Listener` and `websubhub:Service`, `websubhub:HubClient` is available which could be used to \nnotify content updates to the subscribers.\n\n### 2.1. Listener\n\nThe `websubhub:Listener` opens the given port and attaches the provided `websubhub:Service` object to the given \nservice-path. `websubhub:Listener` can be initialized either by providing a port with listener configurations or by \nproviding an `http:Listener`.\n\n#### 2.1.1. Configuration \n\nWhen initializing a `websubhub:Listener`, following configurations could be provided.   \n```ballerina\n# Provides a set of configurations for configure the underlying HTTP listener of the WebSubHub listener.\npublic type ListenerConfiguration record {|\n    *http:ListenerConfiguration;\n|};\n```\n\nFor more details on the available configurations please refer [`http:ListenerConfiguration`](https://lib.ballerina.io/ballerina/http/latest/records/ListenerConfiguration).\n\n#### 2.1.2. Initialization\n\nThe `websubhub:Listener` could be initialized by providing either a port with `websubhub:ListenerConfiguration` or by \nproviding an `http:Listener`.  \n```ballerina\n# Initiliazes the `websubhub:Listener` instance.\n# ```ballerina\n# listener websubhub:Listener hubListenerEp = check new (9090);\n# ```\n#\n# + listenTo - Port number or an `http:Listener` instance\n# + config - Custom `websubhub:ListenerConfiguration` to be provided to the underlying HTTP listener\n# + return - The `websubhub:Listener` or an `websubhub:Error` if the initialization failed\npublic isolated function init(int|http:Listener listenTo, *ListenerConfiguration config) returns websubhub:Error? {\n```\n\n#### 2.1.3. Methods \n\nFollowing APIs should be available in the `websubhub:Listener` to dynamically attach `websubhub:Service` objects to it.  \n```ballerina\n# Attaches the provided `websubhub:Service` to the `websubhub:Listener`.\n# ```ballerina\n# check hubListenerEp.attach('service, \"/hub\");\n# ```\n# \n# + 'service - The `websubhub:Service` object to attach\n# + name - The path of the service to be hosted\n# + return - An `websubhub:Error` if an error occurred during the service attaching process or else `()`\npublic isolated function attach(websubhub:Service 'service, string[]|string? name = ()) returns websubhub:Error?\n```\n\nFollowing APIs should be available in the `websubhub:Listener` to dynamically detach `websubhub:Service` objects from it.\n```ballerina\n# Detaches the provided `websubhub:Service` from the `websubhub:Listener`.\n# ```ballerina\n# check hubListenerEp.detach('service);\n# ```\n# \n# + s - The `websubhub:Service` object to be detached\n# + return - An `websubhub:Error` if an error occurred during the service detaching process or else `()`\npublic isolated function detach(websubhub:Service s) returns websubhub:Error?\n```\n\nFollowing APIs should be available to dynamically start the `websubhub:Listener`.\n```ballerina\n# Starts the registered service programmatically.\n# ```ballerina\n# check hubListenerEp.'start();\n# ```\n# \n# + return - An `websubhub:Error` if an error occurred during the listener-starting process or else `()`\npublic isolated function 'start() returns websubhub:Error?\n```\n\nFollowing APIs should be available to dynamically stop the `websubhub:Listener`.\n```ballerina\n# Gracefully stops the hub listener. Already-accepted requests will be served before the connection closure.\n# ```ballerina\n# check hubListenerEp.gracefulStop();\n# ```\n# \n# + return - An `websubhub:Error` if an error occurred during the listener-stopping process\npublic isolated function gracefulStop() returns websubhub:Error?\n\n# Stops the service listener immediately.\n# ```ballerina\n# check hubListenerEp.immediateStop();\n# ```\n# \n# + return - An `websubhub:Error` if an error occurred during the listener-stopping process or else `()`\npublic isolated function immediateStop() returns websubhub:Error?\n```\n\n### 2.2. Service\n\n`websubhub:Service` is responsible for handling the received events. Underlying `http:Service` will receive the original \nrequest, and then it will trigger the WebSubHub dispatcher which will invoke the respective remote method with the event \ndetails.\n\nFollowing is the type-definition for `websubhub:Service`.\n```ballerina\npublic type Service distinct service object {\n    // Sample POST request hub.mode=register\u0026hub.topic=http://foo.com/bar\n    // Sample 200 OK response hub.mode=accepted or 200 OK hub.mode=denied\u0026hub.reason=unauthorized\n    remote function onRegisterTopic(websubhub:TopicRegistration msg)\n        returns websubhub:TopicRegistrationSuccess|websubhub:TopicRegistrationError|error;\n\n    // Sample POST request hub.mode=unregister\u0026hub.topic=http://foo.com/bar\n    // Sample 200 OK response hub.mode=accepted or 200 OK hub.mode=denied\u0026hub.reason=unauthorized \n    remote function onDeregisterTopic(websubhub:TopicDeregistration msg)\n        returns websubhub:TopicDeregistrationSuccess|websubhub:TopicDeregistrationError|error;\n\n    // Sample POST request with content type x-www-form-urlencoded hub.mode=publish\u0026hub.topic=http://foo.com/bar\n    // for other content types such as xml, json and octect-stream hub.mode=publish should be in query string.\n    // Sample 200 OK response hub.mode=accepted or 200 OK hub.mode=denied\u0026hub.reason=unauthorized \n    remote function onUpdateMessage(websubhub:UpdateMessage msg)\n        returns websubhub:Acknowledgement|websubhub:UpdateMessageError|error;\n\n    // Sample POST request hub.mode=subscribe\u0026hub.topic=http://foo.com/bar \n    remote function onSubscription(websubhub:Subscription msg)\n        returns websubhub:SubscriptionAccepted|websubhub:SubscriptionPermanentRedirect|\n        websubhub:SubscriptionTemporaryRedirect|websubhub:BadSubscriptionError|\n        websubhub:InternalSubscriptionError|error;\n        \n    remote function onSubscriptionValidation(websubhub:Subscription msg)\n        returns websubhub:SubscriptionDeniedError|error?;\n\n    remote function onSubscriptionIntentVerified(websubhub:VerifiedSubscription msg) returns error?;\n\n    // Sample POST request hub.mode=unsubscribe\u0026hub.topic=http://foo.com/bar\n    remote function onUnsubscription(websubhub:Unsubscription msg)\n        returns websubhub:UnsubscriptionAccepted|websubhub:BadUnsubscriptionError|\n        websubhub:InternalUnsubscriptionError|error;\n\n    remote function onUnsubscriptionValidation(websubhub:Unsubscription msg)\n        returns websubhub:UnsubscriptionDeniedError|error?;\n\n    remote function onUnsubscriptionIntentVerified(websubhub:VerifiedUnsubscription msg) returns error?;\n};\n```\n\n#### 2.2.1. Methods\n\n##### 2.2.1.1. onRegisterTopic\n\nThis remote method is invoked when the `publisher` sends a request to register a `topic` to the `hub`.\n```ballerina\n# Registers a `topic` in the hub.\n# \n# + msg - Details related to the topic-registration\n# + return - `websubhub:TopicRegistrationSuccess` if topic registration is successful, `websubhub:TopicRegistrationError`\n#            if topic registration failed or `error` if there is any unexpected error\nremote function onRegisterTopic(websubhub:TopicRegistration msg)\n    returns websubhub:TopicRegistrationSuccess|websubhub:TopicRegistrationError|error;\n```\n\n##### 2.2.1.2. onDeregisterTopic\n\nThis remote method is invoked when the `publisher` sends a request to remove a `topic` from the `hub`.\n```ballerina\n# Deregisters a `topic` in the hub.\n# \n# + msg - Details related to the topic-deregistration\n# + return - `websubhub:TopicDeregistrationSuccess` if topic deregistration is successful, `websubhub:TopicDeregistrationError`\n#            if topic deregistration failed or `error` if there is any unexpected error\nremote function onDeregisterTopic(websubhub:TopicDeregistration msg)\n    returns websubhub:TopicDeregistrationSuccess|websubhub:TopicDeregistrationError|error;\n```\n\n##### 2.2.1.3. onEventMessage\n\nThis remote method is invoked when the `publisher` sends a request to notify the `hub` about content update for a \n`topic`.\n```ballerina\n# Publishes content to the hub.\n# \n# + msg - Details of the published content\n# + return - `websubhub:Acknowledgement` if publish content is successful, `websubhub:UpdateMessageError`\n#            if publish content failed or `error` if there is any unexpected error\nremote function onUpdateMessage(websubhub:UpdateMessage msg)\n    returns websubhub:Acknowledgement|websubhub:UpdateMessageError|error;\n```\n\n##### 2.2.1.4. onSubscription\n\nThis remote method is invoked when the `subscriber` sends a request to subscribe for a `topic` in the `hub`. (This is an\noptional remote method.)\n```ballerina\n# Subscribes a `subscriber` to the hub.\n# \n# + msg - Details of the subscription\n# + return - `websubhub:SubscriptionAccepted` if subscription is accepted from the hub, `websubhub:BadSubscriptionError`\n#            if subscription is denied from the hub, `websubhub:SubscriptionPermanentRedirect` or a `websubhub:SubscriptionTemporaryRedirect`\n#            if the subscription request is redirected from the `hub`, `websubhub:InternalSubscriptionError` if there is an internal error \n#            while processing the subscription request or `error` if there is any unexpected error\nremote function onSubscription(websubhub:Subscription msg)\n    returns websubhub:SubscriptionAccepted|websubhub:SubscriptionPermanentRedirect|\n        websubhub:SubscriptionTemporaryRedirect|websubhub:BadSubscriptionError|\n        websubhub:InternalSubscriptionError|error;\n```\n\n##### 2.2.1.5. onSubscriptionValidation\n\nThis remote method is invoked when subscription request from the `subscriber` is accepted from the `hub`. `hub` could \nenforce additional validation for the subscription request when this method is invoked. If the validations are failed \nthe `hub` could deny the subscription request by responding with `websubhub:SubscriptionDeniedError`. (This is an \noptional remote method.)\n```ballerina\n# Validates a incomming subscription request.\n# \n# + msg - Details of the subscription\n# + return - `websubhub:SubscriptionDeniedError` if the subscription is denied by the hub, `error` if there is any unexpected error or else `()`\nremote function onSubscriptionValidation(websubhub:Subscription msg) \n    returns websubhub:SubscriptionDeniedError|error?;\n```\n\n##### 2.2.1.6. onSubscriptionIntentVerified\n\nThis remote method is invoked after the `hub` verifies the subscription request.\n```ballerina\n# Processes a verified subscription request.\n# \n# + msg - Details of the subscription\n# + return - `error` if there is any unexpected error or else `()`\nremote function onSubscriptionIntentVerified(websubhub:VerifiedSubscription msg) returns error?;\n```\n\n##### 2.2.1.7. onUnsubscritpion\n\nThis remote method is invoked when the `subscriber` sends a request to unsubscribe from a `topic` in the `hub`. (This is \nan optional remote method.)\n```ballerina\n# Unsubscribes a `subscriber` from the hub.\n# \n# + msg - Details of the unsubscription\n# + return - `websubhub:UnsubscriptionAccepted` if unsubscription is accepted from the hub, `websubhub:BadUnsubscriptionError`\n#            if unsubscription is denied from the hub, `websubhub:InternalUnsubscriptionError` if there is any internal error while processing the \n#             unsubscription request or `error` if there is any unexpected error\nremote function onUnsubscription(websubhub:Unsubscription msg)\n    returns websubhub:UnsubscriptionAccepted|websubhub:BadUnsubscriptionError|\n        websubhub:InternalUnsubscriptionError|error;\n```\n\n##### 2.2.1.8. onUnsubscriptionValidation\n\nThis remote method is invoked when unsubscription request from the `subscriber` is accepted from the `hub`. `hub` could\nenforce additional validation for the unsubscription request when this method is invoked. If the validations are failed\nthe `hub` could deny the unsubscription request by responding with `websubhub:UnsubscriptionDeniedError`. (This is an\noptional remote method.)\n```ballerina\n# Validates a incomming unsubscription request.\n# \n# + msg - Details of the unsubscription\n# + return - `websubhub:UnsubscriptionDeniedError` if the unsubscription is denied by the hub or else `()`\nremote function onUnsubscriptionValidation(websubhub:Unsubscription msg) \n    returns websubhub:UnsubscriptionDeniedError|error?;\n```\n\n##### 2.2.1.9. onUnsubscriptionIntenVerified\n\nThis remote method is invoked after the `hub` verifies the unsubscription request.\n```ballerina\n# Processes a verified unsubscription request.\n# \n# + msg - Details of the unsubscription\nremote function onUnsubscriptionIntentVerified(websubhub:VerifiedUnsubscription msg) returns error?;\n```\n\nWhile the below remote methods are strictly WebSub compliant,\n- onSubscription \n- onSubscriptionValidation\n- onSubscriptionIntentVerified \n- onUnsubscritpion \n- onUnsubscriptionValidation\n- onUnsubscriptionIntenVerified\n\nThe below remote functions are not, \n- onEventMessage\n- onRegisterTopic\n- onUnregisterTopic\n\nThis is due to the limited information in the WebSub specification on the relationship between the `publisher` and the \n`hub`.\n\nIn the event of a bad request from the `publisher` or the `subscriber`, the WebSubHub dispatcher will automatically send \nback the appropriate response to the client.\n\n#### 2.2.2. Annotation \n\nApart from the listener level configurations a `hub` will require few additional configurations. Hence, there should be \n`websubhub:ServiceConfig` a service-level-annotation for `websubhub:Service` which contains\n`websubhub:ServiceConfiguration` record.\n```ballerina\n# Configuration for a WebSub Hub service.\n#\n# + leaseSeconds - The period for which the subscription is expected to be active in the `hub`\n# + webHookConfig - HTTP client configurations for subscription/unsubscription intent verification\npublic type ServiceConfiguration record {|\n    int leaseSeconds?;\n    ClientConfiguration webHookConfig?;\n|};\n```\n\n### 2.3. Hub Client\n\nIn accordance with the [WebSub specification](https://www.w3.org/TR/websub/#content-distribution), `WebSubHub` package \nhas provided support for `websubhub:HubClient` which could be used to distribute content-updates to `subscribers`.\n\n#### 2.3.1. Initialization\n\nSince the relationship of the `subscriber` and the `topic` is unique in the `hub`, `websubhub:HubClient` is designed to \nbe initialized per `subscription` basis. Hence, `websubhub:HubClient` could be initialized by providing \n`websubhub:Subscription` and optional `websubhub:ClientConfiguration`. \n```ballerina\n# Record to represent the subscription request body.\n# \n# + hub - URL of the `hub` to which the subscriber has subscribed\n# + hubMode - Current `hub` action\n# + hubCallback - Callback URL for subscriber to receive distributed content\n# + hubTopic - Topic to which subscriber has subscribed\n# + hubLeaseSeconds - Amount of time in seconds during when the subscription is valid\n# + hubSecret - Secret Key to sign the distributed content\npublic type Subscription record {\n    string hub;\n    string hubMode;\n    string hubCallback;\n    string hubTopic;\n    string? hubLeaseSeconds = ();\n    string? hubSecret = ();\n};\n\npublic isolated function init(websubhub:Subscription subscription, *websubhub:ClientConfiguration config) returns websubhub:Error?\n```\n\n#### 2.3.2. Distribute Content\n\n`websubhub:HubClient` should provide following API to be used to deliver content to the `subscriber`.\n```ballerina\n# Record to represent a WebSub content delivery.\n#\n# + headers - Additional Request headers to include when distributing content\n# + contentType - The content-type of the payload\n# + content - The payload to be sent\npublic type ContentDistributionMessage record {|\n    map\u003cstring|string[]\u003e? headers = ();\n    string? contentType = ();\n    json|xml|string|byte[]? content;\n|};\n\ntype HubClient client object {\n    # Distributes the published content to the subscribers.\n    # ```ballerina\n    # ContentDistributionSuccess publishUpdate = check websubHubClientEP-\u003enotifyContentDistribution({ content: \"This is sample content\" });\n    # ```\n    #\n    # + msg - Content to be distributed to the topic subscriber \n    # + return - An `websubhub:Error` if an exception occurred, a `websubhub:SubscriptionDeletedError` if the subscriber responded with `HTTP 410`,\n    #            or else a `websubhub:ContentDistributionSuccess` for successful content delivery\n    remote function notifyContentDistribution(websubhub:ContentDistributionMessage msg) \n            returns websubhub:ContentDistributionSuccess|websubhub:SubscriptionDeletedError|websubhub:Error;\n};\n```\n\n## 3. Publisher Client  \n\nWebSub `publisher`, has two main responsibilities:  \n- Advertise `topics` in a `hub`  \n- Publish/Update content for the `topics` registered in a `hub`\n\n### 3.1. Initialization\n\n`websubhub:PublisherClient` can be initialized by providing the hub URL and optional `websubhub:ClientConfiguration`. \n```ballerina\n# Initializes the `websub:PublisherClient`.\n# ```ballerina\n# websub:PublisherClient publisherClient = check new(\"http://localhost:9191/websub/publish\");\n# ```\n#\n# + hubUrl    - The URL to publish/notify updates\n# + config - The `websubhub:ClientConfiguration` for the underlying client or else `()`\n# + return - The `websubhub:PublisherClient` or an `websubhub:Error` if the initialization failed\npublic isolated function init(string hubUrl, *websubhub:ClientConfiguration config) returns websubhub:Error?\n```\n\n### 3.2. Register/Deregister Topics\n\n`websubhub:PublisherClient` could be used to register/deregister topics in a `hub`.\n\n**registerTopic**\n\nThis remote method is invoked when the `publisher` tries to register a `topic` in a particular `hub`.\n```ballerina\n# Registers a topic in a Ballerina WebSub Hub to which the subscribers can subscribe and the publisher will publish updates.\n# ```ballerina\n# websubhub:TopicRegistrationSuccess response = check publisherClient-\u003eregisterTopic(\"http://websubpubtopic.com\");\n# ```\n#\n# + topic - The topic to register\n# + return - A `websubhub:TopicRegistrationError` if an error occurred registering the topic or else `websubhub:TopicRegistrationSuccess`\nremote function registerTopic(string topic) returns websubhub:TopicRegistrationSuccess|websubhub:TopicRegistrationError\n```\n\n**deregisterTopic**\n\nThis remote method is invoked when the `publisher` tries to deregister a `topic` from a particular `hub`.\n```ballerina\n# Deregisters a topic in a Ballerina WebSub Hub.\n# ```ballerina\n# websubhub:TopicDeregistrationSuccess response = check publisherClient-\u003ederegisterTopic(\"http://websubpubtopic.com\");\n# ```\n#\n# + topic - The topic to deregister\n# + return - A `websubhub:TopicDeregistrationError` if an error occurred un registering the topic or else `websubhub:TopicDeregistrationSuccess`\nremote function deregisterTopic(string topic) returns websubhub:TopicDeregistrationSuccess|websubhub:TopicDeregistrationError\n```\n\n### 3.2. Update Content\n\n`websubhub:PublisherClient` has the capability to notify the content-update for a `topic` to the `hub`.\n\n**publishUpdate**\n\nThis remote method is used to directly send the content-update for a `topic` to the `hub`.\n```ballerina\n# Publishes an update to a remote Ballerina WebSub Hub.\n# ```ballerina\n# websubhub:Acknowledgement response = check publisherClient-\u003epublishUpdate(\"http://websubpubtopic.com\",{\"action\": \"publish\",\n# \"mode\": \"remote-hub\"});\n# ```\n#\n# + topic - The topic for which the update occurred\n# + payload - The update payload\n# + contentType - The type of the update content to set as the `ContentType` header\n# + return - A `websubhub:UpdateMessageError`if an error occurred with the update or else `websubhub:Acknowledgement`\nremote function publishUpdate(string topic, map\u003cstring\u003e|string|xml|json|byte[] payload, string? contentType = ()) \n    returns websubhub:Acknowledgement|websubhub:UpdateMessageError\n```\n\n**notifyUpdate**\n\nThis remote method is used to notify the `hub`, that the `topic` has been updated.\n```ballerina\n# Notifies a remote WebSubHub from which an update is available to fetch for hubs that require publishing.\n# ```ballerina\n#  websubhub:Acknowledgement|websubhub:UpdateMessageError response = check publisherClient-\u003enotifyUpdate(\"http://websubpubtopic.com\");\n# ```\n#\n# + topic - The topic for which the update occurred\n# + return - A `websubhub:UpdateMessageError` if an error occurred with the notification or else `websubhub:Acknowledgement`\nremote function notifyUpdate(string topic) returns websubhub:Acknowledgement|websubhub:UpdateMessageError\n```\n\n### 4. Common Client Configuration\n\nWebSubHub library provides following client configurations to be used when initializing `websubhub:HubClient`/`websubhub:PublisherClient`.\n```ballerina\n# Record to represent client configuration for HubClient / PublisherClient\n# \n# + httpVersion - The HTTP version understood by the client\n# + http1Settings - Configurations related to HTTP/1.x protocol\n# + http2Settings - Configurations related to HTTP/2 protocol\n# + timeout - The maximum time to wait (in seconds) for a response before closing the connection\n# + poolConfig - Configurations associated with request pooling\n# + auth - Configurations related to client authentication\n# + retryConfig - Configurations associated with retrying\n# + responseLimits - Configurations associated with inbound response size limits\n# + secureSocket - SSL/TLS related options\n# + circuitBreaker - Configurations associated with the behaviour of the Circuit Breaker\npublic type ClientConfiguration record {|\n    string httpVersion = HTTP_1_1;\n    http:ClientHttp1Settings http1Settings = {};\n    http:ClientHttp2Settings http2Settings = {};\n    decimal timeout = 60;\n    http:PoolConfiguration poolConfig?;\n    http:ClientAuthConfig auth?;\n    http:RetryConfig retryConfig?;\n    http:ResponseLimitConfigs responseLimits = {};\n    http:ClientSecureSocket secureSocket?;\n    http:CircuitBreakerConfig circuitBreaker?;\n|};\n```\n"},"__N_SSG":true},"page":"/spec/[slug]","query":{"slug":"websubhub"},"buildId":"XJYhYLqdP9vc4TlCN4jxL","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>