

<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <meta name="description" content="The ballerina/ftp module provides an FTP client and an FTP server listener implementation to facilitate an FTP
connection to a remote location.
">
    <meta name="keywords" content="ballerina,ballerina lang,api docs,ftp">

    <title>API Docs - ballerina/ftp</title>
    <script src="../html-template-resources/jquery.min.js"></script>

    <!-- BIO THEME START -->
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<!-- Optional theme -->
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
<!-- Latest compiled and minified JavaScript -->
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<script type="text/javascript" src="/js/api-doc-template.js"></script>
<script type="text/javascript" src="/js/ballerina-common.js"></script>
<link rel="stylesheet" href="/css/ballerina-io.css">
<link rel="stylesheet" href="/css/ballerina-io-docs.css">
<link rel="stylesheet" href="/css/ballerina-io-api-new.css">

<style>
    .line-numbers-wrap {
        display: none;
    }
</style>
<!-- BIO THEME END -->

    <link rel="stylesheet" href="../html-template-resources/semantic.min.css">
    <link rel="stylesheet" href="../html-template-resources/components/icon.min.css">
    <link rel="stylesheet" href="../html-template-resources/styles/css/styles.css">
    <link rel="stylesheet" href="../html-template-resources/styles/css/font.css">
    <script src="../html-template-resources/semantic.min.js"></script>
    <script src="../syntax-highlighter/highlighter.js"></script>

</head>


<body class="cBallerina-io">
    <div class="row cBallerina-io-top-row">
    <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6"></div>
    <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 cTopLineContainer">
        <div class="cTopLine"></div>
    </div>
</div>
<div class="row cBallerina-io-Nav" id="iMainNavigation">
</div>
<div class="clearfix"></div>
    <div class="navi-wrapper">
        <div class="navi-wrapper-content">
            <a href="
    ../index.html">
    <img class="logo" src="../html-template-resources/images/ballerina-logo.png">
</a>

            
            <div class="primary-list module">
    
        <a href="../ftp/index.html" onclick="menuLinkClick()">
            <h3>ftp</h3>
        </a>
    
    <ul>
        
            <li>
                <a data="records" href="../ftp/index.html#records" onclick="menuLinkClick()">Records</a>
            </li>
        
        
        
        
            <li>
                <a data="clients" href="../ftp/index.html#clients" onclick="menuLinkClick()">Clients</a>
            </li>
        
        
            <li>
                <a data="listeners" href="../ftp/index.html#listeners" onclick="menuLinkClick()">Listeners</a>
            </li>
        
        
        
            <li>
                <a data="constants" href="../ftp/index.html#constants" onclick="menuLinkClick()">Constants</a>
            </li>
        
        
        
        
    </ul>
    <div class="ui divider"></div>
</div>

        </div>
    </div>
    <div class="content-wrapper pusher">
        <div>
    <a id="toc" class="toc item" onclick="displayMenu()">
        <img src="../html-template-resources/images/menu.svg">
    </a>
</div>
        <div class="main-wrapper">
            <div id="search-impl" class="search-bar"></div>
            <div id="main">
            <h1>
                <a class="breadcrumb-home" href="
                    ../index.html">
                    <img class="breadcrumb-home-icon" src="../html-template-resources/images/home.svg">
                </a>
                <span class="title-type">
                    
                        Module :
                    
                    
                    
                </span>
                
                    <a href="../ftp/index.html"><span class="modules">ftp</span></a>
                
                
            </h1>
            
    
    <div>Version : 1.0.0</div>
    
    <h2>Module Overview</h2>
<p>The <code>ballerina/ftp</code> module provides an FTP client and an FTP server listener implementation to facilitate an FTP
connection to a remote location.</p>
<p>###FTP Client</p>
<p>The <code>ftp:Client</code> connects to an FTP server and performs various operations on the files. Currently, it supports the
generic FTP operations; <code>get</code>, <code>delete</code>, <code>put</code>, <code>append</code>, <code>mkdir</code>, <code>rmdir</code>, <code>isDirectory</code>, <code>rename</code>, <code>size</code>, and
<code>list</code>.</p>
<p>An FTP client endpoint is defined using the parameters <code>protocol</code> and <code>host</code>, and optionally the <code>port</code> and
<code>secureSocket</code>. Authentication configuration can be configured using the <code>secureSocket</code> parameter for basicAuth,
private key, or TrustStore/Keystore.</p>
<h5>Creating a client</h5>
<p>The following code creates an FTP client and perform I/O operations, which connects to the FTP server with Basic Auth.</p>
<pre><code class="language-ballerina">import ballerina/ftp;

// Define FTP client configuration
ftp:ClientEndpointConfig ftpConfig = {
    protocol: ftp:FTP,
    host: &quot;&lt;The FTP host&gt;&quot;,
    port: &lt;The FTP port&gt;,
    secureSocket: {
        basicAuth: {
            username: &quot;&lt;The FTP username&gt;&quot;,
            password: &quot;&lt;The FTP passowrd&gt;&quot;
        }
    }
};

// Create FTP client
ftp:Client ftpClient = new(ftpConfig);
</code></pre>
<h5>Creating a directory</h5>
<p>The following code creates a directory in the remote FTP server.</p>
<pre><code class="language-ballerina">error? mkdirResponse = ftpClient-&gt;mkdir(&quot;&lt;The directory path&gt;&quot;);
if (mkdirResponse is error) {
    log:printError(&quot;Error occured in creating directory&quot;, mkdirResponse);
    return;
}
</code></pre>
<h5>Uploading file to a remote server</h5>
<p>The following code uploads a file to a remote FTP server.</p>
<pre><code class="language-ballerina">io:ReadableByteChannel|error summaryChannel
    = io:openReadableFile(&quot;&lt;The local data source path&gt;&quot;);
if(summaryChannel is io:ReadableByteChannel){
    error? putResponse = ftpClient-&gt;put(&quot;&lt;The resource path&gt;&quot;, summaryChannel);   
    if(putResponse is error) {
        log:printError(&quot;Error occured in uploading content&quot;, putResponse);
        return;
    }
}
</code></pre>
<h5>Compressing and uploading a file to a remote server</h5>
<p>The following code compresses and uploads a file to a remote FTP server.</p>
<pre><code class="language-ballerina">io:ReadableByteChannel|error inputChannel
    = io:openReadableFile(&quot;&lt;Local data source path&gt;&quot;);
if (inputChannel is io:ReadableByteChannel) {
    // Set the optional boolean flag as 'true' to compress before uploading
    error? compressedPutResponse = ftpClient-&gt;put(&quot;&lt;Resource path&gt;&quot;,
        inputChannel, true);   
    if (compressedPutResponse is error) {
        log:printError(&quot;Error occured in uploading content&quot;,
            compressedPutResponse);
        return;
    }
}
</code></pre>
<h5>Getting the size of a remote file</h5>
<p>The following code get and size of a file of a file in remote FTP server.</p>
<pre><code class="language-ballerina">var sizeResponse = ftpClient-&gt;size(&quot;&lt;The resource path&gt;&quot;);
if (sizeResponse is int) {
    log:printInfo(&quot;File size: &quot; + sizeResponse.toString());
} else {
    log:printError(&quot;Error occured in retrieving size&quot;, sizeResponse);
    return;
}
</code></pre>
<h5>Reading the content of a remote file</h5>
<p>The following code read the content of a file in remote FTP server.</p>
<pre><code class="language-ballerina">var getResponse = ftpClient-&gt;get(&quot;&lt;The file path&gt;&quot;);
if (getResponse is io:ReadableByteChannel) {
    io:ReadableCharacterChannel? characters
        = new io:ReadableCharacterChannel(getResponse, &quot;utf-8&quot;);
    if (characters is io:ReadableCharacterChannel) {
        var output = characters.read(&lt;No of characters to read&gt;);
        if (output is string) {
            log:printInfo(&quot;File content: &quot; + output);
        } else {
            log:printError(&quot;Error occured in retrieving content&quot;, output);
            return;
        }
        var closeResult = characters.close();
        if (closeResult is error) {
            log:printError(&quot;Error occurred while closing the channel&quot;,
                closeResult);
            return;
        }
    }
} else {
    log:printError(&quot;Error occured in retrieving content&quot;, getResponse);
    return;
}
</code></pre>
<h5>Renaming or moving a remote file to another remote location in a same FTP server</h5>
<p>The following rename or move remote a file to another location in the same remote FTP server.</p>
<pre><code class="language-ballerina">error? renameResponse = ftpClient-&gt;rename(&quot;&lt;The source file path&gt;&quot;,
    &quot;&lt;The destination file path&gt;&quot;);
if (renameResponse is error) {
    log:printError(&quot;Error occurred while renaming the file&quot;, renameResponse);
    return;
}
</code></pre>
<h5>Deleting a remote file</h5>
<p>The following delete a remote file in a remote FTP server.</p>
<pre><code class="language-ballerina">error? deleteResponse = ftpClient-&gt;delete(&quot;&lt;The resource path&gt;&quot;);
if (deleteResponse is error) {
    log:printError(&quot;Error occurred while deleting a file&quot;, deleteResponse);
    return;
}
</code></pre>
<h5>Removing a directory from a remote server</h5>
<p>The following remove a directory in a remote FTP server.</p>
<pre><code class="language-ballerina">var rmdirResponse = ftpClient-&gt;rmdir(&quot;&lt;The directory path&gt;&quot;);
if (rmdirResponse is error) {
    io:println(&quot;Error occured in removing directory.&quot;, rmdirResponse); 
    return;
}
</code></pre>
<p>###FTP Listener</p>
<p>The <code>ftp:Listener</code> is used to listen to a remote FTP location and trigger a <code>WatchEvent</code> type of event when new
files are added to or deleted from the directory. The <code>fileResource</code> function is invoked when a new file is added
and/or deleted.</p>
<p>An FTP listener endpoint is defined using the mandatory parameters <code>protocol</code>, <code>host</code> and  <code>path</code>. Authentication
configuration can be done using <code>secureSocket</code> and polling interval can be configured using <code>pollingInterval</code>.
Default polling interval is 60 seconds.</p>
<p>The <code>fileNamePattern</code> parameter can be used to define the type of files the FTP listener endpoint will listen to.
For instance, if the listener gets invoked for text files, the value <code>(.*).txt</code> can be given for the config.</p>
<h5>Creating a listener</h5>
<p>The FTP Listener can be used to listen to a remote directory. It will keep listening to the specified directory and
periodically notify on file addition and deletion.</p>
<pre><code class="language-ballerina">import ballerina/ftp;
import ballerina/log;

listener ftp:Listener remoteServer = new({
    protocol: ftp:FTP,
    host: &quot;&lt;The FTP host&gt;&quot;,
    secureSocket: {
        basicAuth: {
            username: &quot;&lt;The FTP username&gt;&quot;,
            password: &quot;&lt;The FTP passowrd&gt;&quot;
        }
    },
    port: &lt;The FTP port&gt;,
    path: &quot;&lt;The remote FTP direcotry location&gt;&quot;,
    pollingInterval: &lt;Polling interval&gt;,
    fileNamePattern: &quot;&lt;File type&gt;&quot;
});

service ftpServerConnector on remoteServer {
    resource function onFileChange(ftp:WatchEvent fileEvent) {

        foreach ftp:FileInfo addedFile in fileEvent.addedFiles {
            log:printInfo(&quot;Added file path: &quot; + addedFile.path);
        }
        foreach string deletedFile in fileEvent.deletedFiles {
            log:printInfo(&quot;Deleted file path: &quot; + deletedFile);
        }
    }
}
</code></pre>
<p>For information on the operations, which you can perform with this module, see the <a href="#records"><strong>Records</strong></a> below.</p>


    
        <section class="method-content" id="records">
            <div class="main-method-title here">
                <a class="url-link" href="#records">
                    <img class="url-link-img" src="../html-template-resources/images/link.svg">
                </a>
                <h2> Records </h2>
            </div>
            <table>
                
                    <tr>
                        <td class="module-title truncate records" id="BasicAuth" title="BasicAuth">
                            <a class="records " href="records/BasicAuth.html">BasicAuth</a>
                        </td>
                        <td class="module-desc">
                            
                            <p>A record for providing <code>BasicAuth</code> related configurations</p> 
                        </td>
                    </tr>
                
                    <tr>
                        <td class="module-title truncate records" id="ClientEndpointConfig" title="ClientEndpointConfig">
                            <a class="records " href="records/ClientEndpointConfig.html">ClientEndpointConfig</a>
                        </td>
                        <td class="module-desc">
                            
                            <p>Configuration for FTP client endpoint.</p> 
                        </td>
                    </tr>
                
                    <tr>
                        <td class="module-title truncate records" id="FTPError" title="FTPError">
                            <a class="records " href="records/FTPError.html">FTPError</a>
                        </td>
                        <td class="module-desc">
                            
                            
                        </td>
                    </tr>
                
                    <tr>
                        <td class="module-title truncate records" id="FileInfo" title="FileInfo">
                            <a class="records " href="records/FileInfo.html">FileInfo</a>
                        </td>
                        <td class="module-desc">
                            
                            <p>This provides metadata information for newly added files.</p> 
                        </td>
                    </tr>
                
                    <tr>
                        <td class="module-title truncate records" id="InputContent" title="InputContent">
                            <a class="records " href="records/InputContent.html">InputContent</a>
                        </td>
                        <td class="module-desc">
                            
                            <p>Provides configuration for the input given for FTP <code>put</code> and <code>append</code> operations</p> 
                        </td>
                    </tr>
                
                    <tr>
                        <td class="module-title truncate records" id="KeyStore" title="KeyStore">
                            <a class="records " href="records/KeyStore.html">KeyStore</a>
                        </td>
                        <td class="module-desc">
                            
                            <p>A record for providing <code>Keystore</code> related configurations</p> 
                        </td>
                    </tr>
                
                    <tr>
                        <td class="module-title truncate records" id="ListenerConfig" title="ListenerConfig">
                            <a class="records " href="records/ListenerConfig.html">ListenerConfig</a>
                        </td>
                        <td class="module-desc">
                            
                            <p>Configuration for FTP listener endpoint.</p> 
                        </td>
                    </tr>
                
                    <tr>
                        <td class="module-title truncate records" id="PrivateKey" title="PrivateKey">
                            <a class="records " href="records/PrivateKey.html">PrivateKey</a>
                        </td>
                        <td class="module-desc">
                            
                            <p>A record for providing <code>PrivateKey</code> related configurations</p> 
                        </td>
                    </tr>
                
                    <tr>
                        <td class="module-title truncate records" id="SecureSocket" title="SecureSocket">
                            <a class="records " href="records/SecureSocket.html">SecureSocket</a>
                        </td>
                        <td class="module-desc">
                            
                            <p>Provides configurations for facilitating secure communication with a remote FTP server</p> 
                        </td>
                    </tr>
                
                    <tr>
                        <td class="module-title truncate records" id="TrustStore" title="TrustStore">
                            <a class="records " href="records/TrustStore.html">TrustStore</a>
                        </td>
                        <td class="module-desc">
                            
                            <p>A record for providing <code>Truststore</code> related configurations</p> 
                        </td>
                    </tr>
                
                    <tr>
                        <td class="module-title truncate records" id="WatchEvent" title="WatchEvent">
                            <a class="records " href="records/WatchEvent.html">WatchEvent</a>
                        </td>
                        <td class="module-desc">
                            
                            <p>This represents the latest status change of the server from the last status change.</p> 
                        </td>
                    </tr>
                
            </table>
        </section>
    

    

    

    
    <section class="method-content" id="clients">
        <div class="main-method-title here">
            <a class="url-link" href="#clients">
                <img class="url-link-img" src="../html-template-resources/images/link.svg">
            </a>
            <h2> Clients </h2>
        </div>
        <table>
            
            <tr>
                <td class="module-title truncate clients" id="Client" title="Client">
                    <a class="clients " href="clients/Client.html">Client</a>
                </td>
                <td class="module-desc">
                    
                    <p>Represents an FTP client that intracts with an FTP server</p> 
                </td>
            </tr>
            
        </table>
    </section>
    

    
    <section class="method-content" id="listeners">
        <div class="main-method-title here">
            <a class="url-link" href="#listeners">
                <img class="url-link-img" src="../html-template-resources/images/link.svg">
            </a>
            <h2> Listeners </h2>
        </div>
        <table>
            
            <tr>
                <td class="module-title truncate listeners" id="Listener" title="Listener">
                    <a class="listeners " href="listeners/Listener.html">Listener</a>
                </td>
                <td class="module-desc">
                    
                    <p>Represents a service listener that monitors the FTP location.</p> 
                </td>
            </tr>
            
        </table>
    </section>
    


    


    
    <section class="method-content" id="constants">
        <div class="main-method-title here">
            <a class="url-link" href="#constants">
                <img class="url-link-img" src="../html-template-resources/images/link.svg">
            </a>
            <h2> Constants </h2>
        </div>
        <table>
            
            <tr>
                <td class="module-title truncate constant" id="FTP" title="FTP">
                    <a class="constant " href="constants.html#FTP">FTP</a>
                </td>
                <td class="module-desc">
                    
                    <p>Underlying communication happens using FTP</p> 
                </td>
            </tr>
            
            <tr>
                <td class="module-title truncate constant" id="SFTP" title="SFTP">
                    <a class="constant " href="constants.html#SFTP">SFTP</a>
                </td>
                <td class="module-desc">
                    
                    <p>Underlying communication happens using SFTP</p> 
                </td>
            </tr>
            
            <tr>
                <td class="module-title truncate constant" id="FTPS" title="FTPS">
                    <a class="constant " href="constants.html#FTPS">FTPS</a>
                </td>
                <td class="module-desc">
                    
                    <p>Underlying communication happens using FTPS</p> 
                </td>
            </tr>
            
        </table>
    </section>
    


    

    

    

        </div>
        </div>
    </div>
</body>

<script>
let mainNavLinks = document.querySelectorAll(".primary-list.module ul li a");
let mainSections = document.querySelectorAll(".main-wrapper section.method-content");

let lastId;
let cur = [];

let contentWrapper = document.querySelector(".content-wrapper");
contentWrapper.addEventListener("scroll", event => {
  let fromTop = contentWrapper.scrollTop;

  mainNavLinks.forEach(link => {
    let section = document.querySelector("#" + link.attributes.getNamedItem("data").textContent);

    if (
      section.offsetTop <= fromTop &&
      section.offsetTop + section.offsetHeight > fromTop
    ) {
      link.classList.add("current");
    } else {
      link.classList.remove("current");
    }
  });
});

</script>
<script>
function menuLinkClick() {
  if(window.matchMedia("(max-width: 600px)").matches) {
    document.getElementsByClassName("navi-wrapper")[0].style.display = "none";
  }
}
function displayMenu() {
  var nav = document.getElementsByClassName("navi-wrapper")[0];
  var content = document.getElementsByClassName("content-wrapper")[0];
  if (nav.style.display === "none" || nav.style.display === "") {
    nav.style.display = "block";
    content.style.marginLeft = "210px";
  } else {
    nav.style.display = "none";
    content.style.marginLeft = "0px";
  }
}
</script>
<script>
    var rootPath = "../";
</script>
<script src="../doc-search/search-data.js"></script>
<script src="../doc-search/search.js"></script>
<script>
    window.onload = (event) => {
        ballerinaHighlighter.highlightSnippets();
    };
</script>


