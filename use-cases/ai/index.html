<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="description" content="Ballerina is the best language to write your AI-powered applications that consume LLMs and other generative models."/><meta name="author" content="WSO2 LLC"/><meta name="keywords" content="ballerina, learn, documentation, docs, programming language"/><link rel="shortcut icon" href="/img/favicon.ico"/><title>Ballerina for AI - The Ballerina programming language</title><meta property="og:type" content="article"/><meta property="og:title" content="Ballerina for AI - The Ballerina programming language"/><meta property="og:description" content="Ballerina is the best language to write your AI-powered applications that consume LLMs and other generative models."/><meta property="og:title" content="Ballerina for AI - The Ballerina programming language"/><meta property="og:image" content="https://ballerina.io/images/ai-sm-banner.png"/><meta property="og:description" itemProp="image" content="Ballerina is the best language to write your AI-powered applications that consume LLMs and other generative models."/><meta name="twitter:site" content="@ballerinalang"/><meta name="twitter:creator" content="@ballerinalang"/><meta name="twitter:title" content="Ballerina for AI - The Ballerina programming language"/><meta name="twitter:card" content="summary_large_image"/><meta property="twitter:description" content="Ballerina is the best language to write your AI-powered applications that consume LLMs and other generative models."/><meta name="twitter:image" content="https://ballerina.io/images/ai-sm-banner.png"/><meta property="twitter:text:description" content="Ballerina is the best language to write your AI-powered applications that consume LLMs and other generative models."/><meta property="twitter:image" content="https://ballerina.io/images/ai-sm-banner.png"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.setAttributeNode(d.createAttribute('data-ot-ignore'));j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-PSL2TX4');</script><script type="text/javascript" crossorigin="true" src="https://cdn.jsdelivr.net/npm/@docsearch/js@alpha"></script><script src="https://cookie-cdn.cookiepro.com/scripttemplates/otSDKStub.js" type="text/javascript" charSet="UTF-8" data-domain-script="630ad396-5fd5-4745-92ae-2765dc8841ee" defer=""></script><meta name="next-head-count" content="25"/><meta charSet="utf-8"/><meta name="author" content="WSO2 LLC"/><meta http-equiv="X-Frame-Options" content="SAMEORIGIN"/><meta http-equiv="Content-Security-Policy" content="frame-ancestors &#x27;none&#x27;;"/><link rel="shortcut icon" href="/images/favicon.ico"/><link rel="stylesheet" href="/css/roboto.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css"/><link rel="stylesheet" href="/css/ballerina-search-button.css"/><link rel="stylesheet" href="/css/ballerina-search-modal.css"/><link rel="stylesheet" href="/css/ballerina-search-variables.css"/><link rel="stylesheet" href="/css/ballerina-search-style.css"/><link rel="preload" href="/_next/static/css/9bb35c8110b0fa38.css" as="style"/><link rel="stylesheet" href="/_next/static/css/9bb35c8110b0fa38.css" data-n-g=""/><link rel="preload" href="/_next/static/css/904815a200386385.css" as="style"/><link rel="stylesheet" href="/_next/static/css/904815a200386385.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-2e546c58924a690c.js" defer=""></script><script src="/_next/static/chunks/framework-79bce4a3a540b080.js" defer=""></script><script src="/_next/static/chunks/main-0ea70f422df5d19e.js" defer=""></script><script src="/_next/static/chunks/pages/_app-ba2391f08766dae9.js" defer=""></script><script src="/_next/static/chunks/7621-d6bcd83f463fef72.js" defer=""></script><script src="/_next/static/chunks/1058-de0b031bc614d462.js" defer=""></script><script src="/_next/static/chunks/8130-4f833ffdbe1dba0f.js" defer=""></script><script src="/_next/static/chunks/6084-4e54ad5efcb8d3b5.js" defer=""></script><script src="/_next/static/chunks/5530-11a262420fdd225c.js" defer=""></script><script src="/_next/static/chunks/6242-7c6681de385c0d0b.js" defer=""></script><script src="/_next/static/chunks/1726-d958e891b50f9478.js" defer=""></script><script src="/_next/static/chunks/pages/use-cases/ai-3fb4ff845daef086.js" defer=""></script><script src="/_next/static/MwLxl6yuzvomC2E2bUaRF/_buildManifest.js" defer=""></script><script src="/_next/static/MwLxl6yuzvomC2E2bUaRF/_ssgManifest.js" defer=""></script><script src="/_next/static/MwLxl6yuzvomC2E2bUaRF/_middlewareManifest.js" defer=""></script></head><body><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PSL2TX4" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div id="__next" data-reactroot=""><div class="main-wrapper usecases vstack gap-0"><div class="wrap-page-content"><div class="community-wrap-row row"><div class="col-sm-12"><div class="pageHeader pageContentRow integration row"><div class="col-12"><div class="container"><h1>Ballerina for AI</h1></div></div></div><div class="pageContentRow integration row"><div class="col-12"><div class="container"><div class="row"><div class="col-lg-5 col-12"><div><p class="Intro_introText2__hm6Mh">AI is no longer just trained — it&#x27;s integrated.</p><p class="Intro_introText3__58Zrv">Ballerina is purpose-built for integration, making it an ideal choice for bringing AI into your applications. With built-in abstractions designed for invoking your favourite large language models and other generative AI technologies, Ballerina simplifies and streamlines AI integration like never before.</p><p><a href="/downloads/" class="Intro_cDownload__b07um">Download Ballerina</a></p></div></div><div class="Intro_introImg__Rjij5 col-lg-7 col-12"><img src="/images/Vectors-05.png" alt="AI"/></div></div></div></div></div><div class="pageContentRow integration code odd row"><div class="col-12"><div class="container"><div class="row"><div class="Code_box__nw1pZ col-12"><h2 id="why-is-ballerina-the-way-you-should-write-ai-applications" class="section"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-link-45deg mdButton pe-2" viewBox="0 0 16 16"><path d="M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1.002 1.002 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4.018 4.018 0 0 1-.128-1.287z"></path><path d="M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243L6.586 4.672z"></path></svg>Why is Ballerina the way you should write AI applications?</h2></div></div><div class="row"><div class="Code_box__nw1pZ col-lg-5 col-md-5 col-12"><div><p>Python remains the go-to for machine learning, data science, and analytics—but integrating AI into modern business applications is a different challenge. It’s now about invoking LLMs, prompt engineering, and embedding AI into workflows. Ballerina, a cloud-native language built for integration, offers powerful abstractions to connect with LLMs and seamlessly weave AI into your applications to deliver real value.</p><div class="Code_dVersion__eXhCf"><span>HR Retrieval Augmented Generation Application</span><a href="https://github.com/xlight05/ai-samples/blob/usecase-samples/hr_agent_rag_app/main.bal" class="Code_cDownload__AYiFC" target="_blank" rel="noreferrer">View code on GitHub</a></div></div></div><div class="Code_box__nw1pZ col-lg-7 col-md-7 col-12"><div id="code-container" class="d-none d-lg-block"><div id="left_panel"><p class="title-old">Code</p><div class="code-panel"><pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><button type="button" title="Copy" aria-label="Copy" data="service /agent on hrAgent {
    resource function post chat(@http:Payload agent:ChatReqMessage request) returns agent:ChatRespMessage|error {
        string query = request.message;
        float[] embeddings = check getEmbeddings(query);
        string retrievedChunks = check retrieveChunksFromPinecone(embeddings);
        string hRAssistantResponse = check getHRAssistantResponse(query, retrievedChunks);
        return {message: hRAssistantResponse};
    }
}" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);this.setAttribute(&#x27;title&#x27;, &#x27;Copied&#x27;);this.setAttribute(&#x27;aria-label&#x27;, &#x27;Copied&#x27;);window.setTimeout(() => {this.classList.remove(&#x27;rehype-pretty-copied&#x27;);this.setAttribute(&#x27;title&#x27;, &#x27;Copy&#x27;);this.setAttribute(&#x27;aria-label&#x27;, &#x27;Copy&#x27;);}, 3000);"><span class="ready"></span><span class="success"></span></button><span class="line"><span style="color:#D73A49">service</span><span style="color:#6F42C1"> /agent</span><span style="color:#D73A49"> on</span><span style="color:#24292E"> hrAgent {</span></span>
<span class="line"><span style="color:#D73A49">    resource</span><span style="color:#D73A49"> function</span><span style="color:#6F42C1"> post</span><span style="color:#6F42C1"> chat</span><span style="color:#24292E">(@</span><span style="color:#005CC5">http</span><span style="color:#24292E">:</span><span style="color:#005CC5">Payload</span><span style="color:#E36209"> agent</span><span style="color:#D73A49">:</span><span style="color:#24292E">ChatReqMessage request) </span><span style="color:#D73A49">returns</span><span style="color:#24292E"> agent</span><span style="color:#D73A49">:</span><span style="color:#24292E">ChatRespMessage</span><span style="color:#D73A49">|error</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#005CC5">        string</span><span style="color:#24292E"> query </span><span style="color:#D73A49">=</span><span style="color:#24292E"> request.message;</span></span>
<span class="line"><span style="color:#005CC5">        float</span><span style="color:#24292E">[] embeddings </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> check</span><span style="color:#6F42C1"> getEmbeddings</span><span style="color:#24292E">(</span><span style="color:#E36209">query</span><span style="color:#24292E">);</span></span>
<span class="line"><span style="color:#005CC5">        string</span><span style="color:#24292E"> retrievedChunks </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> check</span><span style="color:#6F42C1"> retrieveChunksFromPinecone</span><span style="color:#24292E">(</span><span style="color:#E36209">embeddings</span><span style="color:#24292E">);</span></span>
<span class="line"><span style="color:#005CC5">        string</span><span style="color:#24292E"> hRAssistantResponse </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> check</span><span style="color:#6F42C1"> getHRAssistantResponse</span><span style="color:#24292E">(</span><span style="color:#E36209">query</span><span style="color:#24292E">, </span><span style="color:#E36209">retrievedChunks</span><span style="color:#24292E">);</span></span>
<span class="line"><span style="color:#D73A49">        return</span><span style="color:#24292E"> {message</span><span style="color:#D73A49">:</span><span style="color:#24292E"> hRAssistantResponse};</span></span>
<span class="line"><span style="color:#24292E">    }</span></span>
<span class="line"><span style="color:#24292E">}</span></span><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 448 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg' style='float: right;'%3E%3Ctitle%3ECopy%3C/title%3E%3Cpath d='M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z'%3E%3C/path%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 512 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg'%3E%3Ctitle%3ECopied%3C/title%3E%3Cpath d='M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z'%3E%3C/path%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {background-color: transparent;border: none;right: 1px;padding: 0;width: 16px;height: 16px;display: flex;margin-top: -20px;margin-right: 8px;position: absolute;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}.Code_codeSnippet__ayQ3y button.rehype-pretty-copy {margin-top: -10px;}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></pre></div></div><div id="right_panel"><div id="drag"><svg width="46" height="46" viewBox="0 0 46 46" fill="none" xmlns="http://www.w3.org/2000/svg" class="absolute button-wrap"><circle cx="23" cy="23" r="23" fill="#20b6b0"></circle><path d="M10.4375 22.5625C10.4375 22.2988 10.5254 22.0645 10.7012 21.8887L16.3262 16.2637C16.6777 15.8828 17.293 15.8828 17.6445 16.2637C18.0254 16.6152 18.0254 17.2305 17.6445 17.582L12.6934 22.5625L17.6445 27.5137C18.0254 27.8652 18.0254 28.4805 17.6445 28.832C17.293 29.2129 16.6777 29.2129 16.3262 28.832L10.7012 23.207C10.5254 23.0312 10.4375 22.7969 10.4375 22.5625Z" fill="white"></path><path d="M35.5625 22.5625C35.5625 22.2988 35.4746 22.0645 35.2988 21.8887L29.6738 16.2637C29.3223 15.8828 28.707 15.8828 28.3555 16.2637C27.9746 16.6152 27.9746 17.2305 28.3555 17.582L33.3066 22.5625L28.3555 27.5137C27.9746 27.8652 27.9746 28.4805 28.3555 28.832C28.707 29.2129 29.3223 29.2129 29.6738 28.832L35.2988 23.207C35.4746 23.0312 35.5625 22.7969 35.5625 22.5625Z" fill="white"></path></svg></div><p class="title-new">Diagram</p><div class="code-panel diagram-multi" style="text-align:center"></div></div></div><div id="code-tab" class="d-block d-lg-none"><ul class="mb-3 codeTabs nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><button type="button" id="codeTab1-tab-code" role="tab" data-rr-ui-event-key="code" aria-controls="codeTab1-tabpane-code" aria-selected="true" class="nav-link active">Code</button></li><li class="nav-item" role="presentation"><button type="button" id="codeTab1-tab-diagram" role="tab" data-rr-ui-event-key="diagram" aria-controls="codeTab1-tabpane-diagram" aria-selected="false" tabindex="-1" class="nav-link">Diagram</button></li></ul><div class="tab-content"><div role="tabpanel" id="codeTab1-tabpane-code" aria-labelledby="codeTab1-tab-code" class="fade tab-pane active show"><div class="Code_codeSnippet__qfa0_"><div class="highlight"><pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><button type="button" title="Copy" aria-label="Copy" data="service /agent on hrAgent {
    resource function post chat(@http:Payload agent:ChatReqMessage request) returns agent:ChatRespMessage|error {
        string query = request.message;
        float[] embeddings = check getEmbeddings(query);
        string retrievedChunks = check retrieveChunksFromPinecone(embeddings);
        string hRAssistantResponse = check getHRAssistantResponse(query, retrievedChunks);
        return {message: hRAssistantResponse};
    }
}" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);this.setAttribute(&#x27;title&#x27;, &#x27;Copied&#x27;);this.setAttribute(&#x27;aria-label&#x27;, &#x27;Copied&#x27;);window.setTimeout(() => {this.classList.remove(&#x27;rehype-pretty-copied&#x27;);this.setAttribute(&#x27;title&#x27;, &#x27;Copy&#x27;);this.setAttribute(&#x27;aria-label&#x27;, &#x27;Copy&#x27;);}, 3000);"><span class="ready"></span><span class="success"></span></button><span class="line"><span style="color:#D73A49">service</span><span style="color:#6F42C1"> /agent</span><span style="color:#D73A49"> on</span><span style="color:#24292E"> hrAgent {</span></span>
<span class="line"><span style="color:#D73A49">    resource</span><span style="color:#D73A49"> function</span><span style="color:#6F42C1"> post</span><span style="color:#6F42C1"> chat</span><span style="color:#24292E">(@</span><span style="color:#005CC5">http</span><span style="color:#24292E">:</span><span style="color:#005CC5">Payload</span><span style="color:#E36209"> agent</span><span style="color:#D73A49">:</span><span style="color:#24292E">ChatReqMessage request) </span><span style="color:#D73A49">returns</span><span style="color:#24292E"> agent</span><span style="color:#D73A49">:</span><span style="color:#24292E">ChatRespMessage</span><span style="color:#D73A49">|error</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#005CC5">        string</span><span style="color:#24292E"> query </span><span style="color:#D73A49">=</span><span style="color:#24292E"> request.message;</span></span>
<span class="line"><span style="color:#005CC5">        float</span><span style="color:#24292E">[] embeddings </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> check</span><span style="color:#6F42C1"> getEmbeddings</span><span style="color:#24292E">(</span><span style="color:#E36209">query</span><span style="color:#24292E">);</span></span>
<span class="line"><span style="color:#005CC5">        string</span><span style="color:#24292E"> retrievedChunks </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> check</span><span style="color:#6F42C1"> retrieveChunksFromPinecone</span><span style="color:#24292E">(</span><span style="color:#E36209">embeddings</span><span style="color:#24292E">);</span></span>
<span class="line"><span style="color:#005CC5">        string</span><span style="color:#24292E"> hRAssistantResponse </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> check</span><span style="color:#6F42C1"> getHRAssistantResponse</span><span style="color:#24292E">(</span><span style="color:#E36209">query</span><span style="color:#24292E">, </span><span style="color:#E36209">retrievedChunks</span><span style="color:#24292E">);</span></span>
<span class="line"><span style="color:#D73A49">        return</span><span style="color:#24292E"> {message</span><span style="color:#D73A49">:</span><span style="color:#24292E"> hRAssistantResponse};</span></span>
<span class="line"><span style="color:#24292E">    }</span></span>
<span class="line"><span style="color:#24292E">}</span></span><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 448 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg' style='float: right;'%3E%3Ctitle%3ECopy%3C/title%3E%3Cpath d='M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z'%3E%3C/path%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 512 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg'%3E%3Ctitle%3ECopied%3C/title%3E%3Cpath d='M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z'%3E%3C/path%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {background-color: transparent;border: none;right: 1px;padding: 0;width: 16px;height: 16px;display: flex;margin-top: -20px;margin-right: 8px;position: absolute;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}.Code_codeSnippet__ayQ3y button.rehype-pretty-copy {margin-top: -10px;}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></pre></div></div></div><div role="tabpanel" id="codeTab1-tabpane-diagram" aria-labelledby="codeTab1-tab-diagram" class="fade tab-pane"><img src="/images/ai_project_comp.png" width="381" height="540" alt="Diagram"/></div></div></div></div></div></div></div></div><div class="pageContentRow integration code row"><div class="col-12"><div class="container"><div class="row"><div class="Code_box__nw1pZ col-12"><h2 id="ballerina-ai-agent" class="section"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-link-45deg mdButton pe-2" viewBox="0 0 16 16"><path d="M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1.002 1.002 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4.018 4.018 0 0 1-.128-1.287z"></path><path d="M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243L6.586 4.672z"></path></svg>Seamless integrations with Ballerina AI agents</h2></div></div><div class="row"><div class="Code_box__nw1pZ col-lg-5 col-md-5 col-12"><div><p>Ballerina&#x27;s AI Agent feature enables your applications to understand and execute natural language commands by leveraging the reasoning capabilities of LLMs. It empowers your apps to act autonomously—automating workflows, making decisions, and driving intelligent outcomes.</p><div class="Code_dVersion__eXhCf"><span>Personal Assistant with Calendar and Email Management</span><a href="https://github.com/ballerina-guides/ai-samples/blob/main/personal_ai_assistant_agent" class="Code_cDownload__AYiFC" target="_blank" rel="noreferrer">View code on GitHub</a></div></div></div><div class="Code_box__nw1pZ col-lg-7 col-md-7 col-12"><div id="agent-code-container" class="d-none d-lg-block"><div id="agent-left_panel"><p class="title-old">Code</p><div class="code-panel"><pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><button type="button" title="Copy" aria-label="Copy" data="agent:SystemPrompt systemPrompt = {
    role: &#x22;Personal AI Assistant&#x22;,
    instructions: string &#x60;You are Nova, a smart AI assistant helping &#x27;${userName}&#x27; stay organized and efficient.

Your primary responsibilities include:
- Calendar Management: Scheduling, updating, and retrieving events from the calendar as per the user&#x27;s needs.
- Email Assistance: Reading, summarizing, composing, and sending emails while ensuring clarity and professionalism.
- Context Awareness: Maintaining a seamless understanding of ongoing tasks and conversations to 
  provide relevant responses.
- Privacy &#x26; Security: Handling user data responsibly, ensuring sensitive information is kept confidential,
  and confirming actions before executing them.

Guidelines:
- Respond in a natural, friendly, and professional tone.
- Always confirm before making changes to the user&#x27;s calendar or sending emails.
- Provide concise summaries when retrieving information unless the user requests details.
- Prioritize clarity, efficiency, and user convenience in all tasks.&#x60;
};

final agent:AzureOpenAiModel azureOpenAiModel = check new (serviceUrl, apiKey, deploymentId, apiVersion);
final agent:Agent personalAiAssistant = check new (systemPrompt = systemPrompt, model = azureOpenAiModel,
    tools = [readEmails, sendEmail, getCalanderEvents, createCalanderEvent, getCurrentDate]
);

service /personalAiAssistant on new http:Listener(9090) {
    resource function post chat(@http:Payload agent:ChatReqMessage request) returns agent:ChatRespMessage|error {
        string agentResponse = check personalAiAssistant->run(request.message);
        return {message: agentResponse};
    }
}" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);this.setAttribute(&#x27;title&#x27;, &#x27;Copied&#x27;);this.setAttribute(&#x27;aria-label&#x27;, &#x27;Copied&#x27;);window.setTimeout(() => {this.classList.remove(&#x27;rehype-pretty-copied&#x27;);this.setAttribute(&#x27;title&#x27;, &#x27;Copy&#x27;);this.setAttribute(&#x27;aria-label&#x27;, &#x27;Copy&#x27;);}, 3000);"><span class="ready"></span><span class="success"></span></button><span class="line"><span style="color:#24292E">agent</span><span style="color:#D73A49">:</span><span style="color:#24292E">SystemPrompt systemPrompt </span><span style="color:#D73A49">=</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#24292E">    role</span><span style="color:#D73A49">:</span><span style="color:#032F62"> "Personal AI Assistant"</span><span style="color:#24292E">,</span></span>
<span class="line"><span style="color:#24292E">    instructions</span><span style="color:#D73A49">:</span><span style="color:#24292E"> string </span><span style="color:#032F62">`You are Nova, a smart AI assistant helping '${</span><span style="color:#24292E">userName</span><span style="color:#032F62">}' stay organized and efficient.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#032F62">Your primary responsibilities include:</span></span>
<span class="line"><span style="color:#032F62">- Calendar Management: Scheduling, updating, and retrieving events from the calendar as per the user's needs.</span></span>
<span class="line"><span style="color:#032F62">- Email Assistance: Reading, summarizing, composing, and sending emails while ensuring clarity and professionalism.</span></span>
<span class="line"><span style="color:#032F62">- Context Awareness: Maintaining a seamless understanding of ongoing tasks and conversations to </span></span>
<span class="line"><span style="color:#032F62">  provide relevant responses.</span></span>
<span class="line"><span style="color:#032F62">- Privacy &#x26; Security: Handling user data responsibly, ensuring sensitive information is kept confidential,</span></span>
<span class="line"><span style="color:#032F62">  and confirming actions before executing them.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#032F62">Guidelines:</span></span>
<span class="line"><span style="color:#032F62">- Respond in a natural, friendly, and professional tone.</span></span>
<span class="line"><span style="color:#032F62">- Always confirm before making changes to the user's calendar or sending emails.</span></span>
<span class="line"><span style="color:#032F62">- Provide concise summaries when retrieving information unless the user requests details.</span></span>
<span class="line"><span style="color:#032F62">- Prioritize clarity, efficiency, and user convenience in all tasks.`</span></span>
<span class="line"><span style="color:#24292E">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">final</span><span style="color:#24292E"> agent</span><span style="color:#D73A49">:</span><span style="color:#24292E">AzureOpenAiModel azureOpenAiModel </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> check</span><span style="color:#D73A49"> new</span><span style="color:#24292E"> (</span><span style="color:#E36209">serviceUrl</span><span style="color:#24292E">, </span><span style="color:#E36209">apiKey</span><span style="color:#24292E">, </span><span style="color:#E36209">deploymentId</span><span style="color:#24292E">, </span><span style="color:#E36209">apiVersion</span><span style="color:#24292E">);</span></span>
<span class="line"><span style="color:#D73A49">final</span><span style="color:#24292E"> agent</span><span style="color:#D73A49">:</span><span style="color:#24292E">Agent personalAiAssistant </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> check</span><span style="color:#D73A49"> new</span><span style="color:#24292E"> (</span><span style="color:#E36209">systemPrompt</span><span style="color:#D73A49"> =</span><span style="color:#24292E"> systemPrompt, </span><span style="color:#E36209">model</span><span style="color:#D73A49"> =</span><span style="color:#24292E"> azureOpenAiModel,</span></span>
<span class="line"><span style="color:#E36209">    tools</span><span style="color:#D73A49"> =</span><span style="color:#24292E"> [readEmails, sendEmail, getCalanderEvents, createCalanderEvent, getCurrentDate]</span></span>
<span class="line"><span style="color:#24292E">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">service</span><span style="color:#6F42C1"> /personalAiAssistant</span><span style="color:#D73A49"> on</span><span style="color:#D73A49"> new</span><span style="color:#24292E"> http:Listener(</span><span style="color:#005CC5">9090</span><span style="color:#24292E">) {</span></span>
<span class="line"><span style="color:#D73A49">    resource</span><span style="color:#D73A49"> function</span><span style="color:#6F42C1"> post</span><span style="color:#6F42C1"> chat</span><span style="color:#24292E">(@</span><span style="color:#005CC5">http</span><span style="color:#24292E">:</span><span style="color:#005CC5">Payload</span><span style="color:#E36209"> agent</span><span style="color:#D73A49">:</span><span style="color:#24292E">ChatReqMessage request) </span><span style="color:#D73A49">returns</span><span style="color:#24292E"> agent</span><span style="color:#D73A49">:</span><span style="color:#24292E">ChatRespMessage</span><span style="color:#D73A49">|error</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#005CC5">        string</span><span style="color:#24292E"> agentResponse </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> check</span><span style="color:#24292E"> personalAiAssistant</span><span style="color:#D73A49">-></span><span style="color:#6F42C1">run</span><span style="color:#24292E">(request.message);</span></span>
<span class="line"><span style="color:#D73A49">        return</span><span style="color:#24292E"> {message</span><span style="color:#D73A49">:</span><span style="color:#24292E"> agentResponse};</span></span>
<span class="line"><span style="color:#24292E">    }</span></span>
<span class="line"><span style="color:#24292E">}</span></span><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 448 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg' style='float: right;'%3E%3Ctitle%3ECopy%3C/title%3E%3Cpath d='M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z'%3E%3C/path%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 512 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg'%3E%3Ctitle%3ECopied%3C/title%3E%3Cpath d='M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z'%3E%3C/path%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {background-color: transparent;border: none;right: 1px;padding: 0;width: 16px;height: 16px;display: flex;margin-top: -20px;margin-right: 8px;position: absolute;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}.Code_codeSnippet__ayQ3y button.rehype-pretty-copy {margin-top: -10px;}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></pre></div></div><div id="agent-right_panel"><div id="agent-drag"><svg width="46" height="46" viewBox="0 0 46 46" fill="none" xmlns="http://www.w3.org/2000/svg" class="absolute button-wrap"><circle cx="23" cy="23" r="23" fill="#20b6b0"></circle><path d="M10.4375 22.5625C10.4375 22.2988 10.5254 22.0645 10.7012 21.8887L16.3262 16.2637C16.6777 15.8828 17.293 15.8828 17.6445 16.2637C18.0254 16.6152 18.0254 17.2305 17.6445 17.582L12.6934 22.5625L17.6445 27.5137C18.0254 27.8652 18.0254 28.4805 17.6445 28.832C17.293 29.2129 16.6777 29.2129 16.3262 28.832L10.7012 23.207C10.5254 23.0312 10.4375 22.7969 10.4375 22.5625Z" fill="white"></path><path d="M35.5625 22.5625C35.5625 22.2988 35.4746 22.0645 35.2988 21.8887L29.6738 16.2637C29.3223 15.8828 28.707 15.8828 28.3555 16.2637C27.9746 16.6152 27.9746 17.2305 28.3555 17.582L33.3066 22.5625L28.3555 27.5137C27.9746 27.8652 27.9746 28.4805 28.3555 28.832C28.707 29.2129 29.3223 29.2129 29.6738 28.832L35.2988 23.207C35.4746 23.0312 35.5625 22.7969 35.5625 22.5625Z" fill="white"></path></svg></div><p class="title-new">Diagram</p><div class="code-panel diagram"></div></div></div><div id="code-tab" class="d-block d-lg-none"><ul class="mb-3 codeTabs nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><button type="button" id="codeTab1-tab-code" role="tab" data-rr-ui-event-key="code" aria-controls="codeTab1-tabpane-code" aria-selected="true" class="nav-link active">Code</button></li><li class="nav-item" role="presentation"><button type="button" id="codeTab1-tab-diagram" role="tab" data-rr-ui-event-key="diagram" aria-controls="codeTab1-tabpane-diagram" aria-selected="false" tabindex="-1" class="nav-link">Diagram</button></li></ul><div class="tab-content"><div role="tabpanel" id="codeTab1-tabpane-code" aria-labelledby="codeTab1-tab-code" class="fade tab-pane active show"><div class="Code_codeSnippet__qfa0_"><div class="highlight"><pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><button type="button" title="Copy" aria-label="Copy" data="agent:SystemPrompt systemPrompt = {
    role: &#x22;Personal AI Assistant&#x22;,
    instructions: string &#x60;You are Nova, a smart AI assistant helping &#x27;${userName}&#x27; stay organized and efficient.

Your primary responsibilities include:
- Calendar Management: Scheduling, updating, and retrieving events from the calendar as per the user&#x27;s needs.
- Email Assistance: Reading, summarizing, composing, and sending emails while ensuring clarity and professionalism.
- Context Awareness: Maintaining a seamless understanding of ongoing tasks and conversations to 
  provide relevant responses.
- Privacy &#x26; Security: Handling user data responsibly, ensuring sensitive information is kept confidential,
  and confirming actions before executing them.

Guidelines:
- Respond in a natural, friendly, and professional tone.
- Always confirm before making changes to the user&#x27;s calendar or sending emails.
- Provide concise summaries when retrieving information unless the user requests details.
- Prioritize clarity, efficiency, and user convenience in all tasks.&#x60;
};

final agent:AzureOpenAiModel azureOpenAiModel = check new (serviceUrl, apiKey, deploymentId, apiVersion);
final agent:Agent personalAiAssistant = check new (systemPrompt = systemPrompt, model = azureOpenAiModel,
    tools = [readEmails, sendEmail, getCalanderEvents, createCalanderEvent, getCurrentDate]
);

service /personalAiAssistant on new http:Listener(9090) {
    resource function post chat(@http:Payload agent:ChatReqMessage request) returns agent:ChatRespMessage|error {
        string agentResponse = check personalAiAssistant->run(request.message);
        return {message: agentResponse};
    }
}" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);this.setAttribute(&#x27;title&#x27;, &#x27;Copied&#x27;);this.setAttribute(&#x27;aria-label&#x27;, &#x27;Copied&#x27;);window.setTimeout(() => {this.classList.remove(&#x27;rehype-pretty-copied&#x27;);this.setAttribute(&#x27;title&#x27;, &#x27;Copy&#x27;);this.setAttribute(&#x27;aria-label&#x27;, &#x27;Copy&#x27;);}, 3000);"><span class="ready"></span><span class="success"></span></button><span class="line"><span style="color:#24292E">agent</span><span style="color:#D73A49">:</span><span style="color:#24292E">SystemPrompt systemPrompt </span><span style="color:#D73A49">=</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#24292E">    role</span><span style="color:#D73A49">:</span><span style="color:#032F62"> "Personal AI Assistant"</span><span style="color:#24292E">,</span></span>
<span class="line"><span style="color:#24292E">    instructions</span><span style="color:#D73A49">:</span><span style="color:#24292E"> string </span><span style="color:#032F62">`You are Nova, a smart AI assistant helping '${</span><span style="color:#24292E">userName</span><span style="color:#032F62">}' stay organized and efficient.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#032F62">Your primary responsibilities include:</span></span>
<span class="line"><span style="color:#032F62">- Calendar Management: Scheduling, updating, and retrieving events from the calendar as per the user's needs.</span></span>
<span class="line"><span style="color:#032F62">- Email Assistance: Reading, summarizing, composing, and sending emails while ensuring clarity and professionalism.</span></span>
<span class="line"><span style="color:#032F62">- Context Awareness: Maintaining a seamless understanding of ongoing tasks and conversations to </span></span>
<span class="line"><span style="color:#032F62">  provide relevant responses.</span></span>
<span class="line"><span style="color:#032F62">- Privacy &#x26; Security: Handling user data responsibly, ensuring sensitive information is kept confidential,</span></span>
<span class="line"><span style="color:#032F62">  and confirming actions before executing them.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#032F62">Guidelines:</span></span>
<span class="line"><span style="color:#032F62">- Respond in a natural, friendly, and professional tone.</span></span>
<span class="line"><span style="color:#032F62">- Always confirm before making changes to the user's calendar or sending emails.</span></span>
<span class="line"><span style="color:#032F62">- Provide concise summaries when retrieving information unless the user requests details.</span></span>
<span class="line"><span style="color:#032F62">- Prioritize clarity, efficiency, and user convenience in all tasks.`</span></span>
<span class="line"><span style="color:#24292E">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">final</span><span style="color:#24292E"> agent</span><span style="color:#D73A49">:</span><span style="color:#24292E">AzureOpenAiModel azureOpenAiModel </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> check</span><span style="color:#D73A49"> new</span><span style="color:#24292E"> (</span><span style="color:#E36209">serviceUrl</span><span style="color:#24292E">, </span><span style="color:#E36209">apiKey</span><span style="color:#24292E">, </span><span style="color:#E36209">deploymentId</span><span style="color:#24292E">, </span><span style="color:#E36209">apiVersion</span><span style="color:#24292E">);</span></span>
<span class="line"><span style="color:#D73A49">final</span><span style="color:#24292E"> agent</span><span style="color:#D73A49">:</span><span style="color:#24292E">Agent personalAiAssistant </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> check</span><span style="color:#D73A49"> new</span><span style="color:#24292E"> (</span><span style="color:#E36209">systemPrompt</span><span style="color:#D73A49"> =</span><span style="color:#24292E"> systemPrompt, </span><span style="color:#E36209">model</span><span style="color:#D73A49"> =</span><span style="color:#24292E"> azureOpenAiModel,</span></span>
<span class="line"><span style="color:#E36209">    tools</span><span style="color:#D73A49"> =</span><span style="color:#24292E"> [readEmails, sendEmail, getCalanderEvents, createCalanderEvent, getCurrentDate]</span></span>
<span class="line"><span style="color:#24292E">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">service</span><span style="color:#6F42C1"> /personalAiAssistant</span><span style="color:#D73A49"> on</span><span style="color:#D73A49"> new</span><span style="color:#24292E"> http:Listener(</span><span style="color:#005CC5">9090</span><span style="color:#24292E">) {</span></span>
<span class="line"><span style="color:#D73A49">    resource</span><span style="color:#D73A49"> function</span><span style="color:#6F42C1"> post</span><span style="color:#6F42C1"> chat</span><span style="color:#24292E">(@</span><span style="color:#005CC5">http</span><span style="color:#24292E">:</span><span style="color:#005CC5">Payload</span><span style="color:#E36209"> agent</span><span style="color:#D73A49">:</span><span style="color:#24292E">ChatReqMessage request) </span><span style="color:#D73A49">returns</span><span style="color:#24292E"> agent</span><span style="color:#D73A49">:</span><span style="color:#24292E">ChatRespMessage</span><span style="color:#D73A49">|error</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#005CC5">        string</span><span style="color:#24292E"> agentResponse </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> check</span><span style="color:#24292E"> personalAiAssistant</span><span style="color:#D73A49">-></span><span style="color:#6F42C1">run</span><span style="color:#24292E">(request.message);</span></span>
<span class="line"><span style="color:#D73A49">        return</span><span style="color:#24292E"> {message</span><span style="color:#D73A49">:</span><span style="color:#24292E"> agentResponse};</span></span>
<span class="line"><span style="color:#24292E">    }</span></span>
<span class="line"><span style="color:#24292E">}</span></span><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 448 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg' style='float: right;'%3E%3Ctitle%3ECopy%3C/title%3E%3Cpath d='M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z'%3E%3C/path%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 512 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg'%3E%3Ctitle%3ECopied%3C/title%3E%3Cpath d='M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z'%3E%3C/path%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {background-color: transparent;border: none;right: 1px;padding: 0;width: 16px;height: 16px;display: flex;margin-top: -20px;margin-right: 8px;position: absolute;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}.Code_codeSnippet__ayQ3y button.rehype-pretty-copy {margin-top: -10px;}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></pre></div></div></div><div role="tabpanel" id="codeTab1-tabpane-diagram" aria-labelledby="codeTab1-tab-diagram" class="fade tab-pane"><img src="/images/agent-diagram.png" width="520" height="548" alt="Diagram"/></div></div></div></div></div></div></div></div><div class="pageContentRow integration code odd row"><div class="col-12"><div class="container"><div class="row"><div class="Code_box__nw1pZ col-12"><h2 id="ai-powered-blog-analyzer-using-natural-programming" class="section"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-link-45deg mdButton pe-2" viewBox="0 0 16 16"><path d="M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1.002 1.002 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4.018 4.018 0 0 1-.128-1.287z"></path><path d="M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243L6.586 4.672z"></path></svg>Building an AI-powered blog analyzer using Ballerina&#x27;s natural expressions</h2></div></div><div class="row"><div class="Code_box__nw1pZ col-lg-5 col-md-5 col-12"><div><p>Ballerina’s natural expressions let you bring AI-powered capabilities into your workflows using natural language. At runtime, they invoke an LLM and return a typed response—automatically structured and bound to your expected format for seamless integration.</p><div class="Code_dVersion__eXhCf"><span>Sample: Building an AI-Powered Blog Analyzer Using Ballerina&#x27;s Natural Expressions</span><a href="https://github.com/ballerina-guides/ai-samples/blob/main/rate-blog-posts-using-natural-expressions/main.bal" class="Code_cDownload__AYiFC" target="_blank" rel="noreferrer">View code on GitHub</a></div></div></div><div class="Code_box__nw1pZ col-lg-7 col-md-7 col-12"><div id="code-tab"><div class="Code_codeSnippet__qfa0_"><div class="highlight"><pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><button type="button" title="Copy" aria-label="Copy" data="import ballerina/ai;
import ballerina/http;

final readonly &#x26; string[] categories = [&#x22;Gardening&#x22;, &#x22;Sports&#x22;, &#x22;Health&#x22;, &#x22;Technology&#x22;, &#x22;Travel&#x22;];

public type Blog record {|
    string title;
    string content;
|};

type Review record {|
    string? suggestedCategory;
    int rating;
|};

public isolated function reviewBlog(Blog blog) returns Review|error => natural (check ai:getDefaultModelProvider()) {
    You are an expert content reviewer for a blog site that 
    categorizes posts under the following categories: ${categories}

    Your tasks are:
    1. Suggest a suitable category for the blog from exactly the specified categories. 
    If there is no match, use null.

    2. Rate the blog post on a scale of 1 to 10 based on the following criteria:
    - **Relevance**: How well the content aligns with the chosen category.
    - **Depth**: The level of detail and insight in the content.
    - **Clarity**: How easy it is to read and understand.
    - **Originality**: Whether the content introduces fresh perspectives or ideas.
    - **Language Quality**: Grammar, spelling, and overall writing quality.

    Here is the blog post content:

    Title: ${blog.title}
    Content: ${blog.content}
};

service /blogs on new http:Listener(8088) {
    resource function post review(Blog blog) returns Review|http:InternalServerError {
        Review|error review = reviewBlog(blog);
        if review is error {
            return {
                body: &#x22;Failed to review the blog post&#x22;
            };
        }
        return review;
    }
}" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);this.setAttribute(&#x27;title&#x27;, &#x27;Copied&#x27;);this.setAttribute(&#x27;aria-label&#x27;, &#x27;Copied&#x27;);window.setTimeout(() => {this.classList.remove(&#x27;rehype-pretty-copied&#x27;);this.setAttribute(&#x27;title&#x27;, &#x27;Copy&#x27;);this.setAttribute(&#x27;aria-label&#x27;, &#x27;Copy&#x27;);}, 3000);"><span class="ready"></span><span class="success"></span></button><span class="line"><span style="color:#D73A49">import</span><span style="color:#24292E"> ballerina/ai;</span></span>
<span class="line"><span style="color:#D73A49">import</span><span style="color:#24292E"> ballerina/http;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">final</span><span style="color:#D73A49"> readonly</span><span style="color:#D73A49"> &#x26;</span><span style="color:#005CC5"> string</span><span style="color:#24292E">[] categories </span><span style="color:#D73A49">=</span><span style="color:#24292E"> [</span><span style="color:#032F62">"Gardening"</span><span style="color:#24292E">, </span><span style="color:#032F62">"Sports"</span><span style="color:#24292E">, </span><span style="color:#032F62">"Health"</span><span style="color:#24292E">, </span><span style="color:#032F62">"Technology"</span><span style="color:#24292E">, </span><span style="color:#032F62">"Travel"</span><span style="color:#24292E">];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">public</span><span style="color:#D73A49"> type</span><span style="color:#6F42C1"> Blog</span><span style="color:#D73A49"> record</span><span style="color:#24292E"> {</span><span style="color:#D73A49">|</span></span>
<span class="line"><span style="color:#005CC5">    string</span><span style="color:#24292E"> title;</span></span>
<span class="line"><span style="color:#005CC5">    string</span><span style="color:#24292E"> content;</span></span>
<span class="line"><span style="color:#D73A49">|</span><span style="color:#24292E">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">type</span><span style="color:#6F42C1"> Review</span><span style="color:#D73A49"> record</span><span style="color:#24292E"> {</span><span style="color:#D73A49">|</span></span>
<span class="line"><span style="color:#005CC5">    string</span><span style="color:#24292E">? suggestedCategory;</span></span>
<span class="line"><span style="color:#005CC5">    int</span><span style="color:#24292E"> rating;</span></span>
<span class="line"><span style="color:#D73A49">|</span><span style="color:#24292E">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">public</span><span style="color:#D73A49"> isolated</span><span style="color:#D73A49"> function</span><span style="color:#6F42C1"> reviewBlog</span><span style="color:#24292E">(</span><span style="color:#E36209">Blog</span><span style="color:#E36209"> blog</span><span style="color:#24292E">) </span><span style="color:#D73A49">returns</span><span style="color:#24292E"> Review</span><span style="color:#D73A49">|error</span><span style="color:#D73A49"> =></span><span style="color:#6F42C1"> natural </span><span style="color:#24292E">(</span><span style="color:#D73A49">check</span><span style="color:#E36209"> ai</span><span style="color:#D73A49">:</span><span style="color:#6F42C1">getDefaultModelProvider</span><span style="color:#24292E">()) {</span></span>
<span class="line"><span style="color:#24292E">    You are an expert content reviewer for a blog site that </span></span>
<span class="line"><span style="color:#24292E">    categorizes posts under the following categories</span><span style="color:#D73A49">:</span><span style="color:#24292E"> ${categories}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E">    Your tasks are</span><span style="color:#D73A49">:</span></span>
<span class="line"><span style="color:#005CC5">    1</span><span style="color:#24292E">. Suggest a suitable category for the blog </span><span style="color:#D73A49">from</span><span style="color:#24292E"> exactly the specified categories. </span></span>
<span class="line"><span style="color:#24292E">    If there </span><span style="color:#D73A49">is</span><span style="color:#24292E"> no </span><span style="color:#D73A49">match</span><span style="color:#24292E">, use </span><span style="color:#D73A49">null</span><span style="color:#24292E">.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#005CC5">    2</span><span style="color:#24292E">. Rate the blog post </span><span style="color:#D73A49">on</span><span style="color:#24292E"> a scale of </span><span style="color:#005CC5">1</span><span style="color:#24292E"> to </span><span style="color:#005CC5">10</span><span style="color:#24292E"> based </span><span style="color:#D73A49">on</span><span style="color:#24292E"> the following criteria</span><span style="color:#D73A49">:</span></span>
<span class="line"><span style="color:#D73A49">    -</span><span style="color:#D73A49"> **</span><span style="color:#24292E">Relevance</span><span style="color:#D73A49">**:</span><span style="color:#24292E"> How well the content aligns with the chosen category.</span></span>
<span class="line"><span style="color:#D73A49">    -</span><span style="color:#D73A49"> **</span><span style="color:#24292E">Depth</span><span style="color:#D73A49">**:</span><span style="color:#24292E"> The level of detail and insight </span><span style="color:#D73A49">in</span><span style="color:#24292E"> the content.</span></span>
<span class="line"><span style="color:#D73A49">    -</span><span style="color:#D73A49"> **</span><span style="color:#24292E">Clarity</span><span style="color:#D73A49">**:</span><span style="color:#24292E"> How easy it </span><span style="color:#D73A49">is</span><span style="color:#24292E"> to read and understand.</span></span>
<span class="line"><span style="color:#D73A49">    -</span><span style="color:#D73A49"> **</span><span style="color:#24292E">Originality</span><span style="color:#D73A49">**:</span><span style="color:#24292E"> Whether the content introduces fresh perspectives or ideas.</span></span>
<span class="line"><span style="color:#D73A49">    -</span><span style="color:#D73A49"> **</span><span style="color:#24292E">Language Quality</span><span style="color:#D73A49">**:</span><span style="color:#24292E"> Grammar, spelling, and overall writing quality.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E">    Here </span><span style="color:#D73A49">is</span><span style="color:#24292E"> the blog post content</span><span style="color:#D73A49">:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E">    Title</span><span style="color:#D73A49">:</span><span style="color:#24292E"> ${blog.title}</span></span>
<span class="line"><span style="color:#24292E">    Content</span><span style="color:#D73A49">:</span><span style="color:#24292E"> ${blog.content}</span></span>
<span class="line"><span style="color:#24292E">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">service</span><span style="color:#6F42C1"> /blogs</span><span style="color:#D73A49"> on</span><span style="color:#D73A49"> new</span><span style="color:#24292E"> http:Listener(</span><span style="color:#005CC5">8088</span><span style="color:#24292E">) {</span></span>
<span class="line"><span style="color:#D73A49">    resource</span><span style="color:#D73A49"> function</span><span style="color:#6F42C1"> post</span><span style="color:#6F42C1"> review</span><span style="color:#24292E">(</span><span style="color:#E36209">Blog</span><span style="color:#E36209"> blog</span><span style="color:#24292E">) </span><span style="color:#D73A49">returns</span><span style="color:#24292E"> Review</span><span style="color:#D73A49">|</span><span style="color:#24292E">http</span><span style="color:#D73A49">:</span><span style="color:#24292E">InternalServerError {</span></span>
<span class="line"><span style="color:#24292E">        Review</span><span style="color:#D73A49">|error</span><span style="color:#24292E"> review </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> reviewBlog</span><span style="color:#24292E">(</span><span style="color:#E36209">blog</span><span style="color:#24292E">);</span></span>
<span class="line"><span style="color:#D73A49">        if</span><span style="color:#24292E"> review </span><span style="color:#D73A49">is</span><span style="color:#D73A49"> error</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#D73A49">            return</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#24292E">                body</span><span style="color:#D73A49">:</span><span style="color:#032F62"> "Failed to review the blog post"</span></span>
<span class="line"><span style="color:#24292E">            };</span></span>
<span class="line"><span style="color:#24292E">        }</span></span>
<span class="line"><span style="color:#D73A49">        return</span><span style="color:#24292E"> review;</span></span>
<span class="line"><span style="color:#24292E">    }</span></span>
<span class="line"><span style="color:#24292E">}</span></span><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 448 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg' style='float: right;'%3E%3Ctitle%3ECopy%3C/title%3E%3Cpath d='M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z'%3E%3C/path%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 512 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg'%3E%3Ctitle%3ECopied%3C/title%3E%3Cpath d='M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z'%3E%3C/path%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {background-color: transparent;border: none;right: 1px;padding: 0;width: 16px;height: 16px;display: flex;margin-top: -20px;margin-right: 8px;position: absolute;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}.Code_codeSnippet__ayQ3y button.rehype-pretty-copy {margin-top: -10px;}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></pre></div></div></div></div></div></div></div></div><div class="pageContentRow integration code row"><div class="col-12"><div class="container"><div class="row"><div class="Code_box__nw1pZ col-12"><h2 id="natural-programming-complie-time-code-generation" class="section"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-link-45deg mdButton pe-2" viewBox="0 0 16 16"><path d="M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1.002 1.002 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4.018 4.018 0 0 1-.128-1.287z"></path><path d="M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243L6.586 4.672z"></path></svg>Natural Programming: Compile-time Code Generation</h2></div></div><div class="row"><div class="Code_box__nw1pZ col-lg-5 col-md-5 col-12"><div><p>Bring natural language into your compilation process and generate code based on a prompt at compile-time. Just like having a Copilot baked into your build process.</p>
<ul>
<li>
<p><strong>Compile-time data generation</strong> – Use <code>const natural</code> expressions to generate structured, realistic, and type-safe data during compilation. Ideal for generating meaningful test data.</p>
</li>
<li>
<p><strong>Compile-time function generation</strong> – Annotate external function bodies with <code>@natural:code</code> and let the compiler generate the implementations based on natural language prompts.</p>
</li>
</ul></div><div class="Code_dVersion__eXhCf"><span>Sample: Building e-commerce product filtering system with Compile-Time Code Generation</span><a href="https://github.com/ballerina-guides/ai-samples/blob/main/filter-products-using-compile-time-code-generation/main.bal" class="Code_cDownload__AYiFC" target="_blank" rel="noreferrer">View code on GitHub</a></div></div><div class="Code_box__nw1pZ col-lg-7 col-md-7 col-12"><div id="code-tab"><ul class="mb-3 codeTabs nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><button type="button" id="code-tab-compileCodeGeneration" role="tab" data-rr-ui-event-key="compileCodeGeneration" aria-controls="code-tabpane-compileCodeGeneration" aria-selected="true" class="nav-link active">AI-synthesized function bodies</button></li><li class="nav-item" role="presentation"><button type="button" id="code-tab-constCompileCodeGeneration" role="tab" data-rr-ui-event-key="constCompileCodeGeneration" aria-controls="code-tabpane-constCompileCodeGeneration" aria-selected="false" tabindex="-1" class="nav-link">Compile-time data generation</button></li></ul><div class="tab-content"><div role="tabpanel" id="code-tabpane-compileCodeGeneration" aria-labelledby="code-tab-compileCodeGeneration" class="fade tab-pane active show"><div class="Code_codeSnippet__qfa0_"><div class="highlight"><pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><button type="button" title="Copy" aria-label="Copy" data="import ballerina/http;

public type Product record {|
    string id;
    decimal price;
|};

final Product[] productCatalog = [
    {id: &#x22;PROD001&#x22;, price: 999.99},
    {id: &#x22;PROD002&#x22;, price: 699.99},
    {id: &#x22;PROD003&#x22;, price: 29.99},
    {id: &#x22;PROD004&#x22;, price: 19.99},
    {id: &#x22;PROD005&#x22;, price: 49.99}
];

function filterProductsAbovePrice(Product[] products, decimal priceThreshold) returns Product[] = @natural:code {
    prompt: &#x22;Filter products that have a price greater than the given price threshold.&#x22;
} external;

service / on new http:Listener(8080) {
    resource function get products/filter(decimal minPrice) returns Product[]|http:BadRequest {
        return filterProductsAbovePrice(productCatalog, minPrice);
    }
}" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);this.setAttribute(&#x27;title&#x27;, &#x27;Copied&#x27;);this.setAttribute(&#x27;aria-label&#x27;, &#x27;Copied&#x27;);window.setTimeout(() => {this.classList.remove(&#x27;rehype-pretty-copied&#x27;);this.setAttribute(&#x27;title&#x27;, &#x27;Copy&#x27;);this.setAttribute(&#x27;aria-label&#x27;, &#x27;Copy&#x27;);}, 3000);"><span class="ready"></span><span class="success"></span></button><span class="line"><span style="color:#D73A49">import</span><span style="color:#24292E"> ballerina/http;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">public</span><span style="color:#D73A49"> type</span><span style="color:#6F42C1"> Product</span><span style="color:#D73A49"> record</span><span style="color:#24292E"> {</span><span style="color:#D73A49">|</span></span>
<span class="line"><span style="color:#005CC5">    string</span><span style="color:#24292E"> id;</span></span>
<span class="line"><span style="color:#005CC5">    decimal</span><span style="color:#24292E"> price;</span></span>
<span class="line"><span style="color:#D73A49">|</span><span style="color:#24292E">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">final</span><span style="color:#24292E"> Product[] productCatalog </span><span style="color:#D73A49">=</span><span style="color:#24292E"> [</span></span>
<span class="line"><span style="color:#24292E">    {id</span><span style="color:#D73A49">:</span><span style="color:#032F62"> "PROD001"</span><span style="color:#24292E">, price</span><span style="color:#D73A49">:</span><span style="color:#005CC5"> 999.99</span><span style="color:#24292E">},</span></span>
<span class="line"><span style="color:#24292E">    {id</span><span style="color:#D73A49">:</span><span style="color:#032F62"> "PROD002"</span><span style="color:#24292E">, price</span><span style="color:#D73A49">:</span><span style="color:#005CC5"> 699.99</span><span style="color:#24292E">},</span></span>
<span class="line"><span style="color:#24292E">    {id</span><span style="color:#D73A49">:</span><span style="color:#032F62"> "PROD003"</span><span style="color:#24292E">, price</span><span style="color:#D73A49">:</span><span style="color:#005CC5"> 29.99</span><span style="color:#24292E">},</span></span>
<span class="line"><span style="color:#24292E">    {id</span><span style="color:#D73A49">:</span><span style="color:#032F62"> "PROD004"</span><span style="color:#24292E">, price</span><span style="color:#D73A49">:</span><span style="color:#005CC5"> 19.99</span><span style="color:#24292E">},</span></span>
<span class="line"><span style="color:#24292E">    {id</span><span style="color:#D73A49">:</span><span style="color:#032F62"> "PROD005"</span><span style="color:#24292E">, price</span><span style="color:#D73A49">:</span><span style="color:#005CC5"> 49.99</span><span style="color:#24292E">}</span></span>
<span class="line"><span style="color:#24292E">];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">function</span><span style="color:#6F42C1"> filterProductsAbovePrice</span><span style="color:#24292E">(</span><span style="color:#E36209">Product</span><span style="color:#24292E">[] </span><span style="color:#E36209">products</span><span style="color:#24292E">, </span><span style="color:#005CC5">decimal</span><span style="color:#E36209"> priceThreshold</span><span style="color:#24292E">) </span><span style="color:#D73A49">returns</span><span style="color:#24292E"> Product[] </span><span style="color:#D73A49">=</span><span style="color:#24292E"> @</span><span style="color:#005CC5">natural</span><span style="color:#24292E">:</span><span style="color:#005CC5">code</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#24292E">    prompt</span><span style="color:#D73A49">:</span><span style="color:#032F62"> "Filter products that have a price greater than the given price threshold."</span></span>
<span class="line"><span style="color:#24292E">} </span><span style="color:#D73A49">external</span><span style="color:#24292E">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">service</span><span style="color:#24292E"> / </span><span style="color:#D73A49">on</span><span style="color:#D73A49"> new</span><span style="color:#24292E"> http:Listener(</span><span style="color:#005CC5">8080</span><span style="color:#24292E">) {</span></span>
<span class="line"><span style="color:#D73A49">    resource</span><span style="color:#D73A49"> function</span><span style="color:#6F42C1"> get</span><span style="color:#6F42C1"> products</span><span style="color:#24292E">/filter(</span><span style="color:#005CC5">decimal</span><span style="color:#E36209"> minPrice</span><span style="color:#24292E">) </span><span style="color:#D73A49">returns</span><span style="color:#24292E"> Product[]</span><span style="color:#D73A49">|</span><span style="color:#24292E">http</span><span style="color:#D73A49">:</span><span style="color:#24292E">BadRequest {</span></span>
<span class="line"><span style="color:#D73A49">        return</span><span style="color:#6F42C1"> filterProductsAbovePrice</span><span style="color:#24292E">(</span><span style="color:#E36209">productCatalog</span><span style="color:#24292E">, </span><span style="color:#E36209">minPrice</span><span style="color:#24292E">);</span></span>
<span class="line"><span style="color:#24292E">    }</span></span>
<span class="line"><span style="color:#24292E">}</span></span><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 448 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg' style='float: right;'%3E%3Ctitle%3ECopy%3C/title%3E%3Cpath d='M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z'%3E%3C/path%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 512 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg'%3E%3Ctitle%3ECopied%3C/title%3E%3Cpath d='M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z'%3E%3C/path%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {background-color: transparent;border: none;right: 1px;padding: 0;width: 16px;height: 16px;display: flex;margin-top: -20px;margin-right: 8px;position: absolute;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}.Code_codeSnippet__ayQ3y button.rehype-pretty-copy {margin-top: -10px;}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></pre></div></div></div><div role="tabpanel" id="code-tabpane-constCompileCodeGeneration" aria-labelledby="code-tab-constCompileCodeGeneration" class="fade tab-pane"><div class="Code_codeSnippet__qfa0_"><div class="highlight"><pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><button type="button" title="Copy" aria-label="Copy" data="import ballerina/test;

function getTestProducts() returns Product[] =>
    const natural {
        Generate a list of products with:
        - id: random ID that starts with &#x22;PROD&#x22;. E.g., &#x22;PROD001&#x22;
        - price: random decimal between 10.0 and 1000.0
    };

@test:Config
function testFilterProducts() returns error? {
    Product[] testProducts = getTestProducts();
    Product[] filteredProducts = filterProductsAbovePrice(testProducts, 100);
    foreach Product product in testProducts {
        int? index = filteredProducts.indexOf(product);
        if product.price > 100d {
            test:assertNotEquals(index, ());
        } else {
            test:assertEquals(index, ());
        }
    }
}" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);this.setAttribute(&#x27;title&#x27;, &#x27;Copied&#x27;);this.setAttribute(&#x27;aria-label&#x27;, &#x27;Copied&#x27;);window.setTimeout(() => {this.classList.remove(&#x27;rehype-pretty-copied&#x27;);this.setAttribute(&#x27;title&#x27;, &#x27;Copy&#x27;);this.setAttribute(&#x27;aria-label&#x27;, &#x27;Copy&#x27;);}, 3000);"><span class="ready"></span><span class="success"></span></button><span class="line"><span style="color:#D73A49">import</span><span style="color:#24292E"> ballerina/test;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">function</span><span style="color:#6F42C1"> getTestProducts</span><span style="color:#24292E">() </span><span style="color:#D73A49">returns</span><span style="color:#24292E"> Product[] </span><span style="color:#D73A49">=></span></span>
<span class="line"><span style="color:#D73A49">    const </span><span style="color:#005CC5">natural</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#24292E">        Generate a list of products with</span><span style="color:#D73A49">:</span></span>
<span class="line"><span style="color:#D73A49">        -</span><span style="color:#24292E"> id</span><span style="color:#D73A49">:</span><span style="color:#24292E"> random ID that starts with </span><span style="color:#032F62">"PROD"</span><span style="color:#24292E">. E.g., </span><span style="color:#032F62">"PROD001"</span></span>
<span class="line"><span style="color:#D73A49">        -</span><span style="color:#24292E"> price</span><span style="color:#D73A49">:</span><span style="color:#24292E"> random decimal between </span><span style="color:#005CC5">10.0</span><span style="color:#24292E"> and </span><span style="color:#005CC5">1000.0</span></span>
<span class="line"><span style="color:#24292E">    };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E">@</span><span style="color:#005CC5">test</span><span style="color:#24292E">:</span><span style="color:#005CC5">Config</span></span>
<span class="line"><span style="color:#D73A49">function</span><span style="color:#6F42C1"> testFilterProducts</span><span style="color:#24292E">() </span><span style="color:#D73A49">returns</span><span style="color:#D73A49"> error?</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#24292E">    Product[] testProducts </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> getTestProducts</span><span style="color:#24292E">();</span></span>
<span class="line"><span style="color:#24292E">    Product[] filteredProducts </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> filterProductsAbovePrice</span><span style="color:#24292E">(</span><span style="color:#E36209">testProducts</span><span style="color:#24292E">, </span><span style="color:#005CC5">100</span><span style="color:#24292E">);</span></span>
<span class="line"><span style="color:#D73A49">    foreach </span><span style="color:#24292E">Product product </span><span style="color:#D73A49">in</span><span style="color:#24292E"> testProducts {</span></span>
<span class="line"><span style="color:#005CC5">        int</span><span style="color:#24292E">? index </span><span style="color:#D73A49">=</span><span style="color:#24292E"> filteredProducts.</span><span style="color:#6F42C1">indexOf</span><span style="color:#24292E">(</span><span style="color:#E36209">product</span><span style="color:#24292E">);</span></span>
<span class="line"><span style="color:#D73A49">        if</span><span style="color:#24292E"> product.price </span><span style="color:#D73A49">></span><span style="color:#005CC5"> 100</span><span style="color:#24292E">d {</span></span>
<span class="line"><span style="color:#24292E">            test</span><span style="color:#D73A49">:</span><span style="color:#6F42C1">assertNotEquals</span><span style="color:#24292E">(</span><span style="color:#E36209">index</span><span style="color:#24292E">, ());</span></span>
<span class="line"><span style="color:#24292E">        } </span><span style="color:#D73A49">else</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#24292E">            test</span><span style="color:#D73A49">:</span><span style="color:#6F42C1">assertEquals</span><span style="color:#24292E">(</span><span style="color:#E36209">index</span><span style="color:#24292E">, ());</span></span>
<span class="line"><span style="color:#24292E">        }</span></span>
<span class="line"><span style="color:#24292E">    }</span></span>
<span class="line"><span style="color:#24292E">}</span></span><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 448 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg' style='float: right;'%3E%3Ctitle%3ECopy%3C/title%3E%3Cpath d='M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z'%3E%3C/path%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 512 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg'%3E%3Ctitle%3ECopied%3C/title%3E%3Cpath d='M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z'%3E%3C/path%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {background-color: transparent;border: none;right: 1px;padding: 0;width: 16px;height: 16px;display: flex;margin-top: -20px;margin-right: 8px;position: absolute;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}.Code_codeSnippet__ayQ3y button.rehype-pretty-copy {margin-top: -10px;}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></pre></div></div></div></div></div></div></div></div></div></div><div class="pageContentRow integration code odd row"><div class="col-12"><div class="container"><div class="row"><div class="Code_box__nw1pZ col-12"><h2 id="copilot_your_partner" class="section"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-link-45deg mdButton pe-2" viewBox="0 0 16 16"><path d="M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1.002 1.002 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4.018 4.018 0 0 1-.128-1.287z"></path><path d="M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243L6.586 4.672z"></path></svg>Ballerina Copilot: Your AI partner in integration development</h2></div></div><div class="row"><div class="Code_box__nw1pZ col-lg-5 col-md-5 col-12"><div><p>Ballerina Copilot makes it easy to build both AI and non-AI integrations using natural language—just tell it what you want, and it gets to work. Whether you&#x27;re connecting to an LLM or stitching together APIs, Copilot helps you move fast with less code. And the fun part? Ballerina Copilot is written in Ballerina itself!</p></div></div><div class="Code_box__nw1pZ col-lg-7 col-md-7 col-12"><div id="code-tab"><ul class="mb-3 codeTabs nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><button type="button" id="code-tab-copilotView1" role="tab" data-rr-ui-event-key="copilotView1" aria-controls="code-tabpane-copilotView1" aria-selected="true" class="nav-link active">Code generation</button></li><li class="nav-item" role="presentation"><button type="button" id="code-tab-copilotView2" role="tab" data-rr-ui-event-key="copilotView2" aria-controls="code-tabpane-copilotView2" aria-selected="false" tabindex="-1" class="nav-link">AI Data Mapper</button></li><li class="nav-item" role="presentation"><button type="button" id="code-tab-copilotView3" role="tab" data-rr-ui-event-key="copilotView3" aria-controls="code-tabpane-copilotView3" aria-selected="false" tabindex="-1" class="nav-link">Ask Ballerina</button></li><li class="nav-item" role="presentation"><button type="button" id="code-tab-copilotView4" role="tab" data-rr-ui-event-key="copilotView4" aria-controls="code-tabpane-copilotView4" aria-selected="false" tabindex="-1" class="nav-link">Test generation</button></li></ul><div class="tab-content"><div role="tabpanel" id="code-tabpane-copilotView1" aria-labelledby="code-tab-copilotView1" class="fade tab-pane active show"><div class="Code_codeSnippet__qfa0_"><img src="/images/ai_codegen.png"/></div></div><div role="tabpanel" id="code-tabpane-copilotView2" aria-labelledby="code-tab-copilotView2" class="fade tab-pane"><div class="Code_codeSnippet__qfa0_"><img src="/images/ai_datamapper.png"/></div></div><div role="tabpanel" id="code-tabpane-copilotView3" aria-labelledby="code-tab-copilotView3" class="fade tab-pane"><div class="Code_codeSnippet__qfa0_"><img src="/images/ai_ask.png"/></div></div><div role="tabpanel" id="code-tabpane-copilotView4" aria-labelledby="code-tab-copilotView4" class="fade tab-pane"><div class="Code_codeSnippet__qfa0_"><img src="/images/ai_test.png"/></div></div></div></div></div></div></div></div></div><div class="pageContentRow integration code row"><div class="col-12"><div class="container"><div class="row"><div class="Code_box__nw1pZ col-12"><h2 id="natural-programming-vs-code-features" class="section"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-link-45deg mdButton pe-2" viewBox="0 0 16 16"><path d="M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1.002 1.002 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4.018 4.018 0 0 1-.128-1.287z"></path><path d="M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243L6.586 4.672z"></path></svg>Natural Programming: Bridge Requirements and Code</h2></div></div><div class="row"><div class="Code_box__nw1pZ col-lg-5 col-md-5 col-12"><div><p>Leverage Generative AI to keep requirements, code, and documentation in sync.</p>
<ul>
<li>
<p><strong>Code generation</strong> – Generate code from high-level business requirements.</p>
</li>
<li>
<p><strong>Drift detection and fixes</strong> – Proactively identify drift between requirements, code, and documentation and use AI-powered suggestions on VS Code to address drift.</p>
</li>
<li>
<p><strong>Test generation</strong> – Generate Ballerina tests against business requirements to enable test-driven drift detection.</p>
</li>
<li>
<p><strong>Intent preservation</strong> – Maintain an effective summary of the prompts used for code generation to preserve user intention.</p>
</li>
</ul></div></div><div class="Code_box__nw1pZ col-lg-7 col-md-7 col-12"><div id="code-tab"><ul class="mb-3 codeTabs nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><button type="button" id="code-tab-npVsCodeFeaturesView1" role="tab" data-rr-ui-event-key="npVsCodeFeaturesView1" aria-controls="code-tabpane-npVsCodeFeaturesView1" aria-selected="false" tabindex="-1" class="nav-link">Code from requirements</button></li><li class="nav-item" role="presentation"><button type="button" id="code-tab-npVsCodeFeaturesView2" role="tab" data-rr-ui-event-key="npVsCodeFeaturesView2" aria-controls="code-tabpane-npVsCodeFeaturesView2" aria-selected="true" class="nav-link active">Drift Detection &amp; Fixes</button></li><li class="nav-item" role="presentation"><button type="button" id="code-tab-npVsCodeFeaturesView3" role="tab" data-rr-ui-event-key="npVsCodeFeaturesView3" aria-controls="code-tabpane-npVsCodeFeaturesView3" aria-selected="false" tabindex="-1" class="nav-link">Tests from requirements</button></li></ul><div class="tab-content"><div role="tabpanel" id="code-tabpane-npVsCodeFeaturesView1" aria-labelledby="code-tab-npVsCodeFeaturesView1" class="fade tab-pane"><div class="Code_codeSnippet__qfa0_"><img src="/images/np_code_generation_from_requirements.png"/></div></div><div role="tabpanel" id="code-tabpane-npVsCodeFeaturesView2" aria-labelledby="code-tab-npVsCodeFeaturesView2" class="fade tab-pane active show"><div class="Code_codeSnippet__qfa0_"><img src="/images/np_drift_check.gif"/></div></div><div role="tabpanel" id="code-tabpane-npVsCodeFeaturesView3" aria-labelledby="code-tab-npVsCodeFeaturesView3" class="fade tab-pane"><div class="Code_codeSnippet__qfa0_"><img src="/images/np_test_generation_from_requirements.png"/></div></div></div></div></div></div></div></div></div><div class="pageContentRow integration code odd row"><div class="col-12"><div class="container"><div class="row"><div class="Code_box__nw1pZ col-12"><h2 id="bring-text-alive-with-openai-chat" class="section"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-link-45deg mdButton pe-2" viewBox="0 0 16 16"><path d="M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1.002 1.002 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4.018 4.018 0 0 1-.128-1.287z"></path><path d="M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243L6.586 4.672z"></path></svg>Simple when you want it. Powerful when you need it.</h2></div></div><div class="row"><div class="Code_box__nw1pZ col-lg-5 col-md-5 col-12"><div><p>Ballerina simplifies AI integration with high-level abstractions while providing full access to model provider APIs via type-safe connectors. This lets you leverage advanced features seamlessly, staying within the same language and ecosystem with confidence.</p><div class="Code_dVersion__eXhCf"><span>Sample 1: Summarize text using OpenAI</span><a href="https://github.com/ballerina-guides/ai-samples/blob/main/summarize_text_using_openai/main.bal" class="Code_cDownload__AYiFC" target="_blank" rel="noreferrer">View code on GitHub</a></div><div class="Code_dVersion__eXhCf"><span>Sample 2: Function Calling using OpenAI</span><a href="https://github.com/xlight05/ai-samples/blob/usecase-samples/function_calling/main.bal" class="Code_cDownload__AYiFC" target="_blank" rel="noreferrer">View code on GitHub</a></div><div class="Code_dVersion__eXhCf"><span>Sample 3: Tweet on upcoming and recently released movies using Azure OpenAI</span><a href="https://github.com/ballerina-guides/ai-samples/blob/main/tweet_on_upcoming_and_recently_released_movies_using_azure_openai/main.bal" class="Code_cDownload__AYiFC" target="_blank" rel="noreferrer">View code on GitHub</a></div></div></div><div class="Code_box__nw1pZ col-lg-7 col-md-7 col-12"><div id="code-tab"><ul class="mb-3 codeTabs nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><button type="button" id="code-tab-chat1" role="tab" data-rr-ui-event-key="chat1" aria-controls="code-tabpane-chat1" aria-selected="true" class="nav-link active">Sample 1</button></li><li class="nav-item" role="presentation"><button type="button" id="code-tab-chat2" role="tab" data-rr-ui-event-key="chat2" aria-controls="code-tabpane-chat2" aria-selected="false" tabindex="-1" class="nav-link">Sample 2</button></li><li class="nav-item" role="presentation"><button type="button" id="code-tab-chat3" role="tab" data-rr-ui-event-key="chat3" aria-controls="code-tabpane-chat3" aria-selected="false" tabindex="-1" class="nav-link">Sample 3</button></li></ul><div class="tab-content"><div role="tabpanel" id="code-tabpane-chat1" aria-labelledby="code-tab-chat1" class="fade tab-pane active show"><div class="Code_codeSnippet__qfa0_"><div class="highlight"><pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><button type="button" title="Copy" aria-label="Copy" data="public function main(string filePath) returns error? {
    chat:Client openAIChat = check new ({auth: {token: openAIToken}});

    string fileContent = check io:fileReadString(filePath);
    io:println(string &#x60;Content: ${fileContent}&#x60;);

    chat:CreateChatCompletionRequest request = {
        model: &#x22;gpt-4o-mini&#x22;,
        messages: [
            {
                &#x22;role&#x22;: &#x22;user&#x22;,
                &#x22;content&#x22;: string &#x60;Summarize:\n&#x22; ${fileContent}&#x60;
            }
        ],
        max_tokens: 2000
    };

    chat:CreateChatCompletionResponse response = check openAIChat->/chat/completions.post(request);
    string? summary = response.choices[0].message.content;

    if summary is () {
        return error(&#x22;Failed to summarize the given text.&#x22;);
    }
    io:println(string &#x60;Summary: ${summary}&#x60;);
}" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);this.setAttribute(&#x27;title&#x27;, &#x27;Copied&#x27;);this.setAttribute(&#x27;aria-label&#x27;, &#x27;Copied&#x27;);window.setTimeout(() => {this.classList.remove(&#x27;rehype-pretty-copied&#x27;);this.setAttribute(&#x27;title&#x27;, &#x27;Copy&#x27;);this.setAttribute(&#x27;aria-label&#x27;, &#x27;Copy&#x27;);}, 3000);"><span class="ready"></span><span class="success"></span></button><span class="line"><span style="color:#D73A49">public</span><span style="color:#D73A49"> function</span><span style="color:#6F42C1"> main</span><span style="color:#24292E">(</span><span style="color:#005CC5">string</span><span style="color:#E36209"> filePath</span><span style="color:#24292E">) </span><span style="color:#D73A49">returns</span><span style="color:#D73A49"> error?</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#24292E">    chat</span><span style="color:#D73A49">:</span><span style="color:#24292E">Client openAIChat </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> check</span><span style="color:#D73A49"> new</span><span style="color:#24292E"> ({auth</span><span style="color:#D73A49">:</span><span style="color:#24292E"> {token: openAIToken}});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#005CC5">    string</span><span style="color:#24292E"> fileContent </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> check</span><span style="color:#24292E"> io</span><span style="color:#D73A49">:</span><span style="color:#6F42C1">fileReadString</span><span style="color:#24292E">(</span><span style="color:#E36209">filePath</span><span style="color:#24292E">);</span></span>
<span class="line"><span style="color:#24292E">    io</span><span style="color:#D73A49">:</span><span style="color:#6F42C1">println</span><span style="color:#24292E">(</span><span style="color:#005CC5">string</span><span style="color:#032F62"> `Content: ${</span><span style="color:#24292E">fileContent</span><span style="color:#032F62">}`</span><span style="color:#24292E">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E">    chat</span><span style="color:#D73A49">:</span><span style="color:#24292E">CreateChatCompletionRequest request </span><span style="color:#D73A49">=</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#24292E">        model</span><span style="color:#D73A49">:</span><span style="color:#032F62"> "gpt-4o-mini"</span><span style="color:#24292E">,</span></span>
<span class="line"><span style="color:#24292E">        messages</span><span style="color:#D73A49">:</span><span style="color:#24292E"> [</span></span>
<span class="line"><span style="color:#24292E">            {</span></span>
<span class="line"><span style="color:#032F62">                "role"</span><span style="color:#D73A49">:</span><span style="color:#032F62"> "user"</span><span style="color:#24292E">,</span></span>
<span class="line"><span style="color:#032F62">                "content"</span><span style="color:#D73A49">:</span><span style="color:#24292E"> string </span><span style="color:#032F62">`Summarize:</span><span style="color:#005CC5">\n</span><span style="color:#032F62">" ${</span><span style="color:#24292E">fileContent</span><span style="color:#032F62">}`</span></span>
<span class="line"><span style="color:#24292E">            }</span></span>
<span class="line"><span style="color:#24292E">        ],</span></span>
<span class="line"><span style="color:#24292E">        max_tokens</span><span style="color:#D73A49">:</span><span style="color:#005CC5"> 2000</span></span>
<span class="line"><span style="color:#24292E">    };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E">    chat</span><span style="color:#D73A49">:</span><span style="color:#24292E">CreateChatCompletionResponse response </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> check</span><span style="color:#24292E"> openAIChat</span><span style="color:#D73A49">->/</span><span style="color:#24292E">chat</span><span style="color:#D73A49">/</span><span style="color:#24292E">completions.</span><span style="color:#6F42C1">post</span><span style="color:#24292E">(</span><span style="color:#E36209">request</span><span style="color:#24292E">);</span></span>
<span class="line"><span style="color:#005CC5">    string</span><span style="color:#24292E">? summary </span><span style="color:#D73A49">=</span><span style="color:#24292E"> response.choices[</span><span style="color:#005CC5">0</span><span style="color:#24292E">].message.content;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">    if</span><span style="color:#24292E"> summary </span><span style="color:#D73A49">is</span><span style="color:#24292E"> () {</span></span>
<span class="line"><span style="color:#D73A49">        return</span><span style="color:#D73A49"> error</span><span style="color:#24292E">(</span><span style="color:#032F62">"Failed to summarize the given text."</span><span style="color:#24292E">);</span></span>
<span class="line"><span style="color:#24292E">    }</span></span>
<span class="line"><span style="color:#24292E">    io</span><span style="color:#D73A49">:</span><span style="color:#6F42C1">println</span><span style="color:#24292E">(</span><span style="color:#005CC5">string</span><span style="color:#032F62"> `Summary: ${</span><span style="color:#24292E">summary</span><span style="color:#032F62">}`</span><span style="color:#24292E">);</span></span>
<span class="line"><span style="color:#24292E">}</span></span><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 448 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg' style='float: right;'%3E%3Ctitle%3ECopy%3C/title%3E%3Cpath d='M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z'%3E%3C/path%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 512 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg'%3E%3Ctitle%3ECopied%3C/title%3E%3Cpath d='M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z'%3E%3C/path%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {background-color: transparent;border: none;right: 1px;padding: 0;width: 16px;height: 16px;display: flex;margin-top: -20px;margin-right: 8px;position: absolute;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}.Code_codeSnippet__ayQ3y button.rehype-pretty-copy {margin-top: -10px;}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></pre></div></div></div><div role="tabpanel" id="code-tabpane-chat2" aria-labelledby="code-tab-chat2" class="fade tab-pane"><div class="Code_codeSnippet__qfa0_"><div class="highlight"><pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><button type="button" title="Copy" aria-label="Copy" data="public function main() returns error? {
    ParamterSchema param = {
        &#x27;type: &#x22;object&#x22;,
        properties: {
            &#x22;location&#x22;: {
                &#x27;type: &#x22;string&#x22;,
                description: &#x22;City and country e.g. Bogotá, Colombia&#x22;
            }
        },
        required: [&#x22;location&#x22;],
        additionalProperties: false
    };
    chat:CreateChatCompletionRequest request = {
        model: &#x22;gpt-4o-mini&#x22;,
        messages: [
            {
                role: &#x22;user&#x22;,
                content: string &#x60;What is the weather like in Paris today?&#x60;
            }
        ],
        tools: [
        {
            &#x27;type: &#x22;function&#x22;,
            &#x27;function: {
                name: &#x22;get_weather&#x22;,
                description: &#x22;Get current temperature for a given location.&#x22;,
                parameters: param,
                strict: true
            }
        }
        ]
    };
    chat:CreateChatCompletionResponse completionRes = check openAIChat->/chat/completions.post(request);

    chat:ChatCompletionMessageToolCalls toolCalls = check completionRes.choices[0].message.tool_calls.ensureType();
    io:println(&#x22;Tool Calls: &#x22;, toolCalls);
}" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);this.setAttribute(&#x27;title&#x27;, &#x27;Copied&#x27;);this.setAttribute(&#x27;aria-label&#x27;, &#x27;Copied&#x27;);window.setTimeout(() => {this.classList.remove(&#x27;rehype-pretty-copied&#x27;);this.setAttribute(&#x27;title&#x27;, &#x27;Copy&#x27;);this.setAttribute(&#x27;aria-label&#x27;, &#x27;Copy&#x27;);}, 3000);"><span class="ready"></span><span class="success"></span></button><span class="line"><span style="color:#D73A49">public</span><span style="color:#D73A49"> function</span><span style="color:#6F42C1"> main</span><span style="color:#24292E">() </span><span style="color:#D73A49">returns</span><span style="color:#D73A49"> error?</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#24292E">    ParamterSchema param </span><span style="color:#D73A49">=</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#24292E">        'type</span><span style="color:#D73A49">:</span><span style="color:#032F62"> "object"</span><span style="color:#24292E">,</span></span>
<span class="line"><span style="color:#24292E">        properties</span><span style="color:#D73A49">:</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#032F62">            "location"</span><span style="color:#D73A49">:</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#24292E">                'type</span><span style="color:#D73A49">:</span><span style="color:#032F62"> "string"</span><span style="color:#24292E">,</span></span>
<span class="line"><span style="color:#24292E">                description</span><span style="color:#D73A49">:</span><span style="color:#032F62"> "City and country e.g. Bogotá, Colombia"</span></span>
<span class="line"><span style="color:#24292E">            }</span></span>
<span class="line"><span style="color:#24292E">        },</span></span>
<span class="line"><span style="color:#24292E">        required</span><span style="color:#D73A49">:</span><span style="color:#24292E"> [</span><span style="color:#032F62">"location"</span><span style="color:#24292E">],</span></span>
<span class="line"><span style="color:#24292E">        additionalProperties</span><span style="color:#D73A49">:</span><span style="color:#005CC5"> false</span></span>
<span class="line"><span style="color:#24292E">    };</span></span>
<span class="line"><span style="color:#24292E">    chat</span><span style="color:#D73A49">:</span><span style="color:#24292E">CreateChatCompletionRequest request </span><span style="color:#D73A49">=</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#24292E">        model</span><span style="color:#D73A49">:</span><span style="color:#032F62"> "gpt-4o-mini"</span><span style="color:#24292E">,</span></span>
<span class="line"><span style="color:#24292E">        messages</span><span style="color:#D73A49">:</span><span style="color:#24292E"> [</span></span>
<span class="line"><span style="color:#24292E">            {</span></span>
<span class="line"><span style="color:#6F42C1">                role</span><span style="color:#24292E">: </span><span style="color:#032F62">"user"</span><span style="color:#24292E">,</span></span>
<span class="line"><span style="color:#6F42C1">                content</span><span style="color:#24292E">: </span><span style="color:#005CC5">string</span><span style="color:#24292E"> `What is the weather like in Paris today?`</span></span>
<span class="line"><span style="color:#24292E">            }</span></span>
<span class="line"><span style="color:#24292E">        ],</span></span>
<span class="line"><span style="color:#24292E">        tools</span><span style="color:#D73A49">:</span><span style="color:#24292E"> [</span></span>
<span class="line"><span style="color:#24292E">        {</span></span>
<span class="line"><span style="color:#24292E">            'type</span><span style="color:#D73A49">:</span><span style="color:#032F62"> "function"</span><span style="color:#24292E">,</span></span>
<span class="line"><span style="color:#24292E">            'function</span><span style="color:#D73A49">:</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#6F42C1">                name</span><span style="color:#24292E">: </span><span style="color:#032F62">"get_weather"</span><span style="color:#24292E">,</span></span>
<span class="line"><span style="color:#6F42C1">                description</span><span style="color:#24292E">: </span><span style="color:#032F62">"Get current temperature for a given location."</span><span style="color:#24292E">,</span></span>
<span class="line"><span style="color:#6F42C1">                parameters</span><span style="color:#24292E">: param,</span></span>
<span class="line"><span style="color:#6F42C1">                strict</span><span style="color:#24292E">: </span><span style="color:#005CC5">true</span></span>
<span class="line"><span style="color:#24292E">            }</span></span>
<span class="line"><span style="color:#24292E">        }</span></span>
<span class="line"><span style="color:#24292E">        ]</span></span>
<span class="line"><span style="color:#24292E">    };</span></span>
<span class="line"><span style="color:#24292E">    chat</span><span style="color:#D73A49">:</span><span style="color:#24292E">CreateChatCompletionResponse completionRes </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> check</span><span style="color:#24292E"> openAIChat</span><span style="color:#D73A49">->/</span><span style="color:#24292E">chat</span><span style="color:#D73A49">/</span><span style="color:#24292E">completions.</span><span style="color:#6F42C1">post</span><span style="color:#24292E">(</span><span style="color:#E36209">request</span><span style="color:#24292E">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E">    chat</span><span style="color:#D73A49">:</span><span style="color:#24292E">ChatCompletionMessageToolCalls toolCalls </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> check</span><span style="color:#24292E"> completionRes.choices[</span><span style="color:#005CC5">0</span><span style="color:#24292E">].message.tool_calls.</span><span style="color:#6F42C1">ensureType</span><span style="color:#24292E">();</span></span>
<span class="line"><span style="color:#24292E">    io</span><span style="color:#D73A49">:</span><span style="color:#6F42C1">println</span><span style="color:#24292E">(</span><span style="color:#032F62">"Tool Calls: "</span><span style="color:#24292E">, </span><span style="color:#E36209">toolCalls</span><span style="color:#24292E">);</span></span>
<span class="line"><span style="color:#24292E">}</span></span><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 448 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg' style='float: right;'%3E%3Ctitle%3ECopy%3C/title%3E%3Cpath d='M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z'%3E%3C/path%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 512 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg'%3E%3Ctitle%3ECopied%3C/title%3E%3Cpath d='M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z'%3E%3C/path%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {background-color: transparent;border: none;right: 1px;padding: 0;width: 16px;height: 16px;display: flex;margin-top: -20px;margin-right: 8px;position: absolute;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}.Code_codeSnippet__ayQ3y button.rehype-pretty-copy {margin-top: -10px;}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></pre></div></div></div><div role="tabpanel" id="code-tabpane-chat3" aria-labelledby="code-tab-chat3" class="fade tab-pane"><div class="Code_codeSnippet__qfa0_"><div class="highlight"><pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><button type="button" title="Copy" aria-label="Copy" data="public function main() returns error? {
    // Get information on upcoming and recently released movies from TMDB
    final themoviedb:Client moviedb = check new themoviedb:Client({apiKey: moviedbApiKey});
    themoviedb:InlineResponse2001 upcomingMovies = check moviedb->getUpcomingMovies();

    // Generate a creative tweet using Azure OpenAI   
    string prompt = &#x22;Instruction: Generate a creative and short tweet below 250 characters about the following &#x22; +
    &#x22;upcoming and recently released movies. Movies: &#x22;;
    foreach int i in 1 ... NO_OF_MOVIES {
        prompt += string &#x60;${i}. ${upcomingMovies.results[i - 1].title} &#x60;;
    }

    final twitter:Client twitter = check new ({
        auth: {token: token}
    });

    final chat:Client chatClient = check new (config = {auth: {apiKey: openAIToken}}, serviceUrl = serviceUrl);

    chat:CreateChatCompletionRequest chatBody = {
        messages: [{role: &#x22;user&#x22;, &#x22;content&#x22;: prompt}]
    };

    chat:CreateChatCompletionResponse chatResult = check chatClient->/deployments/[deploymentId]/chat/completions.post(&#x22;2023-12-01-preview&#x22;, chatBody);
    record {|chat:ChatCompletionResponseMessage message?; chat:ContentFilterChoiceResults content_filter_results?; int index?; string finish_reason?; anydata...;|}[] choices = check chatResult.choices.ensureType();
    string? tweetContent = choices[0].message?.content;

    if tweetContent is () {
        return error(&#x22;Failed to generate a tweet on upcoming and recently released movies.&#x22;);
    }

    if tweetContent.length() > MAX_TWEET_LENGTH {
        return error(&#x22;The generated tweet exceeded the maximum supported character length.&#x22;);
    }

    // Tweet it out!
    twitter:TweetCreateResponse tweet = check twitter->/tweets.post(payload = {text: tweetContent});
    io:println(&#x22;Tweet: &#x22;, tweet);
}" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);this.setAttribute(&#x27;title&#x27;, &#x27;Copied&#x27;);this.setAttribute(&#x27;aria-label&#x27;, &#x27;Copied&#x27;);window.setTimeout(() => {this.classList.remove(&#x27;rehype-pretty-copied&#x27;);this.setAttribute(&#x27;title&#x27;, &#x27;Copy&#x27;);this.setAttribute(&#x27;aria-label&#x27;, &#x27;Copy&#x27;);}, 3000);"><span class="ready"></span><span class="success"></span></button><span class="line"><span style="color:#D73A49">public</span><span style="color:#D73A49"> function</span><span style="color:#6F42C1"> main</span><span style="color:#24292E">() </span><span style="color:#D73A49">returns</span><span style="color:#D73A49"> error?</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#6A737D">    // Get information on upcoming and recently released movies from TMDB</span></span>
<span class="line"><span style="color:#D73A49">    final</span><span style="color:#24292E"> themoviedb</span><span style="color:#D73A49">:</span><span style="color:#24292E">Client moviedb </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> check</span><span style="color:#D73A49"> new</span><span style="color:#24292E"> themoviedb</span><span style="color:#D73A49">:</span><span style="color:#6F42C1">Client</span><span style="color:#24292E">({apiKey</span><span style="color:#D73A49">:</span><span style="color:#24292E"> moviedbApiKey});</span></span>
<span class="line"><span style="color:#24292E">    themoviedb</span><span style="color:#D73A49">:</span><span style="color:#24292E">InlineResponse2001 upcomingMovies </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> check</span><span style="color:#24292E"> moviedb</span><span style="color:#D73A49">-></span><span style="color:#6F42C1">getUpcomingMovies</span><span style="color:#24292E">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    // Generate a creative tweet using Azure OpenAI   </span></span>
<span class="line"><span style="color:#005CC5">    string</span><span style="color:#24292E"> prompt </span><span style="color:#D73A49">=</span><span style="color:#032F62"> "Instruction: Generate a creative and short tweet below 250 characters about the following "</span><span style="color:#D73A49"> +</span></span>
<span class="line"><span style="color:#032F62">    "upcoming and recently released movies. Movies: "</span><span style="color:#24292E">;</span></span>
<span class="line"><span style="color:#D73A49">    foreach </span><span style="color:#005CC5">int</span><span style="color:#24292E"> i </span><span style="color:#D73A49">in</span><span style="color:#005CC5"> 1</span><span style="color:#D73A49"> ...</span><span style="color:#24292E"> NO_OF_MOVIES {</span></span>
<span class="line"><span style="color:#24292E">        prompt </span><span style="color:#D73A49">+=</span><span style="color:#005CC5"> string</span><span style="color:#032F62"> `${</span><span style="color:#24292E">i</span><span style="color:#032F62">}. ${</span><span style="color:#24292E">upcomingMovies</span><span style="color:#032F62">.</span><span style="color:#24292E">results</span><span style="color:#032F62">[</span><span style="color:#24292E">i</span><span style="color:#D73A49"> -</span><span style="color:#005CC5"> 1</span><span style="color:#032F62">].</span><span style="color:#24292E">title</span><span style="color:#032F62">} `</span><span style="color:#24292E">;</span></span>
<span class="line"><span style="color:#24292E">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">    final</span><span style="color:#24292E"> twitter</span><span style="color:#D73A49">:</span><span style="color:#24292E">Client twitter </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> check</span><span style="color:#D73A49"> new</span><span style="color:#24292E"> ({</span></span>
<span class="line"><span style="color:#24292E">        auth</span><span style="color:#D73A49">:</span><span style="color:#24292E"> {token: token}</span></span>
<span class="line"><span style="color:#24292E">    });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">    final</span><span style="color:#24292E"> chat</span><span style="color:#D73A49">:</span><span style="color:#24292E">Client chatClient </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> check</span><span style="color:#D73A49"> new</span><span style="color:#24292E"> (</span><span style="color:#E36209">config</span><span style="color:#D73A49"> =</span><span style="color:#24292E"> {auth</span><span style="color:#D73A49">:</span><span style="color:#24292E"> {apiKey: openAIToken}}, </span><span style="color:#E36209">serviceUrl</span><span style="color:#D73A49"> =</span><span style="color:#24292E"> serviceUrl);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E">    chat</span><span style="color:#D73A49">:</span><span style="color:#24292E">CreateChatCompletionRequest chatBody </span><span style="color:#D73A49">=</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#24292E">        messages</span><span style="color:#D73A49">:</span><span style="color:#24292E"> [{</span><span style="color:#6F42C1">role</span><span style="color:#24292E">: </span><span style="color:#032F62">"user"</span><span style="color:#24292E">, </span><span style="color:#032F62">"content"</span><span style="color:#D73A49">:</span><span style="color:#24292E"> prompt}]</span></span>
<span class="line"><span style="color:#24292E">    };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E">    chat</span><span style="color:#D73A49">:</span><span style="color:#24292E">CreateChatCompletionResponse chatResult </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> check</span><span style="color:#24292E"> chatClient</span><span style="color:#D73A49">->/</span><span style="color:#24292E">deployments</span><span style="color:#D73A49">/</span><span style="color:#24292E">[deploymentId]</span><span style="color:#D73A49">/</span><span style="color:#24292E">chat</span><span style="color:#D73A49">/</span><span style="color:#24292E">completions.</span><span style="color:#6F42C1">post</span><span style="color:#24292E">(</span><span style="color:#032F62">"2023-12-01-preview"</span><span style="color:#24292E">, </span><span style="color:#E36209">chatBody</span><span style="color:#24292E">);</span></span>
<span class="line"><span style="color:#D73A49">    record</span><span style="color:#24292E"> {</span><span style="color:#D73A49">|</span><span style="color:#24292E">chat</span><span style="color:#D73A49">:</span><span style="color:#24292E">ChatCompletionResponseMessage message?; chat</span><span style="color:#D73A49">:</span><span style="color:#24292E">ContentFilterChoiceResults content_filter_results?; </span><span style="color:#005CC5">int</span><span style="color:#24292E"> index?; </span><span style="color:#005CC5">string</span><span style="color:#24292E"> finish_reason?; </span><span style="color:#005CC5">anydata</span><span style="color:#D73A49">...</span><span style="color:#24292E">;</span><span style="color:#D73A49">|</span><span style="color:#24292E">}[] choices </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> check</span><span style="color:#24292E"> chatResult.choices.</span><span style="color:#6F42C1">ensureType</span><span style="color:#24292E">();</span></span>
<span class="line"><span style="color:#005CC5">    string</span><span style="color:#24292E">? tweetContent </span><span style="color:#D73A49">=</span><span style="color:#24292E"> choices[</span><span style="color:#005CC5">0</span><span style="color:#24292E">].message?.content;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">    if</span><span style="color:#24292E"> tweetContent </span><span style="color:#D73A49">is</span><span style="color:#24292E"> () {</span></span>
<span class="line"><span style="color:#D73A49">        return</span><span style="color:#D73A49"> error</span><span style="color:#24292E">(</span><span style="color:#032F62">"Failed to generate a tweet on upcoming and recently released movies."</span><span style="color:#24292E">);</span></span>
<span class="line"><span style="color:#24292E">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">    if</span><span style="color:#24292E"> tweetContent.</span><span style="color:#6F42C1">length</span><span style="color:#24292E">() </span><span style="color:#D73A49">></span><span style="color:#24292E"> MAX_TWEET_LENGTH {</span></span>
<span class="line"><span style="color:#D73A49">        return</span><span style="color:#D73A49"> error</span><span style="color:#24292E">(</span><span style="color:#032F62">"The generated tweet exceeded the maximum supported character length."</span><span style="color:#24292E">);</span></span>
<span class="line"><span style="color:#24292E">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    // Tweet it out!</span></span>
<span class="line"><span style="color:#24292E">    twitter</span><span style="color:#D73A49">:</span><span style="color:#24292E">TweetCreateResponse tweet </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> check</span><span style="color:#24292E"> twitter</span><span style="color:#D73A49">->/</span><span style="color:#24292E">tweets.</span><span style="color:#6F42C1">post</span><span style="color:#24292E">(</span><span style="color:#E36209">payload</span><span style="color:#D73A49"> =</span><span style="color:#24292E"> {text</span><span style="color:#D73A49">:</span><span style="color:#24292E"> tweetContent});</span></span>
<span class="line"><span style="color:#24292E">    io</span><span style="color:#D73A49">:</span><span style="color:#6F42C1">println</span><span style="color:#24292E">(</span><span style="color:#032F62">"Tweet: "</span><span style="color:#24292E">, </span><span style="color:#E36209">tweet</span><span style="color:#24292E">);</span></span>
<span class="line"><span style="color:#24292E">}</span></span><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 448 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg' style='float: right;'%3E%3Ctitle%3ECopy%3C/title%3E%3Cpath d='M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z'%3E%3C/path%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 512 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg'%3E%3Ctitle%3ECopied%3C/title%3E%3Cpath d='M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z'%3E%3C/path%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {background-color: transparent;border: none;right: 1px;padding: 0;width: 16px;height: 16px;display: flex;margin-top: -20px;margin-right: 8px;position: absolute;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}.Code_codeSnippet__ayQ3y button.rehype-pretty-copy {margin-top: -10px;}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></pre></div></div></div></div></div></div></div></div></div></div><div class="pageContentRow integration code row"><div class="col-12"><div class="container"><div class="row"><div class="Code_box__nw1pZ col-12"><h2 id="ballerina_multimodel" class="section"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-link-45deg mdButton pe-2" viewBox="0 0 16 16"><path d="M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1.002 1.002 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4.018 4.018 0 0 1-.128-1.287z"></path><path d="M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243L6.586 4.672z"></path></svg>Beyond text: Multimodal AI at your fingertips</h2></div></div><div class="row"><div class="Code_box__nw1pZ col-lg-5 col-md-5 col-12"><div><p>AI isn’t just about text—and neither is Ballerina. With connectors to popular AI providers, you can integrate image generation, audio synthesis, and other multimodal capabilities into your applications. Whatever the medium, Ballerina helps you bring it all together through a unified, type-safe integration layer.</p><div class="Code_dVersion__eXhCf"><span>Sample 1: Describe an image using OpenAI</span><a href="https://github.com/xlight05/ai-samples/blob/usecase-samples/describe_photo/main.bal" class="Code_cDownload__AYiFC" target="_blank" rel="noreferrer">View code on GitHub</a></div><div class="Code_dVersion__eXhCf"><span>Sample 2: Create products in Shopify using OpenAI</span><a href="https://github.com/ballerina-guides/ai-samples/tree/main/create_products_in_shopify_using_openai/main.bal" class="Code_cDownload__AYiFC" target="_blank" rel="noreferrer">View code on GitHub</a></div><div class="Code_dVersion__eXhCf"><span>Sample 3: Convert audio to text and translate using OpenAI</span><a href="https://github.com/ballerina-guides/ai-samples/blob/main/convert_audio_to_text_and_translate_using_openai/main.bal" class="Code_cDownload__AYiFC" target="_blank" rel="noreferrer">View code on GitHub</a></div><div class="Code_dVersion__eXhCf"><span>Sample 4: Audio-to-text summarization using OpenAI</span><a href="https://github.com/ballerina-guides/ai-samples/blob/main/audio_to_text_summarization_using_openai/main.bal" class="Code_cDownload__AYiFC" target="_blank" rel="noreferrer">View code on GitHub</a></div></div></div><div class="Code_box__nw1pZ col-lg-7 col-md-7 col-12"><div id="code-tab"><ul class="mb-3 codeTabs nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><button type="button" id="code-tab-dalle1" role="tab" data-rr-ui-event-key="dalle1" aria-controls="code-tabpane-dalle1" aria-selected="true" class="nav-link active">Sample 1</button></li><li class="nav-item" role="presentation"><button type="button" id="code-tab-dalle2" role="tab" data-rr-ui-event-key="dalle2" aria-controls="code-tabpane-dalle2" aria-selected="false" tabindex="-1" class="nav-link">Sample 2</button></li><li class="nav-item" role="presentation"><button type="button" id="code-tab-dalle3" role="tab" data-rr-ui-event-key="dalle3" aria-controls="code-tabpane-dalle3" aria-selected="false" tabindex="-1" class="nav-link">Sample 3</button></li><li class="nav-item" role="presentation"><button type="button" id="code-tab-dalle4" role="tab" data-rr-ui-event-key="dalle4" aria-controls="code-tabpane-dalle4" aria-selected="false" tabindex="-1" class="nav-link">Sample 4</button></li></ul><div class="tab-content"><div role="tabpanel" id="code-tabpane-dalle1" aria-labelledby="code-tab-dalle1" class="fade tab-pane active show"><div class="Code_codeSnippet__qfa0_"><div class="highlight"><pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><button type="button" title="Copy" aria-label="Copy" data="public function main() returns error? {
    chat:CreateChatCompletionRequest request = {
        model: &#x22;gpt-4o-mini&#x22;,
        messages: [
            {
                role: &#x22;user&#x22;,
                content: [
                    {
                        &#x27;type: &#x22;text&#x22;,
                        text: &#x22;What is in this image?&#x22;
                    },
                    {
                        &#x27;type: &#x22;image_url&#x22;,
                        image_url: {
                            url: &#x22;https://upload.wikimedia.org/wikipedia/commons/thumb/d/dd/Gfp-wisconsin-madison-the-nature-boardwalk.jpg/2560px-Gfp-wisconsin-madison-the-nature-boardwalk.jpg&#x22;
                        }
                    }
                ]
            }
        ]
    };
    chat:CreateChatCompletionResponse completionRes = check openAIChat->/chat/completions.post(request);

    string content = check completionRes.choices[0].message.content.ensureType();
    io:println(&#x22;Photo Description: &#x22;, content);   
}" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);this.setAttribute(&#x27;title&#x27;, &#x27;Copied&#x27;);this.setAttribute(&#x27;aria-label&#x27;, &#x27;Copied&#x27;);window.setTimeout(() => {this.classList.remove(&#x27;rehype-pretty-copied&#x27;);this.setAttribute(&#x27;title&#x27;, &#x27;Copy&#x27;);this.setAttribute(&#x27;aria-label&#x27;, &#x27;Copy&#x27;);}, 3000);"><span class="ready"></span><span class="success"></span></button><span class="line"><span style="color:#D73A49">public</span><span style="color:#D73A49"> function</span><span style="color:#6F42C1"> main</span><span style="color:#24292E">() </span><span style="color:#D73A49">returns</span><span style="color:#D73A49"> error?</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#24292E">    chat</span><span style="color:#D73A49">:</span><span style="color:#24292E">CreateChatCompletionRequest request </span><span style="color:#D73A49">=</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#24292E">        model</span><span style="color:#D73A49">:</span><span style="color:#032F62"> "gpt-4o-mini"</span><span style="color:#24292E">,</span></span>
<span class="line"><span style="color:#24292E">        messages</span><span style="color:#D73A49">:</span><span style="color:#24292E"> [</span></span>
<span class="line"><span style="color:#24292E">            {</span></span>
<span class="line"><span style="color:#6F42C1">                role</span><span style="color:#24292E">: </span><span style="color:#032F62">"user"</span><span style="color:#24292E">,</span></span>
<span class="line"><span style="color:#6F42C1">                content</span><span style="color:#24292E">: [</span></span>
<span class="line"><span style="color:#24292E">                    {</span></span>
<span class="line"><span style="color:#24292E">                        'type</span><span style="color:#D73A49">:</span><span style="color:#032F62"> "text"</span><span style="color:#24292E">,</span></span>
<span class="line"><span style="color:#6F42C1">                        text</span><span style="color:#24292E">: </span><span style="color:#032F62">"What is in this image?"</span></span>
<span class="line"><span style="color:#24292E">                    },</span></span>
<span class="line"><span style="color:#24292E">                    {</span></span>
<span class="line"><span style="color:#24292E">                        'type</span><span style="color:#D73A49">:</span><span style="color:#032F62"> "image_url"</span><span style="color:#24292E">,</span></span>
<span class="line"><span style="color:#6F42C1">                        image_url</span><span style="color:#24292E">: {</span></span>
<span class="line"><span style="color:#6F42C1">                            url</span><span style="color:#24292E">: </span><span style="color:#032F62">"https://upload.wikimedia.org/wikipedia/commons/thumb/d/dd/Gfp-wisconsin-madison-the-nature-boardwalk.jpg/2560px-Gfp-wisconsin-madison-the-nature-boardwalk.jpg"</span></span>
<span class="line"><span style="color:#24292E">                        }</span></span>
<span class="line"><span style="color:#24292E">                    }</span></span>
<span class="line"><span style="color:#24292E">                ]</span></span>
<span class="line"><span style="color:#24292E">            }</span></span>
<span class="line"><span style="color:#24292E">        ]</span></span>
<span class="line"><span style="color:#24292E">    };</span></span>
<span class="line"><span style="color:#24292E">    chat</span><span style="color:#D73A49">:</span><span style="color:#24292E">CreateChatCompletionResponse completionRes </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> check</span><span style="color:#24292E"> openAIChat</span><span style="color:#D73A49">->/</span><span style="color:#24292E">chat</span><span style="color:#D73A49">/</span><span style="color:#24292E">completions.</span><span style="color:#6F42C1">post</span><span style="color:#24292E">(</span><span style="color:#E36209">request</span><span style="color:#24292E">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#005CC5">    string</span><span style="color:#24292E"> content </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> check</span><span style="color:#24292E"> completionRes.choices[</span><span style="color:#005CC5">0</span><span style="color:#24292E">].message.content.</span><span style="color:#6F42C1">ensureType</span><span style="color:#24292E">();</span></span>
<span class="line"><span style="color:#24292E">    io</span><span style="color:#D73A49">:</span><span style="color:#6F42C1">println</span><span style="color:#24292E">(</span><span style="color:#032F62">"Photo Description: "</span><span style="color:#24292E">, </span><span style="color:#E36209">content</span><span style="color:#24292E">);   </span></span>
<span class="line"><span style="color:#24292E">}</span></span><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 448 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg' style='float: right;'%3E%3Ctitle%3ECopy%3C/title%3E%3Cpath d='M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z'%3E%3C/path%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 512 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg'%3E%3Ctitle%3ECopied%3C/title%3E%3Cpath d='M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z'%3E%3C/path%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {background-color: transparent;border: none;right: 1px;padding: 0;width: 16px;height: 16px;display: flex;margin-top: -20px;margin-right: 8px;position: absolute;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}.Code_codeSnippet__ayQ3y button.rehype-pretty-copy {margin-top: -10px;}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></pre></div></div></div><div role="tabpanel" id="code-tabpane-dalle2" aria-labelledby="code-tab-dalle2" class="fade tab-pane"><div class="Code_codeSnippet__qfa0_"><div class="highlight"><pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><button type="button" title="Copy" aria-label="Copy" data="service / on new http:Listener(9090) {
    resource function post products() returns int|error {
        // Get the product details from the last inserted row of the Google Sheet.
        sheets:Range range = check gsheets->getRange(googleSheetId, &#x22;Sheet1&#x22;, &#x22;A2:F&#x22;);
        var [name, benefits, features, productType] = getProduct(range);

        // Generate a product description from OpenAI for a given product name.
        string query = string &#x60;generate a product descirption in 250 words about ${name}&#x60;;
        chat:CreateChatCompletionRequest request = {
            model: &#x22;gpt-4o&#x22;,
            messages: [
                {
                    &#x22;role&#x22;: &#x22;user&#x22;,
                    &#x22;content&#x22;: query
                }
            ],
            max_tokens: 100
        };

        chat:CreateChatCompletionResponse completionRes = check openAIChat->/chat/completions.post(request);

        // Generate a product image from OpenAI for the given product.
        images:CreateImageRequest imagePrmt = {prompt: string &#x60;${name}, ${benefits}, ${features}&#x60;};
        images:ImagesResponse imageRes = check openAIImages->/images/generations.post(imagePrmt);

        // Create a product in Shopify.
        shopify:CreateProduct product = {
            product: {
                title: name,
                body_html: completionRes.choices[0].message.content,
                tags: features,
                product_type: productType,
                images: [{src: imageRes.data[0].url}]
            }
        };
        shopify:ProductObject prodObj = check shopify->createProduct(product);
        int? pid = prodObj?.product?.id;
        if pid is () {
            return error(&#x22;Error in creating product in Shopify&#x22;);
        }
        return pid;
    }
}" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);this.setAttribute(&#x27;title&#x27;, &#x27;Copied&#x27;);this.setAttribute(&#x27;aria-label&#x27;, &#x27;Copied&#x27;);window.setTimeout(() => {this.classList.remove(&#x27;rehype-pretty-copied&#x27;);this.setAttribute(&#x27;title&#x27;, &#x27;Copy&#x27;);this.setAttribute(&#x27;aria-label&#x27;, &#x27;Copy&#x27;);}, 3000);"><span class="ready"></span><span class="success"></span></button><span class="line"><span style="color:#D73A49">service</span><span style="color:#24292E"> / </span><span style="color:#D73A49">on</span><span style="color:#D73A49"> new</span><span style="color:#24292E"> http:Listener(</span><span style="color:#005CC5">9090</span><span style="color:#24292E">) {</span></span>
<span class="line"><span style="color:#D73A49">    resource</span><span style="color:#D73A49"> function</span><span style="color:#6F42C1"> post</span><span style="color:#6F42C1"> products</span><span style="color:#24292E">() </span><span style="color:#D73A49">returns</span><span style="color:#005CC5"> int</span><span style="color:#D73A49">|error</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#6A737D">        // Get the product details from the last inserted row of the Google Sheet.</span></span>
<span class="line"><span style="color:#24292E">        sheets</span><span style="color:#D73A49">:</span><span style="color:#24292E">Range range </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> check</span><span style="color:#24292E"> gsheets</span><span style="color:#D73A49">-></span><span style="color:#6F42C1">getRange</span><span style="color:#24292E">(</span><span style="color:#E36209">googleSheetId</span><span style="color:#24292E">, </span><span style="color:#032F62">"Sheet1"</span><span style="color:#24292E">, </span><span style="color:#032F62">"A2:F"</span><span style="color:#24292E">);</span></span>
<span class="line"><span style="color:#005CC5">        var</span><span style="color:#24292E"> [name, benefits, features, productType] </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> getProduct</span><span style="color:#24292E">(</span><span style="color:#E36209">range</span><span style="color:#24292E">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">        // Generate a product description from OpenAI for a given product name.</span></span>
<span class="line"><span style="color:#005CC5">        string</span><span style="color:#24292E"> query </span><span style="color:#D73A49">=</span><span style="color:#005CC5"> string</span><span style="color:#032F62"> `generate a product descirption in 250 words about ${</span><span style="color:#24292E">name</span><span style="color:#032F62">}`</span><span style="color:#24292E">;</span></span>
<span class="line"><span style="color:#24292E">        chat</span><span style="color:#D73A49">:</span><span style="color:#24292E">CreateChatCompletionRequest request </span><span style="color:#D73A49">=</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#24292E">            model</span><span style="color:#D73A49">:</span><span style="color:#032F62"> "gpt-4o"</span><span style="color:#24292E">,</span></span>
<span class="line"><span style="color:#24292E">            messages</span><span style="color:#D73A49">:</span><span style="color:#24292E"> [</span></span>
<span class="line"><span style="color:#24292E">                {</span></span>
<span class="line"><span style="color:#032F62">                    "role"</span><span style="color:#D73A49">:</span><span style="color:#032F62"> "user"</span><span style="color:#24292E">,</span></span>
<span class="line"><span style="color:#032F62">                    "content"</span><span style="color:#D73A49">:</span><span style="color:#24292E"> query</span></span>
<span class="line"><span style="color:#24292E">                }</span></span>
<span class="line"><span style="color:#24292E">            ],</span></span>
<span class="line"><span style="color:#24292E">            max_tokens</span><span style="color:#D73A49">:</span><span style="color:#005CC5"> 100</span></span>
<span class="line"><span style="color:#24292E">        };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E">        chat</span><span style="color:#D73A49">:</span><span style="color:#24292E">CreateChatCompletionResponse completionRes </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> check</span><span style="color:#24292E"> openAIChat</span><span style="color:#D73A49">->/</span><span style="color:#24292E">chat</span><span style="color:#D73A49">/</span><span style="color:#24292E">completions.</span><span style="color:#6F42C1">post</span><span style="color:#24292E">(</span><span style="color:#E36209">request</span><span style="color:#24292E">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">        // Generate a product image from OpenAI for the given product.</span></span>
<span class="line"><span style="color:#24292E">        images</span><span style="color:#D73A49">:</span><span style="color:#24292E">CreateImageRequest imagePrmt </span><span style="color:#D73A49">=</span><span style="color:#24292E"> {prompt</span><span style="color:#D73A49">:</span><span style="color:#24292E"> string </span><span style="color:#032F62">`${</span><span style="color:#24292E">name</span><span style="color:#032F62">}, ${</span><span style="color:#24292E">benefits</span><span style="color:#032F62">}, ${</span><span style="color:#24292E">features</span><span style="color:#032F62">}`</span><span style="color:#24292E">};</span></span>
<span class="line"><span style="color:#24292E">        images</span><span style="color:#D73A49">:</span><span style="color:#24292E">ImagesResponse imageRes </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> check</span><span style="color:#24292E"> openAIImages</span><span style="color:#D73A49">->/</span><span style="color:#24292E">images</span><span style="color:#D73A49">/</span><span style="color:#24292E">generations.</span><span style="color:#6F42C1">post</span><span style="color:#24292E">(</span><span style="color:#E36209">imagePrmt</span><span style="color:#24292E">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">        // Create a product in Shopify.</span></span>
<span class="line"><span style="color:#24292E">        shopify</span><span style="color:#D73A49">:</span><span style="color:#24292E">CreateProduct product </span><span style="color:#D73A49">=</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#24292E">            product</span><span style="color:#D73A49">:</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#24292E">                title</span><span style="color:#D73A49">:</span><span style="color:#24292E"> name,</span></span>
<span class="line"><span style="color:#24292E">                body_html</span><span style="color:#D73A49">:</span><span style="color:#24292E"> completionRes.choices[</span><span style="color:#005CC5">0</span><span style="color:#24292E">].message.content,</span></span>
<span class="line"><span style="color:#24292E">                tags</span><span style="color:#D73A49">:</span><span style="color:#24292E"> features,</span></span>
<span class="line"><span style="color:#24292E">                product_type</span><span style="color:#D73A49">:</span><span style="color:#24292E"> productType,</span></span>
<span class="line"><span style="color:#24292E">                images</span><span style="color:#D73A49">:</span><span style="color:#24292E"> [{</span><span style="color:#6F42C1">src</span><span style="color:#24292E">: imageRes.data[</span><span style="color:#005CC5">0</span><span style="color:#24292E">].url}]</span></span>
<span class="line"><span style="color:#24292E">            }</span></span>
<span class="line"><span style="color:#24292E">        };</span></span>
<span class="line"><span style="color:#24292E">        shopify</span><span style="color:#D73A49">:</span><span style="color:#24292E">ProductObject prodObj </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> check</span><span style="color:#24292E"> shopify</span><span style="color:#D73A49">-></span><span style="color:#6F42C1">createProduct</span><span style="color:#24292E">(</span><span style="color:#E36209">product</span><span style="color:#24292E">);</span></span>
<span class="line"><span style="color:#005CC5">        int</span><span style="color:#24292E">? pid </span><span style="color:#D73A49">=</span><span style="color:#24292E"> prodObj?.product?.id;</span></span>
<span class="line"><span style="color:#D73A49">        if</span><span style="color:#24292E"> pid </span><span style="color:#D73A49">is</span><span style="color:#24292E"> () {</span></span>
<span class="line"><span style="color:#D73A49">            return</span><span style="color:#D73A49"> error</span><span style="color:#24292E">(</span><span style="color:#032F62">"Error in creating product in Shopify"</span><span style="color:#24292E">);</span></span>
<span class="line"><span style="color:#24292E">        }</span></span>
<span class="line"><span style="color:#D73A49">        return</span><span style="color:#24292E"> pid;</span></span>
<span class="line"><span style="color:#24292E">    }</span></span>
<span class="line"><span style="color:#24292E">}</span></span><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 448 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg' style='float: right;'%3E%3Ctitle%3ECopy%3C/title%3E%3Cpath d='M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z'%3E%3C/path%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 512 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg'%3E%3Ctitle%3ECopied%3C/title%3E%3Cpath d='M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z'%3E%3C/path%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {background-color: transparent;border: none;right: 1px;padding: 0;width: 16px;height: 16px;display: flex;margin-top: -20px;margin-right: 8px;position: absolute;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}.Code_codeSnippet__ayQ3y button.rehype-pretty-copy {margin-top: -10px;}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></pre></div></div></div><div role="tabpanel" id="code-tabpane-dalle3" aria-labelledby="code-tab-dalle3" class="fade tab-pane"><div class="Code_codeSnippet__qfa0_"><div class="highlight"><pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><button type="button" title="Copy" aria-label="Copy" data="public function main(string audioURL, string toLanguage) returns error? {
    // Creates a HTTP client to download the audio file
    http:Client audioEP = check new (audioURL);
    http:Response httpResp = check audioEP->get(&#x22;&#x22;);
    byte[] audioBytes = check httpResp.getBinaryPayload();
    check io:fileWriteBytes(AUDIO_FILE_PATH, audioBytes);

    // Creates a request to translate the audio file to text (English)
    audio:CreateTranslationRequest translationsReq = {
        file: {fileContent: check io:fileReadBytes(AUDIO_FILE_PATH), fileName: AUDIO_FILE},
        model: &#x22;whisper-1&#x22;
    };

    // Translates the audio file to text (English)
    audio:Client openAIAudio = check new ({auth: {token: openAIToken}});
    audio:CreateTranscriptionResponse transcriptionRes = check openAIAudio->/audio/translations.post(translationsReq);
    io:println(&#x22;Audio text in English: &#x22;, transcriptionRes.text);

    final chat:Client openAIChat = check new ({
        auth: {
            token: openAIToken
        }
    });

    string query = string &#x60;Translate the following text from English to ${toLanguage} : ${transcriptionRes.text}&#x60;;

    // Creates a request to translate the text from English to another language
    chat:CreateChatCompletionRequest request = {
        model: &#x22;gpt-4o&#x22;,
        messages: [
            {
                &#x22;role&#x22;: &#x22;user&#x22;,
                &#x22;content&#x22;: query
            }
        ],
        temperature: 0.7,
        max_tokens: 256,
        top_p: 1,
        frequency_penalty: 0,
        presence_penalty: 0
    };

    // Translates the text from English to another language
    chat:CreateChatCompletionResponse response = check openAIChat->/chat/completions.post(request);
    string? translatedText = response.choices[0].message.content;

    if translatedText is () {
        return error(&#x22;Failed to translate the given audio.&#x22;);
    }
    io:println(&#x22;Translated text: &#x22;, translatedText);
}" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);this.setAttribute(&#x27;title&#x27;, &#x27;Copied&#x27;);this.setAttribute(&#x27;aria-label&#x27;, &#x27;Copied&#x27;);window.setTimeout(() => {this.classList.remove(&#x27;rehype-pretty-copied&#x27;);this.setAttribute(&#x27;title&#x27;, &#x27;Copy&#x27;);this.setAttribute(&#x27;aria-label&#x27;, &#x27;Copy&#x27;);}, 3000);"><span class="ready"></span><span class="success"></span></button><span class="line"><span style="color:#D73A49">public</span><span style="color:#D73A49"> function</span><span style="color:#6F42C1"> main</span><span style="color:#24292E">(</span><span style="color:#005CC5">string</span><span style="color:#E36209"> audioURL</span><span style="color:#24292E">, </span><span style="color:#005CC5">string</span><span style="color:#E36209"> toLanguage</span><span style="color:#24292E">) </span><span style="color:#D73A49">returns</span><span style="color:#D73A49"> error?</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#6A737D">    // Creates a HTTP client to download the audio file</span></span>
<span class="line"><span style="color:#24292E">    http</span><span style="color:#D73A49">:</span><span style="color:#24292E">Client audioEP </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> check</span><span style="color:#D73A49"> new</span><span style="color:#24292E"> (</span><span style="color:#E36209">audioURL</span><span style="color:#24292E">);</span></span>
<span class="line"><span style="color:#24292E">    http</span><span style="color:#D73A49">:</span><span style="color:#24292E">Response httpResp </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> check</span><span style="color:#24292E"> audioEP</span><span style="color:#D73A49">-></span><span style="color:#6F42C1">get</span><span style="color:#24292E">(</span><span style="color:#032F62">""</span><span style="color:#24292E">);</span></span>
<span class="line"><span style="color:#005CC5">    byte</span><span style="color:#24292E">[] audioBytes </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> check</span><span style="color:#24292E"> httpResp.</span><span style="color:#6F42C1">getBinaryPayload</span><span style="color:#24292E">();</span></span>
<span class="line"><span style="color:#D73A49">    check</span><span style="color:#24292E"> io</span><span style="color:#D73A49">:</span><span style="color:#6F42C1">fileWriteBytes</span><span style="color:#24292E">(</span><span style="color:#E36209">AUDIO_FILE_PATH</span><span style="color:#24292E">, </span><span style="color:#E36209">audioBytes</span><span style="color:#24292E">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    // Creates a request to translate the audio file to text (English)</span></span>
<span class="line"><span style="color:#24292E">    audio</span><span style="color:#D73A49">:</span><span style="color:#24292E">CreateTranslationRequest translationsReq </span><span style="color:#D73A49">=</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#24292E">        file</span><span style="color:#D73A49">:</span><span style="color:#24292E"> {fileContent: </span><span style="color:#D73A49">check</span><span style="color:#24292E"> io:</span><span style="color:#6F42C1">fileReadBytes</span><span style="color:#24292E">(</span><span style="color:#E36209">AUDIO_FILE_PATH</span><span style="color:#24292E">), fileName</span><span style="color:#D73A49">:</span><span style="color:#24292E"> AUDIO_FILE},</span></span>
<span class="line"><span style="color:#24292E">        model</span><span style="color:#D73A49">:</span><span style="color:#032F62"> "whisper-1"</span></span>
<span class="line"><span style="color:#24292E">    };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    // Translates the audio file to text (English)</span></span>
<span class="line"><span style="color:#24292E">    audio</span><span style="color:#D73A49">:</span><span style="color:#24292E">Client openAIAudio </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> check</span><span style="color:#D73A49"> new</span><span style="color:#24292E"> ({auth</span><span style="color:#D73A49">:</span><span style="color:#24292E"> {token: openAIToken}});</span></span>
<span class="line"><span style="color:#24292E">    audio</span><span style="color:#D73A49">:</span><span style="color:#24292E">CreateTranscriptionResponse transcriptionRes </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> check</span><span style="color:#24292E"> openAIAudio</span><span style="color:#D73A49">->/</span><span style="color:#24292E">audio</span><span style="color:#D73A49">/</span><span style="color:#24292E">translations.</span><span style="color:#6F42C1">post</span><span style="color:#24292E">(</span><span style="color:#E36209">translationsReq</span><span style="color:#24292E">);</span></span>
<span class="line"><span style="color:#24292E">    io</span><span style="color:#D73A49">:</span><span style="color:#6F42C1">println</span><span style="color:#24292E">(</span><span style="color:#032F62">"Audio text in English: "</span><span style="color:#24292E">, transcriptionRes.text);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">    final</span><span style="color:#24292E"> chat</span><span style="color:#D73A49">:</span><span style="color:#24292E">Client openAIChat </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> check</span><span style="color:#D73A49"> new</span><span style="color:#24292E"> ({</span></span>
<span class="line"><span style="color:#24292E">        auth</span><span style="color:#D73A49">:</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#24292E">            token</span><span style="color:#D73A49">:</span><span style="color:#24292E"> openAIToken</span></span>
<span class="line"><span style="color:#24292E">        }</span></span>
<span class="line"><span style="color:#24292E">    });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#005CC5">    string</span><span style="color:#24292E"> query </span><span style="color:#D73A49">=</span><span style="color:#005CC5"> string</span><span style="color:#032F62"> `Translate the following text from English to ${</span><span style="color:#24292E">toLanguage</span><span style="color:#032F62">} : ${</span><span style="color:#24292E">transcriptionRes</span><span style="color:#032F62">.</span><span style="color:#24292E">text</span><span style="color:#032F62">}`</span><span style="color:#24292E">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    // Creates a request to translate the text from English to another language</span></span>
<span class="line"><span style="color:#24292E">    chat</span><span style="color:#D73A49">:</span><span style="color:#24292E">CreateChatCompletionRequest request </span><span style="color:#D73A49">=</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#24292E">        model</span><span style="color:#D73A49">:</span><span style="color:#032F62"> "gpt-4o"</span><span style="color:#24292E">,</span></span>
<span class="line"><span style="color:#24292E">        messages</span><span style="color:#D73A49">:</span><span style="color:#24292E"> [</span></span>
<span class="line"><span style="color:#24292E">            {</span></span>
<span class="line"><span style="color:#032F62">                "role"</span><span style="color:#D73A49">:</span><span style="color:#032F62"> "user"</span><span style="color:#24292E">,</span></span>
<span class="line"><span style="color:#032F62">                "content"</span><span style="color:#D73A49">:</span><span style="color:#24292E"> query</span></span>
<span class="line"><span style="color:#24292E">            }</span></span>
<span class="line"><span style="color:#24292E">        ],</span></span>
<span class="line"><span style="color:#24292E">        temperature</span><span style="color:#D73A49">:</span><span style="color:#005CC5"> 0.7</span><span style="color:#24292E">,</span></span>
<span class="line"><span style="color:#24292E">        max_tokens</span><span style="color:#D73A49">:</span><span style="color:#005CC5"> 256</span><span style="color:#24292E">,</span></span>
<span class="line"><span style="color:#24292E">        top_p</span><span style="color:#D73A49">:</span><span style="color:#005CC5"> 1</span><span style="color:#24292E">,</span></span>
<span class="line"><span style="color:#24292E">        frequency_penalty</span><span style="color:#D73A49">:</span><span style="color:#005CC5"> 0</span><span style="color:#24292E">,</span></span>
<span class="line"><span style="color:#24292E">        presence_penalty</span><span style="color:#D73A49">:</span><span style="color:#005CC5"> 0</span></span>
<span class="line"><span style="color:#24292E">    };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    // Translates the text from English to another language</span></span>
<span class="line"><span style="color:#24292E">    chat</span><span style="color:#D73A49">:</span><span style="color:#24292E">CreateChatCompletionResponse response </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> check</span><span style="color:#24292E"> openAIChat</span><span style="color:#D73A49">->/</span><span style="color:#24292E">chat</span><span style="color:#D73A49">/</span><span style="color:#24292E">completions.</span><span style="color:#6F42C1">post</span><span style="color:#24292E">(</span><span style="color:#E36209">request</span><span style="color:#24292E">);</span></span>
<span class="line"><span style="color:#005CC5">    string</span><span style="color:#24292E">? translatedText </span><span style="color:#D73A49">=</span><span style="color:#24292E"> response.choices[</span><span style="color:#005CC5">0</span><span style="color:#24292E">].message.content;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">    if</span><span style="color:#24292E"> translatedText </span><span style="color:#D73A49">is</span><span style="color:#24292E"> () {</span></span>
<span class="line"><span style="color:#D73A49">        return</span><span style="color:#D73A49"> error</span><span style="color:#24292E">(</span><span style="color:#032F62">"Failed to translate the given audio."</span><span style="color:#24292E">);</span></span>
<span class="line"><span style="color:#24292E">    }</span></span>
<span class="line"><span style="color:#24292E">    io</span><span style="color:#D73A49">:</span><span style="color:#6F42C1">println</span><span style="color:#24292E">(</span><span style="color:#032F62">"Translated text: "</span><span style="color:#24292E">, </span><span style="color:#E36209">translatedText</span><span style="color:#24292E">);</span></span>
<span class="line"><span style="color:#24292E">}</span></span><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 448 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg' style='float: right;'%3E%3Ctitle%3ECopy%3C/title%3E%3Cpath d='M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z'%3E%3C/path%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 512 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg'%3E%3Ctitle%3ECopied%3C/title%3E%3Cpath d='M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z'%3E%3C/path%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {background-color: transparent;border: none;right: 1px;padding: 0;width: 16px;height: 16px;display: flex;margin-top: -20px;margin-right: 8px;position: absolute;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}.Code_codeSnippet__ayQ3y button.rehype-pretty-copy {margin-top: -10px;}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></pre></div></div></div><div role="tabpanel" id="code-tabpane-dalle4" aria-labelledby="code-tab-dalle4" class="fade tab-pane"><div class="Code_codeSnippet__qfa0_"><div class="highlight"><pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><button type="button" title="Copy" aria-label="Copy" data="public function main(string podcastURL) returns error? {
    // Creates a HTTP client to download the audio file
    http:Client podcastEP = check new (podcastURL);
    http:Response httpResp = check podcastEP->get(&#x22;&#x22;);
    byte[] audioBytes = check httpResp.getBinaryPayload();
    check io:fileWriteBytes(AUDIO_FILE_PATH, audioBytes);

    // Creates a request to translate the audio file to text (English)
    audio:CreateTranscriptionRequest transcriptionsReq = {
        file: {fileContent: (check io:fileReadBytes(AUDIO_FILE_PATH)), fileName: AUDIO_FILE},
        model: &#x22;whisper-1&#x22;
    };

    // Converts the audio file to text (English) using OpenAI speach to text API
    audio:Client openAIAudio = check new ({auth: {token: openAIToken}});
    audio:CreateTranscriptionResponse transcriptionsRes = check openAIAudio->/audio/transcriptions.post(transcriptionsReq);
    io:println(&#x22;Text from the audio :&#x22;, transcriptionsRes.text);

    // Creates a request to summarize the text
    chat:CreateChatCompletionRequest request = {
        model: &#x22;gpt-4o-mini&#x22;,
        messages: [
            {
                role: &#x22;user&#x22;,
                content: string &#x60;Summarize the following text to 100 characters : ${transcriptionsRes.text}&#x60;
            }
        ],
        temperature: 0.7,
        max_tokens: 256,
        top_p: 1,
        frequency_penalty: 0,
        presence_penalty: 0
    };

    // Summarizes the text using OpenAI text completion API
    final chat:Client openAIChat = check new ({auth: {token: openAIToken}});
    chat:CreateChatCompletionResponse completionRes = check openAIChat->/chat/completions.post(request);

    string? summerizedText = completionRes.choices[0].message.content;
    if summerizedText is () {
        return error(&#x22;Failed to summarize the given audio.&#x22;);
    }
    io:println(&#x22;Summarized text: &#x22;, summerizedText);

    // Tweet it out!
    final twitter:Client twitter = check new ({auth: {token: token}});
    twitter:TweetCreateResponse tweet = check twitter->/tweets.post({text: summerizedText});
    io:println(&#x22;Tweet: &#x22;, tweet);
}" class="rehype-pretty-copy" onclick="navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(&#x27;rehype-pretty-copied&#x27;);this.setAttribute(&#x27;title&#x27;, &#x27;Copied&#x27;);this.setAttribute(&#x27;aria-label&#x27;, &#x27;Copied&#x27;);window.setTimeout(() => {this.classList.remove(&#x27;rehype-pretty-copied&#x27;);this.setAttribute(&#x27;title&#x27;, &#x27;Copy&#x27;);this.setAttribute(&#x27;aria-label&#x27;, &#x27;Copy&#x27;);}, 3000);"><span class="ready"></span><span class="success"></span></button><span class="line"><span style="color:#D73A49">public</span><span style="color:#D73A49"> function</span><span style="color:#6F42C1"> main</span><span style="color:#24292E">(</span><span style="color:#005CC5">string</span><span style="color:#E36209"> podcastURL</span><span style="color:#24292E">) </span><span style="color:#D73A49">returns</span><span style="color:#D73A49"> error?</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#6A737D">    // Creates a HTTP client to download the audio file</span></span>
<span class="line"><span style="color:#24292E">    http</span><span style="color:#D73A49">:</span><span style="color:#24292E">Client podcastEP </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> check</span><span style="color:#D73A49"> new</span><span style="color:#24292E"> (</span><span style="color:#E36209">podcastURL</span><span style="color:#24292E">);</span></span>
<span class="line"><span style="color:#24292E">    http</span><span style="color:#D73A49">:</span><span style="color:#24292E">Response httpResp </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> check</span><span style="color:#24292E"> podcastEP</span><span style="color:#D73A49">-></span><span style="color:#6F42C1">get</span><span style="color:#24292E">(</span><span style="color:#032F62">""</span><span style="color:#24292E">);</span></span>
<span class="line"><span style="color:#005CC5">    byte</span><span style="color:#24292E">[] audioBytes </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> check</span><span style="color:#24292E"> httpResp.</span><span style="color:#6F42C1">getBinaryPayload</span><span style="color:#24292E">();</span></span>
<span class="line"><span style="color:#D73A49">    check</span><span style="color:#24292E"> io</span><span style="color:#D73A49">:</span><span style="color:#6F42C1">fileWriteBytes</span><span style="color:#24292E">(</span><span style="color:#E36209">AUDIO_FILE_PATH</span><span style="color:#24292E">, </span><span style="color:#E36209">audioBytes</span><span style="color:#24292E">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    // Creates a request to translate the audio file to text (English)</span></span>
<span class="line"><span style="color:#24292E">    audio</span><span style="color:#D73A49">:</span><span style="color:#24292E">CreateTranscriptionRequest transcriptionsReq </span><span style="color:#D73A49">=</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#24292E">        file</span><span style="color:#D73A49">:</span><span style="color:#24292E"> {fileContent: (</span><span style="color:#D73A49">check</span><span style="color:#E36209"> io</span><span style="color:#D73A49">:</span><span style="color:#6F42C1">fileReadBytes</span><span style="color:#24292E">(</span><span style="color:#E36209">AUDIO_FILE_PATH</span><span style="color:#24292E">)), fileName</span><span style="color:#D73A49">:</span><span style="color:#24292E"> AUDIO_FILE},</span></span>
<span class="line"><span style="color:#24292E">        model</span><span style="color:#D73A49">:</span><span style="color:#032F62"> "whisper-1"</span></span>
<span class="line"><span style="color:#24292E">    };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    // Converts the audio file to text (English) using OpenAI speach to text API</span></span>
<span class="line"><span style="color:#24292E">    audio</span><span style="color:#D73A49">:</span><span style="color:#24292E">Client openAIAudio </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> check</span><span style="color:#D73A49"> new</span><span style="color:#24292E"> ({auth</span><span style="color:#D73A49">:</span><span style="color:#24292E"> {token: openAIToken}});</span></span>
<span class="line"><span style="color:#24292E">    audio</span><span style="color:#D73A49">:</span><span style="color:#24292E">CreateTranscriptionResponse transcriptionsRes </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> check</span><span style="color:#24292E"> openAIAudio</span><span style="color:#D73A49">->/</span><span style="color:#24292E">audio</span><span style="color:#D73A49">/</span><span style="color:#24292E">transcriptions.</span><span style="color:#6F42C1">post</span><span style="color:#24292E">(</span><span style="color:#E36209">transcriptionsReq</span><span style="color:#24292E">);</span></span>
<span class="line"><span style="color:#24292E">    io</span><span style="color:#D73A49">:</span><span style="color:#6F42C1">println</span><span style="color:#24292E">(</span><span style="color:#032F62">"Text from the audio :"</span><span style="color:#24292E">, transcriptionsRes.text);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    // Creates a request to summarize the text</span></span>
<span class="line"><span style="color:#24292E">    chat</span><span style="color:#D73A49">:</span><span style="color:#24292E">CreateChatCompletionRequest request </span><span style="color:#D73A49">=</span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#24292E">        model</span><span style="color:#D73A49">:</span><span style="color:#032F62"> "gpt-4o-mini"</span><span style="color:#24292E">,</span></span>
<span class="line"><span style="color:#24292E">        messages</span><span style="color:#D73A49">:</span><span style="color:#24292E"> [</span></span>
<span class="line"><span style="color:#24292E">            {</span></span>
<span class="line"><span style="color:#6F42C1">                role</span><span style="color:#24292E">: </span><span style="color:#032F62">"user"</span><span style="color:#24292E">,</span></span>
<span class="line"><span style="color:#6F42C1">                content</span><span style="color:#24292E">: </span><span style="color:#005CC5">string</span><span style="color:#24292E"> `Summarize the following text to </span><span style="color:#005CC5">100</span><span style="color:#6F42C1"> characters</span><span style="color:#24292E"> : ${transcriptionsRes.text}`</span></span>
<span class="line"><span style="color:#24292E">            }</span></span>
<span class="line"><span style="color:#24292E">        ],</span></span>
<span class="line"><span style="color:#24292E">        temperature</span><span style="color:#D73A49">:</span><span style="color:#005CC5"> 0.7</span><span style="color:#24292E">,</span></span>
<span class="line"><span style="color:#24292E">        max_tokens</span><span style="color:#D73A49">:</span><span style="color:#005CC5"> 256</span><span style="color:#24292E">,</span></span>
<span class="line"><span style="color:#24292E">        top_p</span><span style="color:#D73A49">:</span><span style="color:#005CC5"> 1</span><span style="color:#24292E">,</span></span>
<span class="line"><span style="color:#24292E">        frequency_penalty</span><span style="color:#D73A49">:</span><span style="color:#005CC5"> 0</span><span style="color:#24292E">,</span></span>
<span class="line"><span style="color:#24292E">        presence_penalty</span><span style="color:#D73A49">:</span><span style="color:#005CC5"> 0</span></span>
<span class="line"><span style="color:#24292E">    };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    // Summarizes the text using OpenAI text completion API</span></span>
<span class="line"><span style="color:#D73A49">    final</span><span style="color:#24292E"> chat</span><span style="color:#D73A49">:</span><span style="color:#24292E">Client openAIChat </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> check</span><span style="color:#D73A49"> new</span><span style="color:#24292E"> ({auth</span><span style="color:#D73A49">:</span><span style="color:#24292E"> {token: openAIToken}});</span></span>
<span class="line"><span style="color:#24292E">    chat</span><span style="color:#D73A49">:</span><span style="color:#24292E">CreateChatCompletionResponse completionRes </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> check</span><span style="color:#24292E"> openAIChat</span><span style="color:#D73A49">->/</span><span style="color:#24292E">chat</span><span style="color:#D73A49">/</span><span style="color:#24292E">completions.</span><span style="color:#6F42C1">post</span><span style="color:#24292E">(</span><span style="color:#E36209">request</span><span style="color:#24292E">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#005CC5">    string</span><span style="color:#24292E">? summerizedText </span><span style="color:#D73A49">=</span><span style="color:#24292E"> completionRes.choices[</span><span style="color:#005CC5">0</span><span style="color:#24292E">].message.content;</span></span>
<span class="line"><span style="color:#D73A49">    if</span><span style="color:#24292E"> summerizedText </span><span style="color:#D73A49">is</span><span style="color:#24292E"> () {</span></span>
<span class="line"><span style="color:#D73A49">        return</span><span style="color:#D73A49"> error</span><span style="color:#24292E">(</span><span style="color:#032F62">"Failed to summarize the given audio."</span><span style="color:#24292E">);</span></span>
<span class="line"><span style="color:#24292E">    }</span></span>
<span class="line"><span style="color:#24292E">    io</span><span style="color:#D73A49">:</span><span style="color:#6F42C1">println</span><span style="color:#24292E">(</span><span style="color:#032F62">"Summarized text: "</span><span style="color:#24292E">, </span><span style="color:#E36209">summerizedText</span><span style="color:#24292E">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">    // Tweet it out!</span></span>
<span class="line"><span style="color:#D73A49">    final</span><span style="color:#24292E"> twitter</span><span style="color:#D73A49">:</span><span style="color:#24292E">Client twitter </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> check</span><span style="color:#D73A49"> new</span><span style="color:#24292E"> ({auth</span><span style="color:#D73A49">:</span><span style="color:#24292E"> {token: token}});</span></span>
<span class="line"><span style="color:#24292E">    twitter</span><span style="color:#D73A49">:</span><span style="color:#24292E">TweetCreateResponse tweet </span><span style="color:#D73A49">=</span><span style="color:#D73A49"> check</span><span style="color:#24292E"> twitter</span><span style="color:#D73A49">->/</span><span style="color:#24292E">tweets.</span><span style="color:#6F42C1">post</span><span style="color:#24292E">({text</span><span style="color:#D73A49">:</span><span style="color:#24292E"> summerizedText});</span></span>
<span class="line"><span style="color:#24292E">    io</span><span style="color:#D73A49">:</span><span style="color:#6F42C1">println</span><span style="color:#24292E">(</span><span style="color:#032F62">"Tweet: "</span><span style="color:#24292E">, </span><span style="color:#E36209">tweet</span><span style="color:#24292E">);</span></span>
<span class="line"><span style="color:#24292E">}</span></span><style>:root {--copy-icon: url("data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 448 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg' style='float: right;'%3E%3Ctitle%3ECopy%3C/title%3E%3Cpath d='M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z'%3E%3C/path%3E%3C/svg%3E");--success-icon: url("data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 512 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg'%3E%3Ctitle%3ECopied%3C/title%3E%3Cpath d='M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z'%3E%3C/path%3E%3C/svg%3E");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {background-color: transparent;border: none;right: 1px;padding: 0;width: 16px;height: 16px;display: flex;margin-top: -20px;margin-right: 8px;position: absolute;backdrop-filter: blur(3px);& span {width: 100%;aspect-ratio: 1 / 1;}& .ready {background-image: var(--copy-icon);}& .success {display: none; background-image: var(--success-icon);}}.Code_codeSnippet__ayQ3y button.rehype-pretty-copy {margin-top: -10px;}&.rehype-pretty-copied {& .success {display: block;} & .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;& .ready { display: none; }& .success { display: block; }}</style></code></pre></div></div></div></div></div></div></div></div></div></div><div class="pageContentRow integration code odd row"><div class="col-12"><div class="container"><div class="row"><div class="Code_box__nw1pZ col-12"><h2 id="deploy-ai-powered-integrations-with-devant" class="section"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-link-45deg mdButton pe-2" viewBox="0 0 16 16"><path d="M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1.002 1.002 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4.018 4.018 0 0 1-.128-1.287z"></path><path d="M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243L6.586 4.672z"></path></svg>(Extra!) Deploy AI-Powered Integrations with Devant</h2></div></div><div class="row"><div class="Code_box__nw1pZ col-lg-5 col-md-5 col-12"><div><p>Devant by WSO2 is an AI-powered iPaaS built for the era of intelligent applications. Go beyond building—deploy, scale, and manage AI integrations effortlessly. Whether it’s GenAI models, knowledge bases, or custom AI Agents, Devant helps you operationalize them with low-code speed and cloud-native ease. From idea to live integration—Devant gets you there faster.</p><div class="Code_dVersion__eXhCf"><a href="https://wso2.com/devant/" class="Code_cDownload__AYiFC" target="_blank" rel="noreferrer">Get started with Devant by WSO2 for free</a></div></div></div><div class="Code_box__nw1pZ Code_ipaas__03Fmt col-lg-7 col-md-7 col-12"><img src="/images/devant-ipaas.png" alt="(Extra!) Deploy AI-Powered Integrations with Devant" class="Code_doNotFill__bZNk2" width="60%"/></div></div></div></div></div></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"samples":{"ballerina-ai-agent":{"frontmatter":{"title":"Seamless integrations with Ballerina AI agents","description":"Ballerina's AI Agent feature enables your applications to understand and execute natural language commands by leveraging the reasoning capabilities of LLMs. It empowers your apps to act autonomously—automating workflows, making decisions, and driving intelligent outcomes.","url":"https://github.com/ballerina-guides/ai-samples/blob/main/personal_ai_assistant_agent/agents.bal","image":""},"code":"\u003cpre class=\"shiki github-light\" style=\"background-color:#fff;color:#24292e\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cbutton type=\"button\" title=\"Copy\" aria-label=\"Copy\" data=\"agent:SystemPrompt systemPrompt = {\n    role: \u0026#x22;Personal AI Assistant\u0026#x22;,\n    instructions: string \u0026#x60;You are Nova, a smart AI assistant helping \u0026#x27;${userName}\u0026#x27; stay organized and efficient.\n\nYour primary responsibilities include:\n- Calendar Management: Scheduling, updating, and retrieving events from the calendar as per the user\u0026#x27;s needs.\n- Email Assistance: Reading, summarizing, composing, and sending emails while ensuring clarity and professionalism.\n- Context Awareness: Maintaining a seamless understanding of ongoing tasks and conversations to \n  provide relevant responses.\n- Privacy \u0026#x26; Security: Handling user data responsibly, ensuring sensitive information is kept confidential,\n  and confirming actions before executing them.\n\nGuidelines:\n- Respond in a natural, friendly, and professional tone.\n- Always confirm before making changes to the user\u0026#x27;s calendar or sending emails.\n- Provide concise summaries when retrieving information unless the user requests details.\n- Prioritize clarity, efficiency, and user convenience in all tasks.\u0026#x60;\n};\n\nfinal agent:AzureOpenAiModel azureOpenAiModel = check new (serviceUrl, apiKey, deploymentId, apiVersion);\nfinal agent:Agent personalAiAssistant = check new (systemPrompt = systemPrompt, model = azureOpenAiModel,\n    tools = [readEmails, sendEmail, getCalanderEvents, createCalanderEvent, getCurrentDate]\n);\n\nservice /personalAiAssistant on new http:Listener(9090) {\n    resource function post chat(@http:Payload agent:ChatReqMessage request) returns agent:ChatRespMessage|error {\n        string agentResponse = check personalAiAssistant-\u003erun(request.message);\n        return {message: agentResponse};\n    }\n}\" class=\"rehype-pretty-copy\" onclick=\"navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(\u0026#x27;rehype-pretty-copied\u0026#x27;);this.setAttribute(\u0026#x27;title\u0026#x27;, \u0026#x27;Copied\u0026#x27;);this.setAttribute(\u0026#x27;aria-label\u0026#x27;, \u0026#x27;Copied\u0026#x27;);window.setTimeout(() =\u003e {this.classList.remove(\u0026#x27;rehype-pretty-copied\u0026#x27;);this.setAttribute(\u0026#x27;title\u0026#x27;, \u0026#x27;Copy\u0026#x27;);this.setAttribute(\u0026#x27;aria-label\u0026#x27;, \u0026#x27;Copy\u0026#x27;);}, 3000);\"\u003e\u003cspan class=\"ready\"\u003e\u003c/span\u003e\u003cspan class=\"success\"\u003e\u003c/span\u003e\u003c/button\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003eagent\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eSystemPrompt systemPrompt \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    role\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e \"Personal AI Assistant\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    instructions\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e string \u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e`You are Nova, a smart AI assistant helping '${\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003euserName\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e}' stay organized and efficient.\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#032F62\"\u003eYour primary responsibilities include:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#032F62\"\u003e- Calendar Management: Scheduling, updating, and retrieving events from the calendar as per the user's needs.\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#032F62\"\u003e- Email Assistance: Reading, summarizing, composing, and sending emails while ensuring clarity and professionalism.\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#032F62\"\u003e- Context Awareness: Maintaining a seamless understanding of ongoing tasks and conversations to \u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#032F62\"\u003e  provide relevant responses.\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#032F62\"\u003e- Privacy \u0026#x26; Security: Handling user data responsibly, ensuring sensitive information is kept confidential,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#032F62\"\u003e  and confirming actions before executing them.\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#032F62\"\u003eGuidelines:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#032F62\"\u003e- Respond in a natural, friendly, and professional tone.\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#032F62\"\u003e- Always confirm before making changes to the user's calendar or sending emails.\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#032F62\"\u003e- Provide concise summaries when retrieving information unless the user requests details.\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#032F62\"\u003e- Prioritize clarity, efficiency, and user convenience in all tasks.`\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e};\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003efinal\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e agent\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eAzureOpenAiModel azureOpenAiModel \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003eserviceUrl\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003eapiKey\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003edeploymentId\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003eapiVersion\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003efinal\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e agent\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eAgent personalAiAssistant \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003esystemPrompt\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e systemPrompt, \u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003emodel\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e azureOpenAiModel,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#E36209\"\u003e    tools\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e [readEmails, sendEmail, getCalanderEvents, createCalanderEvent, getCurrentDate]\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003eservice\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003e /personalAiAssistant\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e on\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e http:Listener(\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e9090\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e    resource\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e function\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003e post\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003e chat\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(@\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003ehttp\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003ePayload\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003e agent\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eChatReqMessage request) \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003ereturns\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e agent\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eChatRespMessage\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e|error\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#005CC5\"\u003e        string\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e agentResponse \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e personalAiAssistant\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003erun\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(request.message);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e        return\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {message\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e agentResponse};\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cstyle\u003e:root {--copy-icon: url(\"data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 448 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg' style='float: right;'%3E%3Ctitle%3ECopy%3C/title%3E%3Cpath d='M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z'%3E%3C/path%3E%3C/svg%3E\");--success-icon: url(\"data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 512 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg'%3E%3Ctitle%3ECopied%3C/title%3E%3Cpath d='M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z'%3E%3C/path%3E%3C/svg%3E\");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {background-color: transparent;border: none;right: 1px;padding: 0;width: 16px;height: 16px;display: flex;margin-top: -20px;margin-right: 8px;position: absolute;backdrop-filter: blur(3px);\u0026 span {width: 100%;aspect-ratio: 1 / 1;}\u0026 .ready {background-image: var(--copy-icon);}\u0026 .success {display: none; background-image: var(--success-icon);}}.Code_codeSnippet__ayQ3y button.rehype-pretty-copy {margin-top: -10px;}\u0026.rehype-pretty-copied {\u0026 .success {display: block;} \u0026 .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;\u0026 .ready { display: none; }\u0026 .success { display: block; }}\u003c/style\u003e\u003c/code\u003e\u003c/pre\u003e"},"ballerina_multimodel":{"frontmatter":{"title":"Beyond text: Multimodal AI at your fingertips","description":"AI isn’t just about text—and neither is Ballerina. With connectors to popular AI providers, you can integrate image generation, audio synthesis, and other multimodal capabilities into your applications. Whatever the medium, Ballerina helps you bring it all together through a unified, type-safe integration layer.","url":"","image":""},"code":""},"ballerina_text_connectors":{"frontmatter":{"title":"Simple when you want it. Powerful when you need it.","description":"Ballerina simplifies AI integration with high-level abstractions while providing full access to model provider APIs via type-safe connectors. This lets you leverage advanced features seamlessly, staying within the same language and ecosystem with confidence.","url":"","image":""},"code":""},"blog-analyzer-using-natural-programming":{"frontmatter":{"title":"Building an AI-powered blog analyzer using Ballerina's natural expressions","description":"Ballerina’s natural expressions let you bring AI-powered capabilities into your workflows using natural language. At runtime, they invoke an LLM and return a typed response—automatically structured and bound to your expected format for seamless integration.","url":"","image":""},"code":""},"concurrency-simplified-for-ai-development":{"frontmatter":{"title":"Concurrency simplified for AI development","description":"Ballerina's concurrency model is ideal for writing API-powered AI applications. Its sequence diagrams and concurrency control capabilities make it easy to manage and visualize complex operations leading to more efficient and reliable AI solutions.","url":"https://github.com/ballerina-guides/ai-samples/blob/main/create_and_send_customized_greeting_cards_using_openai/service.bal","image":""},"code":"\u003cpre class=\"shiki github-light\" style=\"background-color:#fff;color:#24292e\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cbutton type=\"button\" title=\"Copy\" aria-label=\"Copy\" data=\"fork {\n    // Generate greeting text and design in parallel\n    worker greetingWorker returns string|error? {\n        chat:CreateChatCompletionRequest request = {\n            model: \u0026#x22;gpt-4o-mini\u0026#x22;,\n            messages: [\n                {\n                    \u0026#x22;role\u0026#x22;: \u0026#x22;user\u0026#x22;,\n                    \u0026#x22;content\u0026#x22;: string \u0026#x60;Generate a greeting for a/an ${occasion}.${\u0026#x22;\\n\u0026#x22;}Special notes: ${specialNotes}\u0026#x60;\n                }\n            ]\n        };\n\n        chat:CreateChatCompletionResponse response = check openAIChat-\u003e/chat/completions.post(request);\n        return response.choices[0].message.content;\n    }\n\n    worker imageWorker returns string|error? {\n        images:CreateImageRequest imagePrompt = {\n            prompt: string \u0026#x60;Greeting card design for ${occasion}, ${specialNotes}\u0026#x60;\n        };\n        images:ImagesResponse imageRes = check openAIImages-\u003e/images/generations.post(imagePrompt);\n        return imageRes.data[0].url;\n    }\n}\" class=\"rehype-pretty-copy\" onclick=\"navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(\u0026#x27;rehype-pretty-copied\u0026#x27;);this.setAttribute(\u0026#x27;title\u0026#x27;, \u0026#x27;Copied\u0026#x27;);this.setAttribute(\u0026#x27;aria-label\u0026#x27;, \u0026#x27;Copied\u0026#x27;);window.setTimeout(() =\u003e {this.classList.remove(\u0026#x27;rehype-pretty-copied\u0026#x27;);this.setAttribute(\u0026#x27;title\u0026#x27;, \u0026#x27;Copy\u0026#x27;);this.setAttribute(\u0026#x27;aria-label\u0026#x27;, \u0026#x27;Copy\u0026#x27;);}, 3000);\"\u003e\u003cspan class=\"ready\"\u003e\u003c/span\u003e\u003cspan class=\"success\"\u003e\u003c/span\u003e\u003c/button\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003efork\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#6A737D\"\u003e    // Generate greeting text and design in parallel\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e    worker\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e greetingWorker \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003ereturns\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e string\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e|error\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e? {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        chat\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eCreateChatCompletionRequest request \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e            model\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e \"gpt-4o-mini\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e            messages\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e [\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e                {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#032F62\"\u003e                    \"role\"\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e \"user\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#032F62\"\u003e                    \"content\"\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e string \u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e`Generate a greeting for a/an ${\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eoccasion\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e}.${\"\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e\\n\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e\"}Special notes: ${\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003especialNotes\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e}`\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e                }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e            ]\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        };\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        chat\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eCreateChatCompletionResponse response \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e openAIChat\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e-\u003e/\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003echat\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e/\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003ecompletions.\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003epost\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e        return\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e response.choices[\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e0\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e].message.content;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e    worker\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e imageWorker \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003ereturns\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e string\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e|error\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e? {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        images\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eCreateImageRequest imagePrompt \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e            prompt\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e string \u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e`Greeting card design for ${\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eoccasion\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e}, ${\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003especialNotes\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e}`\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        };\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        images\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eImagesResponse imageRes \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e openAIImages\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e-\u003e/\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eimages\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e/\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003egenerations.\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003epost\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003eimagePrompt\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e        return\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e imageRes.data[\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e0\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e].url;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cstyle\u003e:root {--copy-icon: url(\"data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 448 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg' style='float: right;'%3E%3Ctitle%3ECopy%3C/title%3E%3Cpath d='M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z'%3E%3C/path%3E%3C/svg%3E\");--success-icon: url(\"data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 512 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg'%3E%3Ctitle%3ECopied%3C/title%3E%3Cpath d='M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z'%3E%3C/path%3E%3C/svg%3E\");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {background-color: transparent;border: none;right: 1px;padding: 0;width: 16px;height: 16px;display: flex;margin-top: -20px;margin-right: 8px;position: absolute;backdrop-filter: blur(3px);\u0026 span {width: 100%;aspect-ratio: 1 / 1;}\u0026 .ready {background-image: var(--copy-icon);}\u0026 .success {display: none; background-image: var(--success-icon);}}.Code_codeSnippet__ayQ3y button.rehype-pretty-copy {margin-top: -10px;}\u0026.rehype-pretty-copied {\u0026 .success {display: block;} \u0026 .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;\u0026 .ready { display: none; }\u0026 .success { display: block; }}\u003c/style\u003e\u003c/code\u003e\u003c/pre\u003e"},"copilot_your_partner":{"frontmatter":{"title":"Ballerina Copilot: Your AI partner in integration development","description":"Ballerina Copilot makes it easy to build both AI and non-AI integrations using natural language—just tell it what you want, and it gets to work. Whether you're connecting to an LLM or stitching together APIs, Copilot helps you move fast with less code. And the fun part? Ballerina Copilot is written in Ballerina itself!","url":"","image":""},"code":""},"create-ai-powered-apis":{"frontmatter":{"title":"Create AI-powered APIs, automations, and event handlers","description":"Effortlessly tackle any AI-powered API integration by leveraging the network abstractions of Ballerina to create APIs, automations, and event handlers for your applications.","url":"https://github.com/ballerina-guides/ai-samples/blob/main/question_answering_based_on_context_using_openai/main.bal","image":""},"code":"\u003cpre class=\"shiki github-light\" style=\"background-color:#fff;color:#24292e\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cbutton type=\"button\" title=\"Copy\" aria-label=\"Copy\" data=\"service / on new http:Listener(8080) {\n\n    map\u003cstring\u003e documents = {};\n    map\u003cfloat[]\u003e docEmbeddings = {};\n\n    function init() returns error? {\n        sheets:Range range = check gSheets-\u003egetRange(sheetId, sheetName, \u0026#x22;A2:B\u0026#x22;);\n\n        //Populate the dictionaries with the content and embeddings for each doc.\n        foreach any[] row in range.values {\n            string title = \u003cstring\u003erow[0];\n            string content = \u003cstring\u003erow[1];\n            self.documents[title] = content;\n            self.docEmbeddings[title] = check getEmbedding(string \u0026#x60;${title} ${\u0026#x22;\\n\u0026#x22;} ${content}\u0026#x60;);\n        }\n    }\n\n    resource function get answer(string question) returns string?|error {\n        string prompt = check constructPrompt(question, self.documents, self.docEmbeddings);\n\n        chat:CreateChatCompletionRequest request = {\n            model: \u0026#x22;gpt-4o-mini\u0026#x22;,\n            messages: [\n                {\n                    \u0026#x22;role\u0026#x22;: \u0026#x22;user\u0026#x22;,\n                    \u0026#x22;content\u0026#x22;: prompt\n                }\n            ]\n        };\n\n        chat:CreateChatCompletionResponse response = check openAIChat-\u003e/chat/completions.post(request);\n        return response.choices[0].message.content;\n    }\n}\" class=\"rehype-pretty-copy\" onclick=\"navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(\u0026#x27;rehype-pretty-copied\u0026#x27;);this.setAttribute(\u0026#x27;title\u0026#x27;, \u0026#x27;Copied\u0026#x27;);this.setAttribute(\u0026#x27;aria-label\u0026#x27;, \u0026#x27;Copied\u0026#x27;);window.setTimeout(() =\u003e {this.classList.remove(\u0026#x27;rehype-pretty-copied\u0026#x27;);this.setAttribute(\u0026#x27;title\u0026#x27;, \u0026#x27;Copy\u0026#x27;);this.setAttribute(\u0026#x27;aria-label\u0026#x27;, \u0026#x27;Copy\u0026#x27;);}, 3000);\"\u003e\u003cspan class=\"ready\"\u003e\u003c/span\u003e\u003cspan class=\"success\"\u003e\u003c/span\u003e\u003c/button\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003eservice\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e / \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003eon\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e http:Listener(\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e8080\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e    map\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003estring\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e documents \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {};\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e    map\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003efloat\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e[]\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e docEmbeddings \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {};\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e    function\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003e init\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e() \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003ereturns\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e error?\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        sheets\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eRange range \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e gSheets\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003egetRange\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003esheetId\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003esheetName\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e\"A2:B\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#6A737D\"\u003e        //Populate the dictionaries with the content and embeddings for each doc.\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e        foreach \u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eany[] row \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003ein\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e range.values {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#005CC5\"\u003e            string\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e title \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003estring\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003erow[\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e0\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e];\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#005CC5\"\u003e            string\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e content \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003estring\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003erow[\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e1\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e];\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#005CC5\"\u003e            self\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e.documents[title] \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e content;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#005CC5\"\u003e            self\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e.docEmbeddings[title] \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003e getEmbedding\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003estring\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e `${\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003etitle\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e} ${\"\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e\\n\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e\"} ${\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003econtent\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e}`\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e    resource\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e function\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003e get\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003e answer\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003estring\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003e question\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e) \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003ereturns\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e string\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e?|error\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#005CC5\"\u003e        string\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e prompt \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003e constructPrompt\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003equestion\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003eself\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e.documents, \u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003eself\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e.docEmbeddings);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        chat\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eCreateChatCompletionRequest request \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e            model\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e \"gpt-4o-mini\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e            messages\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e [\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e                {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#032F62\"\u003e                    \"role\"\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e \"user\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#032F62\"\u003e                    \"content\"\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e prompt\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e                }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e            ]\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        };\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        chat\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eCreateChatCompletionResponse response \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e openAIChat\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e-\u003e/\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003echat\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e/\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003ecompletions.\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003epost\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e        return\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e response.choices[\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e0\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e].message.content;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cstyle\u003e:root {--copy-icon: url(\"data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 448 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg' style='float: right;'%3E%3Ctitle%3ECopy%3C/title%3E%3Cpath d='M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z'%3E%3C/path%3E%3C/svg%3E\");--success-icon: url(\"data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 512 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg'%3E%3Ctitle%3ECopied%3C/title%3E%3Cpath d='M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z'%3E%3C/path%3E%3C/svg%3E\");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {background-color: transparent;border: none;right: 1px;padding: 0;width: 16px;height: 16px;display: flex;margin-top: -20px;margin-right: 8px;position: absolute;backdrop-filter: blur(3px);\u0026 span {width: 100%;aspect-ratio: 1 / 1;}\u0026 .ready {background-image: var(--copy-icon);}\u0026 .success {display: none; background-image: var(--success-icon);}}.Code_codeSnippet__ayQ3y button.rehype-pretty-copy {margin-top: -10px;}\u0026.rehype-pretty-copied {\u0026 .success {display: block;} \u0026 .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;\u0026 .ready { display: none; }\u0026 .success { display: block; }}\u003c/style\u003e\u003c/code\u003e\u003c/pre\u003e"},"effort1":{"frontmatter":{"title":"","description":"","url":"","image":""},"code":"\u003cpre class=\"shiki github-light\" style=\"background-color:#fff;color:#24292e\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cbutton type=\"button\" title=\"Copy\" aria-label=\"Copy\" data=\"service /slack on new http:Listener(8080) {\n    map\u003cChatMessage[]\u003e chatHistory = {};\n\n    resource function post events(http:Request request) returns Response|error {\n        if !check verifyRequest(request) {\n            return error(\u0026#x22;Request verification failed\u0026#x22;);\n        }\n\n        map\u003cstring\u003e params = check request.getFormParams();\n\n        string? channelName = params[\u0026#x22;channel_name\u0026#x22;];\n        string? requestText = params[\u0026#x22;text\u0026#x22;];\n        if channelName is () || requestText is () {\n            return error(\u0026#x22;Invalid values in the request parameters for channel_name or text\u0026#x22;);\n        }\n\n        ChatMessage[] history = self.chatHistory[channelName] ?:\n                                [{role: SYSTEM, content: \u0026#x22;You are an AI slack bot to assist with user questions.\u0026#x22;}];\n        history.push({role: USER, content: requestText});\n\n        chat:CreateChatCompletionResponse completion = check azureOpenAI-\u003e/deployments/[deploymentId]/chat/completions.post(API_VERSION, {messages: history});\n        record {|\n            chat:ChatCompletionResponseMessage message?;\n            chat:ContentFilterChoiceResults content_filter_results?;\n            int index?;\n            string finish_reason?;\n            anydata...;\n        |}[] choices = check completion.choices.ensureType();\n\n        chat:ChatCompletionResponseMessage? response = choices[0].message;\n        string? responseText = response?.content;\n        if response is () || responseText is () {\n            return error(\u0026#x22;Error in response generation\u0026#x22;);\n        }\n\n        history.push({role: ASSISTANT, content: requestText});\n\n        // Limit history to 25 messages to preserve token limit.\n        if history.length() \u003e MAX_MESSAGES {\n            history = history.slice(history.length() - MAX_MESSAGES);\n        }\n        self.chatHistory[channelName] = history;\n\n        return {response_type: \u0026#x22;in_channel\u0026#x22;, text: responseText};\n    }\n}\" class=\"rehype-pretty-copy\" onclick=\"navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(\u0026#x27;rehype-pretty-copied\u0026#x27;);this.setAttribute(\u0026#x27;title\u0026#x27;, \u0026#x27;Copied\u0026#x27;);this.setAttribute(\u0026#x27;aria-label\u0026#x27;, \u0026#x27;Copied\u0026#x27;);window.setTimeout(() =\u003e {this.classList.remove(\u0026#x27;rehype-pretty-copied\u0026#x27;);this.setAttribute(\u0026#x27;title\u0026#x27;, \u0026#x27;Copy\u0026#x27;);this.setAttribute(\u0026#x27;aria-label\u0026#x27;, \u0026#x27;Copy\u0026#x27;);}, 3000);\"\u003e\u003cspan class=\"ready\"\u003e\u003c/span\u003e\u003cspan class=\"success\"\u003e\u003c/span\u003e\u003c/button\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003eservice\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003e /slack\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e on\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e http:Listener(\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e8080\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e    map\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eChatMessage[]\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e chatHistory \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {};\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e    resource\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e function\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003e post\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003e events\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003ehttp\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eRequest request) \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003ereturns\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e Response\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e|error\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e        if\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e !check\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003e verifyRequest\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e            return\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e error\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e\"Request verification failed\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e        map\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003estring\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e params \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e request.\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003egetFormParams\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e();\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#005CC5\"\u003e        string\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e? channelName \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e params[\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e\"channel_name\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e];\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#005CC5\"\u003e        string\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e? requestText \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e params[\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e\"text\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e];\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e        if\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e channelName \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003eis\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e () \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e||\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e requestText \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003eis\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e () {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e            return\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e error\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e\"Invalid values in the request parameters for channel_name or text\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        ChatMessage[] history \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e self\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e.chatHistory[channelName] \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e?:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e                                [{role\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e SYSTEM, content\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e \"You are an AI slack bot to assist with user questions.\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e}];\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        history.\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003epush\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e({role\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e USER, content\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e requestText});\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        chat\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eCreateChatCompletionResponse completion \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e azureOpenAI\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e-\u003e/\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003edeployments\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e/\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e[deploymentId]\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e/\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003echat\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e/\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003ecompletions.\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003epost\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003eAPI_VERSION\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e, {messages\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e history});\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e        record\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e|\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e            chat\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eChatCompletionResponseMessage message?;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e            chat\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eContentFilterChoiceResults content_filter_results?;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#005CC5\"\u003e            int\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e index?;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#005CC5\"\u003e            string\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e finish_reason?;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#005CC5\"\u003e            anydata\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e...\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e        |\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e}[] choices \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e completion.choices.\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003eensureType\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e();\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        chat\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eChatCompletionResponseMessage? response \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e choices[\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e0\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e].message;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#005CC5\"\u003e        string\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e? responseText \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e response?.content;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e        if\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e response \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003eis\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e () \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e||\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e responseText \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003eis\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e () {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e            return\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e error\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e\"Error in response generation\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        history.\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003epush\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e({role\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e ASSISTANT, content\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e requestText});\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#6A737D\"\u003e        // Limit history to 25 messages to preserve token limit.\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e        if\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e history.\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003elength\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e() \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e MAX_MESSAGES {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e            history \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e history.\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003eslice\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(history.\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003elength\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e() \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e-\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003e MAX_MESSAGES\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#005CC5\"\u003e        self\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e.chatHistory[channelName] \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e history;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e        return\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {response_type\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e \"in_channel\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e, text\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e responseText};\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cstyle\u003e:root {--copy-icon: url(\"data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 448 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg' style='float: right;'%3E%3Ctitle%3ECopy%3C/title%3E%3Cpath d='M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z'%3E%3C/path%3E%3C/svg%3E\");--success-icon: url(\"data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 512 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg'%3E%3Ctitle%3ECopied%3C/title%3E%3Cpath d='M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z'%3E%3C/path%3E%3C/svg%3E\");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {background-color: transparent;border: none;right: 1px;padding: 0;width: 16px;height: 16px;display: flex;margin-top: -20px;margin-right: 8px;position: absolute;backdrop-filter: blur(3px);\u0026 span {width: 100%;aspect-ratio: 1 / 1;}\u0026 .ready {background-image: var(--copy-icon);}\u0026 .success {display: none; background-image: var(--success-icon);}}.Code_codeSnippet__ayQ3y button.rehype-pretty-copy {margin-top: -10px;}\u0026.rehype-pretty-copied {\u0026 .success {display: block;} \u0026 .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;\u0026 .ready { display: none; }\u0026 .success { display: block; }}\u003c/style\u003e\u003c/code\u003e\u003c/pre\u003e"},"effort2":{"frontmatter":{"title":"","description":"","url":"","image":""},"code":"\u003cpre class=\"shiki github-light\" style=\"background-color:#fff;color:#24292e\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cbutton type=\"button\" title=\"Copy\" aria-label=\"Copy\" data=\"service / on new http:Listener(8080) {\n    function init() returns error? {\n        sheets:Range range = check gSheets-\u003egetRange(sheetId, sheetName, \u0026#x22;A2:B\u0026#x22;);\n        pinecone:Vector[] vectors = [];\n\n        foreach any[] row in range.values {\n            string title = \u003cstring\u003erow[0];\n            string content = \u003cstring\u003erow[1];\n            float[] vector = check getEmbedding(string \u0026#x60;${title} ${\u0026#x22;\\n\u0026#x22;} ${content}\u0026#x60;);\n            vectors[vectors.length()] = {id: title, values: vector, metadata: {\u0026#x22;content\u0026#x22;: content}};\n        }\n\n        pinecone:UpsertResponse response = check pineconeClient-\u003e/vectors/upsert.post({vectors, namespace: NAMESPACE});\n        if response.upsertedCount != range.values.length() {\n            return error(\u0026#x22;Failed to insert embedding vectors to pinecone.\u0026#x22;);\n        }\n        io:println(\u0026#x22;Successfully inserted embedding vectors to pinecone.\u0026#x22;);\n    }\n\n    resource function get answer(string question) returns string?|error {\n        string prompt = check constructPrompt(question);\n\n        chat:CreateChatCompletionRequest request = {\n            model: \u0026#x22;gpt-4o-mini\u0026#x22;,\n            messages: [\n                {\n                    \u0026#x22;role\u0026#x22;: \u0026#x22;user\u0026#x22;,\n                    \u0026#x22;content\u0026#x22;: prompt\n                }\n            ]\n        };\n\n        chat:CreateChatCompletionResponse response = check openAIChat-\u003e/chat/completions.post(request);\n        return response.choices[0].message.content;\n    }\n}\" class=\"rehype-pretty-copy\" onclick=\"navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(\u0026#x27;rehype-pretty-copied\u0026#x27;);this.setAttribute(\u0026#x27;title\u0026#x27;, \u0026#x27;Copied\u0026#x27;);this.setAttribute(\u0026#x27;aria-label\u0026#x27;, \u0026#x27;Copied\u0026#x27;);window.setTimeout(() =\u003e {this.classList.remove(\u0026#x27;rehype-pretty-copied\u0026#x27;);this.setAttribute(\u0026#x27;title\u0026#x27;, \u0026#x27;Copy\u0026#x27;);this.setAttribute(\u0026#x27;aria-label\u0026#x27;, \u0026#x27;Copy\u0026#x27;);}, 3000);\"\u003e\u003cspan class=\"ready\"\u003e\u003c/span\u003e\u003cspan class=\"success\"\u003e\u003c/span\u003e\u003c/button\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003eservice\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e / \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003eon\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e http:Listener(\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e8080\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e    function\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003e init\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e() \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003ereturns\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e error?\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        sheets\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eRange range \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e gSheets\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003egetRange\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003esheetId\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003esheetName\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e\"A2:B\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        pinecone\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eVector[] vectors \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e [];\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e        foreach \u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eany[] row \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003ein\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e range.values {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#005CC5\"\u003e            string\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e title \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003estring\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003erow[\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e0\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e];\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#005CC5\"\u003e            string\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e content \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003estring\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003erow[\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e1\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e];\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#005CC5\"\u003e            float\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e[] vector \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003e getEmbedding\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003estring\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e `${\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003etitle\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e} ${\"\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e\\n\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e\"} ${\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003econtent\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e}`\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e            vectors[vectors.\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003elength\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e()] \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {id\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e title, values\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e vector, metadata\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e\"content\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e: content}};\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        pinecone\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eUpsertResponse response \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e pineconeClient\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e-\u003e/\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003evectors\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e/\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eupsert.\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003epost\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e({vectors, namespace\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e NAMESPACE});\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e        if\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e response.upsertedCount \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e!=\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e range.values.\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003elength\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e() {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e            return\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e error\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e\"Failed to insert embedding vectors to pinecone.\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        io\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e\"Successfully inserted embedding vectors to pinecone.\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e    resource\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e function\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003e get\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003e answer\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003estring\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003e question\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e) \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003ereturns\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e string\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e?|error\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#005CC5\"\u003e        string\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e prompt \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003e constructPrompt\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003equestion\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        chat\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eCreateChatCompletionRequest request \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e            model\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e \"gpt-4o-mini\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e            messages\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e [\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e                {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#032F62\"\u003e                    \"role\"\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e \"user\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#032F62\"\u003e                    \"content\"\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e prompt\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e                }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e            ]\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        };\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        chat\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eCreateChatCompletionResponse response \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e openAIChat\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e-\u003e/\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003echat\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e/\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003ecompletions.\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003epost\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e        return\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e response.choices[\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e0\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e].message.content;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cstyle\u003e:root {--copy-icon: url(\"data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 448 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg' style='float: right;'%3E%3Ctitle%3ECopy%3C/title%3E%3Cpath d='M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z'%3E%3C/path%3E%3C/svg%3E\");--success-icon: url(\"data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 512 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg'%3E%3Ctitle%3ECopied%3C/title%3E%3Cpath d='M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z'%3E%3C/path%3E%3C/svg%3E\");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {background-color: transparent;border: none;right: 1px;padding: 0;width: 16px;height: 16px;display: flex;margin-top: -20px;margin-right: 8px;position: absolute;backdrop-filter: blur(3px);\u0026 span {width: 100%;aspect-ratio: 1 / 1;}\u0026 .ready {background-image: var(--copy-icon);}\u0026 .success {display: none; background-image: var(--success-icon);}}.Code_codeSnippet__ayQ3y button.rehype-pretty-copy {margin-top: -10px;}\u0026.rehype-pretty-copied {\u0026 .success {display: block;} \u0026 .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;\u0026 .ready { display: none; }\u0026 .success { display: block; }}\u003c/style\u003e\u003c/code\u003e\u003c/pre\u003e"},"effortlessly-create-impactful-business":{"frontmatter":{"title":"Effortlessly create impactful business use cases","description":"Take advantage of Ballerina's OpenAI, Azure, and VectorDB connectors to craft powerful solutions like Slack bots and Q\u0026A bots that enhance customer engagement and optimize business operations.","url":"","image":""},"code":""},"fine-tune-models-with-your-own-data":{"frontmatter":{"title":"Fine-tune models with your data to create your own models","description":"OpenAI’s fine tuning API lets you create a model that understands your world. Use Ballerina’s ability to easily integrate business APIs and systems to take your business data to fine-tune it and make that available for your business.","url":"https://github.com/ballerina-guides/ai-samples/blob/main/finetune_openai_models/main.bal","image":""},"code":"\u003cpre class=\"shiki github-light\" style=\"background-color:#fff;color:#24292e\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cbutton type=\"button\" title=\"Copy\" aria-label=\"Copy\" data=\"public function main() returns error? {\n    finetunes:Client openAIFineTunes = check new ({auth: {token: openAIToken}});\n\n    finetunes:CreateFileRequest fileRequest = {\n        file: {\n            fileContent: check io:fileReadBytes(TRAIN_DATA_FILE_PATH),\n            fileName: TRAIN_DATA_FILE_NAME\n        },\n        purpose: \u0026#x22;fine-tune\u0026#x22;\n    };\n\n    finetunes:OpenAIFile fileResponse = check openAIFineTunes-\u003e/files.post(fileRequest);\n    io:println(string \u0026#x60;Training file uploaded successfully with ID: ${fileResponse.id}\u0026#x60;);\n\n    finetunes:CreateFineTuningJobRequest fineTuneRequest = {\n        training_file: fileResponse.id,\n        model: \u0026#x22;gpt-3.5-turbo\u0026#x22;,\n        seed: 4\n    };\n\n    finetunes:FineTuningJob fineTuneResponse = check openAIFineTunes-\u003e/fine_tuning/jobs.post(fineTuneRequest);\n    io:println(string \u0026#x60;Fine-tune job started successfully with ID: ${fineTuneResponse.id}\u0026#x60;);\n}\" class=\"rehype-pretty-copy\" onclick=\"navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(\u0026#x27;rehype-pretty-copied\u0026#x27;);this.setAttribute(\u0026#x27;title\u0026#x27;, \u0026#x27;Copied\u0026#x27;);this.setAttribute(\u0026#x27;aria-label\u0026#x27;, \u0026#x27;Copied\u0026#x27;);window.setTimeout(() =\u003e {this.classList.remove(\u0026#x27;rehype-pretty-copied\u0026#x27;);this.setAttribute(\u0026#x27;title\u0026#x27;, \u0026#x27;Copy\u0026#x27;);this.setAttribute(\u0026#x27;aria-label\u0026#x27;, \u0026#x27;Copy\u0026#x27;);}, 3000);\"\u003e\u003cspan class=\"ready\"\u003e\u003c/span\u003e\u003cspan class=\"success\"\u003e\u003c/span\u003e\u003c/button\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003epublic\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e function\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003e main\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e() \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003ereturns\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e error?\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    finetunes\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eClient openAIFineTunes \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e ({auth\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {token: openAIToken}});\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    finetunes\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eCreateFileRequest fileRequest \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        file\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e            fileContent\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e io:\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003efileReadBytes\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003eTRAIN_DATA_FILE_PATH\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e),\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e            fileName\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e TRAIN_DATA_FILE_NAME\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        },\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        purpose\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e \"fine-tune\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    };\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    finetunes\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eOpenAIFile fileResponse \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e openAIFineTunes\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e-\u003e/\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003efiles.\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003epost\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003efileRequest\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    io\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003estring\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e `Training file uploaded successfully with ID: ${\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003efileResponse\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eid\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e}`\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    finetunes\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eCreateFineTuningJobRequest fineTuneRequest \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        training_file\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e fileResponse.id,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        model\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e \"gpt-3.5-turbo\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        seed\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e 4\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    };\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    finetunes\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eFineTuningJob fineTuneResponse \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e openAIFineTunes\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e-\u003e/\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003efine_tuning\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e/\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003ejobs.\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003epost\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003efineTuneRequest\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    io\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003estring\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e `Fine-tune job started successfully with ID: ${\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003efineTuneResponse\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eid\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e}`\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cstyle\u003e:root {--copy-icon: url(\"data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 448 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg' style='float: right;'%3E%3Ctitle%3ECopy%3C/title%3E%3Cpath d='M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z'%3E%3C/path%3E%3C/svg%3E\");--success-icon: url(\"data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 512 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg'%3E%3Ctitle%3ECopied%3C/title%3E%3Cpath d='M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z'%3E%3C/path%3E%3C/svg%3E\");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {background-color: transparent;border: none;right: 1px;padding: 0;width: 16px;height: 16px;display: flex;margin-top: -20px;margin-right: 8px;position: absolute;backdrop-filter: blur(3px);\u0026 span {width: 100%;aspect-ratio: 1 / 1;}\u0026 .ready {background-image: var(--copy-icon);}\u0026 .success {display: none; background-image: var(--success-icon);}}.Code_codeSnippet__ayQ3y button.rehype-pretty-copy {margin-top: -10px;}\u0026.rehype-pretty-copied {\u0026 .success {display: block;} \u0026 .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;\u0026 .ready { display: none; }\u0026 .success { display: block; }}\u003c/style\u003e\u003c/code\u003e\u003c/pre\u003e"},"hosting_ipaas":{"frontmatter":{"title":"(Extra!) Deploy AI-Powered Integrations with Devant","description":"Devant by WSO2 is an AI-powered iPaaS built for the era of intelligent applications. Go beyond building—deploy, scale, and manage AI integrations effortlessly. Whether it’s GenAI models, knowledge bases, or custom AI Agents, Devant helps you operationalize them with low-code speed and cloud-native ease. From idea to live integration—Devant gets you there faster.","url":"https://wso2.com/devant/","image":"images/devant-ipaas.png"},"code":""},"libraries-for-ai-operations":{"frontmatter":{"title":"Libraries for AI operations","description":"Built-in mathematical operations such as distance measures, optimizations, etc. are a common building block in AI use cases.","url":"https://github.com/ballerina-guides/ai-samples/blob/main/compare_similarity_between_two_texts_using_openai/main.bal","image":""},"code":"\u003cpre class=\"shiki github-light\" style=\"background-color:#fff;color:#24292e\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cbutton type=\"button\" title=\"Copy\" aria-label=\"Copy\" data=\"public function main() returns error? {\n    final embeddings:Client openAIEmbeddings = check new ({auth: {token: openAIToken}});\n\n    string text1 = \u0026#x22;What are you thinking?\u0026#x22;;\n    string text2 = \u0026#x22;you are playing cricket\u0026#x22;;\n    embeddings:CreateEmbeddingRequest embeddingReq = {\n        model: \u0026#x22;text-embedding-3-small\u0026#x22;,\n        input: [text1, text2]\n    };\n    embeddings:CreateEmbeddingResponse embeddingRes = check openAIEmbeddings-\u003e/embeddings.post(embeddingReq);\n\n    float[] text1Embedding = embeddingRes.data[0].embedding;\n    float[] text2Embedding = embeddingRes.data[1].embedding;\n    float similarity = vector:cosineSimilarity(text1Embedding, text2Embedding);\n    io:println(\u0026#x22;The similarity between the given two texts : \u0026#x22;, similarity);\n}\" class=\"rehype-pretty-copy\" onclick=\"navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(\u0026#x27;rehype-pretty-copied\u0026#x27;);this.setAttribute(\u0026#x27;title\u0026#x27;, \u0026#x27;Copied\u0026#x27;);this.setAttribute(\u0026#x27;aria-label\u0026#x27;, \u0026#x27;Copied\u0026#x27;);window.setTimeout(() =\u003e {this.classList.remove(\u0026#x27;rehype-pretty-copied\u0026#x27;);this.setAttribute(\u0026#x27;title\u0026#x27;, \u0026#x27;Copy\u0026#x27;);this.setAttribute(\u0026#x27;aria-label\u0026#x27;, \u0026#x27;Copy\u0026#x27;);}, 3000);\"\u003e\u003cspan class=\"ready\"\u003e\u003c/span\u003e\u003cspan class=\"success\"\u003e\u003c/span\u003e\u003c/button\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003epublic\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e function\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003e main\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e() \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003ereturns\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e error?\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e    final\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e embeddings\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eClient openAIEmbeddings \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e ({auth\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {token: openAIToken}});\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#005CC5\"\u003e    string\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e text1 \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e \"What are you thinking?\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#005CC5\"\u003e    string\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e text2 \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e \"you are playing cricket\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    embeddings\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eCreateEmbeddingRequest embeddingReq \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        model\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e \"text-embedding-3-small\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        input\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e [text1, text2]\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    };\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    embeddings\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eCreateEmbeddingResponse embeddingRes \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e openAIEmbeddings\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e-\u003e/\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eembeddings.\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003epost\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003eembeddingReq\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#005CC5\"\u003e    float\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e[] text1Embedding \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e embeddingRes.data[\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e0\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e].embedding;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#005CC5\"\u003e    float\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e[] text2Embedding \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e embeddingRes.data[\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e1\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e].embedding;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#005CC5\"\u003e    float\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e similarity \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e vector\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003ecosineSimilarity\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003etext1Embedding\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003etext2Embedding\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    io\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e\"The similarity between the given two texts : \"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003esimilarity\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cstyle\u003e:root {--copy-icon: url(\"data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 448 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg' style='float: right;'%3E%3Ctitle%3ECopy%3C/title%3E%3Cpath d='M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z'%3E%3C/path%3E%3C/svg%3E\");--success-icon: url(\"data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 512 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg'%3E%3Ctitle%3ECopied%3C/title%3E%3Cpath d='M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z'%3E%3C/path%3E%3C/svg%3E\");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {background-color: transparent;border: none;right: 1px;padding: 0;width: 16px;height: 16px;display: flex;margin-top: -20px;margin-right: 8px;position: absolute;backdrop-filter: blur(3px);\u0026 span {width: 100%;aspect-ratio: 1 / 1;}\u0026 .ready {background-image: var(--copy-icon);}\u0026 .success {display: none; background-image: var(--success-icon);}}.Code_codeSnippet__ayQ3y button.rehype-pretty-copy {margin-top: -10px;}\u0026.rehype-pretty-copied {\u0026 .success {display: block;} \u0026 .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;\u0026 .ready { display: none; }\u0026 .success { display: block; }}\u003c/style\u003e\u003c/code\u003e\u003c/pre\u003e"},"multimodel1":{"frontmatter":{"title":"","description":"","url":"","image":""},"code":"\u003cpre class=\"shiki github-light\" style=\"background-color:#fff;color:#24292e\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cbutton type=\"button\" title=\"Copy\" aria-label=\"Copy\" data=\"public function main() returns error? {\n    chat:CreateChatCompletionRequest request = {\n        model: \u0026#x22;gpt-4o-mini\u0026#x22;,\n        messages: [\n            {\n                role: \u0026#x22;user\u0026#x22;,\n                content: [\n                    {\n                        \u0026#x27;type: \u0026#x22;text\u0026#x22;,\n                        text: \u0026#x22;What is in this image?\u0026#x22;\n                    },\n                    {\n                        \u0026#x27;type: \u0026#x22;image_url\u0026#x22;,\n                        image_url: {\n                            url: \u0026#x22;https://upload.wikimedia.org/wikipedia/commons/thumb/d/dd/Gfp-wisconsin-madison-the-nature-boardwalk.jpg/2560px-Gfp-wisconsin-madison-the-nature-boardwalk.jpg\u0026#x22;\n                        }\n                    }\n                ]\n            }\n        ]\n    };\n    chat:CreateChatCompletionResponse completionRes = check openAIChat-\u003e/chat/completions.post(request);\n\n    string content = check completionRes.choices[0].message.content.ensureType();\n    io:println(\u0026#x22;Photo Description: \u0026#x22;, content);   \n}\" class=\"rehype-pretty-copy\" onclick=\"navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(\u0026#x27;rehype-pretty-copied\u0026#x27;);this.setAttribute(\u0026#x27;title\u0026#x27;, \u0026#x27;Copied\u0026#x27;);this.setAttribute(\u0026#x27;aria-label\u0026#x27;, \u0026#x27;Copied\u0026#x27;);window.setTimeout(() =\u003e {this.classList.remove(\u0026#x27;rehype-pretty-copied\u0026#x27;);this.setAttribute(\u0026#x27;title\u0026#x27;, \u0026#x27;Copy\u0026#x27;);this.setAttribute(\u0026#x27;aria-label\u0026#x27;, \u0026#x27;Copy\u0026#x27;);}, 3000);\"\u003e\u003cspan class=\"ready\"\u003e\u003c/span\u003e\u003cspan class=\"success\"\u003e\u003c/span\u003e\u003c/button\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003epublic\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e function\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003e main\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e() \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003ereturns\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e error?\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    chat\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eCreateChatCompletionRequest request \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        model\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e \"gpt-4o-mini\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        messages\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e [\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e            {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#6F42C1\"\u003e                role\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e\"user\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#6F42C1\"\u003e                content\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e: [\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e                    {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e                        'type\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e \"text\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#6F42C1\"\u003e                        text\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e\"What is in this image?\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e                    },\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e                    {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e                        'type\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e \"image_url\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#6F42C1\"\u003e                        image_url\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e: {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#6F42C1\"\u003e                            url\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e\"https://upload.wikimedia.org/wikipedia/commons/thumb/d/dd/Gfp-wisconsin-madison-the-nature-boardwalk.jpg/2560px-Gfp-wisconsin-madison-the-nature-boardwalk.jpg\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e                        }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e                    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e                ]\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e            }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        ]\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    };\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    chat\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eCreateChatCompletionResponse completionRes \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e openAIChat\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e-\u003e/\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003echat\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e/\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003ecompletions.\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003epost\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#005CC5\"\u003e    string\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e content \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e completionRes.choices[\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e0\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e].message.content.\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003eensureType\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e();\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    io\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e\"Photo Description: \"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003econtent\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);   \u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cstyle\u003e:root {--copy-icon: url(\"data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 448 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg' style='float: right;'%3E%3Ctitle%3ECopy%3C/title%3E%3Cpath d='M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z'%3E%3C/path%3E%3C/svg%3E\");--success-icon: url(\"data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 512 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg'%3E%3Ctitle%3ECopied%3C/title%3E%3Cpath d='M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z'%3E%3C/path%3E%3C/svg%3E\");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {background-color: transparent;border: none;right: 1px;padding: 0;width: 16px;height: 16px;display: flex;margin-top: -20px;margin-right: 8px;position: absolute;backdrop-filter: blur(3px);\u0026 span {width: 100%;aspect-ratio: 1 / 1;}\u0026 .ready {background-image: var(--copy-icon);}\u0026 .success {display: none; background-image: var(--success-icon);}}.Code_codeSnippet__ayQ3y button.rehype-pretty-copy {margin-top: -10px;}\u0026.rehype-pretty-copied {\u0026 .success {display: block;} \u0026 .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;\u0026 .ready { display: none; }\u0026 .success { display: block; }}\u003c/style\u003e\u003c/code\u003e\u003c/pre\u003e"},"multimodel2":{"frontmatter":{"title":"","description":"","url":"","image":""},"code":"\u003cpre class=\"shiki github-light\" style=\"background-color:#fff;color:#24292e\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cbutton type=\"button\" title=\"Copy\" aria-label=\"Copy\" data=\"service / on new http:Listener(9090) {\n    resource function post products() returns int|error {\n        // Get the product details from the last inserted row of the Google Sheet.\n        sheets:Range range = check gsheets-\u003egetRange(googleSheetId, \u0026#x22;Sheet1\u0026#x22;, \u0026#x22;A2:F\u0026#x22;);\n        var [name, benefits, features, productType] = getProduct(range);\n\n        // Generate a product description from OpenAI for a given product name.\n        string query = string \u0026#x60;generate a product descirption in 250 words about ${name}\u0026#x60;;\n        chat:CreateChatCompletionRequest request = {\n            model: \u0026#x22;gpt-4o\u0026#x22;,\n            messages: [\n                {\n                    \u0026#x22;role\u0026#x22;: \u0026#x22;user\u0026#x22;,\n                    \u0026#x22;content\u0026#x22;: query\n                }\n            ],\n            max_tokens: 100\n        };\n\n        chat:CreateChatCompletionResponse completionRes = check openAIChat-\u003e/chat/completions.post(request);\n\n        // Generate a product image from OpenAI for the given product.\n        images:CreateImageRequest imagePrmt = {prompt: string \u0026#x60;${name}, ${benefits}, ${features}\u0026#x60;};\n        images:ImagesResponse imageRes = check openAIImages-\u003e/images/generations.post(imagePrmt);\n\n        // Create a product in Shopify.\n        shopify:CreateProduct product = {\n            product: {\n                title: name,\n                body_html: completionRes.choices[0].message.content,\n                tags: features,\n                product_type: productType,\n                images: [{src: imageRes.data[0].url}]\n            }\n        };\n        shopify:ProductObject prodObj = check shopify-\u003ecreateProduct(product);\n        int? pid = prodObj?.product?.id;\n        if pid is () {\n            return error(\u0026#x22;Error in creating product in Shopify\u0026#x22;);\n        }\n        return pid;\n    }\n}\" class=\"rehype-pretty-copy\" onclick=\"navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(\u0026#x27;rehype-pretty-copied\u0026#x27;);this.setAttribute(\u0026#x27;title\u0026#x27;, \u0026#x27;Copied\u0026#x27;);this.setAttribute(\u0026#x27;aria-label\u0026#x27;, \u0026#x27;Copied\u0026#x27;);window.setTimeout(() =\u003e {this.classList.remove(\u0026#x27;rehype-pretty-copied\u0026#x27;);this.setAttribute(\u0026#x27;title\u0026#x27;, \u0026#x27;Copy\u0026#x27;);this.setAttribute(\u0026#x27;aria-label\u0026#x27;, \u0026#x27;Copy\u0026#x27;);}, 3000);\"\u003e\u003cspan class=\"ready\"\u003e\u003c/span\u003e\u003cspan class=\"success\"\u003e\u003c/span\u003e\u003c/button\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003eservice\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e / \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003eon\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e http:Listener(\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e9090\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e    resource\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e function\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003e post\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003e products\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e() \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003ereturns\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e int\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e|error\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#6A737D\"\u003e        // Get the product details from the last inserted row of the Google Sheet.\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        sheets\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eRange range \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e gsheets\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003egetRange\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003egoogleSheetId\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e\"Sheet1\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e\"A2:F\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#005CC5\"\u003e        var\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e [name, benefits, features, productType] \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003e getProduct\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003erange\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#6A737D\"\u003e        // Generate a product description from OpenAI for a given product name.\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#005CC5\"\u003e        string\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e query \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e string\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e `generate a product descirption in 250 words about ${\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003ename\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e}`\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        chat\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eCreateChatCompletionRequest request \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e            model\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e \"gpt-4o\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e            messages\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e [\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e                {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#032F62\"\u003e                    \"role\"\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e \"user\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#032F62\"\u003e                    \"content\"\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e query\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e                }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e            ],\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e            max_tokens\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e 100\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        };\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        chat\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eCreateChatCompletionResponse completionRes \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e openAIChat\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e-\u003e/\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003echat\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e/\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003ecompletions.\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003epost\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#6A737D\"\u003e        // Generate a product image from OpenAI for the given product.\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        images\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eCreateImageRequest imagePrmt \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {prompt\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e string \u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e`${\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003ename\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e}, ${\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003ebenefits\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e}, ${\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003efeatures\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e}`\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e};\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        images\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eImagesResponse imageRes \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e openAIImages\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e-\u003e/\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eimages\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e/\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003egenerations.\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003epost\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003eimagePrmt\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#6A737D\"\u003e        // Create a product in Shopify.\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        shopify\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eCreateProduct product \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e            product\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e                title\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e name,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e                body_html\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e completionRes.choices[\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e0\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e].message.content,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e                tags\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e features,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e                product_type\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e productType,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e                images\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e [{\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003esrc\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e: imageRes.data[\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e0\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e].url}]\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e            }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        };\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        shopify\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eProductObject prodObj \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e shopify\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003ecreateProduct\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003eproduct\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#005CC5\"\u003e        int\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e? pid \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e prodObj?.product?.id;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e        if\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e pid \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003eis\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e () {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e            return\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e error\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e\"Error in creating product in Shopify\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e        return\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e pid;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cstyle\u003e:root {--copy-icon: url(\"data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 448 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg' style='float: right;'%3E%3Ctitle%3ECopy%3C/title%3E%3Cpath d='M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z'%3E%3C/path%3E%3C/svg%3E\");--success-icon: url(\"data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 512 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg'%3E%3Ctitle%3ECopied%3C/title%3E%3Cpath d='M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z'%3E%3C/path%3E%3C/svg%3E\");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {background-color: transparent;border: none;right: 1px;padding: 0;width: 16px;height: 16px;display: flex;margin-top: -20px;margin-right: 8px;position: absolute;backdrop-filter: blur(3px);\u0026 span {width: 100%;aspect-ratio: 1 / 1;}\u0026 .ready {background-image: var(--copy-icon);}\u0026 .success {display: none; background-image: var(--success-icon);}}.Code_codeSnippet__ayQ3y button.rehype-pretty-copy {margin-top: -10px;}\u0026.rehype-pretty-copied {\u0026 .success {display: block;} \u0026 .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;\u0026 .ready { display: none; }\u0026 .success { display: block; }}\u003c/style\u003e\u003c/code\u003e\u003c/pre\u003e"},"multimodel3":{"frontmatter":{"title":"","description":"","url":"","image":""},"code":"\u003cpre class=\"shiki github-light\" style=\"background-color:#fff;color:#24292e\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cbutton type=\"button\" title=\"Copy\" aria-label=\"Copy\" data=\"public function main(string audioURL, string toLanguage) returns error? {\n    // Creates a HTTP client to download the audio file\n    http:Client audioEP = check new (audioURL);\n    http:Response httpResp = check audioEP-\u003eget(\u0026#x22;\u0026#x22;);\n    byte[] audioBytes = check httpResp.getBinaryPayload();\n    check io:fileWriteBytes(AUDIO_FILE_PATH, audioBytes);\n\n    // Creates a request to translate the audio file to text (English)\n    audio:CreateTranslationRequest translationsReq = {\n        file: {fileContent: check io:fileReadBytes(AUDIO_FILE_PATH), fileName: AUDIO_FILE},\n        model: \u0026#x22;whisper-1\u0026#x22;\n    };\n\n    // Translates the audio file to text (English)\n    audio:Client openAIAudio = check new ({auth: {token: openAIToken}});\n    audio:CreateTranscriptionResponse transcriptionRes = check openAIAudio-\u003e/audio/translations.post(translationsReq);\n    io:println(\u0026#x22;Audio text in English: \u0026#x22;, transcriptionRes.text);\n\n    final chat:Client openAIChat = check new ({\n        auth: {\n            token: openAIToken\n        }\n    });\n\n    string query = string \u0026#x60;Translate the following text from English to ${toLanguage} : ${transcriptionRes.text}\u0026#x60;;\n\n    // Creates a request to translate the text from English to another language\n    chat:CreateChatCompletionRequest request = {\n        model: \u0026#x22;gpt-4o\u0026#x22;,\n        messages: [\n            {\n                \u0026#x22;role\u0026#x22;: \u0026#x22;user\u0026#x22;,\n                \u0026#x22;content\u0026#x22;: query\n            }\n        ],\n        temperature: 0.7,\n        max_tokens: 256,\n        top_p: 1,\n        frequency_penalty: 0,\n        presence_penalty: 0\n    };\n\n    // Translates the text from English to another language\n    chat:CreateChatCompletionResponse response = check openAIChat-\u003e/chat/completions.post(request);\n    string? translatedText = response.choices[0].message.content;\n\n    if translatedText is () {\n        return error(\u0026#x22;Failed to translate the given audio.\u0026#x22;);\n    }\n    io:println(\u0026#x22;Translated text: \u0026#x22;, translatedText);\n}\" class=\"rehype-pretty-copy\" onclick=\"navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(\u0026#x27;rehype-pretty-copied\u0026#x27;);this.setAttribute(\u0026#x27;title\u0026#x27;, \u0026#x27;Copied\u0026#x27;);this.setAttribute(\u0026#x27;aria-label\u0026#x27;, \u0026#x27;Copied\u0026#x27;);window.setTimeout(() =\u003e {this.classList.remove(\u0026#x27;rehype-pretty-copied\u0026#x27;);this.setAttribute(\u0026#x27;title\u0026#x27;, \u0026#x27;Copy\u0026#x27;);this.setAttribute(\u0026#x27;aria-label\u0026#x27;, \u0026#x27;Copy\u0026#x27;);}, 3000);\"\u003e\u003cspan class=\"ready\"\u003e\u003c/span\u003e\u003cspan class=\"success\"\u003e\u003c/span\u003e\u003c/button\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003epublic\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e function\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003e main\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003estring\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003e audioURL\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003estring\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003e toLanguage\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e) \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003ereturns\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e error?\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#6A737D\"\u003e    // Creates a HTTP client to download the audio file\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    http\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eClient audioEP \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003eaudioURL\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    http\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eResponse httpResp \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e audioEP\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003eget\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e\"\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#005CC5\"\u003e    byte\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e[] audioBytes \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e httpResp.\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003egetBinaryPayload\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e();\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e    check\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e io\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003efileWriteBytes\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003eAUDIO_FILE_PATH\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003eaudioBytes\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#6A737D\"\u003e    // Creates a request to translate the audio file to text (English)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    audio\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eCreateTranslationRequest translationsReq \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        file\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {fileContent: \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003echeck\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e io:\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003efileReadBytes\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003eAUDIO_FILE_PATH\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e), fileName\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e AUDIO_FILE},\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        model\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e \"whisper-1\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    };\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#6A737D\"\u003e    // Translates the audio file to text (English)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    audio\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eClient openAIAudio \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e ({auth\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {token: openAIToken}});\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    audio\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eCreateTranscriptionResponse transcriptionRes \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e openAIAudio\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e-\u003e/\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eaudio\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e/\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003etranslations.\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003epost\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003etranslationsReq\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    io\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e\"Audio text in English: \"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e, transcriptionRes.text);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e    final\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e chat\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eClient openAIChat \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e ({\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        auth\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e            token\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e openAIToken\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    });\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#005CC5\"\u003e    string\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e query \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e string\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e `Translate the following text from English to ${\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003etoLanguage\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e} : ${\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003etranscriptionRes\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003etext\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e}`\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#6A737D\"\u003e    // Creates a request to translate the text from English to another language\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    chat\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eCreateChatCompletionRequest request \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        model\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e \"gpt-4o\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        messages\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e [\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e            {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#032F62\"\u003e                \"role\"\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e \"user\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#032F62\"\u003e                \"content\"\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e query\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e            }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        ],\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        temperature\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e 0.7\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        max_tokens\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e 256\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        top_p\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e 1\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        frequency_penalty\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e 0\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        presence_penalty\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e 0\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    };\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#6A737D\"\u003e    // Translates the text from English to another language\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    chat\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eCreateChatCompletionResponse response \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e openAIChat\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e-\u003e/\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003echat\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e/\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003ecompletions.\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003epost\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#005CC5\"\u003e    string\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e? translatedText \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e response.choices[\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e0\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e].message.content;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e translatedText \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003eis\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e () {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e        return\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e error\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e\"Failed to translate the given audio.\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    io\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e\"Translated text: \"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003etranslatedText\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cstyle\u003e:root {--copy-icon: url(\"data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 448 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg' style='float: right;'%3E%3Ctitle%3ECopy%3C/title%3E%3Cpath d='M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z'%3E%3C/path%3E%3C/svg%3E\");--success-icon: url(\"data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 512 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg'%3E%3Ctitle%3ECopied%3C/title%3E%3Cpath d='M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z'%3E%3C/path%3E%3C/svg%3E\");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {background-color: transparent;border: none;right: 1px;padding: 0;width: 16px;height: 16px;display: flex;margin-top: -20px;margin-right: 8px;position: absolute;backdrop-filter: blur(3px);\u0026 span {width: 100%;aspect-ratio: 1 / 1;}\u0026 .ready {background-image: var(--copy-icon);}\u0026 .success {display: none; background-image: var(--success-icon);}}.Code_codeSnippet__ayQ3y button.rehype-pretty-copy {margin-top: -10px;}\u0026.rehype-pretty-copied {\u0026 .success {display: block;} \u0026 .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;\u0026 .ready { display: none; }\u0026 .success { display: block; }}\u003c/style\u003e\u003c/code\u003e\u003c/pre\u003e"},"multimodel4":{"frontmatter":{"title":"","description":"","url":"","image":""},"code":"\u003cpre class=\"shiki github-light\" style=\"background-color:#fff;color:#24292e\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cbutton type=\"button\" title=\"Copy\" aria-label=\"Copy\" data=\"public function main(string podcastURL) returns error? {\n    // Creates a HTTP client to download the audio file\n    http:Client podcastEP = check new (podcastURL);\n    http:Response httpResp = check podcastEP-\u003eget(\u0026#x22;\u0026#x22;);\n    byte[] audioBytes = check httpResp.getBinaryPayload();\n    check io:fileWriteBytes(AUDIO_FILE_PATH, audioBytes);\n\n    // Creates a request to translate the audio file to text (English)\n    audio:CreateTranscriptionRequest transcriptionsReq = {\n        file: {fileContent: (check io:fileReadBytes(AUDIO_FILE_PATH)), fileName: AUDIO_FILE},\n        model: \u0026#x22;whisper-1\u0026#x22;\n    };\n\n    // Converts the audio file to text (English) using OpenAI speach to text API\n    audio:Client openAIAudio = check new ({auth: {token: openAIToken}});\n    audio:CreateTranscriptionResponse transcriptionsRes = check openAIAudio-\u003e/audio/transcriptions.post(transcriptionsReq);\n    io:println(\u0026#x22;Text from the audio :\u0026#x22;, transcriptionsRes.text);\n\n    // Creates a request to summarize the text\n    chat:CreateChatCompletionRequest request = {\n        model: \u0026#x22;gpt-4o-mini\u0026#x22;,\n        messages: [\n            {\n                role: \u0026#x22;user\u0026#x22;,\n                content: string \u0026#x60;Summarize the following text to 100 characters : ${transcriptionsRes.text}\u0026#x60;\n            }\n        ],\n        temperature: 0.7,\n        max_tokens: 256,\n        top_p: 1,\n        frequency_penalty: 0,\n        presence_penalty: 0\n    };\n\n    // Summarizes the text using OpenAI text completion API\n    final chat:Client openAIChat = check new ({auth: {token: openAIToken}});\n    chat:CreateChatCompletionResponse completionRes = check openAIChat-\u003e/chat/completions.post(request);\n\n    string? summerizedText = completionRes.choices[0].message.content;\n    if summerizedText is () {\n        return error(\u0026#x22;Failed to summarize the given audio.\u0026#x22;);\n    }\n    io:println(\u0026#x22;Summarized text: \u0026#x22;, summerizedText);\n\n    // Tweet it out!\n    final twitter:Client twitter = check new ({auth: {token: token}});\n    twitter:TweetCreateResponse tweet = check twitter-\u003e/tweets.post({text: summerizedText});\n    io:println(\u0026#x22;Tweet: \u0026#x22;, tweet);\n}\" class=\"rehype-pretty-copy\" onclick=\"navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(\u0026#x27;rehype-pretty-copied\u0026#x27;);this.setAttribute(\u0026#x27;title\u0026#x27;, \u0026#x27;Copied\u0026#x27;);this.setAttribute(\u0026#x27;aria-label\u0026#x27;, \u0026#x27;Copied\u0026#x27;);window.setTimeout(() =\u003e {this.classList.remove(\u0026#x27;rehype-pretty-copied\u0026#x27;);this.setAttribute(\u0026#x27;title\u0026#x27;, \u0026#x27;Copy\u0026#x27;);this.setAttribute(\u0026#x27;aria-label\u0026#x27;, \u0026#x27;Copy\u0026#x27;);}, 3000);\"\u003e\u003cspan class=\"ready\"\u003e\u003c/span\u003e\u003cspan class=\"success\"\u003e\u003c/span\u003e\u003c/button\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003epublic\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e function\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003e main\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003estring\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003e podcastURL\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e) \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003ereturns\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e error?\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#6A737D\"\u003e    // Creates a HTTP client to download the audio file\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    http\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eClient podcastEP \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003epodcastURL\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    http\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eResponse httpResp \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e podcastEP\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003eget\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e\"\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#005CC5\"\u003e    byte\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e[] audioBytes \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e httpResp.\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003egetBinaryPayload\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e();\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e    check\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e io\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003efileWriteBytes\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003eAUDIO_FILE_PATH\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003eaudioBytes\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#6A737D\"\u003e    // Creates a request to translate the audio file to text (English)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    audio\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eCreateTranscriptionRequest transcriptionsReq \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        file\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {fileContent: (\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003echeck\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003e io\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003efileReadBytes\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003eAUDIO_FILE_PATH\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e)), fileName\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e AUDIO_FILE},\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        model\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e \"whisper-1\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    };\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#6A737D\"\u003e    // Converts the audio file to text (English) using OpenAI speach to text API\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    audio\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eClient openAIAudio \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e ({auth\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {token: openAIToken}});\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    audio\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eCreateTranscriptionResponse transcriptionsRes \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e openAIAudio\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e-\u003e/\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eaudio\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e/\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003etranscriptions.\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003epost\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003etranscriptionsReq\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    io\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e\"Text from the audio :\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e, transcriptionsRes.text);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#6A737D\"\u003e    // Creates a request to summarize the text\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    chat\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eCreateChatCompletionRequest request \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        model\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e \"gpt-4o-mini\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        messages\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e [\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e            {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#6F42C1\"\u003e                role\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e\"user\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#6F42C1\"\u003e                content\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003estring\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e `Summarize the following text to \u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e100\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003e characters\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e : ${transcriptionsRes.text}`\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e            }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        ],\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        temperature\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e 0.7\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        max_tokens\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e 256\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        top_p\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e 1\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        frequency_penalty\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e 0\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        presence_penalty\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e 0\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    };\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#6A737D\"\u003e    // Summarizes the text using OpenAI text completion API\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e    final\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e chat\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eClient openAIChat \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e ({auth\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {token: openAIToken}});\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    chat\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eCreateChatCompletionResponse completionRes \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e openAIChat\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e-\u003e/\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003echat\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e/\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003ecompletions.\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003epost\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#005CC5\"\u003e    string\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e? summerizedText \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e completionRes.choices[\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e0\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e].message.content;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e summerizedText \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003eis\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e () {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e        return\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e error\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e\"Failed to summarize the given audio.\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    io\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e\"Summarized text: \"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003esummerizedText\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#6A737D\"\u003e    // Tweet it out!\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e    final\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e twitter\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eClient twitter \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e ({auth\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {token: token}});\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    twitter\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eTweetCreateResponse tweet \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e twitter\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e-\u003e/\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003etweets.\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003epost\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e({text\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e summerizedText});\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    io\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e\"Tweet: \"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003etweet\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cstyle\u003e:root {--copy-icon: url(\"data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 448 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg' style='float: right;'%3E%3Ctitle%3ECopy%3C/title%3E%3Cpath d='M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z'%3E%3C/path%3E%3C/svg%3E\");--success-icon: url(\"data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 512 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg'%3E%3Ctitle%3ECopied%3C/title%3E%3Cpath d='M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z'%3E%3C/path%3E%3C/svg%3E\");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {background-color: transparent;border: none;right: 1px;padding: 0;width: 16px;height: 16px;display: flex;margin-top: -20px;margin-right: 8px;position: absolute;backdrop-filter: blur(3px);\u0026 span {width: 100%;aspect-ratio: 1 / 1;}\u0026 .ready {background-image: var(--copy-icon);}\u0026 .success {display: none; background-image: var(--success-icon);}}.Code_codeSnippet__ayQ3y button.rehype-pretty-copy {margin-top: -10px;}\u0026.rehype-pretty-copied {\u0026 .success {display: block;} \u0026 .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;\u0026 .ready { display: none; }\u0026 .success { display: block; }}\u003c/style\u003e\u003c/code\u003e\u003c/pre\u003e"},"natural_expressions":{"frontmatter":{"title":"","description":"","url":"","image":""},"code":"\u003cpre class=\"shiki github-light\" style=\"background-color:#fff;color:#24292e\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cbutton type=\"button\" title=\"Copy\" aria-label=\"Copy\" data=\"import ballerina/ai;\nimport ballerina/http;\n\nfinal readonly \u0026#x26; string[] categories = [\u0026#x22;Gardening\u0026#x22;, \u0026#x22;Sports\u0026#x22;, \u0026#x22;Health\u0026#x22;, \u0026#x22;Technology\u0026#x22;, \u0026#x22;Travel\u0026#x22;];\n\npublic type Blog record {|\n    string title;\n    string content;\n|};\n\ntype Review record {|\n    string? suggestedCategory;\n    int rating;\n|};\n\npublic isolated function reviewBlog(Blog blog) returns Review|error =\u003e natural (check ai:getDefaultModelProvider()) {\n    You are an expert content reviewer for a blog site that \n    categorizes posts under the following categories: ${categories}\n\n    Your tasks are:\n    1. Suggest a suitable category for the blog from exactly the specified categories. \n    If there is no match, use null.\n\n    2. Rate the blog post on a scale of 1 to 10 based on the following criteria:\n    - **Relevance**: How well the content aligns with the chosen category.\n    - **Depth**: The level of detail and insight in the content.\n    - **Clarity**: How easy it is to read and understand.\n    - **Originality**: Whether the content introduces fresh perspectives or ideas.\n    - **Language Quality**: Grammar, spelling, and overall writing quality.\n\n    Here is the blog post content:\n\n    Title: ${blog.title}\n    Content: ${blog.content}\n};\n\nservice /blogs on new http:Listener(8088) {\n    resource function post review(Blog blog) returns Review|http:InternalServerError {\n        Review|error review = reviewBlog(blog);\n        if review is error {\n            return {\n                body: \u0026#x22;Failed to review the blog post\u0026#x22;\n            };\n        }\n        return review;\n    }\n}\" class=\"rehype-pretty-copy\" onclick=\"navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(\u0026#x27;rehype-pretty-copied\u0026#x27;);this.setAttribute(\u0026#x27;title\u0026#x27;, \u0026#x27;Copied\u0026#x27;);this.setAttribute(\u0026#x27;aria-label\u0026#x27;, \u0026#x27;Copied\u0026#x27;);window.setTimeout(() =\u003e {this.classList.remove(\u0026#x27;rehype-pretty-copied\u0026#x27;);this.setAttribute(\u0026#x27;title\u0026#x27;, \u0026#x27;Copy\u0026#x27;);this.setAttribute(\u0026#x27;aria-label\u0026#x27;, \u0026#x27;Copy\u0026#x27;);}, 3000);\"\u003e\u003cspan class=\"ready\"\u003e\u003c/span\u003e\u003cspan class=\"success\"\u003e\u003c/span\u003e\u003c/button\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003eimport\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e ballerina/ai;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003eimport\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e ballerina/http;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003efinal\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e readonly\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e \u0026#x26;\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e string\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e[] categories \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e [\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e\"Gardening\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e\"Sports\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e\"Health\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e\"Technology\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e\"Travel\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e];\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003epublic\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e type\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003e Blog\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e record\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e|\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#005CC5\"\u003e    string\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e title;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#005CC5\"\u003e    string\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e content;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e|\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e};\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003etype\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003e Review\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e record\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e|\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#005CC5\"\u003e    string\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e? suggestedCategory;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#005CC5\"\u003e    int\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e rating;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e|\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e};\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003epublic\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e isolated\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e function\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003e reviewBlog\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003eBlog\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003e blog\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e) \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003ereturns\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e Review\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e|error\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e =\u003e\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003e natural \u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003echeck\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003e ai\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003egetDefaultModelProvider\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e()) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    You are an expert content reviewer for a blog site that \u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    categorizes posts under the following categories\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e ${categories}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    Your tasks are\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#005CC5\"\u003e    1\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e. Suggest a suitable category for the blog \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003efrom\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e exactly the specified categories. \u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    If there \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003eis\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e no \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003ematch\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e, use \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003enull\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e.\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#005CC5\"\u003e    2\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e. Rate the blog post \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003eon\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e a scale of \u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e1\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e to \u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e10\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e based \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003eon\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e the following criteria\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e    -\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e **\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eRelevance\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e**:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e How well the content aligns with the chosen category.\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e    -\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e **\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eDepth\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e**:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e The level of detail and insight \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003ein\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e the content.\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e    -\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e **\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eClarity\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e**:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e How easy it \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003eis\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e to read and understand.\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e    -\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e **\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eOriginality\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e**:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e Whether the content introduces fresh perspectives or ideas.\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e    -\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e **\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eLanguage Quality\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e**:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e Grammar, spelling, and overall writing quality.\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    Here \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003eis\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e the blog post content\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    Title\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e ${blog.title}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    Content\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e ${blog.content}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e};\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003eservice\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003e /blogs\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e on\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e http:Listener(\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e8088\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e    resource\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e function\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003e post\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003e review\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003eBlog\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003e blog\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e) \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003ereturns\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e Review\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e|\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003ehttp\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eInternalServerError {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        Review\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e|error\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e review \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003e reviewBlog\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003eblog\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e        if\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e review \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003eis\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e error\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e            return\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e                body\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e \"Failed to review the blog post\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e            };\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e        return\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e review;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cstyle\u003e:root {--copy-icon: url(\"data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 448 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg' style='float: right;'%3E%3Ctitle%3ECopy%3C/title%3E%3Cpath d='M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z'%3E%3C/path%3E%3C/svg%3E\");--success-icon: url(\"data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 512 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg'%3E%3Ctitle%3ECopied%3C/title%3E%3Cpath d='M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z'%3E%3C/path%3E%3C/svg%3E\");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {background-color: transparent;border: none;right: 1px;padding: 0;width: 16px;height: 16px;display: flex;margin-top: -20px;margin-right: 8px;position: absolute;backdrop-filter: blur(3px);\u0026 span {width: 100%;aspect-ratio: 1 / 1;}\u0026 .ready {background-image: var(--copy-icon);}\u0026 .success {display: none; background-image: var(--success-icon);}}.Code_codeSnippet__ayQ3y button.rehype-pretty-copy {margin-top: -10px;}\u0026.rehype-pretty-copied {\u0026 .success {display: block;} \u0026 .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;\u0026 .ready { display: none; }\u0026 .success { display: block; }}\u003c/style\u003e\u003c/code\u003e\u003c/pre\u003e"},"natural_programming_compile_time_code_generation":{"frontmatter":{"title":"Natural Programming: Compile-time Code Generation","description":"Bring natural language into your compilation process and generate code based on a prompt at compile-time. Just like having a Copilot baked into your build process.\n\n- **Compile-time data generation** – Use `const natural` expressions to generate structured, realistic, and type-safe data during compilation. Ideal for generating meaningful test data.\n\n- **Compile-time function generation** – Annotate external function bodies with `@natural:code` and let the compiler generate the implementations based on natural language prompts.","url":"","image":""},"code":""},"natural_programming_compile_time_code_generation_code":{"frontmatter":{"title":"","description":"","url":"","image":""},"code":"\u003cpre class=\"shiki github-light\" style=\"background-color:#fff;color:#24292e\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cbutton type=\"button\" title=\"Copy\" aria-label=\"Copy\" data=\"import ballerina/http;\n\npublic type Product record {|\n    string id;\n    decimal price;\n|};\n\nfinal Product[] productCatalog = [\n    {id: \u0026#x22;PROD001\u0026#x22;, price: 999.99},\n    {id: \u0026#x22;PROD002\u0026#x22;, price: 699.99},\n    {id: \u0026#x22;PROD003\u0026#x22;, price: 29.99},\n    {id: \u0026#x22;PROD004\u0026#x22;, price: 19.99},\n    {id: \u0026#x22;PROD005\u0026#x22;, price: 49.99}\n];\n\nfunction filterProductsAbovePrice(Product[] products, decimal priceThreshold) returns Product[] = @natural:code {\n    prompt: \u0026#x22;Filter products that have a price greater than the given price threshold.\u0026#x22;\n} external;\n\nservice / on new http:Listener(8080) {\n    resource function get products/filter(decimal minPrice) returns Product[]|http:BadRequest {\n        return filterProductsAbovePrice(productCatalog, minPrice);\n    }\n}\" class=\"rehype-pretty-copy\" onclick=\"navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(\u0026#x27;rehype-pretty-copied\u0026#x27;);this.setAttribute(\u0026#x27;title\u0026#x27;, \u0026#x27;Copied\u0026#x27;);this.setAttribute(\u0026#x27;aria-label\u0026#x27;, \u0026#x27;Copied\u0026#x27;);window.setTimeout(() =\u003e {this.classList.remove(\u0026#x27;rehype-pretty-copied\u0026#x27;);this.setAttribute(\u0026#x27;title\u0026#x27;, \u0026#x27;Copy\u0026#x27;);this.setAttribute(\u0026#x27;aria-label\u0026#x27;, \u0026#x27;Copy\u0026#x27;);}, 3000);\"\u003e\u003cspan class=\"ready\"\u003e\u003c/span\u003e\u003cspan class=\"success\"\u003e\u003c/span\u003e\u003c/button\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003eimport\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e ballerina/http;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003epublic\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e type\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003e Product\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e record\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e|\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#005CC5\"\u003e    string\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e id;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#005CC5\"\u003e    decimal\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e price;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e|\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e};\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003efinal\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e Product[] productCatalog \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e [\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    {id\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e \"PROD001\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e, price\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e 999.99\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e},\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    {id\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e \"PROD002\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e, price\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e 699.99\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e},\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    {id\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e \"PROD003\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e, price\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e 29.99\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e},\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    {id\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e \"PROD004\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e, price\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e 19.99\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e},\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    {id\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e \"PROD005\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e, price\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e 49.99\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e];\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003efunction\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003e filterProductsAbovePrice\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003eProduct\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e[] \u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003eproducts\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003edecimal\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003e priceThreshold\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e) \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003ereturns\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e Product[] \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e @\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003enatural\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003ecode\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    prompt\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e \"Filter products that have a price greater than the given price threshold.\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e} \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003eexternal\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003eservice\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e / \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003eon\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e http:Listener(\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e8080\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e    resource\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e function\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003e get\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003e products\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e/filter(\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003edecimal\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003e minPrice\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e) \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003ereturns\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e Product[]\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e|\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003ehttp\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eBadRequest {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e        return\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003e filterProductsAbovePrice\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003eproductCatalog\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003eminPrice\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cstyle\u003e:root {--copy-icon: url(\"data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 448 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg' style='float: right;'%3E%3Ctitle%3ECopy%3C/title%3E%3Cpath d='M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z'%3E%3C/path%3E%3C/svg%3E\");--success-icon: url(\"data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 512 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg'%3E%3Ctitle%3ECopied%3C/title%3E%3Cpath d='M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z'%3E%3C/path%3E%3C/svg%3E\");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {background-color: transparent;border: none;right: 1px;padding: 0;width: 16px;height: 16px;display: flex;margin-top: -20px;margin-right: 8px;position: absolute;backdrop-filter: blur(3px);\u0026 span {width: 100%;aspect-ratio: 1 / 1;}\u0026 .ready {background-image: var(--copy-icon);}\u0026 .success {display: none; background-image: var(--success-icon);}}.Code_codeSnippet__ayQ3y button.rehype-pretty-copy {margin-top: -10px;}\u0026.rehype-pretty-copied {\u0026 .success {display: block;} \u0026 .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;\u0026 .ready { display: none; }\u0026 .success { display: block; }}\u003c/style\u003e\u003c/code\u003e\u003c/pre\u003e"},"natural_programming_const_compile_time_code_generation_code":{"frontmatter":{"title":"","description":"","url":"","image":""},"code":"\u003cpre class=\"shiki github-light\" style=\"background-color:#fff;color:#24292e\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cbutton type=\"button\" title=\"Copy\" aria-label=\"Copy\" data=\"import ballerina/test;\n\nfunction getTestProducts() returns Product[] =\u003e\n    const natural {\n        Generate a list of products with:\n        - id: random ID that starts with \u0026#x22;PROD\u0026#x22;. E.g., \u0026#x22;PROD001\u0026#x22;\n        - price: random decimal between 10.0 and 1000.0\n    };\n\n@test:Config\nfunction testFilterProducts() returns error? {\n    Product[] testProducts = getTestProducts();\n    Product[] filteredProducts = filterProductsAbovePrice(testProducts, 100);\n    foreach Product product in testProducts {\n        int? index = filteredProducts.indexOf(product);\n        if product.price \u003e 100d {\n            test:assertNotEquals(index, ());\n        } else {\n            test:assertEquals(index, ());\n        }\n    }\n}\" class=\"rehype-pretty-copy\" onclick=\"navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(\u0026#x27;rehype-pretty-copied\u0026#x27;);this.setAttribute(\u0026#x27;title\u0026#x27;, \u0026#x27;Copied\u0026#x27;);this.setAttribute(\u0026#x27;aria-label\u0026#x27;, \u0026#x27;Copied\u0026#x27;);window.setTimeout(() =\u003e {this.classList.remove(\u0026#x27;rehype-pretty-copied\u0026#x27;);this.setAttribute(\u0026#x27;title\u0026#x27;, \u0026#x27;Copy\u0026#x27;);this.setAttribute(\u0026#x27;aria-label\u0026#x27;, \u0026#x27;Copy\u0026#x27;);}, 3000);\"\u003e\u003cspan class=\"ready\"\u003e\u003c/span\u003e\u003cspan class=\"success\"\u003e\u003c/span\u003e\u003c/button\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003eimport\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e ballerina/test;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003efunction\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003e getTestProducts\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e() \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003ereturns\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e Product[] \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e    const \u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003enatural\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        Generate a list of products with\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e        -\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e id\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e random ID that starts with \u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e\"PROD\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e. E.g., \u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e\"PROD001\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e        -\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e price\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e random decimal between \u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e10.0\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e and \u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e1000.0\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    };\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e@\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003etest\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003eConfig\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003efunction\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003e testFilterProducts\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e() \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003ereturns\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e error?\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    Product[] testProducts \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003e getTestProducts\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e();\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    Product[] filteredProducts \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003e filterProductsAbovePrice\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003etestProducts\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e100\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e    foreach \u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eProduct product \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003ein\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e testProducts {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#005CC5\"\u003e        int\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e? index \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e filteredProducts.\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003eindexOf\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003eproduct\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e        if\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e product.price \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e 100\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003ed {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e            test\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003eassertNotEquals\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003eindex\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e, ());\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        } \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003eelse\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e            test\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003eassertEquals\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003eindex\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e, ());\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cstyle\u003e:root {--copy-icon: url(\"data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 448 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg' style='float: right;'%3E%3Ctitle%3ECopy%3C/title%3E%3Cpath d='M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z'%3E%3C/path%3E%3C/svg%3E\");--success-icon: url(\"data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 512 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg'%3E%3Ctitle%3ECopied%3C/title%3E%3Cpath d='M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z'%3E%3C/path%3E%3C/svg%3E\");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {background-color: transparent;border: none;right: 1px;padding: 0;width: 16px;height: 16px;display: flex;margin-top: -20px;margin-right: 8px;position: absolute;backdrop-filter: blur(3px);\u0026 span {width: 100%;aspect-ratio: 1 / 1;}\u0026 .ready {background-image: var(--copy-icon);}\u0026 .success {display: none; background-image: var(--success-icon);}}.Code_codeSnippet__ayQ3y button.rehype-pretty-copy {margin-top: -10px;}\u0026.rehype-pretty-copied {\u0026 .success {display: block;} \u0026 .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;\u0026 .ready { display: none; }\u0026 .success { display: block; }}\u003c/style\u003e\u003c/code\u003e\u003c/pre\u003e"},"natural_programming_vs_code_features":{"frontmatter":{"title":"Natural Programming: Bridge Requirements and Code","description":"Leverage Generative AI to keep requirements, code, and documentation in sync.\n\n- **Code generation** – Generate code from high-level business requirements.\n\n- **Drift detection and fixes** – Proactively identify drift between requirements, code, and documentation and use AI-powered suggestions on VS Code to address drift.\n\n- **Test generation** – Generate Ballerina tests against business requirements to enable test-driven drift detection.\n\n- **Intent preservation** – Maintain an effective summary of the prompts used for code generation to preserve user intention.","url":"","image":""},"code":""},"openai1":{"frontmatter":{"title":"","description":"","url":"","image":""},"code":"\u003cpre class=\"shiki github-light\" style=\"background-color:#fff;color:#24292e\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cbutton type=\"button\" title=\"Copy\" aria-label=\"Copy\" data=\"public function main(string filePath) returns error? {\n    chat:Client openAIChat = check new ({auth: {token: openAIToken}});\n\n    string fileContent = check io:fileReadString(filePath);\n    io:println(string \u0026#x60;Content: ${fileContent}\u0026#x60;);\n\n    chat:CreateChatCompletionRequest request = {\n        model: \u0026#x22;gpt-4o-mini\u0026#x22;,\n        messages: [\n            {\n                \u0026#x22;role\u0026#x22;: \u0026#x22;user\u0026#x22;,\n                \u0026#x22;content\u0026#x22;: string \u0026#x60;Summarize:\\n\u0026#x22; ${fileContent}\u0026#x60;\n            }\n        ],\n        max_tokens: 2000\n    };\n\n    chat:CreateChatCompletionResponse response = check openAIChat-\u003e/chat/completions.post(request);\n    string? summary = response.choices[0].message.content;\n\n    if summary is () {\n        return error(\u0026#x22;Failed to summarize the given text.\u0026#x22;);\n    }\n    io:println(string \u0026#x60;Summary: ${summary}\u0026#x60;);\n}\" class=\"rehype-pretty-copy\" onclick=\"navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(\u0026#x27;rehype-pretty-copied\u0026#x27;);this.setAttribute(\u0026#x27;title\u0026#x27;, \u0026#x27;Copied\u0026#x27;);this.setAttribute(\u0026#x27;aria-label\u0026#x27;, \u0026#x27;Copied\u0026#x27;);window.setTimeout(() =\u003e {this.classList.remove(\u0026#x27;rehype-pretty-copied\u0026#x27;);this.setAttribute(\u0026#x27;title\u0026#x27;, \u0026#x27;Copy\u0026#x27;);this.setAttribute(\u0026#x27;aria-label\u0026#x27;, \u0026#x27;Copy\u0026#x27;);}, 3000);\"\u003e\u003cspan class=\"ready\"\u003e\u003c/span\u003e\u003cspan class=\"success\"\u003e\u003c/span\u003e\u003c/button\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003epublic\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e function\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003e main\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003estring\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003e filePath\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e) \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003ereturns\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e error?\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    chat\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eClient openAIChat \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e ({auth\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {token: openAIToken}});\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#005CC5\"\u003e    string\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e fileContent \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e io\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003efileReadString\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003efilePath\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    io\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003estring\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e `Content: ${\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003efileContent\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e}`\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    chat\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eCreateChatCompletionRequest request \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        model\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e \"gpt-4o-mini\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        messages\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e [\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e            {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#032F62\"\u003e                \"role\"\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e \"user\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#032F62\"\u003e                \"content\"\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e string \u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e`Summarize:\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e\\n\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e\" ${\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003efileContent\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e}`\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e            }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        ],\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        max_tokens\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e 2000\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    };\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    chat\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eCreateChatCompletionResponse response \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e openAIChat\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e-\u003e/\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003echat\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e/\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003ecompletions.\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003epost\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#005CC5\"\u003e    string\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e? summary \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e response.choices[\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e0\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e].message.content;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e summary \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003eis\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e () {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e        return\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e error\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e\"Failed to summarize the given text.\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    io\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003estring\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e `Summary: ${\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003esummary\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e}`\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cstyle\u003e:root {--copy-icon: url(\"data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 448 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg' style='float: right;'%3E%3Ctitle%3ECopy%3C/title%3E%3Cpath d='M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z'%3E%3C/path%3E%3C/svg%3E\");--success-icon: url(\"data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 512 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg'%3E%3Ctitle%3ECopied%3C/title%3E%3Cpath d='M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z'%3E%3C/path%3E%3C/svg%3E\");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {background-color: transparent;border: none;right: 1px;padding: 0;width: 16px;height: 16px;display: flex;margin-top: -20px;margin-right: 8px;position: absolute;backdrop-filter: blur(3px);\u0026 span {width: 100%;aspect-ratio: 1 / 1;}\u0026 .ready {background-image: var(--copy-icon);}\u0026 .success {display: none; background-image: var(--success-icon);}}.Code_codeSnippet__ayQ3y button.rehype-pretty-copy {margin-top: -10px;}\u0026.rehype-pretty-copied {\u0026 .success {display: block;} \u0026 .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;\u0026 .ready { display: none; }\u0026 .success { display: block; }}\u003c/style\u003e\u003c/code\u003e\u003c/pre\u003e"},"openai2":{"frontmatter":{"title":"","description":"","url":"","image":""},"code":"\u003cpre class=\"shiki github-light\" style=\"background-color:#fff;color:#24292e\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cbutton type=\"button\" title=\"Copy\" aria-label=\"Copy\" data=\"public function main() returns error? {\n    ParamterSchema param = {\n        \u0026#x27;type: \u0026#x22;object\u0026#x22;,\n        properties: {\n            \u0026#x22;location\u0026#x22;: {\n                \u0026#x27;type: \u0026#x22;string\u0026#x22;,\n                description: \u0026#x22;City and country e.g. Bogotá, Colombia\u0026#x22;\n            }\n        },\n        required: [\u0026#x22;location\u0026#x22;],\n        additionalProperties: false\n    };\n    chat:CreateChatCompletionRequest request = {\n        model: \u0026#x22;gpt-4o-mini\u0026#x22;,\n        messages: [\n            {\n                role: \u0026#x22;user\u0026#x22;,\n                content: string \u0026#x60;What is the weather like in Paris today?\u0026#x60;\n            }\n        ],\n        tools: [\n        {\n            \u0026#x27;type: \u0026#x22;function\u0026#x22;,\n            \u0026#x27;function: {\n                name: \u0026#x22;get_weather\u0026#x22;,\n                description: \u0026#x22;Get current temperature for a given location.\u0026#x22;,\n                parameters: param,\n                strict: true\n            }\n        }\n        ]\n    };\n    chat:CreateChatCompletionResponse completionRes = check openAIChat-\u003e/chat/completions.post(request);\n\n    chat:ChatCompletionMessageToolCalls toolCalls = check completionRes.choices[0].message.tool_calls.ensureType();\n    io:println(\u0026#x22;Tool Calls: \u0026#x22;, toolCalls);\n}\" class=\"rehype-pretty-copy\" onclick=\"navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(\u0026#x27;rehype-pretty-copied\u0026#x27;);this.setAttribute(\u0026#x27;title\u0026#x27;, \u0026#x27;Copied\u0026#x27;);this.setAttribute(\u0026#x27;aria-label\u0026#x27;, \u0026#x27;Copied\u0026#x27;);window.setTimeout(() =\u003e {this.classList.remove(\u0026#x27;rehype-pretty-copied\u0026#x27;);this.setAttribute(\u0026#x27;title\u0026#x27;, \u0026#x27;Copy\u0026#x27;);this.setAttribute(\u0026#x27;aria-label\u0026#x27;, \u0026#x27;Copy\u0026#x27;);}, 3000);\"\u003e\u003cspan class=\"ready\"\u003e\u003c/span\u003e\u003cspan class=\"success\"\u003e\u003c/span\u003e\u003c/button\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003epublic\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e function\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003e main\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e() \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003ereturns\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e error?\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    ParamterSchema param \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        'type\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e \"object\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        properties\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#032F62\"\u003e            \"location\"\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e                'type\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e \"string\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e                description\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e \"City and country e.g. Bogotá, Colombia\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e            }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        },\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        required\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e [\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e\"location\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e],\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        additionalProperties\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e false\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    };\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    chat\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eCreateChatCompletionRequest request \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        model\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e \"gpt-4o-mini\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        messages\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e [\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e            {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#6F42C1\"\u003e                role\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e\"user\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#6F42C1\"\u003e                content\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003estring\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e `What is the weather like in Paris today?`\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e            }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        ],\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        tools\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e [\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e            'type\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e \"function\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e            'function\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#6F42C1\"\u003e                name\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e\"get_weather\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#6F42C1\"\u003e                description\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e\"Get current temperature for a given location.\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#6F42C1\"\u003e                parameters\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e: param,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#6F42C1\"\u003e                strict\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003etrue\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e            }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        ]\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    };\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    chat\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eCreateChatCompletionResponse completionRes \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e openAIChat\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e-\u003e/\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003echat\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e/\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003ecompletions.\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003epost\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    chat\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eChatCompletionMessageToolCalls toolCalls \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e completionRes.choices[\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e0\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e].message.tool_calls.\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003eensureType\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e();\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    io\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e\"Tool Calls: \"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003etoolCalls\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cstyle\u003e:root {--copy-icon: url(\"data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 448 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg' style='float: right;'%3E%3Ctitle%3ECopy%3C/title%3E%3Cpath d='M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z'%3E%3C/path%3E%3C/svg%3E\");--success-icon: url(\"data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 512 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg'%3E%3Ctitle%3ECopied%3C/title%3E%3Cpath d='M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z'%3E%3C/path%3E%3C/svg%3E\");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {background-color: transparent;border: none;right: 1px;padding: 0;width: 16px;height: 16px;display: flex;margin-top: -20px;margin-right: 8px;position: absolute;backdrop-filter: blur(3px);\u0026 span {width: 100%;aspect-ratio: 1 / 1;}\u0026 .ready {background-image: var(--copy-icon);}\u0026 .success {display: none; background-image: var(--success-icon);}}.Code_codeSnippet__ayQ3y button.rehype-pretty-copy {margin-top: -10px;}\u0026.rehype-pretty-copied {\u0026 .success {display: block;} \u0026 .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;\u0026 .ready { display: none; }\u0026 .success { display: block; }}\u003c/style\u003e\u003c/code\u003e\u003c/pre\u003e"},"openai3":{"frontmatter":{"title":"","description":"","url":"","image":""},"code":"\u003cpre class=\"shiki github-light\" style=\"background-color:#fff;color:#24292e\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cbutton type=\"button\" title=\"Copy\" aria-label=\"Copy\" data=\"public function main() returns error? {\n    // Get information on upcoming and recently released movies from TMDB\n    final themoviedb:Client moviedb = check new themoviedb:Client({apiKey: moviedbApiKey});\n    themoviedb:InlineResponse2001 upcomingMovies = check moviedb-\u003egetUpcomingMovies();\n\n    // Generate a creative tweet using Azure OpenAI   \n    string prompt = \u0026#x22;Instruction: Generate a creative and short tweet below 250 characters about the following \u0026#x22; +\n    \u0026#x22;upcoming and recently released movies. Movies: \u0026#x22;;\n    foreach int i in 1 ... NO_OF_MOVIES {\n        prompt += string \u0026#x60;${i}. ${upcomingMovies.results[i - 1].title} \u0026#x60;;\n    }\n\n    final twitter:Client twitter = check new ({\n        auth: {token: token}\n    });\n\n    final chat:Client chatClient = check new (config = {auth: {apiKey: openAIToken}}, serviceUrl = serviceUrl);\n\n    chat:CreateChatCompletionRequest chatBody = {\n        messages: [{role: \u0026#x22;user\u0026#x22;, \u0026#x22;content\u0026#x22;: prompt}]\n    };\n\n    chat:CreateChatCompletionResponse chatResult = check chatClient-\u003e/deployments/[deploymentId]/chat/completions.post(\u0026#x22;2023-12-01-preview\u0026#x22;, chatBody);\n    record {|chat:ChatCompletionResponseMessage message?; chat:ContentFilterChoiceResults content_filter_results?; int index?; string finish_reason?; anydata...;|}[] choices = check chatResult.choices.ensureType();\n    string? tweetContent = choices[0].message?.content;\n\n    if tweetContent is () {\n        return error(\u0026#x22;Failed to generate a tweet on upcoming and recently released movies.\u0026#x22;);\n    }\n\n    if tweetContent.length() \u003e MAX_TWEET_LENGTH {\n        return error(\u0026#x22;The generated tweet exceeded the maximum supported character length.\u0026#x22;);\n    }\n\n    // Tweet it out!\n    twitter:TweetCreateResponse tweet = check twitter-\u003e/tweets.post(payload = {text: tweetContent});\n    io:println(\u0026#x22;Tweet: \u0026#x22;, tweet);\n}\" class=\"rehype-pretty-copy\" onclick=\"navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(\u0026#x27;rehype-pretty-copied\u0026#x27;);this.setAttribute(\u0026#x27;title\u0026#x27;, \u0026#x27;Copied\u0026#x27;);this.setAttribute(\u0026#x27;aria-label\u0026#x27;, \u0026#x27;Copied\u0026#x27;);window.setTimeout(() =\u003e {this.classList.remove(\u0026#x27;rehype-pretty-copied\u0026#x27;);this.setAttribute(\u0026#x27;title\u0026#x27;, \u0026#x27;Copy\u0026#x27;);this.setAttribute(\u0026#x27;aria-label\u0026#x27;, \u0026#x27;Copy\u0026#x27;);}, 3000);\"\u003e\u003cspan class=\"ready\"\u003e\u003c/span\u003e\u003cspan class=\"success\"\u003e\u003c/span\u003e\u003c/button\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003epublic\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e function\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003e main\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e() \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003ereturns\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e error?\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#6A737D\"\u003e    // Get information on upcoming and recently released movies from TMDB\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e    final\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e themoviedb\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eClient moviedb \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e themoviedb\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003eClient\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e({apiKey\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e moviedbApiKey});\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    themoviedb\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eInlineResponse2001 upcomingMovies \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e moviedb\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003egetUpcomingMovies\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e();\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#6A737D\"\u003e    // Generate a creative tweet using Azure OpenAI   \u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#005CC5\"\u003e    string\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e prompt \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e \"Instruction: Generate a creative and short tweet below 250 characters about the following \"\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e +\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#032F62\"\u003e    \"upcoming and recently released movies. Movies: \"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e    foreach \u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003eint\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e i \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003ein\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e 1\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e ...\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e NO_OF_MOVIES {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        prompt \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e+=\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e string\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e `${\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003ei\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e}. ${\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eupcomingMovies\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eresults\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e[\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003ei\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e -\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e 1\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e].\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003etitle\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e} `\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e    final\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e twitter\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eClient twitter \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e ({\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        auth\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {token: token}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    });\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e    final\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e chat\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eClient chatClient \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003econfig\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {auth\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {apiKey: openAIToken}}, \u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003eserviceUrl\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e serviceUrl);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    chat\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eCreateChatCompletionRequest chatBody \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        messages\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e [{\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003erole\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e: \u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e\"user\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e\"content\"\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e prompt}]\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    };\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    chat\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eCreateChatCompletionResponse chatResult \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e chatClient\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e-\u003e/\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003edeployments\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e/\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e[deploymentId]\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e/\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003echat\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e/\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003ecompletions.\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003epost\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e\"2023-12-01-preview\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003echatBody\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e    record\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e|\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003echat\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eChatCompletionResponseMessage message?; chat\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eContentFilterChoiceResults content_filter_results?; \u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003eint\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e index?; \u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003estring\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e finish_reason?; \u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003eanydata\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e...\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e;\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e|\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e}[] choices \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e chatResult.choices.\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003eensureType\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e();\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#005CC5\"\u003e    string\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e? tweetContent \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e choices[\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e0\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e].message?.content;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e tweetContent \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003eis\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e () {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e        return\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e error\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e\"Failed to generate a tweet on upcoming and recently released movies.\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e tweetContent.\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003elength\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e() \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e MAX_TWEET_LENGTH {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e        return\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e error\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e\"The generated tweet exceeded the maximum supported character length.\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#6A737D\"\u003e    // Tweet it out!\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    twitter\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eTweetCreateResponse tweet \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e twitter\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e-\u003e/\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003etweets.\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003epost\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003epayload\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {text\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e tweetContent});\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    io\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e\"Tweet: \"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003etweet\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cstyle\u003e:root {--copy-icon: url(\"data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 448 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg' style='float: right;'%3E%3Ctitle%3ECopy%3C/title%3E%3Cpath d='M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z'%3E%3C/path%3E%3C/svg%3E\");--success-icon: url(\"data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 512 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg'%3E%3Ctitle%3ECopied%3C/title%3E%3Cpath d='M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z'%3E%3C/path%3E%3C/svg%3E\");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {background-color: transparent;border: none;right: 1px;padding: 0;width: 16px;height: 16px;display: flex;margin-top: -20px;margin-right: 8px;position: absolute;backdrop-filter: blur(3px);\u0026 span {width: 100%;aspect-ratio: 1 / 1;}\u0026 .ready {background-image: var(--copy-icon);}\u0026 .success {display: none; background-image: var(--success-icon);}}.Code_codeSnippet__ayQ3y button.rehype-pretty-copy {margin-top: -10px;}\u0026.rehype-pretty-copied {\u0026 .success {display: block;} \u0026 .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;\u0026 .ready { display: none; }\u0026 .success { display: block; }}\u003c/style\u003e\u003c/code\u003e\u003c/pre\u003e"},"simplify-vector-database-management":{"frontmatter":{"title":"Simplify vector database management","description":"Ballerina comes with built-in connectors for vector databases, which are a common building block in AI use cases that support the storage and retrieval of high-dimensional vectors.","url":"https://github.com/ballerina-guides/ai-samples/blob/main/answer_questions_using_vector_search_weaviate/main.bal","image":""},"code":"\u003cpre class=\"shiki github-light\" style=\"background-color:#fff;color:#24292e\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cbutton type=\"button\" title=\"Copy\" aria-label=\"Copy\" data=\"service / on new http:Listener(8080) {\n    resource function get answer(string question) returns weaviate:JsonObject|error? {\n        // Retrieve OpenAI embeddings for the input question\n        embeddings:CreateEmbeddingResponse embeddingResponse = check openai-\u003e/embeddings.post({\n                model: MODEL,\n                input: question\n            }\n        );\n        float[] vector = embeddingResponse.data[0].embedding;\n\n        // Querying Weaviate for the closest vector using GraphQL\n        string graphQLQuery = string \u0026#x60;{\n                                    Get {\n                                        ${CLASS_NAME} (\n                                        nearVector: {\n                                            vector: ${vector.toString()}\n                                            }\n                                            limit: 1\n                                        ){\n                                        question\n                                        answer\n                                        _additional {\n                                            certainty,\n                                            id\n                                            }\n                                        }\n                                    }\n                                }\u0026#x60;;\n\n        weaviate:GraphQLResponse results = check weaviate-\u003e/graphql.post({query: graphQLQuery});\n\n        return results.data;\n    }\n}\" class=\"rehype-pretty-copy\" onclick=\"navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(\u0026#x27;rehype-pretty-copied\u0026#x27;);this.setAttribute(\u0026#x27;title\u0026#x27;, \u0026#x27;Copied\u0026#x27;);this.setAttribute(\u0026#x27;aria-label\u0026#x27;, \u0026#x27;Copied\u0026#x27;);window.setTimeout(() =\u003e {this.classList.remove(\u0026#x27;rehype-pretty-copied\u0026#x27;);this.setAttribute(\u0026#x27;title\u0026#x27;, \u0026#x27;Copy\u0026#x27;);this.setAttribute(\u0026#x27;aria-label\u0026#x27;, \u0026#x27;Copy\u0026#x27;);}, 3000);\"\u003e\u003cspan class=\"ready\"\u003e\u003c/span\u003e\u003cspan class=\"success\"\u003e\u003c/span\u003e\u003c/button\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003eservice\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e / \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003eon\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e http:Listener(\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e8080\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e    resource\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e function\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003e get\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003e answer\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003estring\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003e question\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e) \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003ereturns\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e weaviate\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eJsonObject\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e|error\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e? {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#6A737D\"\u003e        // Retrieve OpenAI embeddings for the input question\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        embeddings\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eCreateEmbeddingResponse embeddingResponse \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e openai\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e-\u003e/\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eembeddings.\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003epost\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e({\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e                model\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e MODEL,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e                input\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e question\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e            }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        );\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#005CC5\"\u003e        float\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e[] vector \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e embeddingResponse.data[\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e0\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e].embedding;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#6A737D\"\u003e        // Querying Weaviate for the closest vector using GraphQL\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#005CC5\"\u003e        string\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e graphQLQuery \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e string\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e `{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#032F62\"\u003e                                    Get {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#032F62\"\u003e                                        ${\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eCLASS_NAME\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e} (\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#032F62\"\u003e                                        nearVector: {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#032F62\"\u003e                                            vector: ${\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003evector\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003etoString\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#032F62\"\u003e                                            }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#032F62\"\u003e                                            limit: 1\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#032F62\"\u003e                                        ){\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#032F62\"\u003e                                        question\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#032F62\"\u003e                                        answer\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#032F62\"\u003e                                        _additional {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#032F62\"\u003e                                            certainty,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#032F62\"\u003e                                            id\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#032F62\"\u003e                                            }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#032F62\"\u003e                                        }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#032F62\"\u003e                                    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#032F62\"\u003e                                }`\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        weaviate\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eGraphQLResponse results \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e weaviate\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e-\u003e/\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003egraphql.\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003epost\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e({query\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e graphQLQuery});\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e        return\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e results.data;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cstyle\u003e:root {--copy-icon: url(\"data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 448 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg' style='float: right;'%3E%3Ctitle%3ECopy%3C/title%3E%3Cpath d='M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z'%3E%3C/path%3E%3C/svg%3E\");--success-icon: url(\"data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 512 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg'%3E%3Ctitle%3ECopied%3C/title%3E%3Cpath d='M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z'%3E%3C/path%3E%3C/svg%3E\");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {background-color: transparent;border: none;right: 1px;padding: 0;width: 16px;height: 16px;display: flex;margin-top: -20px;margin-right: 8px;position: absolute;backdrop-filter: blur(3px);\u0026 span {width: 100%;aspect-ratio: 1 / 1;}\u0026 .ready {background-image: var(--copy-icon);}\u0026 .success {display: none; background-image: var(--success-icon);}}.Code_codeSnippet__ayQ3y button.rehype-pretty-copy {margin-top: -10px;}\u0026.rehype-pretty-copied {\u0026 .success {display: block;} \u0026 .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;\u0026 .ready { display: none; }\u0026 .success { display: block; }}\u003c/style\u003e\u003c/code\u003e\u003c/pre\u003e"},"why-is-ballerina-the-way-you-should-write-ai-applications":{"frontmatter":{"title":"Why is Ballerina the way you should write AI applications?","description":"Python remains the go-to for machine learning, data science, and analytics—but integrating AI into modern business applications is a different challenge. It’s now about invoking LLMs, prompt engineering, and embedding AI into workflows. Ballerina, a cloud-native language built for integration, offers powerful abstractions to connect with LLMs and seamlessly weave AI into your applications to deliver real value.","url":"https://github.com/xlight05/ai-samples/blob/usecase-samples/hr_agent_rag_app/main.bal","image":""},"code":"\u003cpre class=\"shiki github-light\" style=\"background-color:#fff;color:#24292e\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cbutton type=\"button\" title=\"Copy\" aria-label=\"Copy\" data=\"service /agent on hrAgent {\n    resource function post chat(@http:Payload agent:ChatReqMessage request) returns agent:ChatRespMessage|error {\n        string query = request.message;\n        float[] embeddings = check getEmbeddings(query);\n        string retrievedChunks = check retrieveChunksFromPinecone(embeddings);\n        string hRAssistantResponse = check getHRAssistantResponse(query, retrievedChunks);\n        return {message: hRAssistantResponse};\n    }\n}\" class=\"rehype-pretty-copy\" onclick=\"navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(\u0026#x27;rehype-pretty-copied\u0026#x27;);this.setAttribute(\u0026#x27;title\u0026#x27;, \u0026#x27;Copied\u0026#x27;);this.setAttribute(\u0026#x27;aria-label\u0026#x27;, \u0026#x27;Copied\u0026#x27;);window.setTimeout(() =\u003e {this.classList.remove(\u0026#x27;rehype-pretty-copied\u0026#x27;);this.setAttribute(\u0026#x27;title\u0026#x27;, \u0026#x27;Copy\u0026#x27;);this.setAttribute(\u0026#x27;aria-label\u0026#x27;, \u0026#x27;Copy\u0026#x27;);}, 3000);\"\u003e\u003cspan class=\"ready\"\u003e\u003c/span\u003e\u003cspan class=\"success\"\u003e\u003c/span\u003e\u003c/button\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003eservice\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003e /agent\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e on\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e hrAgent {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e    resource\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e function\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003e post\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003e chat\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(@\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003ehttp\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003ePayload\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003e agent\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eChatReqMessage request) \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003ereturns\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e agent\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eChatRespMessage\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e|error\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#005CC5\"\u003e        string\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e query \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e request.message;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#005CC5\"\u003e        float\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e[] embeddings \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003e getEmbeddings\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003equery\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#005CC5\"\u003e        string\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e retrievedChunks \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003e retrieveChunksFromPinecone\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003eembeddings\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#005CC5\"\u003e        string\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e hRAssistantResponse \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003e getHRAssistantResponse\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003equery\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003eretrievedChunks\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e        return\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {message\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e hRAssistantResponse};\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cstyle\u003e:root {--copy-icon: url(\"data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 448 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg' style='float: right;'%3E%3Ctitle%3ECopy%3C/title%3E%3Cpath d='M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z'%3E%3C/path%3E%3C/svg%3E\");--success-icon: url(\"data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 512 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg'%3E%3Ctitle%3ECopied%3C/title%3E%3Cpath d='M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z'%3E%3C/path%3E%3C/svg%3E\");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {background-color: transparent;border: none;right: 1px;padding: 0;width: 16px;height: 16px;display: flex;margin-top: -20px;margin-right: 8px;position: absolute;backdrop-filter: blur(3px);\u0026 span {width: 100%;aspect-ratio: 1 / 1;}\u0026 .ready {background-image: var(--copy-icon);}\u0026 .success {display: none; background-image: var(--success-icon);}}.Code_codeSnippet__ayQ3y button.rehype-pretty-copy {margin-top: -10px;}\u0026.rehype-pretty-copied {\u0026 .success {display: block;} \u0026 .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;\u0026 .ready { display: none; }\u0026 .success { display: block; }}\u003c/style\u003e\u003c/code\u003e\u003c/pre\u003e"},"write-robust-api-powered-ai-applications":{"frontmatter":{"title":"Write robust API-powered AI applications","description":"Take on the unpredictable world of distributed systems with the built-in language features and Ballerina library features. Writing robust API-powered AI applications is now a breeze for every developer, no matter the challenges!","url":"https://github.com/ballerina-guides/ai-samples/blob/main/correct_grammar_and_spelling_in_text_using_openai/main.bal","image":""},"code":"\u003cpre class=\"shiki github-light\" style=\"background-color:#fff;color:#24292e\" tabindex=\"0\"\u003e\u003ccode\u003e\u003cbutton type=\"button\" title=\"Copy\" aria-label=\"Copy\" data=\"public function main(string filePath) returns error? {\n    http:RetryConfig retryConfig = {\n        interval: 5, // Initial retry interval in seconds.\n        count: 3, // Number of retry attempts before stopping.\n        backOffFactor: 2.0 // Multiplier of the retry interval.\n    };\n    final chat:Client openAIChat = check new ({auth: {token: openAIToken}, retryConfig});\n\n    chat:CreateChatCompletionRequest request = {\n        model: \u0026#x22;gpt-4o-mini\u0026#x22;,\n        messages: [\n            {\n                \u0026#x22;role\u0026#x22;: \u0026#x22;user\u0026#x22;,\n                \u0026#x22;content\u0026#x22;: string \u0026#x60;Fix grammar and spelling mistakes of the content ${check\n                io:fileReadString(filePath)}\u0026#x60;\n            }\n        ]\n    };\n\n    chat:CreateChatCompletionResponse response = check openAIChat-\u003e/chat/completions.post(request);\n    string text = check response.choices[0].message.content.ensureType();\n    io:println(string \u0026#x60;Corrected: ${text}\u0026#x60;);\n}\" class=\"rehype-pretty-copy\" onclick=\"navigator.clipboard.writeText(this.attributes.data.value);this.classList.add(\u0026#x27;rehype-pretty-copied\u0026#x27;);this.setAttribute(\u0026#x27;title\u0026#x27;, \u0026#x27;Copied\u0026#x27;);this.setAttribute(\u0026#x27;aria-label\u0026#x27;, \u0026#x27;Copied\u0026#x27;);window.setTimeout(() =\u003e {this.classList.remove(\u0026#x27;rehype-pretty-copied\u0026#x27;);this.setAttribute(\u0026#x27;title\u0026#x27;, \u0026#x27;Copy\u0026#x27;);this.setAttribute(\u0026#x27;aria-label\u0026#x27;, \u0026#x27;Copy\u0026#x27;);}, 3000);\"\u003e\u003cspan class=\"ready\"\u003e\u003c/span\u003e\u003cspan class=\"success\"\u003e\u003c/span\u003e\u003c/button\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003epublic\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e function\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003e main\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003estring\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003e filePath\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e) \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003ereturns\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e error?\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    http\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eRetryConfig retryConfig \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        interval\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e 5\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#6A737D\"\u003e// Initial retry interval in seconds.\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        count\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e 3\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e, \u003c/span\u003e\u003cspan style=\"color:#6A737D\"\u003e// Number of retry attempts before stopping.\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        backOffFactor\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e 2.0\u003c/span\u003e\u003cspan style=\"color:#6A737D\"\u003e // Multiplier of the retry interval.\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    };\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#D73A49\"\u003e    final\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e chat\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eClient openAIChat \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e ({auth\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {token: openAIToken}, \u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003eretryConfig\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e});\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    chat\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eCreateChatCompletionRequest request \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        model\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e \"gpt-4o-mini\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        messages\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e [\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e            {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#032F62\"\u003e                \"role\"\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e \"user\"\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#032F62\"\u003e                \"content\"\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e string \u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e`Fix grammar and spelling mistakes of the content ${\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003echeck\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e                io\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003efileReadString\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003efilePath\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e}`\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e            }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e        ]\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    };\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    chat\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003eCreateChatCompletionResponse response \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e openAIChat\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e-\u003e/\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003echat\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e/\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003ecompletions.\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003epost\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#E36209\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#005CC5\"\u003e    string\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e text \u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e check\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e response.choices[\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003e0\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e].message.content.\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003eensureType\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e();\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e    io\u003c/span\u003e\u003cspan style=\"color:#D73A49\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#6F42C1\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#005CC5\"\u003estring\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e `Corrected: ${\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003etext\u003c/span\u003e\u003cspan style=\"color:#032F62\"\u003e}`\u003c/span\u003e\u003cspan style=\"color:#24292E\"\u003e);\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#24292E\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cstyle\u003e:root {--copy-icon: url(\"data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 448 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg' style='float: right;'%3E%3Ctitle%3ECopy%3C/title%3E%3Cpath d='M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z'%3E%3C/path%3E%3C/svg%3E\");--success-icon: url(\"data:image/svg+xml,%3Csvg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 512 512' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg'%3E%3Ctitle%3ECopied%3C/title%3E%3Cpath d='M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z'%3E%3C/path%3E%3C/svg%3E\");}pre:has(code) {position: relative;}pre button.rehype-pretty-copy {background-color: transparent;border: none;right: 1px;padding: 0;width: 16px;height: 16px;display: flex;margin-top: -20px;margin-right: 8px;position: absolute;backdrop-filter: blur(3px);\u0026 span {width: 100%;aspect-ratio: 1 / 1;}\u0026 .ready {background-image: var(--copy-icon);}\u0026 .success {display: none; background-image: var(--success-icon);}}.Code_codeSnippet__ayQ3y button.rehype-pretty-copy {margin-top: -10px;}\u0026.rehype-pretty-copied {\u0026 .success {display: block;} \u0026 .ready {display: none;}}pre button.rehype-pretty-copy.rehype-pretty-copied {opacity: 1;\u0026 .ready { display: none; }\u0026 .success { display: block; }}\u003c/style\u003e\u003c/code\u003e\u003c/pre\u003e"}}},"__N_SSG":true},"page":"/use-cases/ai","query":{},"buildId":"MwLxl6yuzvomC2E2bUaRF","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>